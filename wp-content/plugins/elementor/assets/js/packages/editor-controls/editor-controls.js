/*! For license information please see editor-controls.js.LICENSE.txt */
!function(){var e={"./packages/node_modules/@tiptap/core/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{CommandManager:function(){return g},Editor:function(){return K},Extendable:function(){return w},Extension:function(){return R},Fragment:function(){return Fragment6},InputRule:function(){return x},MappablePosition:function(){return k},Mark:function(){return E},MarkView:function(){return Y},Node:function(){return X},NodePos:function(){return q},NodeView:function(){return Z},PasteRule:function(){return C},ResizableNodeView:function(){return W},ResizableNodeview:function(){return G},Tracker:function(){return Q},callOrReturn:function(){return callOrReturn},canInsertNode:function(){return canInsertNode},combineTransactionSteps:function(){return combineTransactionSteps},commands:function(){return b},createAtomBlockMarkdownSpec:function(){return createAtomBlockMarkdownSpec},createBlockMarkdownSpec:function(){return createBlockMarkdownSpec},createChainableState:function(){return createChainableState},createDocument:function(){return createDocument},createElement:function(){return h},createInlineMarkdownSpec:function(){return createInlineMarkdownSpec},createMappablePosition:function(){return createMappablePosition},createNodeFromContent:function(){return createNodeFromContent},createStyleTag:function(){return createStyleTag},defaultBlockAt:function(){return defaultBlockAt},deleteProps:function(){return deleteProps},elementFromString:function(){return elementFromString},escapeForRegEx:function(){return escapeForRegEx},extensions:function(){return P},findChildren:function(){return findChildren},findChildrenInRange:function(){return findChildrenInRange},findDuplicates:function(){return findDuplicates},findParentNode:function(){return findParentNode},findParentNodeClosestToPos:function(){return findParentNodeClosestToPos},flattenExtensions:function(){return flattenExtensions},fromString:function(){return fromString},generateHTML:function(){return generateHTML},generateJSON:function(){return generateJSON},generateText:function(){return generateText},getAttributes:function(){return getAttributes},getAttributesFromExtensions:function(){return getAttributesFromExtensions},getChangedRanges:function(){return getChangedRanges},getDebugJSON:function(){return getDebugJSON},getExtensionField:function(){return getExtensionField},getHTMLFromFragment:function(){return getHTMLFromFragment},getMarkAttributes:function(){return getMarkAttributes},getMarkRange:function(){return getMarkRange},getMarkType:function(){return getMarkType},getMarksBetween:function(){return getMarksBetween},getNodeAtPosition:function(){return getNodeAtPosition},getNodeAttributes:function(){return getNodeAttributes},getNodeType:function(){return getNodeType},getRenderedAttributes:function(){return getRenderedAttributes},getSchema:function(){return getSchema},getSchemaByResolvedExtensions:function(){return getSchemaByResolvedExtensions},getSchemaTypeByName:function(){return getSchemaTypeByName},getSchemaTypeNameByName:function(){return getSchemaTypeNameByName},getSplittedAttributes:function(){return getSplittedAttributes},getText:function(){return getText},getTextBetween:function(){return getTextBetween},getTextContentFromNodes:function(){return getTextContentFromNodes},getTextSerializersFromSchema:function(){return getTextSerializersFromSchema},getUpdatedPosition:function(){return getUpdatedPosition},h:function(){return h},injectExtensionAttributesToParseRule:function(){return injectExtensionAttributesToParseRule},inputRulesPlugin:function(){return inputRulesPlugin},isActive:function(){return isActive},isAndroid:function(){return isAndroid},isAtEndOfNode:function(){return isAtEndOfNode},isAtStartOfNode:function(){return isAtStartOfNode},isEmptyObject:function(){return isEmptyObject},isExtensionRulesEnabled:function(){return isExtensionRulesEnabled},isFirefox:function(){return isFirefox},isFunction:function(){return isFunction},isList:function(){return isList},isMacOS:function(){return isMacOS},isMarkActive:function(){return isMarkActive},isNodeActive:function(){return isNodeActive},isNodeEmpty:function(){return isNodeEmpty},isNodeSelection:function(){return isNodeSelection},isNumber:function(){return isNumber},isPlainObject:function(){return isPlainObject},isRegExp:function(){return isRegExp},isSafari:function(){return isSafari},isString:function(){return isString},isTextSelection:function(){return isTextSelection},isiOS:function(){return isiOS},markInputRule:function(){return markInputRule},markPasteRule:function(){return markPasteRule},markdown:function(){return J},mergeAttributes:function(){return mergeAttributes},mergeDeep:function(){return mergeDeep},minMax:function(){return minMax},nodeInputRule:function(){return nodeInputRule},nodePasteRule:function(){return nodePasteRule},objectIncludes:function(){return objectIncludes},parseAttributes:function(){return parseAttributes},parseIndentedBlocks:function(){return parseIndentedBlocks},pasteRulesPlugin:function(){return pasteRulesPlugin},posToDOMRect:function(){return posToDOMRect},removeDuplicates:function(){return removeDuplicates},renderNestedMarkdownContent:function(){return renderNestedMarkdownContent},resolveExtensions:function(){return resolveExtensions},resolveFocusPosition:function(){return resolveFocusPosition},rewriteUnknownContent:function(){return rewriteUnknownContent},selectionToInsertionEnd:function(){return selectionToInsertionEnd},serializeAttributes:function(){return serializeAttributes},sortExtensions:function(){return sortExtensions},splitExtensions:function(){return splitExtensions},textInputRule:function(){return textInputRule},textPasteRule:function(){return textPasteRule},textblockTypeInputRule:function(){return textblockTypeInputRule},updateMarkViewAttributes:function(){return updateMarkViewAttributes},wrappingInputRule:function(){return wrappingInputRule}});var o=r("./packages/node_modules/@tiptap/pm/dist/transform/index.js"),i=r("./packages/node_modules/@tiptap/pm/dist/commands/index.js"),s=r("./packages/node_modules/@tiptap/pm/dist/state/index.js"),a=r("./packages/node_modules/@tiptap/pm/dist/model/index.js"),c=r("./packages/node_modules/@tiptap/pm/dist/schema-list/index.js"),u=r("./packages/node_modules/@tiptap/pm/dist/view/index.js"),p=r("./packages/node_modules/@tiptap/pm/dist/keymap/index.js"),f=Object.defineProperty,__export=(e,n)=>{for(var r in n)f(e,r,{get:n[r],enumerable:!0})};function createChainableState(e){const{state:n,transaction:r}=e;let{selection:o}=r,{doc:i}=r,{storedMarks:s}=r;return{...n,apply:n.apply.bind(n),applyTransaction:n.applyTransaction.bind(n),plugins:n.plugins,schema:n.schema,reconfigure:n.reconfigure.bind(n),toJSON:n.toJSON.bind(n),get storedMarks(){return s},get selection(){return o},get doc(){return i},get tr(){return o=r.selection,i=r.doc,s=r.storedMarks,r}}}var g=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([e,n])=>[e,(...e)=>{const r=n(...e)(s);return i.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(i),r}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],c=!!e,u=e||i.tr,p={...Object.fromEntries(Object.entries(r).map(([e,r])=>[e,(...e)=>{const o=this.buildProps(u,n),i=r(...e)(o);return a.push(i),p}])),run:()=>(c||!n||u.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(u),a.every(e=>!0===e))};return p}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>n(...e)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:createChainableState({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([e,n])=>[e,(...e)=>n(...e)(a)]))}};return a}},b={};__export(b,{blur:()=>blur,clearContent:()=>clearContent,clearNodes:()=>clearNodes,command:()=>command,createParagraphNear:()=>createParagraphNear,cut:()=>cut,deleteCurrentNode:()=>deleteCurrentNode,deleteNode:()=>deleteNode,deleteRange:()=>deleteRange,deleteSelection:()=>deleteSelection,enter:()=>enter,exitCode:()=>exitCode,extendMarkRange:()=>extendMarkRange,first:()=>first,focus:()=>focus,forEach:()=>forEach,insertContent:()=>insertContent,insertContentAt:()=>insertContentAt,joinBackward:()=>joinBackward,joinDown:()=>joinDown,joinForward:()=>joinForward,joinItemBackward:()=>joinItemBackward,joinItemForward:()=>joinItemForward,joinTextblockBackward:()=>joinTextblockBackward,joinTextblockForward:()=>joinTextblockForward,joinUp:()=>joinUp,keyboardShortcut:()=>keyboardShortcut,lift:()=>lift,liftEmptyBlock:()=>liftEmptyBlock,liftListItem:()=>liftListItem,newlineInCode:()=>newlineInCode,resetAttributes:()=>resetAttributes,scrollIntoView:()=>scrollIntoView,selectAll:()=>selectAll,selectNodeBackward:()=>selectNodeBackward,selectNodeForward:()=>selectNodeForward,selectParentNode:()=>selectParentNode,selectTextblockEnd:()=>selectTextblockEnd,selectTextblockStart:()=>selectTextblockStart,setContent:()=>setContent,setMark:()=>setMark,setMeta:()=>setMeta,setNode:()=>setNode,setNodeSelection:()=>setNodeSelection,setTextDirection:()=>setTextDirection,setTextSelection:()=>setTextSelection,sinkListItem:()=>sinkListItem,splitBlock:()=>splitBlock,splitListItem:()=>splitListItem,toggleList:()=>toggleList,toggleMark:()=>toggleMark,toggleNode:()=>toggleNode,toggleWrap:()=>toggleWrap,undoInputRule:()=>undoInputRule,unsetAllMarks:()=>unsetAllMarks,unsetMark:()=>unsetMark,unsetTextDirection:()=>unsetTextDirection,updateAttributes:()=>updateAttributes,wrapIn:()=>wrapIn,wrapInList:()=>wrapInList});var blur=()=>({editor:e,view:n})=>(requestAnimationFrame(()=>{var r;e.isDestroyed||(n.dom.blur(),null==(r=null==window?void 0:window.getSelection())||r.removeAllRanges())}),!0),clearContent=(e=!0)=>({commands:n})=>n.setContent("",{emitUpdate:e}),clearNodes=()=>({state:e,tr:n,dispatch:r})=>{const{selection:i}=n,{ranges:s}=i;return!r||(s.forEach(({$from:r,$to:i})=>{e.doc.nodesBetween(r.pos,i.pos,(e,r)=>{if(e.type.isText)return;const{doc:i,mapping:s}=n,a=i.resolve(s.map(r)),c=i.resolve(s.map(r+e.nodeSize)),u=a.blockRange(c);if(!u)return;const p=(0,o.liftTarget)(u);if(e.type.isTextblock){const{defaultType:e}=a.parent.contentMatchAt(a.index());n.setNodeMarkup(u.start,e)}(p||0===p)&&n.lift(u,p)})}),!0)},command=e=>n=>e(n),createParagraphNear=()=>({state:e,dispatch:n})=>(0,i.createParagraphNear)(e,n),cut=(e,n)=>({editor:r,tr:o})=>{const{state:i}=r,a=i.doc.slice(e.from,e.to);o.deleteRange(e.from,e.to);const c=o.mapping.map(n);return o.insert(c,a.content),o.setSelection(new s.TextSelection(o.doc.resolve(Math.max(c-1,0)))),!0},deleteCurrentNode=()=>({tr:e,dispatch:n})=>{const{selection:r}=e,o=r.$anchor.node();if(o.content.size>0)return!1;const i=e.selection.$anchor;for(let r=i.depth;r>0;r-=1){if(i.node(r).type===o.type){if(n){const n=i.before(r),o=i.after(r);e.delete(n,o).scrollIntoView()}return!0}}return!1};function getNodeType(e,n){if("string"==typeof e){if(!n.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return n.nodes[e]}return e}var deleteNode=e=>({tr:n,state:r,dispatch:o})=>{const i=getNodeType(e,r.schema),s=n.selection.$anchor;for(let e=s.depth;e>0;e-=1){if(s.node(e).type===i){if(o){const r=s.before(e),o=s.after(e);n.delete(r,o).scrollIntoView()}return!0}}return!1},deleteRange=e=>({tr:n,dispatch:r})=>{const{from:o,to:i}=e;return r&&n.delete(o,i),!0},deleteSelection=()=>({state:e,dispatch:n})=>(0,i.deleteSelection)(e,n),enter=()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode=()=>({state:e,dispatch:n})=>(0,i.exitCode)(e,n);function isRegExp(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function objectIncludes(e,n,r={strict:!0}){const o=Object.keys(n);return!o.length||o.every(o=>r.strict?n[o]===e[o]:isRegExp(n[o])?n[o].test(e[o]):n[o]===e[o])}function findMarkInSet(e,n,r={}){return e.find(e=>e.type===n&&objectIncludes(Object.fromEntries(Object.keys(r).map(n=>[n,e.attrs[n]])),r))}function isMarkInSet(e,n,r={}){return!!findMarkInSet(e,n,r)}function getMarkRange(e,n,r){var o;if(!e||!n)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===n)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===n))return;r=r||(null==(o=i.node.marks[0])?void 0:o.attrs);if(!findMarkInSet([...i.node.marks],n,r))return;let s=i.index,a=e.start()+i.offset,c=s+1,u=a+i.node.nodeSize;for(;s>0&&isMarkInSet([...e.parent.child(s-1).marks],n,r);)s-=1,a-=e.parent.child(s).nodeSize;for(;c<e.parent.childCount&&isMarkInSet([...e.parent.child(c).marks],n,r);)u+=e.parent.child(c).nodeSize,c+=1;return{from:a,to:u}}function getMarkType(e,n){if("string"==typeof e){if(!n.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return n.marks[e]}return e}var extendMarkRange=(e,n={})=>({tr:r,state:o,dispatch:i})=>{const a=getMarkType(e,o.schema),{doc:c,selection:u}=r,{$from:p,from:f,to:g}=u;if(i){const e=getMarkRange(p,a,n);if(e&&e.from<=f&&e.to>=g){const n=s.TextSelection.create(c,e.from,e.to);r.setSelection(n)}}return!0},first=e=>n=>{const r="function"==typeof e?e(n):e;for(let e=0;e<r.length;e+=1)if(r[e](n))return!0;return!1};function isTextSelection(e){return e instanceof s.TextSelection}function minMax(e=0,n=0,r=0){return Math.min(Math.max(e,n),r)}function resolveFocusPosition(e,n=null){if(!n)return null;const r=s.Selection.atStart(e),o=s.Selection.atEnd(e);if("start"===n||!0===n)return r;if("end"===n)return o;const i=r.from,a=o.to;return"all"===n?s.TextSelection.create(e,minMax(0,i,a),minMax(e.content.size,i,a)):s.TextSelection.create(e,minMax(n,i,a),minMax(n,i,a))}function isAndroid(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function isSafari(){return"undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}var focus=(e=null,n={})=>({editor:r,view:o,tr:i,dispatch:s})=>{n={scrollIntoView:!0,...n};const delayedFocus=()=>{(isiOS()||isAndroid())&&o.dom.focus(),!isSafari()||isiOS()||isAndroid()||o.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(o.focus(),(null==n?void 0:n.scrollIntoView)&&r.commands.scrollIntoView())})};try{if(o.hasFocus()&&null===e||!1===e)return!0}catch{return!1}if(s&&null===e&&!isTextSelection(r.state.selection))return delayedFocus(),!0;const a=resolveFocusPosition(i.doc,e)||r.state.selection,c=r.state.selection.eq(a);return s&&(c||i.setSelection(a),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),delayedFocus()),!0},forEach=(e,n)=>r=>e.every((e,o)=>n(e,{...r,index:o})),insertContent=(e,n)=>({tr:r,commands:o})=>o.insertContentAt({from:r.selection.from,to:r.selection.to},e,n),removeWhitespaces=e=>{const n=e.childNodes;for(let r=n.length-1;r>=0;r-=1){const o=n[r];3===o.nodeType&&o.nodeValue&&/^(\n\s\s|\n)$/.test(o.nodeValue)?e.removeChild(o):1===o.nodeType&&removeWhitespaces(o)}return e};function elementFromString(e){if("undefined"==typeof window)throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const n=`<body>${e}</body>`,r=(new window.DOMParser).parseFromString(n,"text/html").body;return removeWhitespaces(r)}function createNodeFromContent(e,n,r){if(e instanceof a.Node||e instanceof a.Fragment)return e;r={slice:!0,parseOptions:{},...r};const o="string"==typeof e;if("object"==typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return a.Fragment.fromArray(e.map(e=>n.nodeFromJSON(e)));const o=n.nodeFromJSON(e);return r.errorOnInvalidContent&&o.check(),o}catch(o){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",o),createNodeFromContent("",n,r)}if(o){if(r.errorOnInvalidContent){let o=!1,i="";const s=new a.Schema({topNode:n.spec.topNode,marks:n.spec.marks,nodes:n.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(o=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(r.slice?a.DOMParser.fromSchema(s).parseSlice(elementFromString(e),r.parseOptions):a.DOMParser.fromSchema(s).parse(elementFromString(e),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${i}`)})}const o=a.DOMParser.fromSchema(n);return r.slice?o.parseSlice(elementFromString(e),r.parseOptions).content:o.parse(elementFromString(e),r.parseOptions)}return createNodeFromContent("",n,r)}function selectionToInsertionEnd(e,n,r){const i=e.steps.length-1;if(i<n)return;const a=e.steps[i];if(!(a instanceof o.ReplaceStep||a instanceof o.ReplaceAroundStep))return;const c=e.mapping.maps[i];let u=0;c.forEach((e,n,r,o)=>{0===u&&(u=o)}),e.setSelection(s.Selection.near(e.doc.resolve(u),r))}var insertContentAt=(e,n,r)=>({tr:o,dispatch:i,editor:s})=>{var c;if(i){let i;const emitContentError=e=>{s.emit("contentError",{editor:s,error:e,disableCollaboration:()=>{"collaboration"in s.storage&&"object"==typeof s.storage.collaboration&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...(r={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r}).parseOptions};if(!r.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{createNodeFromContent(n,s.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(e){emitContentError(e)}try{i=createNodeFromContent(n,s.schema,{parseOptions:u,errorOnInvalidContent:null!=(c=r.errorOnInvalidContent)?c:s.options.enableContentCheck})}catch(e){return emitContentError(e),!1}let{from:p,to:f}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},g=!0,b=!0;if(("type"in i?[i]:i).forEach(e=>{e.check(),g=!!g&&(e.isText&&0===e.marks.length),b=!!b&&e.isBlock}),p===f&&b){const{parent:e}=o.doc.resolve(p);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(p-=1,f+=1)}let k;if(g){if(Array.isArray(n))k=n.map(e=>e.text||"").join("");else if(n instanceof a.Fragment){let e="";n.forEach(n=>{n.text&&(e+=n.text)}),k=e}else k="object"==typeof n&&n&&n.text?n.text:n;o.insertText(k,p,f)}else{k=i;const e=o.doc.resolve(p),n=e.node(),r=0===e.parentOffset,s=n.isText||n.isTextblock,a=n.content.size>0;r&&s&&a&&(p=Math.max(0,p-1)),o.replaceWith(p,f,k)}r.updateSelection&&selectionToInsertionEnd(o,o.steps.length-1,-1),r.applyInputRules&&o.setMeta("applyInputRules",{from:p,text:k}),r.applyPasteRules&&o.setMeta("applyPasteRules",{from:p,text:k})}return!0},joinUp=()=>({state:e,dispatch:n})=>(0,i.joinUp)(e,n),joinDown=()=>({state:e,dispatch:n})=>(0,i.joinDown)(e,n),joinBackward=()=>({state:e,dispatch:n})=>(0,i.joinBackward)(e,n),joinForward=()=>({state:e,dispatch:n})=>(0,i.joinForward)(e,n),joinItemBackward=()=>({state:e,dispatch:n,tr:r})=>{try{const i=(0,o.joinPoint)(e.doc,e.selection.$from.pos,-1);return null!=i&&(r.join(i,2),n&&n(r),!0)}catch{return!1}},joinItemForward=()=>({state:e,dispatch:n,tr:r})=>{try{const i=(0,o.joinPoint)(e.doc,e.selection.$from.pos,1);return null!=i&&(r.join(i,2),n&&n(r),!0)}catch{return!1}},joinTextblockBackward=()=>({state:e,dispatch:n})=>(0,i.joinTextblockBackward)(e,n),joinTextblockForward=()=>({state:e,dispatch:n})=>(0,i.joinTextblockForward)(e,n);function isMacOS(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var keyboardShortcut=e=>({editor:n,view:r,tr:o,dispatch:i})=>{const s=function normalizeKeyName(e){const n=e.split(/-(?!$)/);let r,o,i,s,a=n[n.length-1];"Space"===a&&(a=" ");for(let e=0;e<n.length-1;e+=1){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else{if(!/^mod$/i.test(a))throw new Error(`Unrecognized modifier name: ${a}`);isiOS()||isMacOS()?s=!0:o=!0}}return r&&(a=`Alt-${a}`),o&&(a=`Ctrl-${a}`),s&&(a=`Meta-${a}`),i&&(a=`Shift-${a}`),a}(e).split(/-(?!$)/),a=s.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),c=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=n.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,c))});return null==u||u.steps.forEach(e=>{const n=e.map(o.mapping);n&&i&&o.maybeStep(n)}),!0};function isNodeActive(e,n,r={}){const{from:o,to:i,empty:s}=e.selection,a=n?getNodeType(n,e.schema):null,c=[];e.doc.nodesBetween(o,i,(e,n)=>{if(e.isText)return;const r=Math.max(o,n),s=Math.min(i,n+e.nodeSize);c.push({node:e,from:r,to:s})});const u=i-o,p=c.filter(e=>!a||a.name===e.node.type.name).filter(e=>objectIncludes(e.node.attrs,r,{strict:!1}));if(s)return!!p.length;return p.reduce((e,n)=>e+n.to-n.from,0)>=u}var lift=(e,n={})=>({state:r,dispatch:o})=>!!isNodeActive(r,getNodeType(e,r.schema),n)&&(0,i.lift)(r,o),liftEmptyBlock=()=>({state:e,dispatch:n})=>(0,i.liftEmptyBlock)(e,n),liftListItem=e=>({state:n,dispatch:r})=>{const o=getNodeType(e,n.schema);return(0,c.liftListItem)(o)(n,r)},newlineInCode=()=>({state:e,dispatch:n})=>(0,i.newlineInCode)(e,n);function getSchemaTypeNameByName(e,n){return n.nodes[e]?"node":n.marks[e]?"mark":null}function deleteProps(e,n){const r="string"==typeof n?[n]:n;return Object.keys(e).reduce((n,o)=>(r.includes(o)||(n[o]=e[o]),n),{})}var resetAttributes=(e,n)=>({tr:r,state:o,dispatch:i})=>{let s=null,a=null;const c=getSchemaTypeNameByName("string"==typeof e?e:e.name,o.schema);if(!c)return!1;"node"===c&&(s=getNodeType(e,o.schema)),"mark"===c&&(a=getMarkType(e,o.schema));let u=!1;return r.selection.ranges.forEach(e=>{o.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,o)=>{s&&s===e.type&&(u=!0,i&&r.setNodeMarkup(o,void 0,deleteProps(e.attrs,n))),a&&e.marks.length&&e.marks.forEach(s=>{a===s.type&&(u=!0,i&&r.addMark(o,o+e.nodeSize,a.create(deleteProps(s.attrs,n))))})})}),u},scrollIntoView=()=>({tr:e,dispatch:n})=>(n&&e.scrollIntoView(),!0),selectAll=()=>({tr:e,dispatch:n})=>{if(n){const n=new s.AllSelection(e.doc);e.setSelection(n)}return!0},selectNodeBackward=()=>({state:e,dispatch:n})=>(0,i.selectNodeBackward)(e,n),selectNodeForward=()=>({state:e,dispatch:n})=>(0,i.selectNodeForward)(e,n),selectParentNode=()=>({state:e,dispatch:n})=>(0,i.selectParentNode)(e,n),selectTextblockEnd=()=>({state:e,dispatch:n})=>(0,i.selectTextblockEnd)(e,n),selectTextblockStart=()=>({state:e,dispatch:n})=>(0,i.selectTextblockStart)(e,n);function createDocument(e,n,r={},o={}){return createNodeFromContent(e,n,{slice:!1,parseOptions:r,errorOnInvalidContent:o.errorOnInvalidContent})}var setContent=(e,{errorOnInvalidContent:n,emitUpdate:r=!0,parseOptions:o={}}={})=>({editor:i,tr:s,dispatch:a,commands:c})=>{const{doc:u}=s;if("full"!==o.preserveWhitespace){const c=createDocument(e,i.schema,o,{errorOnInvalidContent:null!=n?n:i.options.enableContentCheck});return a&&s.replaceWith(0,u.content.size,c).setMeta("preventUpdate",!r),!0}return a&&s.setMeta("preventUpdate",!r),c.insertContentAt({from:0,to:u.content.size},e,{parseOptions:o,errorOnInvalidContent:null!=n?n:i.options.enableContentCheck})};function getMarkAttributes(e,n){const r=getMarkType(n,e.schema),{from:o,to:i,empty:s}=e.selection,a=[];s?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(o,i,e=>{a.push(...e.marks)});const c=a.find(e=>e.type.name===r.name);return c?{...c.attrs}:{}}function combineTransactionSteps(e,n){const r=new o.Transform(e);return n.forEach(e=>{e.steps.forEach(e=>{r.step(e)})}),r}function defaultBlockAt(e){for(let n=0;n<e.edgeCount;n+=1){const{type:r}=e.edge(n);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function findChildren(e,n){const r=[];return e.descendants((e,o)=>{n(e)&&r.push({node:e,pos:o})}),r}function findChildrenInRange(e,n,r){const o=[];return e.nodesBetween(n.from,n.to,(e,n)=>{r(e)&&o.push({node:e,pos:n})}),o}function findParentNodeClosestToPos(e,n){for(let r=e.depth;r>0;r-=1){const o=e.node(r);if(n(o))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:o}}}function findParentNode(e){return n=>findParentNodeClosestToPos(n.$from,e)}function getExtensionField(e,n,r){if(void 0===e.config[n]&&e.parent)return getExtensionField(e.parent,n,r);if("function"==typeof e.config[n]){return e.config[n].bind({...r,parent:e.parent?getExtensionField(e.parent,n,r):null})}return e.config[n]}function flattenExtensions(e){return e.map(e=>{const n=getExtensionField(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return n?[e,...flattenExtensions(n())]:e}).flat(10)}function getHTMLFromFragment(e,n){const r=a.DOMSerializer.fromSchema(n).serializeFragment(e),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(r),o.innerHTML}function isFunction(e){return"function"==typeof e}function callOrReturn(e,n=void 0,...r){return isFunction(e)?n?e.bind(n)(...r):e(...r):e}function isEmptyObject(e={}){return 0===Object.keys(e).length&&e.constructor===Object}function splitExtensions(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function getAttributesFromExtensions(e){const n=[],{nodeExtensions:r,markExtensions:o}=splitExtensions(e),i=[...r,...o],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{const r=getExtensionField(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:i});if(!r)return;r().forEach(e=>{e.types.forEach(r=>{Object.entries(e.attributes).forEach(([e,o])=>{n.push({type:r,name:e,attribute:{...s,...o}})})})})}),i.forEach(e=>{const r={name:e.name,options:e.options,storage:e.storage},o=getExtensionField(e,"addAttributes",r);if(!o)return;const i=o();Object.entries(i).forEach(([r,o])=>{const i={...s,...o};"function"==typeof(null==i?void 0:i.default)&&(i.default=i.default()),(null==i?void 0:i.isRequired)&&void 0===(null==i?void 0:i.default)&&delete i.default,n.push({type:e.name,name:r,attribute:i})})}),n}function mergeAttributes(...e){return e.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([e,n])=>{if(r[e])if("class"===e){const o=n?String(n).split(" "):[],i=r[e]?r[e].split(" "):[],s=o.filter(e=>!i.includes(e));r[e]=[...i,...s].join(" ")}else if("style"===e){const o=n?n.split(";").map(e=>e.trim()).filter(Boolean):[],i=r[e]?r[e].split(";").map(e=>e.trim()).filter(Boolean):[],s=new Map;i.forEach(e=>{const[n,r]=e.split(":").map(e=>e.trim());s.set(n,r)}),o.forEach(e=>{const[n,r]=e.split(":").map(e=>e.trim());s.set(n,r)}),r[e]=Array.from(s.entries()).map(([e,n])=>`${e}: ${n}`).join("; ")}else r[e]=n;else r[e]=n}),r},{})}function getRenderedAttributes(e,n){return n.filter(n=>n.type===e.type.name).filter(e=>e.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((e,n)=>mergeAttributes(e,n),{})}function fromString(e){return"string"!=typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}function injectExtensionAttributesToParseRule(e,n){return"style"in e?e:{...e,getAttrs:r=>{const o=e.getAttrs?e.getAttrs(r):e.attrs;if(!1===o)return!1;const i=n.reduce((e,n)=>{const o=n.attribute.parseHTML?n.attribute.parseHTML(r):fromString(r.getAttribute(n.name));return null==o?e:{...e,[n.name]:o}},{});return{...o,...i}}}}function cleanUpSchemaItem(e){return Object.fromEntries(Object.entries(e).filter(([e,n])=>("attrs"!==e||!isEmptyObject(n))&&null!=n))}function buildAttributeSpec(e){var n,r;const o={};return!(null==(n=null==e?void 0:e.attribute)?void 0:n.isRequired)&&"default"in((null==e?void 0:e.attribute)||{})&&(o.default=e.attribute.default),void 0!==(null==(r=null==e?void 0:e.attribute)?void 0:r.validate)&&(o.validate=e.attribute.validate),[e.name,o]}function getSchemaByResolvedExtensions(e,n){var r;const o=getAttributesFromExtensions(e),{nodeExtensions:i,markExtensions:s}=splitExtensions(e),c=null==(r=i.find(e=>getExtensionField(e,"topNode")))?void 0:r.name,u=Object.fromEntries(i.map(r=>{const i=o.filter(e=>e.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:n},a=cleanUpSchemaItem({...e.reduce((e,n)=>{const o=getExtensionField(n,"extendNodeSchema",s);return{...e,...o?o(r):{}}},{}),content:callOrReturn(getExtensionField(r,"content",s)),marks:callOrReturn(getExtensionField(r,"marks",s)),group:callOrReturn(getExtensionField(r,"group",s)),inline:callOrReturn(getExtensionField(r,"inline",s)),atom:callOrReturn(getExtensionField(r,"atom",s)),selectable:callOrReturn(getExtensionField(r,"selectable",s)),draggable:callOrReturn(getExtensionField(r,"draggable",s)),code:callOrReturn(getExtensionField(r,"code",s)),whitespace:callOrReturn(getExtensionField(r,"whitespace",s)),linebreakReplacement:callOrReturn(getExtensionField(r,"linebreakReplacement",s)),defining:callOrReturn(getExtensionField(r,"defining",s)),isolating:callOrReturn(getExtensionField(r,"isolating",s)),attrs:Object.fromEntries(i.map(buildAttributeSpec))}),c=callOrReturn(getExtensionField(r,"parseHTML",s));c&&(a.parseDOM=c.map(e=>injectExtensionAttributesToParseRule(e,i)));const u=getExtensionField(r,"renderHTML",s);u&&(a.toDOM=e=>u({node:e,HTMLAttributes:getRenderedAttributes(e,i)}));const p=getExtensionField(r,"renderText",s);return p&&(a.toText=p),[r.name,a]})),p=Object.fromEntries(s.map(r=>{const i=o.filter(e=>e.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:n},a=cleanUpSchemaItem({...e.reduce((e,n)=>{const o=getExtensionField(n,"extendMarkSchema",s);return{...e,...o?o(r):{}}},{}),inclusive:callOrReturn(getExtensionField(r,"inclusive",s)),excludes:callOrReturn(getExtensionField(r,"excludes",s)),group:callOrReturn(getExtensionField(r,"group",s)),spanning:callOrReturn(getExtensionField(r,"spanning",s)),code:callOrReturn(getExtensionField(r,"code",s)),attrs:Object.fromEntries(i.map(buildAttributeSpec))}),c=callOrReturn(getExtensionField(r,"parseHTML",s));c&&(a.parseDOM=c.map(e=>injectExtensionAttributesToParseRule(e,i)));const u=getExtensionField(r,"renderHTML",s);return u&&(a.toDOM=e=>u({mark:e,HTMLAttributes:getRenderedAttributes(e,i)})),[r.name,a]}));return new a.Schema({topNode:c,nodes:u,marks:p})}function findDuplicates(e){const n=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(n))}function sortExtensions(e){return e.sort((e,n)=>{const r=getExtensionField(e,"priority")||100,o=getExtensionField(n,"priority")||100;return r>o?-1:r<o?1:0})}function resolveExtensions(e){const n=sortExtensions(flattenExtensions(e)),r=findDuplicates(n.map(e=>e.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),n}function getSchema(e,n){return getSchemaByResolvedExtensions(resolveExtensions(e),n)}function generateHTML(e,n){const r=getSchema(n);return getHTMLFromFragment(a.Node.fromJSON(r,e).content,r)}function generateJSON(e,n){const r=getSchema(n),o=elementFromString(e);return a.DOMParser.fromSchema(r).parse(o).toJSON()}function getTextBetween(e,n,r){const{from:o,to:i}=n,{blockSeparator:s="\n\n",textSerializers:a={}}=r||{};let c="";return e.nodesBetween(o,i,(e,r,u,p)=>{var f;e.isBlock&&r>o&&(c+=s);const g=null==a?void 0:a[e.type.name];if(g)return u&&(c+=g({node:e,pos:r,parent:u,index:p,range:n})),!1;e.isText&&(c+=null==(f=null==e?void 0:e.text)?void 0:f.slice(Math.max(o,r)-r,i-r))}),c}function getText(e,n){return getTextBetween(e,{from:0,to:e.content.size},n)}function getTextSerializersFromSchema(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function generateText(e,n,r){const{blockSeparator:o="\n\n",textSerializers:i={}}=r||{},s=getSchema(n);return getText(a.Node.fromJSON(s,e),{blockSeparator:o,textSerializers:{...getTextSerializersFromSchema(s),...i}})}function getNodeAttributes(e,n){const r=getNodeType(n,e.schema),{from:o,to:i}=e.selection,s=[];e.doc.nodesBetween(o,i,e=>{s.push(e)});const a=s.reverse().find(e=>e.type.name===r.name);return a?{...a.attrs}:{}}function getAttributes(e,n){const r=getSchemaTypeNameByName("string"==typeof n?n:n.name,e.schema);return"node"===r?getNodeAttributes(e,n):"mark"===r?getMarkAttributes(e,n):{}}function removeDuplicates(e,n=JSON.stringify){const r={};return e.filter(e=>{const o=n(e);return!Object.prototype.hasOwnProperty.call(r,o)&&(r[o]=!0)})}function getChangedRanges(e){const{mapping:n,steps:r}=e,o=[];return n.maps.forEach((e,i)=>{const s=[];if(e.ranges.length)e.forEach((e,n)=>{s.push({from:e,to:n})});else{const{from:e,to:n}=r[i];if(void 0===e||void 0===n)return;s.push({from:e,to:n})}s.forEach(({from:e,to:r})=>{const s=n.slice(i).map(e,-1),a=n.slice(i).map(r),c=n.invert().map(s,-1),u=n.invert().map(a);o.push({oldRange:{from:c,to:u},newRange:{from:s,to:a}})})}),function simplifyChangedRanges(e){const n=removeDuplicates(e);return 1===n.length?n:n.filter((e,r)=>!n.filter((e,n)=>n!==r).some(n=>e.oldRange.from>=n.oldRange.from&&e.oldRange.to<=n.oldRange.to&&e.newRange.from>=n.newRange.from&&e.newRange.to<=n.newRange.to))}(o)}function getDebugJSON(e,n=0){const r=e.type===e.type.schema.topNodeType?0:1,o=n,i=o+e.nodeSize,s=e.marks.map(e=>{const n={type:e.type.name};return Object.keys(e.attrs).length&&(n.attrs={...e.attrs}),n}),a={...e.attrs},c={type:e.type.name,from:o,to:i};return Object.keys(a).length&&(c.attrs=a),s.length&&(c.marks=s),e.content.childCount&&(c.content=[],e.forEach((e,o)=>{var i;null==(i=c.content)||i.push(getDebugJSON(e,n+o+r))})),e.text&&(c.text=e.text),c}function getMarksBetween(e,n,r){const o=[];return e===n?r.resolve(e).marks().forEach(n=>{const i=getMarkRange(r.resolve(e),n.type);i&&o.push({mark:n,...i})}):r.nodesBetween(e,n,(e,n)=>{e&&void 0!==(null==e?void 0:e.nodeSize)&&o.push(...e.marks.map(r=>({from:n,to:n+e.nodeSize,mark:r})))}),o}var getNodeAtPosition=(e,n,r,o=20)=>{const i=e.doc.resolve(r);let s=o,a=null;for(;s>0&&null===a;){const e=i.node(s);(null==e?void 0:e.type.name)===n?a=e:s-=1}return[a,s]};function getSchemaTypeByName(e,n){return n.nodes[e]||n.marks[e]||null}function getSplittedAttributes(e,n,r){return Object.fromEntries(Object.entries(r).filter(([r])=>{const o=e.find(e=>e.type===n&&e.name===r);return!!o&&o.attribute.keepOnSplit}))}var getTextContentFromNodes=(e,n=500)=>{let r="";const o=e.parentOffset;return e.parent.nodesBetween(Math.max(0,o-n),o,(e,n,i,s)=>{var a,c;const u=(null==(c=(a=e.type.spec).toText)?void 0:c.call(a,{node:e,pos:n,parent:i,index:s}))||e.textContent||"%leaf%";r+=e.isAtom&&!e.isText?u:u.slice(0,Math.max(0,o-n))}),r};function isMarkActive(e,n,r={}){const{empty:o,ranges:i}=e.selection,s=n?getMarkType(n,e.schema):null;if(o)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!s||s.name===e.type.name).find(e=>objectIncludes(e.attrs,r,{strict:!1}));let a=0;const c=[];if(i.forEach(({$from:n,$to:r})=>{const o=n.pos,i=r.pos;e.doc.nodesBetween(o,i,(e,n)=>{if(!e.isText&&!e.marks.length)return;const r=Math.max(o,n),s=Math.min(i,n+e.nodeSize);a+=s-r,c.push(...e.marks.map(e=>({mark:e,from:r,to:s})))})}),0===a)return!1;const u=c.filter(e=>!s||s.name===e.mark.type.name).filter(e=>objectIncludes(e.mark.attrs,r,{strict:!1})).reduce((e,n)=>e+n.to-n.from,0),p=c.filter(e=>!s||e.mark.type!==s&&e.mark.type.excludes(s)).reduce((e,n)=>e+n.to-n.from,0);return(u>0?u+p:u)>=a}function isActive(e,n,r={}){if(!n)return isNodeActive(e,null,r)||isMarkActive(e,null,r);const o=getSchemaTypeNameByName(n,e.schema);return"node"===o?isNodeActive(e,n,r):"mark"===o&&isMarkActive(e,n,r)}var isAtEndOfNode=(e,n)=>{const{$from:r,$to:o,$anchor:i}=e.selection;if(n){const r=findParentNode(e=>e.type.name===n)(e.selection);if(!r)return!1;const o=e.doc.resolve(r.pos+1);return i.pos+1===o.end()}return!(o.parentOffset<o.parent.nodeSize-2||r.pos!==o.pos)},isAtStartOfNode=e=>{const{$from:n,$to:r}=e.selection;return!(n.parentOffset>0||n.pos!==r.pos)};function isExtensionRulesEnabled(e,n){return Array.isArray(n)?n.some(n=>("string"==typeof n?n:n.name)===e.name):n}function isList(e,n){const{nodeExtensions:r}=splitExtensions(n),o=r.find(n=>n.name===e);if(!o)return!1;const i=callOrReturn(getExtensionField(o,"group",{name:o.name,options:o.options,storage:o.storage}));return"string"==typeof i&&i.split(" ").includes("list")}function isNodeEmpty(e,{checkChildren:n=!0,ignoreWhitespace:r=!1}={}){var o;if(r){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(o=e.text)?o:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(n){let o=!0;return e.content.forEach(e=>{!1!==o&&(isNodeEmpty(e,{ignoreWhitespace:r,checkChildren:n})||(o=!1))}),o}return!1}function isNodeSelection(e){return e instanceof s.NodeSelection}var k=class _MappablePosition{constructor(e){this.position=e}static fromJSON(e){return new _MappablePosition(e.position)}toJSON(){return{position:this.position}}};function getUpdatedPosition(e,n){const r=n.mapping.mapResult(e.position);return{position:new k(r.pos),mapResult:r}}function createMappablePosition(e){return new k(e)}function posToDOMRect(e,n,r){const o=e.state.doc.content.size,i=minMax(n,0,o),s=minMax(r,0,o),a=e.coordsAtPos(i),c=e.coordsAtPos(s,-1),u=Math.min(a.top,c.top),p=Math.max(a.bottom,c.bottom),f=Math.min(a.left,c.left),g=Math.max(a.right,c.right),b={top:u,bottom:p,left:f,right:g,width:g-f,height:p-u,x:f,y:u};return{...b,toJSON:()=>b}}function rewriteUnknownContentInner({json:e,validMarks:n,validNodes:r,options:o,rewrittenContent:i=[]}){return e.marks&&Array.isArray(e.marks)&&(e.marks=e.marks.filter(e=>{const r="string"==typeof e?e:e.type;return!!n.has(r)||(i.push({original:JSON.parse(JSON.stringify(e)),unsupported:r}),!1)})),e.content&&Array.isArray(e.content)&&(e.content=e.content.map(e=>rewriteUnknownContentInner({json:e,validMarks:n,validNodes:r,options:o,rewrittenContent:i}).json).filter(e=>null!=e)),e.type&&!r.has(e.type)?(i.push({original:JSON.parse(JSON.stringify(e)),unsupported:e.type}),e.content&&Array.isArray(e.content)&&!1!==(null==o?void 0:o.fallbackToParagraph)?(e.type="paragraph",{json:e,rewrittenContent:i}):{json:null,rewrittenContent:i}):{json:e,rewrittenContent:i}}function rewriteUnknownContent(e,n,r){return rewriteUnknownContentInner({json:e,validNodes:new Set(Object.keys(n.nodes)),validMarks:new Set(Object.keys(n.marks)),options:r})}var setMark=(e,n={})=>({tr:r,state:o,dispatch:i})=>{const{selection:s}=r,{empty:a,ranges:c}=s,u=getMarkType(e,o.schema);if(i)if(a){const e=getMarkAttributes(o,u);r.addStoredMark(u.create({...e,...n}))}else c.forEach(e=>{const i=e.$from.pos,s=e.$to.pos;o.doc.nodesBetween(i,s,(e,o)=>{const a=Math.max(o,i),c=Math.min(o+e.nodeSize,s);e.marks.find(e=>e.type===u)?e.marks.forEach(e=>{u===e.type&&r.addMark(a,c,u.create({...e.attrs,...n}))}):r.addMark(a,c,u.create(n))})});return function canSetMark(e,n,r){var o;const{selection:i}=n;let s=null;if(isTextSelection(i)&&(s=i.$cursor),s){const n=null!=(o=e.storedMarks)?o:s.marks();return s.parent.type.allowsMarkType(r)&&(!!r.isInSet(n)||!n.some(e=>e.type.excludes(r)))}const{ranges:a}=i;return a.some(({$from:n,$to:o})=>{let i=0===n.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(r);return e.doc.nodesBetween(n.pos,o.pos,(e,n,o)=>{if(i)return!1;if(e.isInline){const n=!o||o.type.allowsMarkType(r),s=!!r.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(r));i=n&&s}return!i}),i})}(o,r,u)},setMeta=(e,n)=>({tr:r})=>(r.setMeta(e,n),!0),setNode=(e,n={})=>({state:r,dispatch:o,chain:s})=>{const a=getNodeType(e,r.schema);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),a.isTextblock?s().command(({commands:e})=>!!(0,i.setBlockType)(a,{...c,...n})(r)||e.clearNodes()).command(({state:e})=>(0,i.setBlockType)(a,{...c,...n})(e,o)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=e=>({tr:n,dispatch:r})=>{if(r){const{doc:r}=n,o=minMax(e,0,r.content.size),i=s.NodeSelection.create(r,o);n.setSelection(i)}return!0},setTextDirection=(e,n)=>({tr:r,state:o,dispatch:i})=>{const{selection:s}=o;let a,c;return"number"==typeof n?(a=n,c=n):n&&"from"in n&&"to"in n?(a=n.from,c=n.to):(a=s.from,c=s.to),i&&r.doc.nodesBetween(a,c,(n,o)=>{n.isText||r.setNodeMarkup(o,void 0,{...n.attrs,dir:e})}),!0},setTextSelection=e=>({tr:n,dispatch:r})=>{if(r){const{doc:r}=n,{from:o,to:i}="number"==typeof e?{from:e,to:e}:e,a=s.TextSelection.atStart(r).from,c=s.TextSelection.atEnd(r).to,u=minMax(o,a,c),p=minMax(i,a,c),f=s.TextSelection.create(r,u,p);n.setSelection(f)}return!0},sinkListItem=e=>({state:n,dispatch:r})=>{const o=getNodeType(e,n.schema);return(0,c.sinkListItem)(o)(n,r)};function ensureMarks(e,n){const r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(r){const o=r.filter(e=>null==n?void 0:n.includes(e.type.name));e.tr.ensureMarks(o)}}var splitBlock=({keepMarks:e=!0}={})=>({tr:n,state:r,dispatch:i,editor:a})=>{const{selection:c,doc:u}=n,{$from:p,$to:f}=c,g=getSplittedAttributes(a.extensionManager.attributes,p.node().type.name,p.node().attrs);if(c instanceof s.NodeSelection&&c.node.isBlock)return!(!p.parentOffset||!(0,o.canSplit)(u,p.pos))&&(i&&(e&&ensureMarks(r,a.extensionManager.splittableMarks),n.split(p.pos).scrollIntoView()),!0);if(!p.parent.isBlock)return!1;const b=f.parentOffset===f.parent.content.size,k=0===p.depth?void 0:defaultBlockAt(p.node(-1).contentMatchAt(p.indexAfter(-1)));let v=b&&k?[{type:k,attrs:g}]:void 0,x=(0,o.canSplit)(n.doc,n.mapping.map(p.pos),1,v);if(v||x||!(0,o.canSplit)(n.doc,n.mapping.map(p.pos),1,k?[{type:k}]:void 0)||(x=!0,v=k?[{type:k,attrs:g}]:void 0),i){if(x&&(c instanceof s.TextSelection&&n.deleteSelection(),n.split(n.mapping.map(p.pos),1,v),k&&!b&&!p.parentOffset&&p.parent.type!==k)){const e=n.mapping.map(p.before()),r=n.doc.resolve(e);p.node(-1).canReplaceWith(r.index(),r.index()+1,k)&&n.setNodeMarkup(n.mapping.map(p.before()),k)}e&&ensureMarks(r,a.extensionManager.splittableMarks),n.scrollIntoView()}return x},splitListItem=(e,n={})=>({tr:r,state:i,dispatch:c,editor:u})=>{var p;const f=getNodeType(e,i.schema),{$from:g,$to:b}=i.selection,k=i.selection.node;if(k&&k.isBlock||g.depth<2||!g.sameParent(b))return!1;const v=g.node(-1);if(v.type!==f)return!1;const x=u.extensionManager.attributes;if(0===g.parent.content.size&&g.node(-1).childCount===g.indexAfter(-1)){if(2===g.depth||g.node(-3).type!==f||g.index(-2)!==g.node(-2).childCount-1)return!1;if(c){let e=a.Fragment.empty;const o=g.index(-1)?1:g.index(-2)?2:3;for(let n=g.depth-o;n>=g.depth-3;n-=1)e=a.Fragment.from(g.node(n).copy(e));const i=g.indexAfter(-1)<g.node(-2).childCount?1:g.indexAfter(-2)<g.node(-3).childCount?2:3,c={...getSplittedAttributes(x,g.node().type.name,g.node().attrs),...n},u=(null==(p=f.contentMatch.defaultType)?void 0:p.createAndFill(c))||void 0;e=e.append(a.Fragment.from(f.createAndFill(null,u)||void 0));const b=g.before(g.depth-(o-1));r.replace(b,g.after(-i),new a.Slice(e,4-o,0));let k=-1;r.doc.nodesBetween(b,r.doc.content.size,(e,n)=>{if(k>-1)return!1;e.isTextblock&&0===e.content.size&&(k=n+1)}),k>-1&&r.setSelection(s.TextSelection.near(r.doc.resolve(k))),r.scrollIntoView()}return!0}const w=b.pos===g.end()?v.contentMatchAt(0).defaultType:null,E={...getSplittedAttributes(x,v.type.name,v.attrs),...n},C={...getSplittedAttributes(x,g.node().type.name,g.node().attrs),...n};r.delete(g.pos,b.pos);const T=w?[{type:f,attrs:E},{type:w,attrs:C}]:[{type:f,attrs:E}];if(!(0,o.canSplit)(r.doc,g.pos,2))return!1;if(c){const{selection:e,storedMarks:n}=i,{splittableMarks:o}=u.extensionManager,s=n||e.$to.parentOffset&&e.$from.marks();if(r.split(g.pos,2,T).scrollIntoView(),!s||!c)return!0;const a=s.filter(e=>o.includes(e.type.name));r.ensureMarks(a)}return!0},joinListBackwards=(e,n)=>{const r=findParentNode(e=>e.type===n)(e.selection);if(!r)return!0;const i=e.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(void 0===i)return!0;const s=e.doc.nodeAt(i);return r.node.type!==(null==s?void 0:s.type)||!(0,o.canJoin)(e.doc,r.pos)||(e.join(r.pos),!0)},joinListForwards=(e,n)=>{const r=findParentNode(e=>e.type===n)(e.selection);if(!r)return!0;const i=e.doc.resolve(r.start).after(r.depth);if(void 0===i)return!0;const s=e.doc.nodeAt(i);return r.node.type!==(null==s?void 0:s.type)||!(0,o.canJoin)(e.doc,i)||(e.join(i),!0)},toggleList=(e,n,r,o={})=>({editor:i,tr:s,state:a,dispatch:c,chain:u,commands:p,can:f})=>{const{extensions:g,splittableMarks:b}=i.extensionManager,k=getNodeType(e,a.schema),v=getNodeType(n,a.schema),{selection:x,storedMarks:w}=a,{$from:E,$to:C}=x,T=E.blockRange(C),_=w||x.$to.parentOffset&&x.$from.marks();if(!T)return!1;const P=findParentNode(e=>isList(e.type.name,g))(x);if(T.depth>=1&&P&&T.depth-P.depth<=1){if(P.node.type===k)return p.liftListItem(v);if(isList(P.node.type.name,g)&&k.validContent(P.node.content)&&c)return u().command(()=>(s.setNodeMarkup(P.pos,k),!0)).command(()=>joinListBackwards(s,k)).command(()=>joinListForwards(s,k)).run()}return r&&_&&c?u().command(()=>{const e=f().wrapInList(k,o),n=_.filter(e=>b.includes(e.type.name));return s.ensureMarks(n),!!e||p.clearNodes()}).wrapInList(k,o).command(()=>joinListBackwards(s,k)).command(()=>joinListForwards(s,k)).run():u().command(()=>!!f().wrapInList(k,o)||p.clearNodes()).wrapInList(k,o).command(()=>joinListBackwards(s,k)).command(()=>joinListForwards(s,k)).run()},toggleMark=(e,n={},r={})=>({state:o,commands:i})=>{const{extendEmptyMarkRange:s=!1}=r,a=getMarkType(e,o.schema);return isMarkActive(o,a,n)?i.unsetMark(a,{extendEmptyMarkRange:s}):i.setMark(a,n)},toggleNode=(e,n,r={})=>({state:o,commands:i})=>{const s=getNodeType(e,o.schema),a=getNodeType(n,o.schema),c=isNodeActive(o,s,r);let u;return o.selection.$anchor.sameParent(o.selection.$head)&&(u=o.selection.$anchor.parent.attrs),c?i.setNode(a,u):i.setNode(s,{...u,...r})},toggleWrap=(e,n={})=>({state:r,commands:o})=>{const i=getNodeType(e,r.schema);return isNodeActive(r,i,n)?o.lift(i):o.wrapIn(i,n)},undoInputRule=()=>({state:e,dispatch:n})=>{const r=e.plugins;for(let o=0;o<r.length;o+=1){const i=r[o];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(n){const n=e.tr,r=s.transform;for(let e=r.steps.length-1;e>=0;e-=1)n.step(r.steps[e].invert(r.docs[e]));if(s.text){const r=n.doc.resolve(s.from).marks();n.replaceWith(s.from,s.to,e.schema.text(s.text,r))}else n.delete(s.from,s.to)}return!0}}return!1},unsetAllMarks=()=>({tr:e,dispatch:n})=>{const{selection:r}=e,{empty:o,ranges:i}=r;return o||n&&i.forEach(n=>{e.removeMark(n.$from.pos,n.$to.pos)}),!0},unsetMark=(e,n={})=>({tr:r,state:o,dispatch:i})=>{var s;const{extendEmptyMarkRange:a=!1}=n,{selection:c}=r,u=getMarkType(e,o.schema),{$from:p,empty:f,ranges:g}=c;if(!i)return!0;if(f&&a){let{from:e,to:n}=c;const o=null==(s=p.marks().find(e=>e.type===u))?void 0:s.attrs,i=getMarkRange(p,u,o);i&&(e=i.from,n=i.to),r.removeMark(e,n,u)}else g.forEach(e=>{r.removeMark(e.$from.pos,e.$to.pos,u)});return r.removeStoredMark(u),!0},unsetTextDirection=e=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=r;let s,a;return"number"==typeof e?(s=e,a=e):e&&"from"in e&&"to"in e?(s=e.from,a=e.to):(s=i.from,a=i.to),o&&n.doc.nodesBetween(s,a,(e,r)=>{if(e.isText)return;const o={...e.attrs};delete o.dir,n.setNodeMarkup(r,void 0,o)}),!0},updateAttributes=(e,n={})=>({tr:r,state:o,dispatch:i})=>{let s=null,a=null;const c=getSchemaTypeNameByName("string"==typeof e?e:e.name,o.schema);if(!c)return!1;"node"===c&&(s=getNodeType(e,o.schema)),"mark"===c&&(a=getMarkType(e,o.schema));let u=!1;return r.selection.ranges.forEach(e=>{const c=e.$from.pos,p=e.$to.pos;let f,g,b,k;r.selection.empty?o.doc.nodesBetween(c,p,(e,n)=>{s&&s===e.type&&(u=!0,b=Math.max(n,c),k=Math.min(n+e.nodeSize,p),f=n,g=e)}):o.doc.nodesBetween(c,p,(e,o)=>{o<c&&s&&s===e.type&&(u=!0,b=Math.max(o,c),k=Math.min(o+e.nodeSize,p),f=o,g=e),o>=c&&o<=p&&(s&&s===e.type&&(u=!0,i&&r.setNodeMarkup(o,void 0,{...e.attrs,...n})),a&&e.marks.length&&e.marks.forEach(s=>{if(a===s.type&&(u=!0,i)){const i=Math.max(o,c),u=Math.min(o+e.nodeSize,p);r.addMark(i,u,a.create({...s.attrs,...n}))}}))}),g&&(void 0!==f&&i&&r.setNodeMarkup(f,void 0,{...g.attrs,...n}),a&&g.marks.length&&g.marks.forEach(e=>{a===e.type&&i&&r.addMark(b,k,a.create({...e.attrs,...n}))}))}),u},wrapIn=(e,n={})=>({state:r,dispatch:o})=>{const s=getNodeType(e,r.schema);return(0,i.wrapIn)(s,n)(r,o)},wrapInList=(e,n={})=>({state:r,dispatch:o})=>{const i=getNodeType(e,r.schema);return(0,c.wrapInList)(i,n)(r,o)},v=class{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(e=>e.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(e=>e!==n):delete this.callbacks[e]),this}once(e,n){const onceFn=(...r)=>{this.off(e,onceFn),n.apply(this,r)};return this.on(e,onceFn)}removeAllListeners(){this.callbacks={}}},x=class{constructor(e){var n;this.find=e.find,this.handler=e.handler,this.undoable=null==(n=e.undoable)||n}},inputRuleMatcherHandler=(e,n)=>{if(isRegExp(n))return n.exec(e);const r=n(e);if(!r)return null;const o=[r.text];return o.index=r.index,o.input=e,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(r.replaceWith)),o};function run(e){var n;const{editor:r,from:o,to:i,text:s,rules:a,plugin:c}=e,{view:u}=r;if(u.composing)return!1;const p=u.state.doc.resolve(o);if(p.parent.type.spec.code||(null==(n=p.nodeBefore||p.nodeAfter)?void 0:n.marks.find(e=>e.type.spec.code)))return!1;let f=!1;const b=getTextContentFromNodes(p)+s;return a.forEach(e=>{if(f)return;const n=inputRuleMatcherHandler(b,e.find);if(!n)return;const a=u.state.tr,p=createChainableState({state:u.state,transaction:a}),k={from:o-(n[0].length-s.length),to:i},{commands:v,chain:x,can:w}=new g({editor:r,state:p});null!==e.handler({state:p,range:k,match:n,commands:v,chain:x,can:w})&&a.steps.length&&(e.undoable&&a.setMeta(c,{transform:a,from:o,to:i,text:s}),u.dispatch(a),f=!0)}),f}function inputRulesPlugin(e){const{editor:n,rules:r}=e,o=new s.Plugin({state:{init(){return null},apply(e,i,s){const c=e.getMeta(o);if(c)return c;const u=e.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:e}=u;"string"==typeof e||(e=getHTMLFromFragment(a.Fragment.from(e),s.schema));const{from:i}=u,c=i+e.length;run({editor:n,from:i,to:c,text:e,rules:r,plugin:o})}),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput(e,i,s,a){return run({editor:n,from:i,to:s,text:a,rules:r,plugin:o})},handleDOMEvents:{compositionend:e=>(setTimeout(()=>{const{$cursor:i}=e.state.selection;i&&run({editor:n,from:i.pos,to:i.pos,text:"",rules:r,plugin:o})}),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;const{$cursor:s}=e.state.selection;return!!s&&run({editor:n,from:s.pos,to:s.pos,text:"\n",rules:r,plugin:o})}},isInputRules:!0});return o}function isPlainObject(e){return"Object"===function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function mergeDeep(e,n){const r={...e};return isPlainObject(e)&&isPlainObject(n)&&Object.keys(n).forEach(o=>{isPlainObject(n[o])&&isPlainObject(e[o])?r[o]=mergeDeep(e[o],n[o]):r[o]=n[o]}),r}var w=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const n=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new this.constructor({...this.config,...e});return n.parent=this,this.child=n,n.name="name"in e?e.name:n.parent.name,n}},E=class _Mark extends w{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n="function"==typeof e?e():e;return new _Mark(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(e=>(null==e?void 0:e.type.name)===n.name))return!1;const s=i.find(e=>(null==e?void 0:e.type.name)===n.name);return s&&r.removeStoredMark(s),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n="function"==typeof e?e():e;return super.extend(n)}};function isNumber(e){return"number"==typeof e}var C=class{constructor(e){this.find=e.find,this.handler=e.handler}},pasteRuleMatcherHandler=(e,n,r)=>{if(isRegExp(n))return[...e.matchAll(n)];const o=n(e,r);return o?o.map(n=>{const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(n.replaceWith)),r}):[]};var T=null,createClipboardPasteEvent=e=>{var n;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(n=r.clipboardData)||n.setData("text/html",e),r};function pasteRulesPlugin(e){const{editor:n,rules:r}=e;let o,i=null,c=!1,u=!1,p="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{o="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{o=null}const processEvent=({state:e,from:r,to:i,rule:s,pasteEvt:a})=>{const c=e.tr,u=createChainableState({state:e,transaction:c}),f=function run2(e){const{editor:n,state:r,from:o,to:i,rule:s,pasteEvent:a,dropEvent:c}=e,{commands:u,chain:p,can:f}=new g({editor:n,state:r}),b=[];return r.doc.nodesBetween(o,i,(e,n)=>{var g,k,v,x,w;if((null==(k=null==(g=e.type)?void 0:g.spec)?void 0:k.code)||!(e.isText||e.isTextblock||e.isInline))return;const E=null!=(w=null!=(x=null==(v=e.content)?void 0:v.size)?x:e.nodeSize)?w:0,C=Math.max(o,n),T=Math.min(i,n+E);if(C>=T)return;const _=e.isText?e.text||"":e.textBetween(C-n,T-n,void 0,"");pasteRuleMatcherHandler(_,s.find,a).forEach(e=>{if(void 0===e.index)return;const n=C+e.index+1,o=n+e[0].length,i={from:r.tr.mapping.map(n),to:r.tr.mapping.map(o)},g=s.handler({state:r,range:i,match:e,commands:u,chain:p,can:f,pasteEvent:a,dropEvent:c});b.push(g)})}),b.every(e=>null!==e)}({editor:n,state:u,from:Math.max(r-1,0),to:i.b-1,rule:s,pasteEvent:a,dropEvent:o});if(f&&c.steps.length){try{o="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{o=null}return p="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,c}};return r.map(e=>new s.Plugin({view(e){const handleDragstart=r=>{var o;i=(null==(o=e.dom.parentElement)?void 0:o.contains(r.target))?e.dom.parentElement:null,i&&(T=n)},handleDragend=()=>{T&&(T=null)};return window.addEventListener("dragstart",handleDragstart),window.addEventListener("dragend",handleDragend),{destroy(){window.removeEventListener("dragstart",handleDragstart),window.removeEventListener("dragend",handleDragend)}}},props:{handleDOMEvents:{drop:(e,n)=>{if(u=i===e.dom.parentElement,o=n,!u){const e=T;(null==e?void 0:e.isEditable)&&setTimeout(()=>{const n=e.state.selection;n&&e.commands.deleteRange({from:n.from,to:n.to})},10)}return!1},paste:(e,n)=>{var r;const o=null==(r=n.clipboardData)?void 0:r.getData("text/html");return p=n,c=!!(null==o?void 0:o.includes("data-pm-slice")),!1}}},appendTransaction:(n,r,o)=>{const i=n[0],s="paste"===i.getMeta("uiEvent")&&!c,f="drop"===i.getMeta("uiEvent")&&!u,g=i.getMeta("applyPasteRules"),b=!!g;if(!s&&!f&&!b)return;if(b){let{text:n}=g;"string"==typeof n||(n=getHTMLFromFragment(a.Fragment.from(n),o.schema));const{from:r}=g,i=r+n.length,s=createClipboardPasteEvent(n);return processEvent({rule:e,state:o,from:r,to:{b:i},pasteEvt:s})}const k=r.doc.content.findDiffStart(o.doc.content),v=r.doc.content.findDiffEnd(o.doc.content);return isNumber(k)&&v&&k!==v.b?processEvent({rule:e,state:o,from:k,to:v,pasteEvt:p}):void 0}}))}var _=class{constructor(e,n){this.splittableMarks=[],this.editor=n,this.baseExtensions=e,this.extensions=resolveExtensions(e),this.schema=getSchemaByResolvedExtensions(this.extensions,n),this.setupExtensions()}get commands(){return this.extensions.reduce((e,n)=>{const r=getExtensionField(n,"addCommands",{name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:this.editor,type:getSchemaTypeByName(n.name,this.schema)});return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return sortExtensions([...this.extensions].reverse()).flatMap(n=>{const r={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:getSchemaTypeByName(n.name,this.schema)},o=[],i=getExtensionField(n,"addKeyboardShortcuts",r);let s={};if("mark"===n.type&&getExtensionField(n,"exitable",r)&&(s.ArrowRight=()=>E.handleExit({editor:e,mark:n})),i){const n=Object.fromEntries(Object.entries(i()).map(([n,r])=>[n,()=>r({editor:e})]));s={...s,...n}}const a=(0,p.keymap)(s);o.push(a);const c=getExtensionField(n,"addInputRules",r);if(isExtensionRulesEnabled(n,e.options.enableInputRules)&&c){const n=c();if(n&&n.length){const r=inputRulesPlugin({editor:e,rules:n}),i=Array.isArray(r)?r:[r];o.push(...i)}}const u=getExtensionField(n,"addPasteRules",r);if(isExtensionRulesEnabled(n,e.options.enablePasteRules)&&u){const n=u();if(n&&n.length){const r=pasteRulesPlugin({editor:e,rules:n});o.push(...r)}}const f=getExtensionField(n,"addProseMirrorPlugins",r);if(f){const e=f();o.push(...e)}return o})}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=splitExtensions(this.extensions);return Object.fromEntries(n.filter(e=>!!getExtensionField(e,"addNodeView")).map(n=>{const r=this.attributes.filter(e=>e.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:getNodeType(n.name,this.schema)},i=getExtensionField(n,"addNodeView",o);if(!i)return[];const s=i();if(!s)return[];return[n.name,(o,i,a,c,u)=>{const p=getRenderedAttributes(o,r);return s({node:o,view:i,getPos:a,decorations:c,innerDecorations:u,editor:e,extension:n,HTMLAttributes:p})}]}))}dispatchTransaction(e){const{editor:n}=this;return sortExtensions([...this.extensions].reverse()).reduceRight((e,r)=>{const o={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:n,type:getSchemaTypeByName(r.name,this.schema)},i=getExtensionField(r,"dispatchTransaction",o);return i?n=>{i.call(o,{transaction:n,next:e})}:e},e)}get markViews(){const{editor:e}=this,{markExtensions:n}=splitExtensions(this.extensions);return Object.fromEntries(n.filter(e=>!!getExtensionField(e,"addMarkView")).map(n=>{const r=this.attributes.filter(e=>e.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:getMarkType(n.name,this.schema)},i=getExtensionField(n,"addMarkView",o);if(!i)return[];return[n.name,(o,s,a)=>{const c=getRenderedAttributes(o,r);return i()({mark:o,view:s,inline:a,editor:e,extension:n,HTMLAttributes:c,updateAttributes:n=>{updateMarkViewAttributes(o,e,n)}})}]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(e=>[e.name,e.storage])),e.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:getSchemaTypeByName(e.name,this.schema)};if("mark"===e.type){(null==(n=callOrReturn(getExtensionField(e,"keepOnSplit",r)))||n)&&this.splittableMarks.push(e.name)}const o=getExtensionField(e,"onBeforeCreate",r),i=getExtensionField(e,"onCreate",r),s=getExtensionField(e,"onUpdate",r),a=getExtensionField(e,"onSelectionUpdate",r),c=getExtensionField(e,"onTransaction",r),u=getExtensionField(e,"onFocus",r),p=getExtensionField(e,"onBlur",r),f=getExtensionField(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),p&&this.editor.on("blur",p),f&&this.editor.on("destroy",f)})}};_.resolve=resolveExtensions,_.sort=sortExtensions,_.flatten=flattenExtensions;var P={};__export(P,{ClipboardTextSerializer:()=>A,Commands:()=>N,Delete:()=>I,Drop:()=>z,Editable:()=>F,FocusEvents:()=>L,Keymap:()=>j,Paste:()=>V,Tabindex:()=>U,TextDirection:()=>H,focusEventsPluginKey:()=>B});var R=class _Extension extends w{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n="function"==typeof e?e():e;return new _Extension(n)}configure(e){return super.configure(e)}extend(e){const n="function"==typeof e?e():e;return super.extend(n)}},A=R.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new s.Plugin({key:new s.PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:n,schema:r}=e,{doc:o,selection:i}=n,{ranges:s}=i,a=Math.min(...s.map(e=>e.$from.pos)),c=Math.max(...s.map(e=>e.$to.pos)),u=getTextSerializersFromSchema(r);return getTextBetween(o,{from:a,to:c},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),N=R.create({name:"commands",addCommands(){return{...b}}}),I=R.create({name:"delete",onUpdate({transaction:e,appendedTransactions:n}){var r,i,s;const callback=()=>{var r,i,s,a;if(null!=(a=null==(s=null==(i=null==(r=this.editor.options.coreExtensionOptions)?void 0:r.delete)?void 0:i.filterTransaction)?void 0:s.call(i,e))?a:e.getMeta("y-sync$"))return;const c=combineTransactionSteps(e.before,[e,...n]);getChangedRanges(c).forEach(n=>{c.mapping.mapResult(n.oldRange.from).deletedAfter&&c.mapping.mapResult(n.oldRange.to).deletedBefore&&c.before.nodesBetween(n.oldRange.from,n.oldRange.to,(r,o)=>{const i=o+r.nodeSize-2,s=n.oldRange.from<=o&&i<=n.oldRange.to;this.editor.emit("delete",{type:"node",node:r,from:o,to:i,newFrom:c.mapping.map(o),newTo:c.mapping.map(i),deletedRange:n.oldRange,newRange:n.newRange,partial:!s,editor:this.editor,transaction:e,combinedTransform:c})})});const u=c.mapping;c.steps.forEach((n,r)=>{var i,s;if(n instanceof o.RemoveMarkStep){const o=u.slice(r).map(n.from,-1),a=u.slice(r).map(n.to),p=u.invert().map(o,-1),f=u.invert().map(a),g=null==(i=c.doc.nodeAt(o-1))?void 0:i.marks.some(e=>e.eq(n.mark)),b=null==(s=c.doc.nodeAt(a))?void 0:s.marks.some(e=>e.eq(n.mark));this.editor.emit("delete",{type:"mark",mark:n.mark,from:n.from,to:n.to,deletedRange:{from:p,to:f},newRange:{from:o,to:a},partial:Boolean(b||g),editor:this.editor,transaction:e,combinedTransform:c})}})};null==(s=null==(i=null==(r=this.editor.options.coreExtensionOptions)?void 0:r.delete)?void 0:i.async)||s?setTimeout(callback,0):callback()}}),z=R.create({name:"drop",addProseMirrorPlugins(){return[new s.Plugin({key:new s.PluginKey("tiptapDrop"),props:{handleDrop:(e,n,r,o)=>{this.editor.emit("drop",{editor:this.editor,event:n,slice:r,moved:o})}}})]}}),F=R.create({name:"editable",addProseMirrorPlugins(){return[new s.Plugin({key:new s.PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),B=new s.PluginKey("focusEvents"),L=R.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new s.Plugin({key:B,props:{handleDOMEvents:{focus:(n,r)=>{e.isFocused=!0;const o=e.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return n.dispatch(o),!1},blur:(n,r)=>{e.isFocused=!1;const o=e.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return n.dispatch(o),!1}}}})]}}),j=R.create({name:"keymap",addKeyboardShortcuts(){const handleBackspace=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:n})=>{const{selection:r,doc:o}=n,{empty:i,$anchor:a}=r,{pos:c,parent:u}=a,p=a.parent.isTextblock&&c>0?n.doc.resolve(c-1):a,f=p.parent.type.spec.isolating,g=a.pos-a.parentOffset,b=f&&1===p.parent.childCount?g===a.pos:s.Selection.atStart(o).from===c;return!(!i||!u.type.isTextblock||u.textContent.length||!b||b&&"paragraph"===a.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),handleDelete=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),e={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:handleBackspace,"Mod-Backspace":handleBackspace,"Shift-Backspace":handleBackspace,Delete:handleDelete,"Mod-Delete":handleDelete,"Mod-a":()=>this.editor.commands.selectAll()},n={...e},r={...e,"Ctrl-h":handleBackspace,"Alt-Backspace":handleBackspace,"Ctrl-d":handleDelete,"Ctrl-Alt-Backspace":handleDelete,"Alt-Delete":handleDelete,"Alt-d":handleDelete,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?r:n},addProseMirrorPlugins(){return[new s.Plugin({key:new s.PluginKey("clearDocument"),appendTransaction:(e,n,r)=>{if(e.some(e=>e.getMeta("composition")))return;const o=e.some(e=>e.docChanged)&&!n.doc.eq(r.doc),i=e.some(e=>e.getMeta("preventClearDocument"));if(!o||i)return;const{empty:a,from:c,to:u}=n.selection,p=s.Selection.atStart(n.doc).from,f=s.Selection.atEnd(n.doc).to;if(a||!(c===p&&u===f))return;if(!isNodeEmpty(r.doc))return;const b=r.tr,k=createChainableState({state:r,transaction:b}),{commands:v}=new g({editor:this.editor,state:k});return v.clearNodes(),b.steps.length?b:void 0}})]}}),V=R.create({name:"paste",addProseMirrorPlugins(){return[new s.Plugin({key:new s.PluginKey("tiptapPaste"),props:{handlePaste:(e,n,r)=>{this.editor.emit("paste",{editor:this.editor,event:n,slice:r})}}})]}}),U=R.create({name:"tabindex",addProseMirrorPlugins(){return[new s.Plugin({key:new s.PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),H=R.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:e}=splitExtensions(this.extensions);return[{types:e.filter(e=>"text"!==e.name).map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return!n||"ltr"!==n&&"rtl"!==n&&"auto"!==n?this.options.direction:n},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new s.Plugin({key:new s.PluginKey("textDirection"),props:{attributes:()=>{const e=this.options.direction;return e?{dir:e}:{}}}})]}}),q=class _NodePos{constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new _NodePos(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new _NodePos(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new _NodePos(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=n.isInline,a=this.pos+r+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(a);if(!o&&!s&&c.depth<=this.depth)return;const u=new _NodePos(c,this.editor,o,o||s?n:null);o&&(u.actualDepth=this.depth+1),e.push(u)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const e=o.node.attrs,r=Object.keys(n);for(let o=0;o<r.length;o+=1){const i=r[o];if(e[i]!==n[i])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||0===this.children.length)return o;const i=Object.keys(n);return this.children.forEach(s=>{if(!(r&&o.length>0)){if(s.node.type.name===e){i.every(e=>n[e]===s.node.attrs[e])&&o.push(s)}r&&o.length>0||(o=o.concat(s.querySelectorAll(e,n,r)))}}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}};function createStyleTag(e,n,r){const o=document.querySelector(`style[data-tiptap-style${r?`-${r}`:""}]`);if(null!==o)return o;const i=document.createElement("style");return n&&i.setAttribute("nonce",n),i.setAttribute("data-tiptap-style"+(r?`-${r}`:""),""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var K=class extends v{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:"undefined"!=typeof document?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:getUpdatedPosition,createMappablePosition:createMappablePosition},this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:n,moved:r})=>this.options.onDrop(e,n,r)),this.on("paste",({event:e,slice:n})=>this.options.onPaste(e,n)),this.on("delete",this.options.onDelete);const n=this.createDoc(),r=resolveFocusPosition(n,this.options.autofocus);this.editorState=s.EditorState.create({doc:n,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if("undefined"==typeof document)throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(!1!==this.options.autofocus&&null!==this.options.autofocus&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;(null==e?void 0:e.editor)&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{"function"==typeof this.css.remove?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&"undefined"!=typeof document&&(this.css=createStyleTag('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}',this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.editorView&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,n)=>{if(this.editorView)return this.editorView[n];if("state"===n)return this.editorState;if(n in e)return Reflect.get(e,n);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${n}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,n){const r=isFunction(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(e=>{const n="string"==typeof e?`${e}$`:e.key;r=r.filter(e=>!e.key.startsWith(n))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const r=[...this.options.enableCoreExtensions?[F,A.configure({blockSeparator:null==(n=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:n.blockSeparator}),N,L,j,U,z,V,I,H.configure({direction:this.options.textDirection})].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new _(r,this)}createCommandManager(){this.commandManager=new g({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(n){if(!(n instanceof Error&&["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(n.message)))throw n;this.emit("contentError",{editor:this,error:n,disableCollaboration:()=>{"collaboration"in this.storage&&"object"==typeof this.storage.collaboration&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),e=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){const{editorProps:n,enableExtensionDispatchTransaction:r}=this.options,o=n.dispatchTransaction||this.dispatchTransaction.bind(this),i=r?this.extensionManager.dispatchTransaction(o):o;this.editorView=new u.EditorView(e,{...n,attributes:{role:"textbox",...null==n?void 0:n.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach(e=>{var n;return null==(n=this.capturedTransaction)?void 0:n.step(e)}):void(this.capturedTransaction=e);const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection),i=r.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),!i)return;this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const a=r.findLast(e=>e.getMeta("focus")||e.getMeta("blur")),c=null==a?void 0:a.getMeta("focus"),u=null==a?void 0:a.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:a}),u&&this.emit("blur",{editor:this,event:u.event,transaction:a}),e.getMeta("preventUpdate")||!r.some(e=>e.docChanged)||s.doc.eq(n.doc)||this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return getAttributes(this.state,e)}isActive(e,n){const r="string"==typeof e?e:null,o="string"==typeof e?n:e;return isActive(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n="\n\n",textSerializers:r={}}=e||{};return getText(this.state.doc,{blockSeparator:n,textSerializers:{...getTextSerializersFromSchema(this.schema),...r}})}get isEmpty(){return isNodeEmpty(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,n;return null==(n=null==(e=this.editorView)?void 0:e.isDestroyed)||n}$node(e,n){var r;return(null==(r=this.$doc)?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return(null==(r=this.$doc)?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new q(n,this)}get $doc(){return this.$pos(0)}};function markInputRule(e){return new x({find:e.find,handler:({state:n,range:r,match:o})=>{const i=callOrReturn(e.getAttributes,void 0,o);if(!1===i||null===i)return null;const{tr:s}=n,a=o[o.length-1],c=o[0];if(a){const o=c.search(/\S/),u=r.from+c.indexOf(a),p=u+a.length;if(getMarksBetween(r.from,r.to,n.doc).filter(n=>n.mark.type.excluded.find(r=>r===e.type&&r!==n.mark.type)).filter(e=>e.to>u).length)return null;p<r.to&&s.delete(p,r.to),u>r.from&&s.delete(r.from+o,u);const f=r.from+o+a.length;s.addMark(r.from+o,f,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function nodeInputRule(e){return new x({find:e.find,handler:({state:n,range:r,match:o})=>{const i=callOrReturn(e.getAttributes,void 0,o)||{},{tr:s}=n,a=r.from;let c=r.to;const u=e.type.create(i);if(o[1]){let e=a+o[0].lastIndexOf(o[1]);e>c?e=c:c=e+o[1].length;const n=o[0][o[0].length-1];s.insertText(n,a+o[0].length-1),s.replaceWith(e,c,u)}else if(o[0]){const n=e.type.isInline?a:a-1;s.insert(n,e.type.create(i)).delete(s.mapping.map(a),s.mapping.map(c))}s.scrollIntoView()},undoable:e.undoable})}function textblockTypeInputRule(e){return new x({find:e.find,handler:({state:n,range:r,match:o})=>{const i=n.doc.resolve(r.from),s=callOrReturn(e.getAttributes,void 0,o)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)},undoable:e.undoable})}function textInputRule(e){return new x({find:e.find,handler:({state:n,range:r,match:o})=>{let i=e.replace,s=r.from;const a=r.to;if(o[1]){const e=o[0].lastIndexOf(o[1]);i+=o[0].slice(e+o[1].length),s+=e;const n=s-a;n>0&&(i=o[0].slice(e-n,e)+i,s=a)}n.tr.insertText(i,s,a)},undoable:e.undoable})}function wrappingInputRule(e){return new x({find:e.find,handler:({state:n,range:r,match:i,chain:s})=>{const a=callOrReturn(e.getAttributes,void 0,i)||{},c=n.tr.delete(r.from,r.to),u=c.doc.resolve(r.from).blockRange(),p=u&&(0,o.findWrapping)(u,e.type,a);if(!p)return null;if(c.wrap(u,p),e.keepMarks&&e.editor){const{selection:r,storedMarks:o}=n,{splittableMarks:i}=e.editor.extensionManager,s=o||r.$to.parentOffset&&r.$from.marks();if(s){const e=s.filter(e=>i.includes(e.type.name));c.ensureMarks(e)}}if(e.keepAttributes){const n="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";s().updateAttributes(n,a).run()}const f=c.doc.resolve(r.from-1).nodeBefore;f&&f.type===e.type&&(0,o.canJoin)(c.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(i,f))&&c.join(r.from-1)},undoable:e.undoable})}function Fragment6(e){return e.children}var h=(e,n)=>{if("slot"===e)return 0;if(e instanceof Function)return e(n);const{children:r,...o}=null!=n?n:{};if("svg"===e)throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,o,r]},W=class{constructor(e){var n,r,o,i,s,a;this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=e=>{if(!this.isResizing||!this.activeHandle)return;const n=e.clientX-this.startX,r=e.clientY-this.startY;this.handleResize(n,r)},this.handleTouchMove=e=>{if(!this.isResizing||!this.activeHandle)return;const n=e.touches[0];if(!n)return;const r=n.clientX-this.startX,o=n.clientY-this.startY;this.handleResize(r,o)},this.handleMouseUp=()=>{if(!this.isResizing)return;const e=this.element.offsetWidth,n=this.element.offsetHeight;this.onCommit(e,n),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=e=>{"Shift"===e.key&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=e=>{"Shift"===e.key&&(this.isShiftKeyPressed=!1)},this.node=e.node,this.editor=e.editor,this.element=e.element,this.contentElement=e.contentElement,this.getPos=e.getPos,this.onResize=e.onResize,this.onCommit=e.onCommit,this.onUpdate=e.onUpdate,(null==(n=e.options)?void 0:n.min)&&(this.minSize={...this.minSize,...e.options.min}),(null==(r=e.options)?void 0:r.max)&&(this.maxSize=e.options.max),(null==(o=null==e?void 0:e.options)?void 0:o.directions)&&(this.directions=e.options.directions),(null==(i=e.options)?void 0:i.preserveAspectRatio)&&(this.preserveAspectRatio=e.options.preserveAspectRatio),(null==(s=e.options)?void 0:s.className)&&(this.classNames={container:e.options.className.container||"",wrapper:e.options.className.wrapper||"",handle:e.options.className.handle||"",resizing:e.options.className.resizing||""}),(null==(a=e.options)?void 0:a.createCustomHandle)&&(this.createCustomHandle=e.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){var e;return null!=(e=this.contentElement)?e:null}handleEditorUpdate(){const e=this.editor.isEditable;e!==this.lastEditableState&&(this.lastEditableState=e,e?e&&0===this.handleMap.size&&this.attachHandles():this.removeHandles())}update(e,n,r){return e.type===this.node.type&&(this.node=e,!this.onUpdate||this.onUpdate(e,n,r))}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const e=document.createElement("div");return e.dataset.resizeContainer="",e.dataset.node=this.node.type.name,e.style.display="flex",this.classNames.container&&(e.className=this.classNames.container),e.appendChild(this.wrapper),e}createWrapper(){const e=document.createElement("div");return e.style.position="relative",e.style.display="block",e.dataset.resizeWrapper="",this.classNames.wrapper&&(e.className=this.classNames.wrapper),e.appendChild(this.element),e}createHandle(e){const n=document.createElement("div");return n.dataset.resizeHandle=e,n.style.position="absolute",this.classNames.handle&&(n.className=this.classNames.handle),n}positionHandle(e,n){const r=n.includes("top"),o=n.includes("bottom"),i=n.includes("left"),s=n.includes("right");r&&(e.style.top="0"),o&&(e.style.bottom="0"),i&&(e.style.left="0"),s&&(e.style.right="0"),"top"!==n&&"bottom"!==n||(e.style.left="0",e.style.right="0"),"left"!==n&&"right"!==n||(e.style.top="0",e.style.bottom="0")}attachHandles(){this.directions.forEach(e=>{let n;n=this.createCustomHandle?this.createCustomHandle(e):this.createHandle(e),n instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${e}") did not return an HTMLElement. Falling back to default handle.`),n=this.createHandle(e)),this.createCustomHandle||this.positionHandle(n,e),n.addEventListener("mousedown",n=>this.handleResizeStart(n,e)),n.addEventListener("touchstart",n=>this.handleResizeStart(n,e)),this.handleMap.set(e,n),this.wrapper.appendChild(n)})}removeHandles(){this.handleMap.forEach(e=>e.remove()),this.handleMap.clear()}applyInitialSize(){const e=this.node.attrs.width,n=this.node.attrs.height;e?(this.element.style.width=`${e}px`,this.initialWidth=e):this.initialWidth=this.element.offsetWidth,n?(this.element.style.height=`${n}px`,this.initialHeight=n):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(e,n){e.preventDefault(),e.stopPropagation(),this.isResizing=!0,this.activeHandle=n,"touches"in e?(this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY):(this.startX=e.clientX,this.startY=e.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight);this.getPos();this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(e,n){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:o,height:i}=this.calculateNewDimensions(this.activeHandle,e,n),s=this.applyConstraints(o,i,r);this.element.style.width=`${s.width}px`,this.element.style.height=`${s.height}px`,this.onResize&&this.onResize(s.width,s.height)}calculateNewDimensions(e,n,r){let o=this.startWidth,i=this.startHeight;const s=e.includes("right"),a=e.includes("left"),c=e.includes("bottom"),u=e.includes("top");s?o=this.startWidth+n:a&&(o=this.startWidth-n),c?i=this.startHeight+r:u&&(i=this.startHeight-r),"right"!==e&&"left"!==e||(o=this.startWidth+(s?n:-n)),"top"!==e&&"bottom"!==e||(i=this.startHeight+(c?r:-r));return this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(o,i,e):{width:o,height:i}}applyConstraints(e,n,r){var o,i,s,a;if(!r){let r=Math.max(this.minSize.width,e),s=Math.max(this.minSize.height,n);return(null==(o=this.maxSize)?void 0:o.width)&&(r=Math.min(this.maxSize.width,r)),(null==(i=this.maxSize)?void 0:i.height)&&(s=Math.min(this.maxSize.height,s)),{width:r,height:s}}let c=e,u=n;return c<this.minSize.width&&(c=this.minSize.width,u=c/this.aspectRatio),u<this.minSize.height&&(u=this.minSize.height,c=u*this.aspectRatio),(null==(s=this.maxSize)?void 0:s.width)&&c>this.maxSize.width&&(c=this.maxSize.width,u=c/this.aspectRatio),(null==(a=this.maxSize)?void 0:a.height)&&u>this.maxSize.height&&(u=this.maxSize.height,c=u*this.aspectRatio),{width:c,height:u}}applyAspectRatio(e,n,r){const o="top"===r||"bottom"===r;return"left"===r||"right"===r?{width:e,height:e/this.aspectRatio}:o?{width:n*this.aspectRatio,height:n}:{width:e,height:e/this.aspectRatio}}},G=W;function canInsertNode(e,n){const{selection:r}=e,{$from:o}=r;if(r instanceof s.NodeSelection){const e=o.index();return o.parent.canReplaceWith(e,e+1,n)}let i=o.depth;for(;i>=0;){const e=o.index(i);if(o.node(i).contentMatchAt(e).matchType(n))return!0;i-=1}return!1}function escapeForRegEx(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function isFirefox(){return"undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent)}function isString(e){return"string"==typeof e}var J={};function parseAttributes(e){if(!(null==e?void 0:e.trim()))return{};const n={},r=[],o=e.replace(/["']([^"']*)["']/g,e=>(r.push(e),`__QUOTED_${r.length-1}__`)),i=o.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const e=i.map(e=>e.trim().slice(1));n.class=e.join(" ")}const s=o.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(n.id=s[1]);Array.from(o.matchAll(/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g)).forEach(([,e,o])=>{var i;const s=parseInt((null==(i=o.match(/__QUOTED_(\d+)__/))?void 0:i[1])||"0",10),a=r[s];a&&(n[e]=a.slice(1,-1))});const a=o.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();if(a){a.split(/\s+/).filter(Boolean).forEach(e=>{e.match(/^[a-zA-Z][\w-]*$/)&&(n[e]=!0)})}return n}function serializeAttributes(e){if(!e||0===Object.keys(e).length)return"";const n=[];if(e.class){String(e.class).split(/\s+/).filter(Boolean).forEach(e=>n.push(`.${e}`))}return e.id&&n.push(`#${e.id}`),Object.entries(e).forEach(([e,r])=>{"class"!==e&&"id"!==e&&(!0===r?n.push(e):!1!==r&&null!=r&&n.push(`${e}="${String(r)}"`))}),n.join(" ")}function createAtomBlockMarkdownSpec(e){const{nodeName:n,name:r,parseAttributes:o=parseAttributes,serializeAttributes:i=serializeAttributes,defaultAttributes:s={},requiredAttributes:a=[],allowedAttributes:c}=e,u=r||n;return{parseMarkdown:(e,r)=>{const o={...s,...e.attributes};return r.createNode(n,o,[])},markdownTokenizer:{name:n,level:"block",start(e){var n;const r=new RegExp(`^:::${u}(?:\\s|$)`,"m"),o=null==(n=e.match(r))?void 0:n.index;return void 0!==o?o:-1},tokenize(e,r,i){const s=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),c=e.match(s);if(!c)return;const p=c[1]||"",f=o(p);return a.find(e=>!(e in f))?void 0:{type:n,raw:c[0],attributes:f}}},renderMarkdown:e=>{const n=(e=>{if(!c)return e;const n={};return c.forEach(r=>{r in e&&(n[r]=e[r])}),n})(e.attrs||{}),r=i(n);return`:::${u}${r?` {${r}}`:""} :::`}}}function createBlockMarkdownSpec(e){const{nodeName:n,name:r,getContent:o,parseAttributes:i=parseAttributes,serializeAttributes:s=serializeAttributes,defaultAttributes:a={},content:c="block",allowedAttributes:u}=e,p=r||n;return{parseMarkdown:(e,r)=>{let i;if(o){const n=o(e);i="string"==typeof n?[{type:"text",text:n}]:n}else i="block"===c?r.parseChildren(e.tokens||[]):r.parseInline(e.tokens||[]);const s={...a,...e.attributes};return r.createNode(n,s,i)},markdownTokenizer:{name:n,level:"block",start(e){var n;const r=new RegExp(`^:::${p}`,"m"),o=null==(n=e.match(r))?void 0:n.index;return void 0!==o?o:-1},tokenize(e,r,o){var s;const a=new RegExp(`^:::${p}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),u=e.match(a);if(!u)return;const[f,g=""]=u,b=i(g);let k=1;const v=f.length;let x="";const w=/^:::([\w-]*)(\s.*)?/gm,E=e.slice(v);for(w.lastIndex=0;;){const r=w.exec(E);if(null===r)break;const i=r.index,a=r[1];if(!(null==(s=r[2])?void 0:s.endsWith(":::")))if(a)k+=1;else if(k-=1,0===k){const s=E.slice(0,i);x=s.trim();const a=e.slice(0,v+i+r[0].length);let u=[];if(x)if("block"===c)for(u=o.blockTokens(s),u.forEach(e=>{!e.text||e.tokens&&0!==e.tokens.length||(e.tokens=o.inlineTokens(e.text))});u.length>0;){const e=u[u.length-1];if("paragraph"!==e.type||e.text&&""!==e.text.trim())break;u.pop()}else u=o.inlineTokens(x);return{type:n,raw:a,attributes:b,content:x,tokens:u}}}}},renderMarkdown:(e,n)=>{const r=(e=>{if(!u)return e;const n={};return u.forEach(r=>{r in e&&(n[r]=e[r])}),n})(e.attrs||{}),o=s(r),i=o?` {${o}}`:"",a=n.renderChildren(e.content||[],"\n\n");return`:::${p}${i}\n\n${a}\n\n:::`}}}function parseShortcodeAttributes(e){if(!e.trim())return{};const n={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let o=r.exec(e);for(;null!==o;){const[,i,s,a]=o;n[i]=s||a,o=r.exec(e)}return n}function serializeShortcodeAttributes(e){return Object.entries(e).filter(([,e])=>null!=e).map(([e,n])=>`${e}="${n}"`).join(" ")}function createInlineMarkdownSpec(e){const{nodeName:n,name:r,getContent:o,parseAttributes:i=parseShortcodeAttributes,serializeAttributes:s=serializeShortcodeAttributes,defaultAttributes:a={},selfClosing:c=!1,allowedAttributes:u}=e,p=r||n,f=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(e,r)=>{const i={...a,...e.attributes};if(c)return r.createNode(n,i);const s=o?o(e):e.content||"";return s?r.createNode(n,i,[r.createTextNode(s)]):r.createNode(n,i,[])},markdownTokenizer:{name:n,level:"inline",start(e){const n=c?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),r=e.match(n),o=null==r?void 0:r.index;return void 0!==o?o:-1},tokenize(e,r,o){const s=c?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),a=e.match(s);if(!a)return;let u="",p="";if(c){const[,e]=a;p=e}else{const[,e,n]=a;p=e,u=n||""}const g=i(p.trim());return{type:n,raw:a[0],content:u.trim(),attributes:g}}},renderMarkdown:e=>{let n="";o?n=o(e):e.content&&e.content.length>0&&(n=e.content.filter(e=>"text"===e.type).map(e=>e.text).join(""));const r=(e=>{if(!u)return e;const n={};return u.forEach(r=>{const o="string"==typeof r?r:r.name,i="string"==typeof r?void 0:r.skipIfDefault;if(o in e){const r=e[o];if(void 0!==i&&r===i)return;n[o]=r}}),n})(e.attrs||{}),i=s(r),a=i?` ${i}`:"";return c?`[${p}${a}]`:`[${p}${a}]${n}[/${p}]`}}}function parseIndentedBlocks(e,n,r){var o,i,s,a;const c=e.split("\n"),u=[];let p="",f=0;const g=n.baseIndentSize||2;for(;f<c.length;){const e=c[f],b=e.match(n.itemPattern);if(!b){if(u.length>0)break;if(""===e.trim()){f+=1,p=`${p}${e}\n`;continue}return}const k=n.extractItemData(b),{indentLevel:v,mainContent:x}=k;p=`${p}${e}\n`;const w=[x];for(f+=1;f<c.length;){const e=c[f];if(""===e.trim()){const n=c.slice(f+1).findIndex(e=>""!==e.trim());if(-1===n)break;if(((null==(i=null==(o=c[f+1+n].match(/^(\s*)/))?void 0:o[1])?void 0:i.length)||0)>v){w.push(e),p=`${p}${e}\n`,f+=1;continue}break}if(!(((null==(a=null==(s=e.match(/^(\s*)/))?void 0:s[1])?void 0:a.length)||0)>v))break;w.push(e),p=`${p}${e}\n`,f+=1}let E;const C=w.slice(1);if(C.length>0){const e=C.map(e=>e.slice(v+g)).join("\n");e.trim()&&(E=n.customNestedParser?n.customNestedParser(e):r.blockTokens(e))}const T=n.createToken(k,E);u.push(T)}if(0!==u.length)return{items:u,raw:p}}function renderNestedMarkdownContent(e,n,r,o){if(!e||!Array.isArray(e.content))return"";const i="function"==typeof r?r(o):r,[s,...a]=e.content,c=[`${i}${n.renderChildren([s])}`];return a&&a.length>0&&a.forEach(e=>{const r=n.renderChildren([e]);if(r){const e=r.split("\n").map(e=>e?n.indent(e):"").join("\n");c.push(e)}}),c.join("\n")}function updateMarkViewAttributes(e,n,r={}){const{state:o}=n,{doc:i,tr:s}=o,a=e;i.descendants((n,o)=>{const i=s.mapping.map(o),c=s.mapping.map(o)+n.nodeSize;let u=null;if(n.marks.forEach(e=>{if(e!==a)return!1;u=e}),!u)return;let p=!1;if(Object.keys(r).forEach(e=>{r[e]!==u.attrs[e]&&(p=!0)}),p){const n=e.type.create({...e.attrs,...r});s.removeMark(i,c,e.type),s.addMark(i,c,n)}}),s.docChanged&&n.view.dispatch(s)}__export(J,{createAtomBlockMarkdownSpec:()=>createAtomBlockMarkdownSpec,createBlockMarkdownSpec:()=>createBlockMarkdownSpec,createInlineMarkdownSpec:()=>createInlineMarkdownSpec,parseAttributes:()=>parseAttributes,parseIndentedBlocks:()=>parseIndentedBlocks,renderNestedMarkdownContent:()=>renderNestedMarkdownContent,serializeAttributes:()=>serializeAttributes});var Y=class{constructor(e,n,r){this.component=e,this.editor=n.editor,this.options={...r},this.mark=n.mark,this.HTMLAttributes=n.HTMLAttributes}get dom(){return this.editor.view.dom}get contentDOM(){return null}updateAttributes(e,n){updateMarkViewAttributes(n||this.mark,this.editor,e)}ignoreMutation(e){if(!this.dom||!this.contentDOM)return!0;if("function"==typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:e});if("selection"===e.type)return!1;if(this.dom.contains(e.target)&&"childList"===e.type&&(isiOS()||isAndroid())&&this.editor.isFocused){if([...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))return!1}return this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)}},X=class _Node extends w{constructor(){super(...arguments),this.type="node"}static create(e={}){const n="function"==typeof e?e():e;return new _Node(n)}configure(e){return super.configure(e)}extend(e){const n="function"==typeof e?e():e;return super.extend(n)}},Z=class{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,i,a,c,u;const{view:p}=this.editor,f=e.target,g=3===f.nodeType?null==(n=f.parentElement)?void 0:n.closest("[data-drag-handle]"):f.closest("[data-drag-handle]");if(!this.dom||(null==(r=this.contentDOM)?void 0:r.contains(f))||!g)return;let b=0,k=0;if(this.dom!==g){const n=this.dom.getBoundingClientRect(),r=g.getBoundingClientRect(),s=null!=(i=e.offsetX)?i:null==(o=e.nativeEvent)?void 0:o.offsetX,u=null!=(c=e.offsetY)?c:null==(a=e.nativeEvent)?void 0:a.offsetY;b=r.x-n.x+s,k=r.y-n.y+u}const v=this.dom.cloneNode(!0);try{const e=this.dom.getBoundingClientRect();v.style.width=`${Math.round(e.width)}px`,v.style.height=`${Math.round(e.height)}px`,v.style.boxSizing="border-box",v.style.pointerEvents="none"}catch{}let x=null;try{x=document.createElement("div"),x.style.position="absolute",x.style.top="-9999px",x.style.left="-9999px",x.style.pointerEvents="none",x.appendChild(v),document.body.appendChild(x),null==(u=e.dataTransfer)||u.setDragImage(v,b,k)}finally{x&&setTimeout(()=>{try{null==x||x.remove()}catch{}},0)}const w=this.getPos();if("number"!=typeof w)return;const E=s.NodeSelection.create(p.state.doc,w),C=p.state.tr.setSelection(E);p.dispatch(C)}stopEvent(e){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(null==(n=this.contentDOM)?void 0:n.contains(r))))return!1;const o=e.type.startsWith("drag"),i="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!o)return!0;const{isEditable:a}=this.editor,{isDragging:c}=this,u=!!this.node.type.spec.draggable,p=s.NodeSelection.isSelectable(this.node),f="copy"===e.type,g="paste"===e.type,b="cut"===e.type,k="mousedown"===e.type;if(!u&&p&&o&&e.target===this.dom&&e.preventDefault(),u&&o&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(u&&a&&!c&&k){const e=r.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||i||f||g||b||k&&p)}ignoreMutation(e){if(!this.dom||!this.contentDOM)return!0;if("function"==typeof this.options.ignoreMutation)return this.options.ignoreMutation({mutation:e});if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===e.type)return!1;if(this.dom.contains(e.target)&&"childList"===e.type&&(isiOS()||isAndroid())&&this.editor.isFocused){if([...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))return!1}return this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return"number"==typeof r&&(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if("number"!=typeof e)return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}};function markPasteRule(e){return new C({find:e.find,handler:({state:n,range:r,match:o,pasteEvent:i})=>{const s=callOrReturn(e.getAttributes,void 0,o,i);if(!1===s||null===s)return null;const{tr:a}=n,c=o[o.length-1],u=o[0];let p=r.to;if(c){const o=u.search(/\S/),i=r.from+u.indexOf(c),f=i+c.length;if(getMarksBetween(r.from,r.to,n.doc).filter(n=>n.mark.type.excluded.find(r=>r===e.type&&r!==n.mark.type)).filter(e=>e.to>i).length)return null;f<r.to&&a.delete(f,r.to),i>r.from&&a.delete(r.from+o,i),p=r.from+o+c.length,a.addMark(r.from+o,p,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}function nodePasteRule(e){return new C({find:e.find,handler({match:n,chain:r,range:o,pasteEvent:i}){const s=callOrReturn(e.getAttributes,void 0,n,i),a=callOrReturn(e.getContent,void 0,s);if(!1===s||null===s)return null;const c={type:e.type.name,attrs:s};a&&(c.content=a),n.input&&r().deleteRange(o).insertContentAt(o.from,c)}})}function textPasteRule(e){return new C({find:e.find,handler:({state:n,range:r,match:o})=>{let i=e.replace,s=r.from;const a=r.to;if(o[1]){const e=o[0].lastIndexOf(o[1]);i+=o[0].slice(e+o[1].length),s+=e;const n=s-a;n>0&&(i=o[0].slice(e-n,e)+i,s=a)}n.tr.insertText(i,s,a)}})}var Q=class{constructor(e){this.transaction=e,this.currentStep=this.transaction.steps.length}map(e){let n=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((e,r)=>{const o=r.getMap().mapResult(e);return o.deleted&&(n=!0),o.pos},e),deleted:n}}}},"./packages/node_modules/@tiptap/core/dist/jsx-runtime/jsx-runtime.js":function(e,n,r){"use strict";function Fragment(e){return e.children}r.r(n),r.d(n,{Fragment:function(){return Fragment},createElement:function(){return h},h:function(){return h},jsx:function(){return h},jsxDEV:function(){return h},jsxs:function(){return h}});var h=(e,n)=>{if("slot"===e)return 0;if(e instanceof Function)return e(n);const{children:r,...o}=null!=n?n:{};if("svg"===e)throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,o,r]}},"./packages/node_modules/@tiptap/extension-bold/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Bold:function(){return p},default:function(){return f},starInputRegex:function(){return s},starPasteRegex:function(){return a},underscoreInputRegex:function(){return c},underscorePasteRegex:function(){return u}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=r("./packages/node_modules/@tiptap/core/dist/jsx-runtime/jsx-runtime.js"),s=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,a=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,c=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,u=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,p=o.Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return(0,i.jsx)("strong",{...(0,o.mergeAttributes)(this.options.HTMLAttributes,e),children:(0,i.jsx)("slot",{})})},markdownTokenName:"strong",parseMarkdown:(e,n)=>n.applyMark("bold",n.parseInline(e.tokens||[])),renderMarkdown:(e,n)=>`**${n.renderChildren(e)}**`,addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,o.markInputRule)({find:s,type:this.type}),(0,o.markInputRule)({find:c,type:this.type})]},addPasteRules(){return[(0,o.markPasteRule)({find:a,type:this.type}),(0,o.markPasteRule)({find:u,type:this.type})]}}),f=p},"./packages/node_modules/@tiptap/extension-document/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Document:function(){return o},default:function(){return i}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js").Node.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(e,n)=>e.content?n.renderChildren(e.content,"\n\n"):""}),i=o},"./packages/node_modules/@tiptap/extension-hard-break/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{HardBreak:function(){return i},default:function(){return s}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=o.Node.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",(0,o.mergeAttributes)(this.options.HTMLAttributes,e)]},renderText(){return"\n"},renderMarkdown:()=>"  \n",parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:e,chain:n,state:r,editor:o})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:e,storedMarks:i}=r;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=o.extensionManager,c=i||e.$to.parentOffset&&e.$from.marks();return n().insertContent({type:this.name}).command(({tr:e,dispatch:n})=>{if(n&&c&&s){const n=c.filter(e=>a.includes(e.type.name));e.ensureMarks(n)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),s=i},"./packages/node_modules/@tiptap/extension-heading/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Heading:function(){return i},default:function(){return s}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=o.Node.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:n}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,(0,o.mergeAttributes)(this.options.HTMLAttributes,n),0]},parseMarkdown:(e,n)=>n.createNode("heading",{level:e.depth||1},n.parseInline(e.tokens||[])),renderMarkdown:(e,n)=>{var r;const o=(null==(r=e.attrs)?void 0:r.level)?parseInt(e.attrs.level,10):1,i="#".repeat(o);return e.content?`${i} ${n.renderChildren(e.content)}`:""},addCommands(){return{setHeading:e=>({commands:n})=>!!this.options.levels.includes(e.level)&&n.setNode(this.name,e),toggleHeading:e=>({commands:n})=>!!this.options.levels.includes(e.level)&&n.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,n)=>({...e,[`Mod-Alt-${n}`]:()=>this.editor.commands.toggleHeading({level:n})}),{})},addInputRules(){return this.options.levels.map(e=>(0,o.textblockTypeInputRule)({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),s=i},"./packages/node_modules/@tiptap/extension-italic/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Italic:function(){return u},default:function(){return p},starInputRegex:function(){return i},starPasteRegex:function(){return s},underscoreInputRegex:function(){return a},underscorePasteRegex:function(){return c}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,s=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,a=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,c=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,u=o.Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",(0,o.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(e,n)=>n.applyMark("italic",n.parseInline(e.tokens||[])),renderMarkdown:(e,n)=>`*${n.renderChildren(e)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,o.markInputRule)({find:i,type:this.type}),(0,o.markInputRule)({find:a,type:this.type})]},addPasteRules(){return[(0,o.markPasteRule)({find:s,type:this.type}),(0,o.markPasteRule)({find:c,type:this.type})]}}),p=u},"./packages/node_modules/@tiptap/extension-link/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Link:function(){return g},default:function(){return b},isAllowedUri:function(){return isAllowedUri},pasteRegex:function(){return f}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=r("./packages/node_modules/linkifyjs/dist/linkify.mjs"),s=r("./packages/node_modules/@tiptap/pm/dist/state/index.js"),a="[\0- -\u2029]",c=new RegExp(a),u=new RegExp(`${a}$`),p=new RegExp(a,"g");var f=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/gi;function isAllowedUri(e,n){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return n&&n.forEach(e=>{const n="string"==typeof e?e:e.scheme;n&&r.push(n)}),!e||e.replace(p,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var g=o.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{"string"!=typeof e?(0,i.registerCustomProtocol)(e.scheme,e.optionalSlashes):(0,i.registerCustomProtocol)(e)})},onDestroy(){(0,i.reset)()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,n)=>!!isAllowedUri(e,n.protocols),validate:e=>!!e,shouldAutoLink:e=>{const n=/^[a-z][a-z0-9+.-]*:\/\//i.test(e),r=/^[a-z][a-z0-9+.-]*:/i.test(e);if(n||r&&!e.includes("@"))return!0;const o=(e.includes("@")?e.split("@").pop():e).split(/[/?#:]/)[0];return!/^\d{1,3}(\.\d{1,3}){3}$/.test(o)&&!!/\./.test(o)}}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const n=e.getAttribute("href");return!(!n||!this.options.isAllowedUri(n,{defaultValidate:e=>!!isAllowedUri(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:e=>!!isAllowedUri(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",(0,o.mergeAttributes)(this.options.HTMLAttributes,e),0]:["a",(0,o.mergeAttributes)(this.options.HTMLAttributes,{...e,href:""}),0]},markdownTokenName:"link",parseMarkdown:(e,n)=>n.applyMark("link",n.parseInline(e.tokens||[]),{href:e.href,title:e.title||null}),renderMarkdown:(e,n)=>{var r,o,i,s;const a=null!=(o=null==(r=e.attrs)?void 0:r.href)?o:"",c=null!=(s=null==(i=e.attrs)?void 0:i.title)?s:"",u=n.renderChildren(e);return c?`[${u}](${a} "${c}")`:`[${u}](${a})`},addCommands(){return{setLink:e=>({chain:n})=>{const{href:r}=e;return!!this.options.isAllowedUri(r,{defaultValidate:e=>!!isAllowedUri(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&n().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>({chain:n})=>{const{href:r}=e||{};return!(r&&!this.options.isAllowedUri(r,{defaultValidate:e=>!!isAllowedUri(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&n().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,o.markPasteRule)({find:e=>{const n=[];if(e){const{protocols:r,defaultProtocol:o}=this.options,s=(0,i.find)(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!isAllowedUri(e,r),protocols:r,defaultProtocol:o}));s.length&&s.forEach(e=>{this.options.shouldAutoLink(e.value)&&n.push({text:e.value,data:{href:e.href},index:e.start})})}return n},type:this.type,getAttributes:e=>{var n;return{href:null==(n=e.data)?void 0:n.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:n,defaultProtocol:r}=this.options;return this.options.autolink&&e.push(function autolink(e){return new s.Plugin({key:new s.PluginKey("autolink"),appendTransaction:(n,r,s)=>{const a=n.some(e=>e.docChanged)&&!r.doc.eq(s.doc),p=n.some(e=>e.getMeta("preventAutolink"));if(!a||p)return;const{tr:f}=s,g=(0,o.combineTransactionSteps)(r.doc,[...n]);return(0,o.getChangedRanges)(g).forEach(({newRange:n})=>{const r=(0,o.findChildrenInRange)(s.doc,n,e=>e.isTextblock);let a,p;if(r.length>1)a=r[0],p=s.doc.textBetween(a.pos,a.pos+a.node.nodeSize,void 0," ");else if(r.length){const e=s.doc.textBetween(n.from,n.to," "," ");if(!u.test(e))return;a=r[0],p=s.doc.textBetween(a.pos,n.to,void 0," ")}if(a&&p){const n=p.split(c).filter(Boolean);if(n.length<=0)return!1;const r=n[n.length-1],u=a.pos+p.lastIndexOf(r);if(!r)return!1;const g=(0,i.tokenize)(r).map(n=>n.toObject(e.defaultProtocol));if(!function isValidLinkStructure(e){return 1===e.length?e[0].isLink:!(3!==e.length||!e[1].isLink)&&["()","[]"].includes(e[0].value+e[2].value)}(g))return!1;g.filter(e=>e.isLink).map(e=>({...e,from:u+e.start+1,to:u+e.end+1})).filter(e=>!s.schema.marks.code||!s.doc.rangeHasMark(e.from,e.to,s.schema.marks.code)).filter(n=>e.validate(n.value)).filter(n=>e.shouldAutoLink(n.value)).forEach(n=>{(0,o.getMarksBetween)(n.from,n.to,s.doc).some(n=>n.mark.type===e.type)||f.addMark(n.from,n.to,e.type.create({href:n.href}))})}}),f.steps.length?f:void 0}})}({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!isAllowedUri(e,n),protocols:n,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),e.push(function clickHandler(e){return new s.Plugin({key:new s.PluginKey("handleClickLink"),props:{handleClick:(n,r,i)=>{var s,a;if(0!==i.button)return!1;if(!n.editable)return!1;let c=null;if(i.target instanceof HTMLAnchorElement)c=i.target;else{const n=i.target;if(!n)return!1;const r=e.editor.view.dom;c=n.closest("a"),c&&!r.contains(c)&&(c=null)}if(!c)return!1;let u=!1;if(e.enableClickSelection&&(u=e.editor.commands.extendMarkRange(e.type.name)),e.openOnClick){const r=(0,o.getAttributes)(n.state,e.type.name),i=null!=(s=c.href)?s:r.href,p=null!=(a=c.target)?a:r.target;i&&(window.open(i,p),u=!0)}return u}}})}({type:this.type,editor:this.editor,openOnClick:"whenNotEditable"===this.options.openOnClick||this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(function pasteHandler(e){return new s.Plugin({key:new s.PluginKey("handlePasteLink"),props:{handlePaste:(n,r,o)=>{const{shouldAutoLink:s}=e,{state:a}=n,{selection:c}=a,{empty:u}=c;if(u)return!1;let p="";o.content.forEach(e=>{p+=e.textContent});const f=(0,i.find)(p,{defaultProtocol:e.defaultProtocol}).find(e=>e.isLink&&e.value===p);return!(!p||!f||void 0!==s&&!s(f.value))&&e.editor.commands.setMark(e.type,{href:f.href})}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),e}}),b=g},"./packages/node_modules/@tiptap/extension-paragraph/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Paragraph:function(){return s},default:function(){return a}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i="&nbsp;",s=o.Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",(0,o.mergeAttributes)(this.options.HTMLAttributes,e),0]},parseMarkdown:(e,n)=>{const r=e.tokens||[];if(1===r.length&&"image"===r[0].type)return n.parseChildren([r[0]]);const o=n.parseInline(r);return 1!==o.length||"text"!==o[0].type||o[0].text!==i&&""!==o[0].text?n.createNode("paragraph",void 0,o):n.createNode("paragraph",void 0,[])},renderMarkdown:(e,n)=>{if(!e)return"";const r=Array.isArray(e.content)?e.content:[];return 0===r.length?i:n.renderChildren(r)},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),a=s},"./packages/node_modules/@tiptap/extension-strike/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Strike:function(){return a},default:function(){return c},inputRegex:function(){return i},pasteRegex:function(){return s}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,s=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,a=o.Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:e}){return["s",(0,o.mergeAttributes)(this.options.HTMLAttributes,e),0]},markdownTokenName:"del",parseMarkdown:(e,n)=>n.applyMark("strike",n.parseInline(e.tokens||[])),renderMarkdown:(e,n)=>`~~${n.renderChildren(e)}~~`,addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,o.markInputRule)({find:i,type:this.type})]},addPasteRules(){return[(0,o.markPasteRule)({find:s,type:this.type})]}}),c=a},"./packages/node_modules/@tiptap/extension-subscript/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Subscript:function(){return i},default:function(){return s}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=o.Mark.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(e){return"sub"===e&&null}}]},renderHTML({HTMLAttributes:e}){return["sub",(0,o.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setSubscript:()=>({commands:e})=>e.setMark(this.name),toggleSubscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSubscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),s=i},"./packages/node_modules/@tiptap/extension-superscript/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Superscript:function(){return i},default:function(){return s}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=o.Mark.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(e){return"super"===e&&null}}]},renderHTML({HTMLAttributes:e}){return["sup",(0,o.mergeAttributes)(this.options.HTMLAttributes,e),0]},addCommands(){return{setSuperscript:()=>({commands:e})=>e.setMark(this.name),toggleSuperscript:()=>({commands:e})=>e.toggleMark(this.name),unsetSuperscript:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),s=i},"./packages/node_modules/@tiptap/extension-text/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Text:function(){return o},default:function(){return i}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js").Node.create({name:"text",group:"inline",parseMarkdown:e=>({type:"text",text:e.text||""}),renderMarkdown:e=>e.text||""}),i=o},"./packages/node_modules/@tiptap/extension-underline/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Underline:function(){return i},default:function(){return s}});var o=r("./packages/node_modules/@tiptap/core/dist/index.js"),i=o.Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}]},renderHTML({HTMLAttributes:e}){return["u",(0,o.mergeAttributes)(this.options.HTMLAttributes,e),0]},parseMarkdown(e,n){return n.applyMark(this.name||"underline",n.parseInline(e.tokens||[]))},renderMarkdown(e,n){return`++${n.renderChildren(e)}++`},markdownTokenizer:{name:"underline",level:"inline",start(e){return e.indexOf("++")},tokenize(e,n,r){const o=/^(\+\+)([\s\S]+?)(\+\+)/.exec(e);if(!o)return;const i=o[2].trim();return{type:"underline",raw:o[0],text:i,tokens:r.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),s=i},"./packages/node_modules/@tiptap/pm/dist/commands/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{autoJoin:function(){return o.autoJoin},baseKeymap:function(){return o.baseKeymap},chainCommands:function(){return o.chainCommands},createParagraphNear:function(){return o.createParagraphNear},deleteSelection:function(){return o.deleteSelection},exitCode:function(){return o.exitCode},joinBackward:function(){return o.joinBackward},joinDown:function(){return o.joinDown},joinForward:function(){return o.joinForward},joinTextblockBackward:function(){return o.joinTextblockBackward},joinTextblockForward:function(){return o.joinTextblockForward},joinUp:function(){return o.joinUp},lift:function(){return o.lift},liftEmptyBlock:function(){return o.liftEmptyBlock},macBaseKeymap:function(){return o.macBaseKeymap},newlineInCode:function(){return o.newlineInCode},pcBaseKeymap:function(){return o.pcBaseKeymap},selectAll:function(){return o.selectAll},selectNodeBackward:function(){return o.selectNodeBackward},selectNodeForward:function(){return o.selectNodeForward},selectParentNode:function(){return o.selectParentNode},selectTextblockEnd:function(){return o.selectTextblockEnd},selectTextblockStart:function(){return o.selectTextblockStart},setBlockType:function(){return o.setBlockType},splitBlock:function(){return o.splitBlock},splitBlockAs:function(){return o.splitBlockAs},splitBlockKeepMarks:function(){return o.splitBlockKeepMarks},toggleMark:function(){return o.toggleMark},wrapIn:function(){return o.wrapIn}});var o=r("./packages/node_modules/prosemirror-commands/dist/index.js")},"./packages/node_modules/@tiptap/pm/dist/keymap/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{keydownHandler:function(){return o.keydownHandler},keymap:function(){return o.keymap}});var o=r("./packages/node_modules/prosemirror-keymap/dist/index.js")},"./packages/node_modules/@tiptap/pm/dist/model/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{ContentMatch:function(){return o.ContentMatch},DOMParser:function(){return o.DOMParser},DOMSerializer:function(){return o.DOMSerializer},Fragment:function(){return o.Fragment},Mark:function(){return o.Mark},MarkType:function(){return o.MarkType},Node:function(){return o.Node},NodeRange:function(){return o.NodeRange},NodeType:function(){return o.NodeType},ReplaceError:function(){return o.ReplaceError},ResolvedPos:function(){return o.ResolvedPos},Schema:function(){return o.Schema},Slice:function(){return o.Slice}});var o=r("./packages/node_modules/prosemirror-model/dist/index.js")},"./packages/node_modules/@tiptap/pm/dist/schema-list/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{addListNodes:function(){return o.addListNodes},bulletList:function(){return o.bulletList},liftListItem:function(){return o.liftListItem},listItem:function(){return o.listItem},orderedList:function(){return o.orderedList},sinkListItem:function(){return o.sinkListItem},splitListItem:function(){return o.splitListItem},splitListItemKeepMarks:function(){return o.splitListItemKeepMarks},wrapInList:function(){return o.wrapInList},wrapRangeInList:function(){return o.wrapRangeInList}});var o=r("./packages/node_modules/prosemirror-schema-list/dist/index.js")},"./packages/node_modules/@tiptap/pm/dist/state/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{AllSelection:function(){return o.AllSelection},EditorState:function(){return o.EditorState},NodeSelection:function(){return o.NodeSelection},Plugin:function(){return o.Plugin},PluginKey:function(){return o.PluginKey},Selection:function(){return o.Selection},SelectionRange:function(){return o.SelectionRange},TextSelection:function(){return o.TextSelection},Transaction:function(){return o.Transaction}});var o=r("./packages/node_modules/prosemirror-state/dist/index.js")},"./packages/node_modules/@tiptap/pm/dist/transform/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{AddMarkStep:function(){return o.AddMarkStep},AddNodeMarkStep:function(){return o.AddNodeMarkStep},AttrStep:function(){return o.AttrStep},DocAttrStep:function(){return o.DocAttrStep},MapResult:function(){return o.MapResult},Mapping:function(){return o.Mapping},RemoveMarkStep:function(){return o.RemoveMarkStep},RemoveNodeMarkStep:function(){return o.RemoveNodeMarkStep},ReplaceAroundStep:function(){return o.ReplaceAroundStep},ReplaceStep:function(){return o.ReplaceStep},Step:function(){return o.Step},StepMap:function(){return o.StepMap},StepResult:function(){return o.StepResult},Transform:function(){return o.Transform},TransformError:function(){return o.TransformError},canJoin:function(){return o.canJoin},canSplit:function(){return o.canSplit},dropPoint:function(){return o.dropPoint},findWrapping:function(){return o.findWrapping},insertPoint:function(){return o.insertPoint},joinPoint:function(){return o.joinPoint},liftTarget:function(){return o.liftTarget},replaceStep:function(){return o.replaceStep}});var o=r("./packages/node_modules/prosemirror-transform/dist/index.js")},"./packages/node_modules/@tiptap/pm/dist/view/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Decoration:function(){return o.Decoration},DecorationSet:function(){return o.DecorationSet},EditorView:function(){return o.EditorView},__endComposition:function(){return o.__endComposition},__parseFromClipboard:function(){return o.__parseFromClipboard}});var o=r("./packages/node_modules/prosemirror-view/dist/index.js")},"./packages/node_modules/@tiptap/react/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{CommandManager:function(){return c.CommandManager},Editor:function(){return c.Editor},EditorConsumer:function(){return T},EditorContent:function(){return b},EditorContext:function(){return C},EditorProvider:function(){return EditorProvider},Extendable:function(){return c.Extendable},Extension:function(){return c.Extension},Fragment:function(){return c.Fragment},InputRule:function(){return c.InputRule},MappablePosition:function(){return c.MappablePosition},Mark:function(){return c.Mark},MarkView:function(){return c.MarkView},MarkViewContent:function(){return MarkViewContent},Node:function(){return c.Node},NodePos:function(){return c.NodePos},NodeView:function(){return c.NodeView},NodeViewContent:function(){return NodeViewContent},NodeViewWrapper:function(){return P},PasteRule:function(){return c.PasteRule},PureEditorContent:function(){return f},ReactMarkView:function(){return N},ReactMarkViewContext:function(){return A},ReactMarkViewRenderer:function(){return ReactMarkViewRenderer},ReactNodeView:function(){return I},ReactNodeViewContentProvider:function(){return ReactNodeViewContentProvider},ReactNodeViewContext:function(){return _},ReactNodeViewRenderer:function(){return ReactNodeViewRenderer},ReactRenderer:function(){return R},ResizableNodeView:function(){return c.ResizableNodeView},ResizableNodeview:function(){return c.ResizableNodeview},Tiptap:function(){return F},TiptapContent:function(){return TiptapContent},TiptapContext:function(){return z},TiptapWrapper:function(){return TiptapWrapper},Tracker:function(){return c.Tracker},callOrReturn:function(){return c.callOrReturn},canInsertNode:function(){return c.canInsertNode},combineTransactionSteps:function(){return c.combineTransactionSteps},commands:function(){return c.commands},createAtomBlockMarkdownSpec:function(){return c.createAtomBlockMarkdownSpec},createBlockMarkdownSpec:function(){return c.createBlockMarkdownSpec},createChainableState:function(){return c.createChainableState},createDocument:function(){return c.createDocument},createElement:function(){return c.createElement},createInlineMarkdownSpec:function(){return c.createInlineMarkdownSpec},createMappablePosition:function(){return c.createMappablePosition},createNodeFromContent:function(){return c.createNodeFromContent},createStyleTag:function(){return c.createStyleTag},defaultBlockAt:function(){return c.defaultBlockAt},deleteProps:function(){return c.deleteProps},elementFromString:function(){return c.elementFromString},escapeForRegEx:function(){return c.escapeForRegEx},extensions:function(){return c.extensions},findChildren:function(){return c.findChildren},findChildrenInRange:function(){return c.findChildrenInRange},findDuplicates:function(){return c.findDuplicates},findParentNode:function(){return c.findParentNode},findParentNodeClosestToPos:function(){return c.findParentNodeClosestToPos},flattenExtensions:function(){return c.flattenExtensions},fromString:function(){return c.fromString},generateHTML:function(){return c.generateHTML},generateJSON:function(){return c.generateJSON},generateText:function(){return c.generateText},getAttributes:function(){return c.getAttributes},getAttributesFromExtensions:function(){return c.getAttributesFromExtensions},getChangedRanges:function(){return c.getChangedRanges},getDebugJSON:function(){return c.getDebugJSON},getExtensionField:function(){return c.getExtensionField},getHTMLFromFragment:function(){return c.getHTMLFromFragment},getMarkAttributes:function(){return c.getMarkAttributes},getMarkRange:function(){return c.getMarkRange},getMarkType:function(){return c.getMarkType},getMarksBetween:function(){return c.getMarksBetween},getNodeAtPosition:function(){return c.getNodeAtPosition},getNodeAttributes:function(){return c.getNodeAttributes},getNodeType:function(){return c.getNodeType},getRenderedAttributes:function(){return c.getRenderedAttributes},getSchema:function(){return c.getSchema},getSchemaByResolvedExtensions:function(){return c.getSchemaByResolvedExtensions},getSchemaTypeByName:function(){return c.getSchemaTypeByName},getSchemaTypeNameByName:function(){return c.getSchemaTypeNameByName},getSplittedAttributes:function(){return c.getSplittedAttributes},getText:function(){return c.getText},getTextBetween:function(){return c.getTextBetween},getTextContentFromNodes:function(){return c.getTextContentFromNodes},getTextSerializersFromSchema:function(){return c.getTextSerializersFromSchema},getUpdatedPosition:function(){return c.getUpdatedPosition},h:function(){return c.h},injectExtensionAttributesToParseRule:function(){return c.injectExtensionAttributesToParseRule},inputRulesPlugin:function(){return c.inputRulesPlugin},isActive:function(){return c.isActive},isAndroid:function(){return c.isAndroid},isAtEndOfNode:function(){return c.isAtEndOfNode},isAtStartOfNode:function(){return c.isAtStartOfNode},isEmptyObject:function(){return c.isEmptyObject},isExtensionRulesEnabled:function(){return c.isExtensionRulesEnabled},isFirefox:function(){return c.isFirefox},isFunction:function(){return c.isFunction},isList:function(){return c.isList},isMacOS:function(){return c.isMacOS},isMarkActive:function(){return c.isMarkActive},isNodeActive:function(){return c.isNodeActive},isNodeEmpty:function(){return c.isNodeEmpty},isNodeSelection:function(){return c.isNodeSelection},isNumber:function(){return c.isNumber},isPlainObject:function(){return c.isPlainObject},isRegExp:function(){return c.isRegExp},isSafari:function(){return c.isSafari},isString:function(){return c.isString},isTextSelection:function(){return c.isTextSelection},isiOS:function(){return c.isiOS},markInputRule:function(){return c.markInputRule},markPasteRule:function(){return c.markPasteRule},markdown:function(){return c.markdown},mergeAttributes:function(){return c.mergeAttributes},mergeDeep:function(){return c.mergeDeep},minMax:function(){return c.minMax},nodeInputRule:function(){return c.nodeInputRule},nodePasteRule:function(){return c.nodePasteRule},objectIncludes:function(){return c.objectIncludes},parseAttributes:function(){return c.parseAttributes},parseIndentedBlocks:function(){return c.parseIndentedBlocks},pasteRulesPlugin:function(){return c.pasteRulesPlugin},posToDOMRect:function(){return c.posToDOMRect},removeDuplicates:function(){return c.removeDuplicates},renderNestedMarkdownContent:function(){return c.renderNestedMarkdownContent},resolveExtensions:function(){return c.resolveExtensions},resolveFocusPosition:function(){return c.resolveFocusPosition},rewriteUnknownContent:function(){return c.rewriteUnknownContent},selectionToInsertionEnd:function(){return c.selectionToInsertionEnd},serializeAttributes:function(){return c.serializeAttributes},sortExtensions:function(){return c.sortExtensions},splitExtensions:function(){return c.splitExtensions},textInputRule:function(){return c.textInputRule},textPasteRule:function(){return c.textPasteRule},textblockTypeInputRule:function(){return c.textblockTypeInputRule},updateMarkViewAttributes:function(){return c.updateMarkViewAttributes},useCurrentEditor:function(){return useCurrentEditor},useEditor:function(){return useEditor},useEditorState:function(){return useEditorState},useReactNodeView:function(){return useReactNodeView},useTiptap:function(){return useTiptap},useTiptapState:function(){return useTiptapState},wrappingInputRule:function(){return c.wrappingInputRule}});var o=r("react"),i=r("react-dom"),s=r("./packages/node_modules/use-sync-external-store/shim/index.js"),a=r("./packages/node_modules/react/jsx-runtime.js"),c=r("./packages/node_modules/@tiptap/core/dist/index.js"),u=r("./packages/node_modules/fast-equals/dist/es/index.mjs"),p=r("./packages/node_modules/use-sync-external-store/shim/with-selector.js"),mergeRefs=(...e)=>n=>{e.forEach(e=>{"function"==typeof e?e(n):e&&(e.current=n)})},Portals=({contentComponent:e})=>{const n=(0,s.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getServerSnapshot);return(0,a.jsx)(a.Fragment,{children:Object.values(n)})};var f=class extends o.Component{constructor(e){var n;super(e),this.editorContentRef=o.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null==(n=e.editor)?void 0:n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var e;const n=this.props.editor;if(n&&!n.isDestroyed&&(null==(e=n.view.dom)?void 0:e.parentNode)){if(n.contentComponent)return;const e=this.editorContentRef.current;e.append(...n.view.dom.parentNode.childNodes),n.setOptions({element:e}),n.contentComponent=function getInstance(){const e=new Set;let n={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return n},getServerSnapshot(){return n},setRenderer(r,o){n={...n,[r]:i.createPortal(o.reactElement,o.element,r)},e.forEach(e=>e())},removeRenderer(r){const o={...n};delete o[r],n=o,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=n.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),n.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const n=this.props.editor;if(n){this.initialized=!1,n.isDestroyed||n.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),n.contentComponent=null;try{if(!(null==(e=n.view.dom)?void 0:e.parentNode))return;const r=document.createElement("div");r.append(...n.view.dom.parentNode.childNodes),n.setOptions({element:r})}catch{}}}render(){const{editor:e,innerRef:n,...r}=this.props;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:mergeRefs(n,this.editorContentRef),...r}),(null==e?void 0:e.contentComponent)&&(0,a.jsx)(Portals,{contentComponent:e.contentComponent})]})}},g=(0,o.forwardRef)((e,n)=>{const r=o.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return o.createElement(f,{key:r,innerRef:n,...e})}),b=o.memo(g),k="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,v=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const fn=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},e=this.editor;return e.on("transaction",fn),()=>{e.off("transaction",fn)}}}};function useEditorState(e){var n;const[r]=(0,o.useState)(()=>new v(e.editor)),i=(0,p.useSyncExternalStoreWithSelector)(r.subscribe,r.getSnapshot,r.getServerSnapshot,e.selector,null!=(n=e.equalityFn)?n:u.deepEqual);return k(()=>r.watch(e.editor),[e.editor,r]),(0,o.useDebugValue)(i),i}var x="undefined"==typeof window,w=x||Boolean("undefined"!=typeof window&&window.next),E=class _EditorInstanceManager{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){if(void 0===this.options.current.immediatelyRender){if(x||w)throw new Error("Tiptap Error: SSR has been detected, please set `immediatelyRender` explicitly to `false` to avoid hydration mismatches.");return this.createEditor()}if(this.options.current.immediatelyRender&&x)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...e)=>{var n,r;return null==(r=(n=this.options.current).onBeforeCreate)?void 0:r.call(n,...e)},onBlur:(...e)=>{var n,r;return null==(r=(n=this.options.current).onBlur)?void 0:r.call(n,...e)},onCreate:(...e)=>{var n,r;return null==(r=(n=this.options.current).onCreate)?void 0:r.call(n,...e)},onDestroy:(...e)=>{var n,r;return null==(r=(n=this.options.current).onDestroy)?void 0:r.call(n,...e)},onFocus:(...e)=>{var n,r;return null==(r=(n=this.options.current).onFocus)?void 0:r.call(n,...e)},onSelectionUpdate:(...e)=>{var n,r;return null==(r=(n=this.options.current).onSelectionUpdate)?void 0:r.call(n,...e)},onTransaction:(...e)=>{var n,r;return null==(r=(n=this.options.current).onTransaction)?void 0:r.call(n,...e)},onUpdate:(...e)=>{var n,r;return null==(r=(n=this.options.current).onUpdate)?void 0:r.call(n,...e)},onContentError:(...e)=>{var n,r;return null==(r=(n=this.options.current).onContentError)?void 0:r.call(n,...e)},onDrop:(...e)=>{var n,r;return null==(r=(n=this.options.current).onDrop)?void 0:r.call(n,...e)},onPaste:(...e)=>{var n,r;return null==(r=(n=this.options.current).onPaste)?void 0:r.call(n,...e)},onDelete:(...e)=>{var n,r;return null==(r=(n=this.options.current).onDelete)?void 0:r.call(n,...e)}};return new c.Editor(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)||("extensions"===r&&e.extensions&&n.extensions?e.extensions.length===n.extensions.length&&e.extensions.every((e,r)=>{var o;return e===(null==(o=n.extensions)?void 0:o[r])}):e[r]===n[r]))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?_EditorInstanceManager.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps)return void(this.previousDeps=e);if(this.previousDeps.length===e.length&&this.previousDeps.every((n,r)=>n===e[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{this.isComponentMounted&&this.instanceId===e?n&&n.setOptions(this.options.current):n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function useEditor(e={},n=[]){const r=(0,o.useRef)(e);r.current=e;const[i]=(0,o.useState)(()=>new E(r)),a=(0,s.useSyncExternalStore)(i.subscribe,i.getEditor,i.getServerSnapshot);return(0,o.useDebugValue)(a),(0,o.useEffect)(i.onRender(n)),useEditorState({editor:a,selector:({transactionNumber:n})=>!1===e.shouldRerenderOnTransaction||void 0===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===n?0:n+1}),a}var C=(0,o.createContext)({editor:null}),T=C.Consumer,useCurrentEditor=()=>(0,o.useContext)(C);function EditorProvider({children:e,slotAfter:n,slotBefore:r,editorContainerProps:i={},...s}){const c=useEditor(s),u=(0,o.useMemo)(()=>({editor:c}),[c]);return c?(0,a.jsxs)(C.Provider,{value:u,children:[r,(0,a.jsx)(T,{children:({editor:e})=>(0,a.jsx)(b,{editor:e,...i})}),e,n]}):null}var _=(0,o.createContext)({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),ReactNodeViewContentProvider=({children:e,content:n})=>(0,o.createElement)(_.Provider,{value:{nodeViewContentChildren:n}},e),useReactNodeView=()=>(0,o.useContext)(_);function NodeViewContent({as:e="div",...n}){const{nodeViewContentRef:r,nodeViewContentChildren:o}=useReactNodeView();return(0,a.jsx)(e,{...n,ref:r,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...n.style},children:o})}var P=o.forwardRef((e,n)=>{const{onDragStart:r}=useReactNodeView(),o=e.as||"div";return(0,a.jsx)(o,{...e,ref:n,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})});function isClassComponent(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}function isForwardRefComponent(e){return!("object"!=typeof e||!e.$$typeof||"Symbol(react.forward_ref)"!==e.$$typeof.toString()&&"react.forward_ref"!==e.$$typeof.description)}var R=class{constructor(e,{editor:n,props:r={},as:o="div",className:s=""}){this.ref=null,this.destroyed=!1,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?(0,i.flushSync)(()=>{this.render()}):queueMicrotask(()=>{this.destroyed||this.render()})}render(){var e;if(this.destroyed)return;const n=this.component,r=this.props,i=this.editor,s=function isReact19Plus(){try{if(o.version)return parseInt(o.version.split(".")[0],10)>=19}catch{}return!1}(),c=function canReceiveRef(e){if(isClassComponent(e))return!0;if(isForwardRefComponent(e))return!0;if(function isMemoComponent(e){return!("object"!=typeof e||!e.$$typeof||"Symbol(react.memo)"!==e.$$typeof.toString()&&"react.memo"!==e.$$typeof.description)}(e)){const n=e.type;if(n)return isClassComponent(n)||isForwardRefComponent(n)}return!1}(n),u={...r};!u.ref||s||c||delete u.ref,u.ref||!s&&!c||(u.ref=e=>{this.ref=e}),this.reactElement=(0,a.jsx)(n,{...u}),null==(e=null==i?void 0:i.contentComponent)||e.setRenderer(this.id,this)}updateProps(e={}){this.destroyed||(this.props={...this.props,...e},this.render())}destroy(){var e;this.destroyed=!0;const n=this.editor;null==(e=null==n?void 0:n.contentComponent)||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch{}}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}},A=o.createContext({markViewContentRef:()=>{}}),MarkViewContent=e=>{const{as:n="span",...r}=e,{markViewContentRef:i}=o.useContext(A);return(0,a.jsx)(n,{...r,ref:i,"data-mark-view-content":""})},N=class extends c.MarkView{constructor(e,n,r){super(e,n,r);const{as:i="span",attrs:s,className:c=""}=r||{},u={...n,updateAttributes:this.updateAttributes.bind(this)};this.contentDOMElement=document.createElement("span");const p={markViewContentRef:e=>{e&&!e.contains(this.contentDOMElement)&&e.appendChild(this.contentDOMElement)}},f=o.memo(n=>(0,a.jsx)(A.Provider,{value:p,children:o.createElement(e,n)}));f.displayName="ReactMarkView",this.renderer=new R(f,{editor:n.editor,props:u,as:i,className:`mark-${n.mark.type.name} ${c}`.trim()}),s&&this.renderer.updateAttributes(s)}get dom(){return this.renderer.element}get contentDOM(){return this.contentDOMElement}};function ReactMarkViewRenderer(e,n={}){return r=>new N(e,r,n)}var I=class extends c.NodeView{constructor(e,n,r){if(super(e,n,r),this.selectionRafId=null,this.cachedExtensionWithSyncedStorage=null,!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const e=this.dom.querySelector("[data-node-view-content]");if(!e)return;e.appendChild(this.contentDOMElement)}}get extensionWithSyncedStorage(){if(!this.cachedExtensionWithSyncedStorage){const e=this.editor,n=this.extension;this.cachedExtensionWithSyncedStorage=new Proxy(n,{get(r,o,i){var s;return"storage"===o?null!=(s=e.storage[n.name])?s:{}:Reflect.get(r,o,i)}})}return this.cachedExtensionWithSyncedStorage}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extensionWithSyncedStorage,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(e={})=>this.updateAttributes(e),deleteNode:()=>this.deleteNode(),ref:(0,o.createRef)()};if(!this.component.displayName){const capitalizeFirstChar=e=>e.charAt(0).toUpperCase()+e.substring(1);this.component.displayName=capitalizeFirstChar(this.extension.name)}const n={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&(e.hasAttribute("data-node-view-wrapper")&&e.removeAttribute("data-node-view-wrapper"),e.appendChild(this.contentDOMElement))}},r=this.component,i=(0,o.memo)(e=>(0,a.jsx)(_.Provider,{value:n,children:(0,o.createElement)(r,e)}));i.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);const{className:c=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new R(i,{editor:this.editor,props:e,as:s,className:`node-${this.node.type.name} ${c}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null==(e=this.renderer.element.firstElementChild)?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null),this.selectionRafId=requestAnimationFrame(()=>{this.selectionRafId=null;const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if("number"==typeof r)if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}})}update(e,n,r){const rerenderComponent=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){const o=this.node,i=this.decorations,s=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:o,oldDecorations:i,newNode:e,newDecorations:n,oldInnerDecorations:s,innerDecorations:r,updateProps:()=>rerenderComponent({node:e,decorations:n,innerDecorations:r,extension:this.extensionWithSyncedStorage})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,rerenderComponent({node:e,decorations:n,innerDecorations:r,extension:this.extensionWithSyncedStorage})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null,this.selectionRafId&&(cancelAnimationFrame(this.selectionRafId),this.selectionRafId=null)}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){const n=this.editor.extensionManager.attributes,r=(0,c.getRenderedAttributes)(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}};function ReactNodeViewRenderer(e,n){return r=>r.editor.contentComponent?new I(e,r,n):{}}var z=(0,o.createContext)({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});z.displayName="TiptapContext";var useTiptap=()=>(0,o.useContext)(z);function useTiptapState(e,n){const{editor:r}=useTiptap();return useEditorState({editor:r,selector:e,equalityFn:n})}function TiptapWrapper({editor:e,instance:n,children:r}){const i=null!=e?e:n;if(!i)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const s=(0,o.useMemo)(()=>({editor:i}),[i]),c=(0,o.useMemo)(()=>({editor:i}),[i]);return(0,a.jsx)(C.Provider,{value:c,children:(0,a.jsx)(z.Provider,{value:s,children:r})})}function TiptapContent({...e}){const{editor:n}=useTiptap();return(0,a.jsx)(b,{editor:n,...e})}TiptapWrapper.displayName="Tiptap",TiptapContent.displayName="Tiptap.Content";var F=Object.assign(TiptapWrapper,{Content:TiptapContent})},"./packages/node_modules/dayjs/dayjs.min.js":function(e){e.exports=function(){"use strict";var e=1e3,n=6e4,r=36e5,o="millisecond",i="second",s="minute",a="hour",c="day",u="week",p="month",f="quarter",g="year",b="date",k="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var n=["th","st","nd","rd"],r=e%100;return"["+e+(n[(r-20)%10]||n[r]||n[0])+"]"}},m=function(e,n,r){var o=String(e);return!o||o.length>=n?e:""+Array(n+1-o.length).join(r)+e},E={s:m,z:function(e){var n=-e.utcOffset(),r=Math.abs(n),o=Math.floor(r/60),i=r%60;return(n<=0?"+":"-")+m(o,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,p),i=n-o<0,s=e.clone().add(r+(i?-1:1),p);return+(-(r+(n-o)/(i?o-s:s-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:p,y:g,w:u,d:c,D:b,h:a,m:s,s:i,ms:o,Q:f}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},C="en",T={};T[C]=w;var _="$isDayjsObject",S=function(e){return e instanceof A||!(!e||!e[_])},P=function t(e,n,r){var o;if(!e)return C;if("string"==typeof e){var i=e.toLowerCase();T[i]&&(o=i),n&&(T[i]=n,o=i);var s=e.split("-");if(!o&&s.length>1)return t(s[0])}else{var a=e.name;T[a]=e,o=a}return!r&&o&&(C=o),o||!r&&C},O=function(e,n){if(S(e))return e.clone();var r="object"==typeof n?n:{};return r.date=e,r.args=arguments,new A(r)},R=E;R.l=P,R.i=S,R.w=function(e,n){return O(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var A=function(){function M(e){this.$L=P(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var w=M.prototype;return w.parse=function(e){this.$d=function(e){var n=e.date,r=e.utc;if(null===n)return new Date(NaN);if(R.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var o=n.match(v);if(o){var i=o[2]-1||0,s=(o[7]||"0").substring(0,3);return r?new Date(Date.UTC(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,s)):new Date(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,s)}}return new Date(n)}(e),this.init()},w.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},w.$utils=function(){return R},w.isValid=function(){return!(this.$d.toString()===k)},w.isSame=function(e,n){var r=O(e);return this.startOf(n)<=r&&r<=this.endOf(n)},w.isAfter=function(e,n){return O(e)<this.startOf(n)},w.isBefore=function(e,n){return this.endOf(n)<O(e)},w.$g=function(e,n,r){return R.u(e)?this[n]:this.set(r,e)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(e,n){var r=this,o=!!R.u(n)||n,f=R.p(e),l=function(e,n){var i=R.w(r.$u?Date.UTC(r.$y,n,e):new Date(r.$y,n,e),r);return o?i:i.endOf(c)},$=function(e,n){return R.w(r.toDate()[e].apply(r.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(n)),r)},k=this.$W,v=this.$M,x=this.$D,w="set"+(this.$u?"UTC":"");switch(f){case g:return o?l(1,0):l(31,11);case p:return o?l(1,v):l(0,v+1);case u:var E=this.$locale().weekStart||0,C=(k<E?k+7:k)-E;return l(o?x-C:x+(6-C),v);case c:case b:return $(w+"Hours",0);case a:return $(w+"Minutes",1);case s:return $(w+"Seconds",2);case i:return $(w+"Milliseconds",3);default:return this.clone()}},w.endOf=function(e){return this.startOf(e,!1)},w.$set=function(e,n){var r,u=R.p(e),f="set"+(this.$u?"UTC":""),k=(r={},r[c]=f+"Date",r[b]=f+"Date",r[p]=f+"Month",r[g]=f+"FullYear",r[a]=f+"Hours",r[s]=f+"Minutes",r[i]=f+"Seconds",r[o]=f+"Milliseconds",r)[u],v=u===c?this.$D+(n-this.$W):n;if(u===p||u===g){var x=this.clone().set(b,1);x.$d[k](v),x.init(),this.$d=x.set(b,Math.min(this.$D,x.daysInMonth())).$d}else k&&this.$d[k](v);return this.init(),this},w.set=function(e,n){return this.clone().$set(e,n)},w.get=function(e){return this[R.p(e)]()},w.add=function(o,f){var b,k=this;o=Number(o);var v=R.p(f),y=function(e){var n=O(k);return R.w(n.date(n.date()+Math.round(e*o)),k)};if(v===p)return this.set(p,this.$M+o);if(v===g)return this.set(g,this.$y+o);if(v===c)return y(1);if(v===u)return y(7);var x=(b={},b[s]=n,b[a]=r,b[i]=e,b)[v]||1,w=this.$d.getTime()+o*x;return R.w(w,this)},w.subtract=function(e,n){return this.add(-1*e,n)},w.format=function(e){var n=this,r=this.$locale();if(!this.isValid())return r.invalidDate||k;var o=e||"YYYY-MM-DDTHH:mm:ssZ",i=R.z(this),s=this.$H,a=this.$m,c=this.$M,u=r.weekdays,p=r.months,f=r.meridiem,h=function(e,r,i,s){return e&&(e[r]||e(n,o))||i[r].slice(0,s)},d=function(e){return R.s(s%12||12,e,"0")},g=f||function(e,n,r){var o=e<12?"AM":"PM";return r?o.toLowerCase():o};return o.replace(x,function(e,o){return o||function(e){switch(e){case"YY":return String(n.$y).slice(-2);case"YYYY":return R.s(n.$y,4,"0");case"M":return c+1;case"MM":return R.s(c+1,2,"0");case"MMM":return h(r.monthsShort,c,p,3);case"MMMM":return h(p,c);case"D":return n.$D;case"DD":return R.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return h(r.weekdaysMin,n.$W,u,2);case"ddd":return h(r.weekdaysShort,n.$W,u,3);case"dddd":return u[n.$W];case"H":return String(s);case"HH":return R.s(s,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return g(s,a,!0);case"A":return g(s,a,!1);case"m":return String(a);case"mm":return R.s(a,2,"0");case"s":return String(n.$s);case"ss":return R.s(n.$s,2,"0");case"SSS":return R.s(n.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(o,b,k){var v,x=this,w=R.p(b),E=O(o),C=(E.utcOffset()-this.utcOffset())*n,T=this-E,D=function(){return R.m(x,E)};switch(w){case g:v=D()/12;break;case p:v=D();break;case f:v=D()/3;break;case u:v=(T-C)/6048e5;break;case c:v=(T-C)/864e5;break;case a:v=T/r;break;case s:v=T/n;break;case i:v=T/e;break;default:v=T}return k?v:R.a(v)},w.daysInMonth=function(){return this.endOf(p).$D},w.$locale=function(){return T[this.$L]},w.locale=function(e,n){if(!e)return this.$L;var r=this.clone(),o=P(e,n,!0);return o&&(r.$L=o),r},w.clone=function(){return R.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},M}(),N=A.prototype;return O.prototype=N,[["$ms",o],["$s",i],["$m",s],["$H",a],["$W",c],["$M",p],["$y",g],["$D",b]].forEach(function(e){N[e[1]]=function(n){return this.$g(n,e[0],e[1])}}),O.extend=function(e,n){return e.$i||(e(n,A,O),e.$i=!0),O},O.locale=P,O.isDayjs=S,O.unix=function(e){return O(1e3*e)},O.en=T[C],O.Ls=T,O.p={},O}()},"./packages/node_modules/fast-equals/dist/es/index.mjs":function(e,n,r){"use strict";r.r(n),r.d(n,{circularDeepEqual:function(){return j},circularShallowEqual:function(){return q},createCustomEqual:function(){return createCustomEqual},deepEqual:function(){return B},sameValueZeroEqual:function(){return sameValueZeroEqual},shallowEqual:function(){return U},strictCircularDeepEqual:function(){return V},strictCircularShallowEqual:function(){return K},strictDeepEqual:function(){return L},strictShallowEqual:function(){return H}});const{getOwnPropertyNames:o,getOwnPropertySymbols:i}=Object,{hasOwnProperty:s}=Object.prototype;function combineComparators(e,n){return function isEqual(r,o,i){return e(r,o,i)&&n(r,o,i)}}function createIsCircular(e){return function isCircular(n,r,o){if(!n||!r||"object"!=typeof n||"object"!=typeof r)return e(n,r,o);const{cache:i}=o,s=i.get(n),a=i.get(r);if(s&&a)return s===r&&a===n;i.set(n,r),i.set(r,n);const c=e(n,r,o);return i.delete(n),i.delete(r),c}}function getStrictProperties(e){return o(e).concat(i(e))}const a=Object.hasOwn||((e,n)=>s.call(e,n));function sameValueZeroEqual(e,n){return e===n||!e&&!n&&e!=e&&n!=n}const c="__v",u="__o",p="_owner",{getOwnPropertyDescriptor:f,keys:g}=Object;function areArrayBuffersEqual(e,n){return e.byteLength===n.byteLength&&areTypedArraysEqual(new Uint8Array(e),new Uint8Array(n))}function areArraysEqual(e,n,r){let o=e.length;if(n.length!==o)return!1;for(;o-- >0;)if(!r.equals(e[o],n[o],o,o,e,n,r))return!1;return!0}function areDataViewsEqual(e,n){return e.byteLength===n.byteLength&&areTypedArraysEqual(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}function areDatesEqual(e,n){return sameValueZeroEqual(e.getTime(),n.getTime())}function areErrorsEqual(e,n){return e.name===n.name&&e.message===n.message&&e.cause===n.cause&&e.stack===n.stack}function areFunctionsEqual(e,n){return e===n}function areMapsEqual(e,n,r){const o=e.size;if(o!==n.size)return!1;if(!o)return!0;const i=new Array(o),s=e.entries();let a,c,u=0;for(;(a=s.next())&&!a.done;){const o=n.entries();let s=!1,p=0;for(;(c=o.next())&&!c.done;){if(i[p]){p++;continue}const o=a.value,f=c.value;if(r.equals(o[0],f[0],u,p,e,n,r)&&r.equals(o[1],f[1],o[0],f[0],e,n,r)){s=i[p]=!0;break}p++}if(!s)return!1;u++}return!0}const b=sameValueZeroEqual;function areObjectsEqual(e,n,r){const o=g(e);let i=o.length;if(g(n).length!==i)return!1;for(;i-- >0;)if(!isPropertyEqual(e,n,r,o[i]))return!1;return!0}function areObjectsEqualStrict(e,n,r){const o=getStrictProperties(e);let i,s,a,c=o.length;if(getStrictProperties(n).length!==c)return!1;for(;c-- >0;){if(i=o[c],!isPropertyEqual(e,n,r,i))return!1;if(s=f(e,i),a=f(n,i),(s||a)&&(!s||!a||s.configurable!==a.configurable||s.enumerable!==a.enumerable||s.writable!==a.writable))return!1}return!0}function arePrimitiveWrappersEqual(e,n){return sameValueZeroEqual(e.valueOf(),n.valueOf())}function areRegExpsEqual(e,n){return e.source===n.source&&e.flags===n.flags}function areSetsEqual(e,n,r){const o=e.size;if(o!==n.size)return!1;if(!o)return!0;const i=new Array(o),s=e.values();let a,c;for(;(a=s.next())&&!a.done;){const o=n.values();let s=!1,u=0;for(;(c=o.next())&&!c.done;){if(!i[u]&&r.equals(a.value,c.value,a.value,c.value,e,n,r)){s=i[u]=!0;break}u++}if(!s)return!1}return!0}function areTypedArraysEqual(e,n){let r=e.byteLength;if(n.byteLength!==r||e.byteOffset!==n.byteOffset)return!1;for(;r-- >0;)if(e[r]!==n[r])return!1;return!0}function areUrlsEqual(e,n){return e.hostname===n.hostname&&e.pathname===n.pathname&&e.protocol===n.protocol&&e.port===n.port&&e.hash===n.hash&&e.username===n.username&&e.password===n.password}function isPropertyEqual(e,n,r,o){return!(o!==p&&o!==u&&o!==c||!e.$$typeof&&!n.$$typeof)||a(n,o)&&r.equals(e[o],n[o],o,o,e,n,r)}const k="[object ArrayBuffer]",v="[object Arguments]",x="[object Boolean]",w="[object DataView]",E="[object Date]",C="[object Error]",T="[object Map]",_="[object Number]",P="[object Object]",R="[object RegExp]",A="[object Set]",N="[object String]",I={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},z="[object URL]",F=Object.prototype.toString;function createEqualityComparator({areArrayBuffersEqual:e,areArraysEqual:n,areDataViewsEqual:r,areDatesEqual:o,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:a,areNumbersEqual:c,areObjectsEqual:u,arePrimitiveWrappersEqual:p,areRegExpsEqual:f,areSetsEqual:g,areTypedArraysEqual:b,areUrlsEqual:B,unknownTagComparators:L}){return function comparator(j,V,U){if(j===V)return!0;if(null==j||null==V)return!1;const H=typeof j;if(H!==typeof V)return!1;if("object"!==H)return"number"===H?c(j,V,U):"function"===H&&s(j,V,U);const q=j.constructor;if(q!==V.constructor)return!1;if(q===Object)return u(j,V,U);if(Array.isArray(j))return n(j,V,U);if(q===Date)return o(j,V,U);if(q===RegExp)return f(j,V,U);if(q===Map)return a(j,V,U);if(q===Set)return g(j,V,U);const K=F.call(j);if(K===E)return o(j,V,U);if(K===R)return f(j,V,U);if(K===T)return a(j,V,U);if(K===A)return g(j,V,U);if(K===P)return"function"!=typeof j.then&&"function"!=typeof V.then&&u(j,V,U);if(K===z)return B(j,V,U);if(K===C)return i(j,V,U);if(K===v)return u(j,V,U);if(I[K])return b(j,V,U);if(K===k)return e(j,V,U);if(K===w)return r(j,V,U);if(K===x||K===_||K===N)return p(j,V,U);if(L){let e=L[K];if(!e){const n=function getShortTag(e){return null!=e?e[Symbol.toStringTag]:void 0}(j);n&&(e=L[n])}if(e)return e(j,V,U)}return!1}}const B=createCustomEqual(),L=createCustomEqual({strict:!0}),j=createCustomEqual({circular:!0}),V=createCustomEqual({circular:!0,strict:!0}),U=createCustomEqual({createInternalComparator:()=>sameValueZeroEqual}),H=createCustomEqual({strict:!0,createInternalComparator:()=>sameValueZeroEqual}),q=createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual}),K=createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual,strict:!0});function createCustomEqual(e={}){const{circular:n=!1,createInternalComparator:r,createState:o,strict:i=!1}=e,s=function createEqualityComparatorConfig({circular:e,createCustomConfig:n,strict:r}){let o={areArrayBuffersEqual:areArrayBuffersEqual,areArraysEqual:r?areObjectsEqualStrict:areArraysEqual,areDataViewsEqual:areDataViewsEqual,areDatesEqual:areDatesEqual,areErrorsEqual:areErrorsEqual,areFunctionsEqual:areFunctionsEqual,areMapsEqual:r?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areNumbersEqual:b,areObjectsEqual:r?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual:arePrimitiveWrappersEqual,areRegExpsEqual:areRegExpsEqual,areSetsEqual:r?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:r?combineComparators(areTypedArraysEqual,areObjectsEqualStrict):areTypedArraysEqual,areUrlsEqual:areUrlsEqual,unknownTagComparators:void 0};if(n&&(o=Object.assign({},o,n(o))),e){const e=createIsCircular(o.areArraysEqual),n=createIsCircular(o.areMapsEqual),r=createIsCircular(o.areObjectsEqual),i=createIsCircular(o.areSetsEqual);o=Object.assign({},o,{areArraysEqual:e,areMapsEqual:n,areObjectsEqual:r,areSetsEqual:i})}return o}(e),a=createEqualityComparator(s);return function createIsEqual({circular:e,comparator:n,createState:r,equals:o,strict:i}){if(r)return function isEqual(s,a){const{cache:c=(e?new WeakMap:void 0),meta:u}=r();return n(s,a,{cache:c,equals:o,meta:u,strict:i})};if(e)return function isEqual(e,r){return n(e,r,{cache:new WeakMap,equals:o,meta:void 0,strict:i})};const s={cache:void 0,equals:o,meta:void 0,strict:i};return function isEqual(e,r){return n(e,r,s)}}({circular:n,comparator:a,createState:o,equals:r?r(a):function createInternalEqualityComparator(e){return function(n,r,o,i,s,a,c){return e(n,r,c)}}(a),strict:i})}},"./packages/node_modules/linkifyjs/dist/linkify.mjs":function(e,n,r){"use strict";r.r(n),r.d(n,{MultiToken:function(){return MultiToken},Options:function(){return Options},State:function(){return State},createTokenClass:function(){return createTokenClass},find:function(){return find},init:function(){return init},multi:function(){return We},options:function(){return Ve},regexp:function(){return Ne},registerCustomProtocol:function(){return registerCustomProtocol},registerPlugin:function(){return registerPlugin},registerTokenPlugin:function(){return registerTokenPlugin},reset:function(){return reset},stringToArray:function(){return stringToArray},test:function(){return test},text:function(){return We},tokenize:function(){return tokenize}});const o="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",i="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",s="numeric",a="ascii",c="alpha",u="asciinumeric",p="alphanumeric",f="domain",g="emoji",b="scheme",k="slashscheme",v="whitespace";function registerGroup(e,n){return e in n||(n[e]=[]),n[e]}function addToGroups(e,n,r){n[s]&&(n[u]=!0,n[p]=!0),n[a]&&(n[u]=!0,n[c]=!0),n[u]&&(n[p]=!0),n[c]&&(n[p]=!0),n[p]&&(n[f]=!0),n[g]&&(n[f]=!0);for(const o in n){const n=registerGroup(o,r);n.indexOf(e)<0&&n.push(e)}}function State(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}State.groups={},State.prototype={accepts(){return!!this.t},go(e){const n=this,r=n.j[e];if(r)return r;for(let r=0;r<n.jr.length;r++){const o=n.jr[r][0],i=n.jr[r][1];if(i&&o.test(e))return i}return n.jd},has(e,n=!1){return n?e in this.j:!!this.go(e)},ta(e,n,r,o){for(let i=0;i<e.length;i++)this.tt(e[i],n,r,o)},tr(e,n,r,o){let i;return o=o||State.groups,n&&n.j?i=n:(i=new State(n),r&&o&&addToGroups(n,r,o)),this.jr.push([e,i]),i},ts(e,n,r,o){let i=this;const s=e.length;if(!s)return i;for(let n=0;n<s-1;n++)i=i.tt(e[n]);return i.tt(e[s-1],n,r,o)},tt(e,n,r,o){o=o||State.groups;const i=this;if(n&&n.j)return i.j[e]=n,n;const s=n;let a,c=i.go(e);if(c?(a=new State,Object.assign(a.j,c.j),a.jr.push.apply(a.jr,c.jr),a.jd=c.jd,a.t=c.t):a=new State,s){if(o)if(a.t&&"string"==typeof a.t){const e=Object.assign(function flagsForToken(e,n){const r={};for(const o in n)n[o].indexOf(e)>=0&&(r[o]=!0);return r}(a.t,o),r);addToGroups(s,e,o)}else r&&addToGroups(s,r,o);a.t=s}return i.j[e]=a,a}};const ta=(e,n,r,o,i)=>e.ta(n,r,o,i),tr=(e,n,r,o,i)=>e.tr(n,r,o,i),ts=(e,n,r,o,i)=>e.ts(n,r,o,i),tt=(e,n,r,o,i)=>e.tt(n,r,o,i),x="WORD",w="UWORD",E="ASCIINUMERICAL",C="ALPHANUMERICAL",T="LOCALHOST",_="TLD",P="UTLD",R="SCHEME",A="SLASH_SCHEME",N="NUM",I="WS",z="NL",F="OPENBRACE",B="CLOSEBRACE",L="OPENBRACKET",j="CLOSEBRACKET",V="OPENPAREN",U="CLOSEPAREN",H="OPENANGLEBRACKET",q="CLOSEANGLEBRACKET",K="FULLWIDTHLEFTPAREN",W="FULLWIDTHRIGHTPAREN",G="LEFTCORNERBRACKET",J="RIGHTCORNERBRACKET",Y="LEFTWHITECORNERBRACKET",X="RIGHTWHITECORNERBRACKET",Z="FULLWIDTHLESSTHAN",Q="FULLWIDTHGREATERTHAN",ee="AMPERSAND",te="APOSTROPHE",ne="ASTERISK",re="AT",oe="BACKSLASH",ie="BACKTICK",se="CARET",ae="COLON",le="COMMA",ce="DOLLAR",ue="DOT",de="EQUALS",pe="EXCLAMATION",me="HYPHEN",fe="PERCENT",he="PIPE",ge="PLUS",be="POUND",ke="QUERY",ye="QUOTE",ve="FULLWIDTHMIDDLEDOT",xe="SEMI",Se="SLASH",we="TILDE",Ee="UNDERSCORE",Ce="EMOJI",Te="SYM";var Me=Object.freeze({__proto__:null,ALPHANUMERICAL:C,AMPERSAND:ee,APOSTROPHE:te,ASCIINUMERICAL:E,ASTERISK:ne,AT:re,BACKSLASH:oe,BACKTICK:ie,CARET:se,CLOSEANGLEBRACKET:q,CLOSEBRACE:B,CLOSEBRACKET:j,CLOSEPAREN:U,COLON:ae,COMMA:le,DOLLAR:ce,DOT:ue,EMOJI:Ce,EQUALS:de,EXCLAMATION:pe,FULLWIDTHGREATERTHAN:Q,FULLWIDTHLEFTPAREN:K,FULLWIDTHLESSTHAN:Z,FULLWIDTHMIDDLEDOT:ve,FULLWIDTHRIGHTPAREN:W,HYPHEN:me,LEFTCORNERBRACKET:G,LEFTWHITECORNERBRACKET:Y,LOCALHOST:T,NL:z,NUM:N,OPENANGLEBRACKET:H,OPENBRACE:F,OPENBRACKET:L,OPENPAREN:V,PERCENT:fe,PIPE:he,PLUS:ge,POUND:be,QUERY:ke,QUOTE:ye,RIGHTCORNERBRACKET:J,RIGHTWHITECORNERBRACKET:X,SCHEME:R,SEMI:xe,SLASH:Se,SLASH_SCHEME:A,SYM:Te,TILDE:we,TLD:_,UNDERSCORE:Ee,UTLD:P,UWORD:w,WORD:x,WS:I});const _e=/[a-z]/,Oe=/\p{L}/u,Pe=/\p{Emoji}/u,Re=/\d/,Ae=/\s/;var Ne=Object.freeze({__proto__:null,ASCII_LETTER:_e,DIGIT:Re,EMOJI:Pe,EMOJI_VARIATION:/\ufe0f/,LETTER:Oe,SPACE:Ae});const Ie="\r",De="\n",ze="",Fe="",Be="";let Le=null,je=null;function run$1(e,n){const r=stringToArray(n.replace(/[A-Z]/g,e=>e.toLowerCase())),o=r.length,i=[];let s=0,a=0;for(;a<o;){let c=e,u=null,p=0,f=null,g=-1,b=-1;for(;a<o&&(u=c.go(r[a]));)c=u,c.accepts()?(g=0,b=0,f=c):g>=0&&(g+=r[a].length,b++),p+=r[a].length,s+=r[a].length,a++;s-=g,a-=b,p-=g,i.push({t:f.t,v:n.slice(s-p,s),s:s-p,e:s})}return i}function stringToArray(e){const n=[],r=e.length;let o=0;for(;o<r;){let i,s=e.charCodeAt(o),a=s<55296||s>56319||o+1===r||(i=e.charCodeAt(o+1))<56320||i>57343?e[o]:e.slice(o,o+2);n.push(a),o+=a.length}return n}function fastts(e,n,r,o,i){let s;const a=n.length;for(let r=0;r<a-1;r++){const a=n[r];e.j[a]?s=e.j[a]:(s=new State(o),s.jr=i.slice(),e.j[a]=s),e=s}return s=new State(r),s.jr=i.slice(),e.j[n[a-1]]=s,s}function decodeTlds(e){const n=[],r=[];let o=0;for(;o<e.length;){let i=0;for(;"0123456789".indexOf(e[o+i])>=0;)i++;if(i>0){n.push(r.join(""));for(let n=parseInt(e.substring(o,o+i),10);n>0;n--)r.pop();o+=i}else r.push(e[o]),o++}return n}const $e={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(e,n=null){let r=Object.assign({},$e);e&&(r=Object.assign(r,e instanceof Options?e.o:e));const o=r.ignoreTags,i=[];for(let e=0;e<o.length;e++)i.push(o[e].toUpperCase());this.o=r,n&&(this.defaultRender=n),this.ignoreTags=i}function noop(e){return e}Options.prototype={o:$e,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,n,r){const o=null!=n;let i=this.o[e];return i?("object"==typeof i?(i=r.t in i?i[r.t]:$e[e],"function"==typeof i&&o&&(i=i(n,r))):"function"==typeof i&&o&&(i=i(n,r.t,r)),i):i},getObj(e,n,r){let o=this.o[e];return"function"==typeof o&&null!=n&&(o=o(n,r.t,r)),o},render(e){const n=e.render(this);return(this.get("render",null,e)||this.defaultRender)(n,e.t,e)}};var Ve=Object.freeze({__proto__:null,Options:Options,defaults:$e});function MultiToken(e,n){this.t="token",this.v=e,this.tk=n}function createTokenClass(e,n){class Token extends MultiToken{constructor(n,r){super(n,r),this.t=e}}for(const e in n)Token.prototype[e]=n[e];return Token.t=e,Token}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const n=this.toString(),r=e.get("truncate",n,this),o=e.get("format",n,this);return r&&o.length>r?o.substring(0,r)+"":o},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=$e.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const n=this,r=this.toHref(e.get("defaultProtocol")),o=e.get("formatHref",r,this),i=e.get("tagName",r,n),s=this.toFormattedString(e),a={},c=e.get("className",r,n),u=e.get("target",r,n),p=e.get("rel",r,n),f=e.getObj("attributes",r,n),g=e.getObj("events",r,n);return a.href=o,c&&(a.class=c),u&&(a.target=u),p&&(a.rel=p),f&&Object.assign(a,f),{tagName:i,attributes:a,content:s,eventListeners:g}}};const Ue=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),He=createTokenClass("text"),qe=createTokenClass("nl"),Ke=createTokenClass("url",{isLink:!0,toHref(e=$e.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==T&&e[1].t===ae}});var We=Object.freeze({__proto__:null,Base:MultiToken,Email:Ue,MultiToken:MultiToken,Nl:qe,Text:He,Url:Ke,createTokenClass:createTokenClass});const makeState=e=>new State(e);function initMultiToken(e,n,r){const o=r[0].s,i=r[r.length-1].e;return new e(n.slice(o,i),r)}const Ge="undefined"!=typeof console&&console&&console.warn||(()=>{}),Je="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ye={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},Ye.scanner=null,Ye.parser=null,Ye.tokenQueue=[],Ye.pluginQueue=[],Ye.customSchemes=[],Ye.initialized=!1,Ye}function registerTokenPlugin(e,n){if("function"!=typeof n)throw new Error(`linkifyjs: Invalid token plugin ${n} (expects function)`);for(let r=0;r<Ye.tokenQueue.length;r++)if(e===Ye.tokenQueue[r][0])return Ge(`linkifyjs: token plugin "${e}" already registered - will be overwritten`),void(Ye.tokenQueue[r]=[e,n]);Ye.tokenQueue.push([e,n]),Ye.initialized&&Ge(`linkifyjs: already initialized - will not register token plugin "${e}" ${Je}`)}function registerPlugin(e,n){if("function"!=typeof n)throw new Error(`linkifyjs: Invalid plugin ${n} (expects function)`);for(let r=0;r<Ye.pluginQueue.length;r++)if(e===Ye.pluginQueue[r][0])return Ge(`linkifyjs: plugin "${e}" already registered - will be overwritten`),void(Ye.pluginQueue[r]=[e,n]);Ye.pluginQueue.push([e,n]),Ye.initialized&&Ge(`linkifyjs: already initialized - will not register plugin "${e}" ${Je}`)}function registerCustomProtocol(e,n=!1){if(Ye.initialized&&Ge(`linkifyjs: already initialized - will not register custom scheme "${e}" ${Je}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');Ye.customSchemes.push([e,n])}function init(){Ye.scanner=function init$2(e=[]){const n={};State.groups=n;const r=new State;null==Le&&(Le=decodeTlds(o)),null==je&&(je=decodeTlds(i)),tt(r,"'",te),tt(r,"{",F),tt(r,"}",B),tt(r,"[",L),tt(r,"]",j),tt(r,"(",V),tt(r,")",U),tt(r,"<",H),tt(r,">",q),tt(r,"",K),tt(r,"",W),tt(r,"",G),tt(r,"",J),tt(r,"",Y),tt(r,"",X),tt(r,"",Z),tt(r,"",Q),tt(r,"&",ee),tt(r,"*",ne),tt(r,"@",re),tt(r,"`",ie),tt(r,"^",se),tt(r,":",ae),tt(r,",",le),tt(r,"$",ce),tt(r,".",ue),tt(r,"=",de),tt(r,"!",pe),tt(r,"-",me),tt(r,"%",fe),tt(r,"|",he),tt(r,"+",ge),tt(r,"#",be),tt(r,"?",ke),tt(r,'"',ye),tt(r,"/",Se),tt(r,";",xe),tt(r,"~",we),tt(r,"_",Ee),tt(r,"\\",oe),tt(r,"",ve);const Ne=tr(r,Re,N,{[s]:!0});tr(Ne,Re,Ne);const $e=tr(Ne,_e,E,{[u]:!0}),Ve=tr(Ne,Oe,C,{[p]:!0}),Ue=tr(r,_e,x,{[a]:!0});tr(Ue,Re,$e),tr(Ue,_e,Ue),tr($e,Re,$e),tr($e,_e,$e);const He=tr(r,Oe,w,{[c]:!0});tr(He,_e),tr(He,Re,Ve),tr(He,Oe,He),tr(Ve,Re,Ve),tr(Ve,_e),tr(Ve,Oe,Ve);const qe=tt(r,De,z,{[v]:!0}),Ke=tt(r,Ie,I,{[v]:!0}),We=tr(r,Ae,I,{[v]:!0});tt(r,Be,We),tt(Ke,De,qe),tt(Ke,Be,We),tr(Ke,Ae,We),tt(We,Ie),tt(We,De),tr(We,Ae,We),tt(We,Be,We);const Ge=tr(r,Pe,Ce,{[g]:!0});tt(Ge,"#"),tr(Ge,Pe,Ge),tt(Ge,ze,Ge);const Je=tt(Ge,Fe);tt(Je,"#"),tr(Je,Pe,Ge);const Ye=[[_e,Ue],[Re,$e]],Xe=[[_e,null],[Oe,He],[Re,Ve]];for(let e=0;e<Le.length;e++)fastts(r,Le[e],_,x,Ye);for(let e=0;e<je.length;e++)fastts(r,je[e],P,w,Xe);addToGroups(_,{tld:!0,ascii:!0},n),addToGroups(P,{utld:!0,alpha:!0},n),fastts(r,"file",R,x,Ye),fastts(r,"mailto",R,x,Ye),fastts(r,"http",A,x,Ye),fastts(r,"https",A,x,Ye),fastts(r,"ftp",A,x,Ye),fastts(r,"ftps",A,x,Ye),addToGroups(R,{scheme:!0,ascii:!0},n),addToGroups(A,{slashscheme:!0,ascii:!0},n),e=e.sort((e,n)=>e[0]>n[0]?1:-1);for(let n=0;n<e.length;n++){const o=e[n][0],i=e[n][1]?{[b]:!0}:{[k]:!0};o.indexOf("-")>=0?i[f]=!0:_e.test(o)?Re.test(o)?i[u]=!0:i[a]=!0:i[s]=!0,ts(r,o,o,i)}return ts(r,"localhost",T,{ascii:!0}),r.jd=new State(Te),{start:r,tokens:Object.assign({groups:n},Me)}}(Ye.customSchemes);for(let e=0;e<Ye.tokenQueue.length;e++)Ye.tokenQueue[e][1]({scanner:Ye.scanner});Ye.parser=function init$1({groups:e}){const n=e.domain.concat([ee,ne,re,oe,ie,se,ce,de,me,N,fe,he,ge,be,Se,Te,we,Ee]),r=[te,ae,le,ue,pe,fe,ke,ye,xe,H,q,F,B,j,L,V,U,K,W,G,J,Y,X,Z,Q],o=[ee,te,ne,oe,ie,se,ce,de,me,F,B,fe,he,ge,be,ke,Se,Te,we,Ee],i=makeState(),s=tt(i,we);ta(s,o,s),ta(s,e.domain,s);const a=makeState(),c=makeState(),u=makeState();ta(i,e.domain,a),ta(i,e.scheme,c),ta(i,e.slashscheme,u),ta(a,o,s),ta(a,e.domain,a);const p=tt(a,re);tt(s,re,p),tt(c,re,p),tt(u,re,p);const f=tt(s,ue);ta(f,o,s),ta(f,e.domain,s);const g=makeState();ta(p,e.domain,g),ta(g,e.domain,g);const b=tt(g,ue);ta(b,e.domain,g);const k=makeState(Ue);ta(b,e.tld,k),ta(b,e.utld,k),tt(p,T,k);const v=tt(g,me);tt(v,me,v),ta(v,e.domain,g),ta(k,e.domain,g),tt(k,ue,b),tt(k,me,v);const x=tt(k,ae);ta(x,e.numeric,Ue);const w=tt(a,me),E=tt(a,ue);tt(w,me,w),ta(w,e.domain,a),ta(E,o,s),ta(E,e.domain,a);const C=makeState(Ke);ta(E,e.tld,C),ta(E,e.utld,C),ta(C,e.domain,a),ta(C,o,s),tt(C,ue,E),tt(C,me,w),tt(C,re,p);const _=tt(C,ae),P=makeState(Ke);ta(_,e.numeric,P);const R=makeState(Ke),A=makeState();ta(R,n,R),ta(R,r,A),ta(A,n,R),ta(A,r,A),tt(C,Se,R),tt(P,Se,R);const I=tt(c,ae),ve=tt(u,ae),Ce=tt(ve,Se),_e=tt(Ce,Se);ta(c,e.domain,a),tt(c,ue,E),tt(c,me,w),ta(u,e.domain,a),tt(u,ue,E),tt(u,me,w),ta(I,e.domain,R),tt(I,Se,R),tt(I,ke,R),ta(_e,e.domain,R),ta(_e,n,R),tt(_e,Se,R);const Oe=[[F,B],[L,j],[V,U],[H,q],[K,W],[G,J],[Y,X],[Z,Q]];for(let e=0;e<Oe.length;e++){const[o,i]=Oe[e],s=tt(R,o);tt(A,o,s),tt(s,i,R);const a=makeState(Ke);ta(s,n,a);const c=makeState();ta(s,r),ta(a,n,a),ta(a,r,c),ta(c,n,a),ta(c,r,c),tt(a,i,R),tt(c,i,R)}return tt(i,T,C),tt(i,z,qe),{start:i,tokens:Me}}(Ye.scanner.tokens);for(let e=0;e<Ye.pluginQueue.length;e++)Ye.pluginQueue[e][1]({scanner:Ye.scanner,parser:Ye.parser});return Ye.initialized=!0,Ye}function tokenize(e){return Ye.initialized||init(),function run(e,n,r){let o=r.length,i=0,s=[],a=[];for(;i<o;){let c=e,u=null,p=null,f=0,g=null,b=-1;for(;i<o&&!(u=c.go(r[i].t));)a.push(r[i++]);for(;i<o&&(p=u||c.go(r[i].t));)u=null,c=p,c.accepts()?(b=0,g=c):b>=0&&b++,i++,f++;if(b<0)i-=f,i<o&&(a.push(r[i]),i++);else{a.length>0&&(s.push(initMultiToken(He,n,a)),a=[]),i-=b,f-=b;const e=g.t,o=r.slice(i-f,i);s.push(initMultiToken(e,n,o))}}return a.length>0&&s.push(initMultiToken(He,n,a)),s}(Ye.parser.start,e,run$1(Ye.scanner.start,e))}function find(e,n=null,r=null){if(n&&"object"==typeof n){if(r)throw Error(`linkifyjs: Invalid link type ${n}; must be a string`);r=n,n=null}const o=new Options(r),i=tokenize(e),s=[];for(let e=0;e<i.length;e++){const r=i[e];!r.isLink||n&&r.t!==n||!o.check(r)||s.push(r.toFormattedObject(o))}return s}function test(e,n=null){const r=tokenize(e);return 1===r.length&&r[0].isLink&&(!n||r[0].t===n)}tokenize.scan=run$1},"./packages/node_modules/orderedmap/dist/index.js":function(e,n,r){"use strict";function OrderedMap(e){this.content=e}r.r(n),OrderedMap.prototype={constructor:OrderedMap,find:function(e){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===e)return n;return-1},get:function(e){var n=this.find(e);return-1==n?void 0:this.content[n+1]},update:function(e,n,r){var o=r&&r!=e?this.remove(r):this,i=o.find(e),s=o.content.slice();return-1==i?s.push(r||e,n):(s[i+1]=n,r&&(s[i]=r)),new OrderedMap(s)},remove:function(e){var n=this.find(e);if(-1==n)return this;var r=this.content.slice();return r.splice(n,2),new OrderedMap(r)},addToStart:function(e,n){return new OrderedMap([e,n].concat(this.remove(e).content))},addToEnd:function(e,n){var r=this.remove(e).content.slice();return r.push(e,n),new OrderedMap(r)},addBefore:function(e,n,r){var o=this.remove(n),i=o.content.slice(),s=o.find(e);return i.splice(-1==s?i.length:s,0,n,r),new OrderedMap(i)},forEach:function(e){for(var n=0;n<this.content.length;n+=2)e(this.content[n],this.content[n+1])},prepend:function(e){return(e=OrderedMap.from(e)).size?new OrderedMap(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=OrderedMap.from(e)).size?new OrderedMap(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var n=this;e=OrderedMap.from(e);for(var r=0;r<e.content.length;r+=2)n=n.remove(e.content[r]);return n},toObject:function(){var e={};return this.forEach(function(n,r){e[n]=r}),e},get size(){return this.content.length>>1}},OrderedMap.from=function(e){if(e instanceof OrderedMap)return e;var n=[];if(e)for(var r in e)n.push(r,e[r]);return new OrderedMap(n)},n.default=OrderedMap},"./packages/node_modules/prosemirror-commands/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{autoJoin:function(){return autoJoin},baseKeymap:function(){return k},chainCommands:function(){return chainCommands},createParagraphNear:function(){return createParagraphNear},deleteSelection:function(){return deleteSelection},exitCode:function(){return exitCode},joinBackward:function(){return joinBackward},joinDown:function(){return joinDown},joinForward:function(){return joinForward},joinTextblockBackward:function(){return joinTextblockBackward},joinTextblockForward:function(){return joinTextblockForward},joinUp:function(){return joinUp},lift:function(){return lift},liftEmptyBlock:function(){return liftEmptyBlock},macBaseKeymap:function(){return b},newlineInCode:function(){return newlineInCode},pcBaseKeymap:function(){return g},selectAll:function(){return selectAll},selectNodeBackward:function(){return selectNodeBackward},selectNodeForward:function(){return selectNodeForward},selectParentNode:function(){return selectParentNode},selectTextblockEnd:function(){return u},selectTextblockStart:function(){return c},setBlockType:function(){return setBlockType},splitBlock:function(){return a},splitBlockAs:function(){return splitBlockAs},splitBlockKeepMarks:function(){return splitBlockKeepMarks},toggleMark:function(){return toggleMark},wrapIn:function(){return wrapIn}});var o=r("./packages/node_modules/prosemirror-transform/dist/index.js"),i=r("./packages/node_modules/prosemirror-model/dist/index.js"),s=r("./packages/node_modules/prosemirror-state/dist/index.js");const deleteSelection=(e,n)=>!e.selection.empty&&(n&&n(e.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(e,n){let{$cursor:r}=e.selection;return!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0)?null:r}const joinBackward=(e,n,r)=>{let a=atBlockStart(e,r);if(!a)return!1;let c=findCutBefore(a);if(!c){let r=a.blockRange(),i=r&&(0,o.liftTarget)(r);return null!=i&&(n&&n(e.tr.lift(r,i).scrollIntoView()),!0)}let u=c.nodeBefore;if(deleteBarrier(e,c,n,-1))return!0;if(0==a.parent.content.size&&(textblockAt(u,"end")||s.NodeSelection.isSelectable(u)))for(let r=a.depth;;r--){let p=(0,o.replaceStep)(e.doc,a.before(r),a.after(r),i.Slice.empty);if(p&&p.slice.size<p.to-p.from){if(n){let r=e.tr.step(p);r.setSelection(textblockAt(u,"end")?s.Selection.findFrom(r.doc.resolve(r.mapping.map(c.pos,-1)),-1):s.NodeSelection.create(r.doc,c.pos-u.nodeSize)),n(r.scrollIntoView())}return!0}if(1==r||a.node(r-1).childCount>1)break}return!(!u.isAtom||c.depth!=a.depth-1)&&(n&&n(e.tr.delete(c.pos-u.nodeSize,c.pos).scrollIntoView()),!0)},joinTextblockBackward=(e,n,r)=>{let o=atBlockStart(e,r);if(!o)return!1;let i=findCutBefore(o);return!!i&&joinTextblocksAround(e,i,n)},joinTextblockForward=(e,n,r)=>{let o=atBlockEnd(e,r);if(!o)return!1;let i=findCutAfter(o);return!!i&&joinTextblocksAround(e,i,n)};function joinTextblocksAround(e,n,r){let a=n.nodeBefore,c=n.pos-1;for(;!a.isTextblock;c--){if(a.type.spec.isolating)return!1;let e=a.lastChild;if(!e)return!1;a=e}let u=n.nodeAfter,p=n.pos+1;for(;!u.isTextblock;p++){if(u.type.spec.isolating)return!1;let e=u.firstChild;if(!e)return!1;u=e}let f=(0,o.replaceStep)(e.doc,c,p,i.Slice.empty);if(!f||f.from!=c||f instanceof o.ReplaceStep&&f.slice.size>=p-c)return!1;if(r){let n=e.tr.step(f);n.setSelection(s.TextSelection.create(n.doc,c)),r(n.scrollIntoView())}return!0}function textblockAt(e,n,r=!1){for(let o=e;o;o="start"==n?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(r&&1!=o.childCount)return!1}return!1}const selectNodeBackward=(e,n,r)=>{let{$head:o,empty:i}=e.selection,a=o;if(!i)return!1;if(o.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):o.parentOffset>0)return!1;a=findCutBefore(o)}let c=a&&a.nodeBefore;return!(!c||!s.NodeSelection.isSelectable(c))&&(n&&n(e.tr.setSelection(s.NodeSelection.create(e.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)};function findCutBefore(e){if(!e.parent.type.spec.isolating)for(let n=e.depth-1;n>=0;n--){if(e.index(n)>0)return e.doc.resolve(e.before(n+1));if(e.node(n).type.spec.isolating)break}return null}function atBlockEnd(e,n){let{$cursor:r}=e.selection;return!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)?null:r}const joinForward=(e,n,r)=>{let a=atBlockEnd(e,r);if(!a)return!1;let c=findCutAfter(a);if(!c)return!1;let u=c.nodeAfter;if(deleteBarrier(e,c,n,1))return!0;if(0==a.parent.content.size&&(textblockAt(u,"start")||s.NodeSelection.isSelectable(u))){let r=(0,o.replaceStep)(e.doc,a.before(),a.after(),i.Slice.empty);if(r&&r.slice.size<r.to-r.from){if(n){let o=e.tr.step(r);o.setSelection(textblockAt(u,"start")?s.Selection.findFrom(o.doc.resolve(o.mapping.map(c.pos)),1):s.NodeSelection.create(o.doc,o.mapping.map(c.pos))),n(o.scrollIntoView())}return!0}}return!(!u.isAtom||c.depth!=a.depth-1)&&(n&&n(e.tr.delete(c.pos,c.pos+u.nodeSize).scrollIntoView()),!0)},selectNodeForward=(e,n,r)=>{let{$head:o,empty:i}=e.selection,a=o;if(!i)return!1;if(o.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;a=findCutAfter(o)}let c=a&&a.nodeAfter;return!(!c||!s.NodeSelection.isSelectable(c))&&(n&&n(e.tr.setSelection(s.NodeSelection.create(e.doc,a.pos)).scrollIntoView()),!0)};function findCutAfter(e){if(!e.parent.type.spec.isolating)for(let n=e.depth-1;n>=0;n--){let r=e.node(n);if(e.index(n)+1<r.childCount)return e.doc.resolve(e.after(n+1));if(r.type.spec.isolating)break}return null}const joinUp=(e,n)=>{let r,i=e.selection,a=i instanceof s.NodeSelection;if(a){if(i.node.isTextblock||!(0,o.canJoin)(e.doc,i.from))return!1;r=i.from}else if(r=(0,o.joinPoint)(e.doc,i.from,-1),null==r)return!1;if(n){let o=e.tr.join(r);a&&o.setSelection(s.NodeSelection.create(o.doc,r-e.doc.resolve(r).nodeBefore.nodeSize)),n(o.scrollIntoView())}return!0},joinDown=(e,n)=>{let r,i=e.selection;if(i instanceof s.NodeSelection){if(i.node.isTextblock||!(0,o.canJoin)(e.doc,i.to))return!1;r=i.to}else if(r=(0,o.joinPoint)(e.doc,i.to,1),null==r)return!1;return n&&n(e.tr.join(r).scrollIntoView()),!0},lift=(e,n)=>{let{$from:r,$to:i}=e.selection,s=r.blockRange(i),a=s&&(0,o.liftTarget)(s);return null!=a&&(n&&n(e.tr.lift(s,a).scrollIntoView()),!0)},newlineInCode=(e,n)=>{let{$head:r,$anchor:o}=e.selection;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(n&&n(e.tr.insertText("\n").scrollIntoView()),!0)};function defaultBlockAt(e){for(let n=0;n<e.edgeCount;n++){let{type:r}=e.edge(n);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const exitCode=(e,n)=>{let{$head:r,$anchor:o}=e.selection;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;let i=r.node(-1),a=r.indexAfter(-1),c=defaultBlockAt(i.contentMatchAt(a));if(!c||!i.canReplaceWith(a,a,c))return!1;if(n){let o=r.after(),i=e.tr.replaceWith(o,o,c.createAndFill());i.setSelection(s.Selection.near(i.doc.resolve(o),1)),n(i.scrollIntoView())}return!0},createParagraphNear=(e,n)=>{let r=e.selection,{$from:o,$to:i}=r;if(r instanceof s.AllSelection||o.parent.inlineContent||i.parent.inlineContent)return!1;let a=defaultBlockAt(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(n){let r=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,c=e.tr.insert(r,a.createAndFill());c.setSelection(s.TextSelection.create(c.doc,r+1)),n(c.scrollIntoView())}return!0},liftEmptyBlock=(e,n)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let i=r.before();if((0,o.canSplit)(e.doc,i))return n&&n(e.tr.split(i).scrollIntoView()),!0}let i=r.blockRange(),s=i&&(0,o.liftTarget)(i);return null!=s&&(n&&n(e.tr.lift(i,s).scrollIntoView()),!0)};function splitBlockAs(e){return(n,r)=>{let{$from:i,$to:a}=n.selection;if(n.selection instanceof s.NodeSelection&&n.selection.node.isBlock)return!(!i.parentOffset||!(0,o.canSplit)(n.doc,i.pos))&&(r&&r(n.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let c,u,p=[],f=!1,g=!1;for(let n=i.depth;;n--){if(i.node(n).isBlock){f=i.end(n)==i.pos+(i.depth-n),g=i.start(n)==i.pos-(i.depth-n),u=defaultBlockAt(i.node(n-1).contentMatchAt(i.indexAfter(n-1)));let r=e&&e(a.parent,f,i);p.unshift(r||(f&&u?{type:u}:null)),c=n;break}if(1==n)return!1;p.unshift(null)}let b=n.tr;(n.selection instanceof s.TextSelection||n.selection instanceof s.AllSelection)&&b.deleteSelection();let k=b.mapping.map(i.pos),v=(0,o.canSplit)(b.doc,k,p.length,p);if(v||(p[0]=u?{type:u}:null,v=(0,o.canSplit)(b.doc,k,p.length,p)),!v)return!1;if(b.split(k,p.length,p),!f&&g&&i.node(c).type!=u){let e=b.mapping.map(i.before(c)),n=b.doc.resolve(e);u&&i.node(c-1).canReplaceWith(n.index(),n.index()+1,u)&&b.setNodeMarkup(b.mapping.map(i.before(c)),u)}return r&&r(b.scrollIntoView()),!0}}const a=splitBlockAs(),splitBlockKeepMarks=(e,n)=>a(e,n&&(r=>{let o=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();o&&r.ensureMarks(o),n(r)})),selectParentNode=(e,n)=>{let r,{$from:o,to:i}=e.selection,a=o.sharedDepth(i);return 0!=a&&(r=o.before(a),n&&n(e.tr.setSelection(s.NodeSelection.create(e.doc,r))),!0)},selectAll=(e,n)=>(n&&n(e.tr.setSelection(new s.AllSelection(e.doc))),!0);function deleteBarrier(e,n,r,a){let c,u,p=n.nodeBefore,f=n.nodeAfter,g=p.type.spec.isolating||f.type.spec.isolating;if(!g&&function joinMaybeClear(e,n,r){let i=n.nodeBefore,s=n.nodeAfter,a=n.index();return!(!(i&&s&&i.type.compatibleContent(s.type))||(!i.content.size&&n.parent.canReplace(a-1,a)?(r&&r(e.tr.delete(n.pos-i.nodeSize,n.pos).scrollIntoView()),0):!n.parent.canReplace(a,a+1)||!s.isTextblock&&!(0,o.canJoin)(e.doc,n.pos)||(r&&r(e.tr.join(n.pos).scrollIntoView()),0)))}(e,n,r))return!0;let b=!g&&n.parent.canReplace(n.index(),n.index()+1);if(b&&(c=(u=p.contentMatchAt(p.childCount)).findWrapping(f.type))&&u.matchType(c[0]||f.type).validEnd){if(r){let s=n.pos+f.nodeSize,a=i.Fragment.empty;for(let e=c.length-1;e>=0;e--)a=i.Fragment.from(c[e].create(null,a));a=i.Fragment.from(p.copy(a));let u=e.tr.step(new o.ReplaceAroundStep(n.pos-1,s,n.pos,s,new i.Slice(a,1,0),c.length,!0)),g=u.doc.resolve(s+2*c.length);g.nodeAfter&&g.nodeAfter.type==p.type&&(0,o.canJoin)(u.doc,g.pos)&&u.join(g.pos),r(u.scrollIntoView())}return!0}let k=f.type.spec.isolating||a>0&&g?null:s.Selection.findFrom(n,1),v=k&&k.$from.blockRange(k.$to),x=v&&(0,o.liftTarget)(v);if(null!=x&&x>=n.depth)return r&&r(e.tr.lift(v,x).scrollIntoView()),!0;if(b&&textblockAt(f,"start",!0)&&textblockAt(p,"end")){let s=p,a=[];for(;a.push(s),!s.isTextblock;)s=s.lastChild;let c=f,u=1;for(;!c.isTextblock;c=c.firstChild)u++;if(s.canReplace(s.childCount,s.childCount,c.content)){if(r){let s=i.Fragment.empty;for(let e=a.length-1;e>=0;e--)s=i.Fragment.from(a[e].copy(s));r(e.tr.step(new o.ReplaceAroundStep(n.pos-a.length,n.pos+f.nodeSize,n.pos+u,n.pos+f.nodeSize-u,new i.Slice(s,a.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function selectTextblockSide(e){return function(n,r){let o=n.selection,i=e<0?o.$from:o.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return!!i.node(a).isTextblock&&(r&&r(n.tr.setSelection(s.TextSelection.create(n.doc,e<0?i.start(a):i.end(a)))),!0)}}const c=selectTextblockSide(-1),u=selectTextblockSide(1);function wrapIn(e,n=null){return function(r,i){let{$from:s,$to:a}=r.selection,c=s.blockRange(a),u=c&&(0,o.findWrapping)(c,e,n);return!!u&&(i&&i(r.tr.wrap(c,u).scrollIntoView()),!0)}}function setBlockType(e,n=null){return function(r,o){let i=!1;for(let o=0;o<r.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=r.selection.ranges[o];r.doc.nodesBetween(s,a,(o,s)=>{if(i)return!1;if(o.isTextblock&&!o.hasMarkup(e,n))if(o.type==e)i=!0;else{let n=r.doc.resolve(s),o=n.index();i=n.parent.canReplaceWith(o,o+1,e)}})}if(!i)return!1;if(o){let i=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:s},$to:{pos:a}}=r.selection.ranges[o];i.setBlockType(s,a,e,n)}o(i.scrollIntoView())}return!0}}function toggleMark(e,n=null,r){let o=!1!==(r&&r.removeWhenPresent),i=!1!==(r&&r.enterInlineAtoms),a=!(r&&r.includeWhitespace);return function(r,c){let{empty:u,$cursor:p,ranges:f}=r.selection;if(u&&!p||!function markApplies(e,n,r,o){for(let i=0;i<n.length;i++){let{$from:s,$to:a}=n[i],c=0==s.depth&&e.inlineContent&&e.type.allowsMarkType(r);if(e.nodesBetween(s.pos,a.pos,(e,n)=>{if(c||!o&&e.isAtom&&e.isInline&&n>=s.pos&&n+e.nodeSize<=a.pos)return!1;c=e.inlineContent&&e.type.allowsMarkType(r)}),c)return!0}return!1}(r.doc,f,e,i))return!1;if(c)if(p)e.isInSet(r.storedMarks||p.marks())?c(r.tr.removeStoredMark(e)):c(r.tr.addStoredMark(e.create(n)));else{let u,p=r.tr;i||(f=function removeInlineAtoms(e){let n=[];for(let r=0;r<e.length;r++){let{$from:o,$to:i}=e[r];o.doc.nodesBetween(o.pos,i.pos,(e,r)=>{if(e.isAtom&&e.content.size&&e.isInline&&r>=o.pos&&r+e.nodeSize<=i.pos)return r+1>o.pos&&n.push(new s.SelectionRange(o,o.doc.resolve(r+1))),o=o.doc.resolve(r+1+e.content.size),!1}),o.pos<i.pos&&n.push(new s.SelectionRange(o,i))}return n}(f)),u=o?!f.some(n=>r.doc.rangeHasMark(n.$from.pos,n.$to.pos,e)):!f.every(n=>{let r=!1;return p.doc.nodesBetween(n.$from.pos,n.$to.pos,(o,i,s)=>{if(r)return!1;r=!e.isInSet(o.marks)&&!!s&&s.type.allowsMarkType(e)&&!(o.isText&&/^\s*$/.test(o.textBetween(Math.max(0,n.$from.pos-i),Math.min(o.nodeSize,n.$to.pos-i))))}),!r});for(let r=0;r<f.length;r++){let{$from:o,$to:i}=f[r];if(u){let r=o.pos,s=i.pos,c=o.nodeAfter,u=i.nodeBefore,f=a&&c&&c.isText?/^\s*/.exec(c.text)[0].length:0,g=a&&u&&u.isText?/\s*$/.exec(u.text)[0].length:0;r+f<s&&(r+=f,s-=g),p.addMark(r,s,e.create(n))}else p.removeMark(o.pos,i.pos,e)}c(p.scrollIntoView())}return!0}}function autoJoin(e,n){let r=Array.isArray(n)?e=>n.indexOf(e.type.name)>-1:n;return(n,i,s)=>e(n,i&&function wrapDispatchForJoin(e,n){return r=>{if(!r.isGeneric)return e(r);let i=[];for(let e=0;e<r.mapping.maps.length;e++){let n=r.mapping.maps[e];for(let e=0;e<i.length;e++)i[e]=n.map(i[e]);n.forEach((e,n,r,o)=>i.push(r,o))}let s=[];for(let e=0;e<i.length;e+=2){let o=i[e],a=i[e+1],c=r.doc.resolve(o),u=c.sharedDepth(a),p=c.node(u);for(let e=c.indexAfter(u),r=c.after(u+1);r<=a;++e){let o=p.maybeChild(e);if(!o)break;if(e&&-1==s.indexOf(r)){let i=p.child(e-1);i.type==o.type&&n(i,o)&&s.push(r)}r+=o.nodeSize}}s.sort((e,n)=>e-n);for(let e=s.length-1;e>=0;e--)(0,o.canJoin)(r.doc,s[e])&&r.join(s[e]);e(r)}}(i,r),s)}function chainCommands(...e){return function(n,r,o){for(let i=0;i<e.length;i++)if(e[i](n,r,o))return!0;return!1}}let p=chainCommands(deleteSelection,joinBackward,selectNodeBackward),f=chainCommands(deleteSelection,joinForward,selectNodeForward);const g={Enter:chainCommands(newlineInCode,createParagraphNear,liftEmptyBlock,a),"Mod-Enter":exitCode,Backspace:p,"Mod-Backspace":p,"Shift-Backspace":p,Delete:f,"Mod-Delete":f,"Mod-a":selectAll},b={"Ctrl-h":g.Backspace,"Alt-Backspace":g["Mod-Backspace"],"Ctrl-d":g.Delete,"Ctrl-Alt-Backspace":g["Mod-Delete"],"Alt-Delete":g["Mod-Delete"],"Alt-d":g["Mod-Delete"],"Ctrl-a":c,"Ctrl-e":u};for(let e in g)b[e]=g[e];const k=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?b:g},"./packages/node_modules/prosemirror-keymap/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{keydownHandler:function(){return keydownHandler},keymap:function(){return keymap}});var o=r("./packages/node_modules/w3c-keyname/index.js"),i=r("./packages/node_modules/prosemirror-state/dist/index.js");const s="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),a="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function normalizeKeyName(e){let n,r,o,i,a=e.split(/-(?!$)/),c=a[a.length-1];"Space"==c&&(c=" ");for(let e=0;e<a.length-1;e++){let c=a[e];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))n=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);s?i=!0:r=!0}}return n&&(c="Alt-"+c),r&&(c="Ctrl-"+c),i&&(c="Meta-"+c),o&&(c="Shift-"+c),c}function modifiers(e,n,r=!0){return n.altKey&&(e="Alt-"+e),n.ctrlKey&&(e="Ctrl-"+e),n.metaKey&&(e="Meta-"+e),r&&n.shiftKey&&(e="Shift-"+e),e}function keymap(e){return new i.Plugin({props:{handleKeyDown:keydownHandler(e)}})}function keydownHandler(e){let n=function normalize(e){let n=Object.create(null);for(let r in e)n[normalizeKeyName(r)]=e[r];return n}(e);return function(e,r){let i,s=(0,o.keyName)(r),c=n[modifiers(s,r)];if(c&&c(e.state,e.dispatch,e))return!0;if(1==s.length&&" "!=s){if(r.shiftKey){let o=n[modifiers(s,r,!1)];if(o&&o(e.state,e.dispatch,e))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(a&&r.ctrlKey&&r.altKey)&&(i=o.base[r.keyCode])&&i!=s){let o=n[modifiers(i,r)];if(o&&o(e.state,e.dispatch,e))return!0}}return!1}}},"./packages/node_modules/prosemirror-model/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{ContentMatch:function(){return ContentMatch},DOMParser:function(){return DOMParser},DOMSerializer:function(){return DOMSerializer},Fragment:function(){return Fragment},Mark:function(){return Mark},MarkType:function(){return MarkType},Node:function(){return Node},NodeRange:function(){return NodeRange},NodeType:function(){return NodeType},ReplaceError:function(){return ReplaceError},ResolvedPos:function(){return ResolvedPos},Schema:function(){return Schema},Slice:function(){return Slice}});var o=r("./packages/node_modules/orderedmap/dist/index.js");function findDiffStart(e,n,r){for(let o=0;;o++){if(o==e.childCount||o==n.childCount)return e.childCount==n.childCount?null:r;let i=e.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let e=0;i.text[e]==s.text[e];e++)r++;return r}if(i.content.size||s.content.size){let e=findDiffStart(i.content,s.content,r+1);if(null!=e)return e}r+=i.nodeSize}else r+=i.nodeSize}}function findDiffEnd(e,n,r,o){for(let i=e.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};let a=e.child(--i),c=n.child(--s),u=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:r,b:o};if(a.isText&&a.text!=c.text){let e=0,n=Math.min(a.text.length,c.text.length);for(;e<n&&a.text[a.text.length-e-1]==c.text[c.text.length-e-1];)e++,r--,o--;return{a:r,b:o}}if(a.content.size||c.content.size){let e=findDiffEnd(a.content,c.content,r-1,o-1);if(e)return e}r-=u,o-=u}else r-=u,o-=u}}class Fragment{constructor(e,n){if(this.content=e,this.size=n||0,null==n)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let c=this.content[s],u=a+c.nodeSize;if(u>e&&!1!==r(c,o+a,i||null,s)&&c.content.size){let i=a+1;c.nodesBetween(Math.max(0,e-i),Math.min(c.content.size,n-i),r,o+i)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,c)=>{let u=a.isText?a.text.slice(Math.max(e,c)-c,n-c):a.isLeaf?o?"function"==typeof o?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new Fragment(o,this.size+e.size)}cut(e,n=this.size){if(0==e&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],c=s+a.nodeSize;c>e&&((s<e||c>n)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=c}return new Fragment(r,o)}cutByIndex(e,n){return e==n?Fragment.empty:0==e&&n==this.content.length?this:new Fragment(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new Fragment(o,i)}addToStart(e){return new Fragment([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Fragment(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return findDiffStart(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return findDiffEnd(this,e,n,r)}findIndex(e){if(0==e)return retIndex(0,e);if(e==this.size)return retIndex(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=e)return o==e?retIndex(n+1,o):retIndex(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Fragment.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Fragment.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new Fragment(n||e,r)}static from(e){if(!e)return Fragment.empty;if(e instanceof Fragment)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Fragment([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const i={index:0,offset:0};function retIndex(e,n){return i.index=e,i.offset=n,i}function compareDeep(e,n){if(e===n)return!0;if(!e||"object"!=typeof e||!n||"object"!=typeof n)return!1;let r=Array.isArray(e);if(Array.isArray(n)!=r)return!1;if(r){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!compareDeep(e[r],n[r]))return!1}else{for(let r in e)if(!(r in n)||!compareDeep(e[r],n[r]))return!1;for(let r in n)if(!(r in e))return!1}return!0}class Mark{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&compareDeep(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return Mark.none;if(e instanceof Mark)return[e];let n=e.slice();return n.sort((e,n)=>e.type.rank-n.type.rank),n}}Mark.none=[];class ReplaceError extends Error{}class Slice{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=insertInto(this.content,e+this.openStart,n);return r&&new Slice(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Slice(removeRange(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Slice.empty;let r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let r=e.lastChild;r&&!r.isLeaf&&(n||!r.type.spec.isolating);r=r.lastChild)o++;return new Slice(e,r,o)}}function removeRange(e,n,r){let{index:o,offset:i}=e.findIndex(n),s=e.maybeChild(o),{index:a,offset:c}=e.findIndex(r);if(i==n||s.isText){if(c!=r&&!e.child(a).isText)throw new RangeError("Removing non-flat range");return e.cut(0,n).append(e.cut(r))}if(o!=a)throw new RangeError("Removing non-flat range");return e.replaceChild(o,s.copy(removeRange(s.content,n-i-1,r-i-1)))}function insertInto(e,n,r,o){let{index:i,offset:s}=e.findIndex(n),a=e.maybeChild(i);if(s==n||a.isText)return o&&!o.canReplace(i,i,r)?null:e.cut(0,n).append(r).append(e.cut(n));let c=insertInto(a.content,n-s-1,r,a);return c&&e.replaceChild(i,a.copy(c))}function replace(e,n,r){if(r.openStart>e.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(e.depth-r.openStart!=n.depth-r.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(e,n,r,0)}function replaceOuter(e,n,r,o){let i=e.index(o),s=e.node(o);if(i==n.index(o)&&o<e.depth-r.openStart){let a=replaceOuter(e,n,r,o+1);return s.copy(s.content.replaceChild(i,a))}if(r.content.size){if(r.openStart||r.openEnd||e.depth!=o||n.depth!=o){let{start:i,end:a}=function prepareSliceForReplace(e,n){let r=n.depth-e.openStart,o=n.node(r).copy(e.content);for(let e=r-1;e>=0;e--)o=n.node(e).copy(Fragment.from(o));return{start:o.resolveNoCache(e.openStart+r),end:o.resolveNoCache(o.content.size-e.openEnd-r)}}(r,e);return close(s,replaceThreeWay(e,i,a,n,o))}{let o=e.parent,i=o.content;return close(o,i.cut(0,e.parentOffset).append(r.content).append(i.cut(n.parentOffset)))}}return close(s,replaceTwoWay(e,n,o))}function checkJoin(e,n){if(!n.type.compatibleContent(e.type))throw new ReplaceError("Cannot join "+n.type.name+" onto "+e.type.name)}function joinable(e,n,r){let o=e.node(r);return checkJoin(o,n.node(r)),o}function addNode(e,n){let r=n.length-1;r>=0&&e.isText&&e.sameMarkup(n[r])?n[r]=e.withText(n[r].text+e.text):n.push(e)}function addRange(e,n,r,o){let i=(n||e).node(r),s=0,a=n?n.index(r):i.childCount;e&&(s=e.index(r),e.depth>r?s++:e.textOffset&&(addNode(e.nodeAfter,o),s++));for(let e=s;e<a;e++)addNode(i.child(e),o);n&&n.depth==r&&n.textOffset&&addNode(n.nodeBefore,o)}function close(e,n){return e.type.checkContent(n),e.copy(n)}function replaceThreeWay(e,n,r,o,i){let s=e.depth>i&&joinable(e,n,i+1),a=o.depth>i&&joinable(r,o,i+1),c=[];return addRange(null,e,i,c),s&&a&&n.index(i)==r.index(i)?(checkJoin(s,a),addNode(close(s,replaceThreeWay(e,n,r,o,i+1)),c)):(s&&addNode(close(s,replaceTwoWay(e,n,i+1)),c),addRange(n,r,i,c),a&&addNode(close(a,replaceTwoWay(r,o,i+1)),c)),addRange(o,null,i,c),new Fragment(c)}function replaceTwoWay(e,n,r){let o=[];if(addRange(null,e,r,o),e.depth>r){addNode(close(joinable(e,n,r+1),replaceTwoWay(e,n,r+1)),o)}return addRange(n,null,r,o),new Fragment(o)}Slice.empty=new Slice(Fragment.empty,0,0);class ResolvedPos{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):0==e?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[3*n],o=0==n?0:this.path[3*n-1]+1;for(let n=0;n<e;n++)o+=r.child(n).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(0==e.content.size)return Mark.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let e=r;r=o,o=e}let i=r.marks;for(var s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||o&&i[s].isInSet(o.marks)||(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)!1!==r[i].type.spec.inclusive||o&&r[i].isInSet(o.marks)||(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new NodeRange(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let n=e;;){let{index:e,offset:s}=n.content.findIndex(i),a=i-s;if(r.push(n,e,o+s),!a)break;if(n=n.child(e),n.isText)break;i=a-1,o+=s+1}return new ResolvedPos(n,r,i)}static resolveCached(e,n){let r=a.get(e);if(r)for(let e=0;e<r.elts.length;e++){let o=r.elts[e];if(o.pos==n)return o}else a.set(e,r=new ResolveCache);let o=r.elts[r.i]=ResolvedPos.resolve(e,n);return r.i=(r.i+1)%s,o}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const s=12,a=new WeakMap;class NodeRange{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const c=Object.create(null);class Node{constructor(e,n,r,o=Mark.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&compareDeep(this.attrs,n||e.defaultAttrs||c)&&Mark.sameSet(this.marks,r||Mark.none)}copy(e=null){return e==this.content?this:new Node(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Node(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return 0==e&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Slice.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new Slice(c,o.depth-s,i.depth-s)}replace(e,n,r){return replace(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return ResolvedPos.resolveCached(this,e)}resolveNoCache(e){return ResolvedPos.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,e=>(r.isInSet(e.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Fragment.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let e=o;e<i;e++)if(!this.type.allowsMarks(r.child(e).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return!!s&&s.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mark.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Mark.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if("text"==n.type){if("string"!=typeof n.text)throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=Fragment.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}}Node.prototype.text=void 0;class TextNode extends Node{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new TextNode(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new TextNode(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return 0==e&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wrapMarks(e,n){for(let r=e.length-1;r>=0;r--)n=e[r].type.name+"("+n+")";return n}class ContentMatch{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new TokenStream(e,n);if(null==r.next)return ContentMatch.empty;let o=parseExpr(r);r.next&&r.err("Unexpected trailing text");let i=function dfa(e){let n=Object.create(null);return explore(nullFrom(e,0));function explore(r){let o=[];r.forEach(n=>{e[n].forEach(({term:n,to:r})=>{if(!n)return;let i;for(let e=0;e<o.length;e++)o[e][0]==n&&(i=o[e][1]);nullFrom(e,r).forEach(e=>{i||o.push([n,i=[]]),-1==i.indexOf(e)&&i.push(e)})})});let i=n[r.join(",")]=new ContentMatch(r.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let r=o[e][1].sort(cmp);i.next.push({type:o[e][0],next:n[r.join(",")]||explore(r)})}return i}}(function nfa(e){let n=[[]];return connect(compile(e,0),node()),n;function node(){return n.push([])-1}function edge(e,r,o){let i={term:o,to:r};return n[e].push(i),i}function connect(e,n){e.forEach(e=>e.to=n)}function compile(e,n){if("choice"==e.type)return e.exprs.reduce((e,r)=>e.concat(compile(r,n)),[]);if("seq"!=e.type){if("star"==e.type){let r=node();return edge(n,r),connect(compile(e.expr,r),r),[edge(r)]}if("plus"==e.type){let r=node();return connect(compile(e.expr,n),r),connect(compile(e.expr,r),r),[edge(r)]}if("opt"==e.type)return[edge(n)].concat(compile(e.expr,n));if("range"==e.type){let r=n;for(let n=0;n<e.min;n++){let n=node();connect(compile(e.expr,r),n),r=n}if(-1==e.max)connect(compile(e.expr,r),r);else for(let n=e.min;n<e.max;n++){let n=node();edge(r,n),connect(compile(e.expr,r),n),r=n}return[edge(r)]}if("name"==e.type)return[edge(n,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let o=compile(e.exprs[r],n);if(r==e.exprs.length-1)return o;connect(o,n=node())}}}(o));return function checkForDeadEnds(e,n){for(let r=0,o=[e];r<o.length;r++){let e=o[r],i=!e.validEnd,s=[];for(let n=0;n<e.next.length;n++){let{type:r,next:a}=e.next[n];s.push(r.name),!i||r.isText||r.hasRequiredAttrs()||(i=!1),-1==o.indexOf(a)&&o.push(a)}i&&n.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!n.isText&&!n.hasRequiredAttrs())return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];return function search(i,s){let a=i.matchFragment(e,r);if(a&&(!n||a.validEnd))return Fragment.from(s.map(e=>e.createAndFill()));for(let e=0;e<i.next.length;e++){let{type:n,next:r}=i.next[e];if(!n.isText&&!n.hasRequiredAttrs()&&-1==o.indexOf(r)){o.push(r);let e=search(r,s.concat(n));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let e=[];for(let n=o;n.type;n=n.via)e.push(n.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:s,next:a}=i.next[e];s.isLeaf||s.hasRequiredAttrs()||s.name in n||o.type&&!a.validEnd||(r.push({match:s.contentMatch,type:s,via:o}),n[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function scan(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&scan(n.next[r].next)}(this),e.map((n,r)=>{let o=r+(n.validEnd?"*":" ")+" ";for(let r=0;r<n.next.length;r++)o+=(r?", ":"")+n.next[r].type.name+"->"+e.indexOf(n.next[r].next);return o}).join("\n")}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function parseExpr(e){let n=[];do{n.push(parseExprSeq(e))}while(e.eat("|"));return 1==n.length?n[0]:{type:"choice",exprs:n}}function parseExprSeq(e){let n=[];do{n.push(parseExprSubscript(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==n.length?n[0]:{type:"seq",exprs:n}}function parseExprSubscript(e){let n=function parseExprAtom(e){if(e.eat("(")){let n=parseExpr(e);return e.eat(")")||e.err("Missing closing paren"),n}if(!/\W/.test(e.next)){let n=function resolveName(e,n){let r=e.nodeTypes,o=r[n];if(o)return[o];let i=[];for(let e in r){let o=r[e];o.isInGroup(n)&&i.push(o)}0==i.length&&e.err("No node type or group '"+n+"' found");return i}(e,e.next).map(n=>(null==e.inline?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))n={type:"plus",expr:n};else if(e.eat("*"))n={type:"star",expr:n};else if(e.eat("?"))n={type:"opt",expr:n};else{if(!e.eat("{"))break;n=parseExprRange(e,n)}return n}function parseNum(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let n=Number(e.next);return e.pos++,n}function parseExprRange(e,n){let r=parseNum(e),o=r;return e.eat(",")&&(o="}"!=e.next?parseNum(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:o,expr:n}}function cmp(e,n){return n-e}function nullFrom(e,n){let r=[];return function scan(n){let o=e[n];if(1==o.length&&!o[0].term)return scan(o[0].to);r.push(n);for(let e=0;e<o.length;e++){let{term:n,to:i}=o[e];n||-1!=r.indexOf(i)||scan(i)}}(n),r.sort(cmp)}function defaultAttrs(e){let n=Object.create(null);for(let r in e){let o=e[r];if(!o.hasDefault)return null;n[r]=o.default}return n}function computeAttrs(e,n){let r=Object.create(null);for(let o in e){let i=n&&n[o];if(void 0===i){let n=e[o];if(!n.hasDefault)throw new RangeError("No value supplied for attribute "+o);i=n.default}r[o]=i}return r}function checkAttrs(e,n,r,o){for(let o in n)if(!(o in e))throw new RangeError(`Unsupported attribute ${o} for ${r} of type ${o}`);for(let r in e){let o=e[r];o.validate&&o.validate(n[r])}}function initAttrs(e,n){let r=Object.create(null);if(n)for(let o in n)r[o]=new Attribute(e,o,n[o]);return r}class NodeType{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=initAttrs(e,r.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node(this,this.computeAttrs(e),Fragment.from(n),Mark.setFrom(r))}createChecked(e=null,n,r){return n=Fragment.from(n),this.checkContent(n),new Node(this,this.computeAttrs(e),n,Mark.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),(n=Fragment.from(n)).size){let e=this.contentMatch.fillBefore(n);if(!e)return null;n=e.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(Fragment.empty,!0);return i?new Node(this,e,n.append(i),Mark.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){checkAttrs(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Mark.none:e}static compile(e,n){let r=Object.create(null);e.forEach((e,o)=>r[e]=new NodeType(e,n,o));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}class Attribute{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?function validateType(e,n,r){let o=r.split("|");return r=>{let i=null===r?"null":typeof r;if(o.indexOf(i)<0)throw new RangeError(`Expected value of type ${o} for attribute ${n} on type ${e}, got ${i}`)}}(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=initAttrs(e,o.attrs),this.excluded=null;let i=defaultAttrs(this.attrs);this.instance=i?new Mark(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((e,i)=>r[e]=new MarkType(e,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){checkAttrs(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Schema{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=o.default.from(e.nodes),n.marks=o.default.from(e.marks||{}),this.nodes=NodeType.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let r=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw new RangeError(e+" can not be both a node and a mark");let n=this.nodes[e],o=n.spec.content||"",i=n.spec.marks;if(n.contentMatch=r[o]||(r[o]=ContentMatch.parse(o,this.nodes)),n.inlineContent=n.contentMatch.inlineContent,n.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!n.isInline||!n.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=n}n.markSet="_"==i?null:i?gatherMarks(this,i.split(" ")):""!=i&&n.inlineContent?null:[]}for(let e in this.marks){let n=this.marks[e],r=n.spec.excludes;n.excluded=null==r?[n]:""==r?[]:gatherMarks(this,r.split(" "))}this.nodeFromJSON=e=>Node.fromJSON(this,e),this.markFromJSON=e=>Mark.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof NodeType))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new TextNode(r,r.defaultAttrs,e,Mark.setFrom(n))}mark(e,n){return"string"==typeof e&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function gatherMarks(e,n){let r=[];for(let o=0;o<n.length;o++){let i=n[o],s=e.marks[i],a=s;if(s)r.push(s);else for(let n in e.marks){let o=e.marks[n];("_"==i||o.spec.group&&o.spec.group.split(" ").indexOf(i)>-1)&&r.push(a=o)}if(!a)throw new SyntaxError("Unknown mark type: '"+n[o]+"'")}return r}class DOMParser{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(e=>{if(function isTagRule(e){return null!=e.tag}(e))this.tags.push(e);else if(function isStyleRule(e){return null!=e.style}(e)){let n=/[^=]*/.exec(e.style)[0];r.indexOf(n)<0&&r.push(n),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(n=>{if(!/^(ul|ol)\b/.test(n.tag)||!n.node)return!1;let r=e.nodes[n.node];return r.contentMatch.matchType(r)})}parse(e,n={}){let r=new ParseContext(this,n,!1);return r.addAll(e,Mark.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new ParseContext(this,n,!0);return r.addAll(e,Mark.none,n.from,n.to),Slice.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let r=this.tags[o];if(matches(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||n.matchesContext(r.context))){if(r.getAttrs){let n=r.getAttrs(e);if(!1===n)continue;r.attrs=n||void 0}return r}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let o=this.styles[i],s=o.style;if(!(0!=s.indexOf(e)||o.context&&!r.matchesContext(o.context)||s.length>e.length&&(61!=s.charCodeAt(e.length)||s.slice(e.length+1)!=n))){if(o.getAttrs){let e=o.getAttrs(n);if(!1===e)continue;o.attrs=e||void 0}return o}}}static schemaRules(e){let n=[];function insert(e){let r=null==e.priority?50:e.priority,o=0;for(;o<n.length;o++){let e=n[o];if((null==e.priority?50:e.priority)<r)break}n.splice(o,0,e)}for(let n in e.marks){let r=e.marks[n].spec.parseDOM;r&&r.forEach(e=>{insert(e=copy(e)),e.mark||e.ignore||e.clearMark||(e.mark=n)})}for(let n in e.nodes){let r=e.nodes[n].spec.parseDOM;r&&r.forEach(e=>{insert(e=copy(e)),e.node||e.ignore||e.mark||(e.node=n)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new DOMParser(e,DOMParser.schemaRules(e)))}}const u={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},p={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},f={ol:!0,ul:!0};function wsOptionsFor(e,n,r){return null!=n?(n?1:0)|("full"===n?2:0):e&&"pre"==e.whitespace?3:-5&r}class NodeContext{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=Mark.none,this.match=i||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Fragment.from(e));if(!n){let n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(n)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,n=this.content[this.content.length-1];if(n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))){let r=n;n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-e[0].length))}}let n=Fragment.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!u.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o,i=n.topNode,s=wsOptionsFor(null,n.preserveWhitespace,0)|(r?4:0);o=i?new NodeContext(i.type,i.attrs,Mark.none,!0,n.topMatch||i.type.contentMatch,s):new NodeContext(r?null:e.schema.topNodeType,null,Mark.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){3==e.nodeType?this.addTextNode(e,n):1==e.nodeType&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=2&o.options?"full":this.localPreserveWS||(1&o.options)>0,{schema:s}=this.parser;if("full"===i||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if("full"===i)r=r.replace(/\r\n?/g,"\n");else if(s.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(s.linebreakReplacement.create())){let e=r.split(/\r?\n|\r/);for(let r=0;r<e.length;r++)r&&this.insertNode(s.linebreakReplacement.create(),n,!0),e[r]&&this.insertNode(s.text(e[r]),n,!/\S/.test(e[r]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let n=o.content[o.content.length-1],i=e.previousSibling;(!n||i&&"BR"==i.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(r=r.slice(1))}r&&this.insertNode(s.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s,a=e.nodeName.toLowerCase();f.hasOwnProperty(a)&&this.parser.normalizeLists&&function normalizeList(e){for(let n=e.firstChild,r=null;n;n=n.nextSibling){let e=1==n.nodeType?n.nodeName.toLowerCase():null;e&&f.hasOwnProperty(e)&&r?(r.appendChild(n),n=r):"li"==e?r=n:e&&(r=null)}}(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));e:if(c?c.ignore:p.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let r,o=this.needsBlock;if(u.hasOwnProperty(a))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),r=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let s=c&&c.skip?n:this.readStyles(e,n);s&&this.addAll(e,s),r&&this.sync(i),this.needsBlock=o}else{let r=this.readStyles(e,n);r&&this.addElementByRule(e,c,r,!1===c.consuming?s:void 0)}this.localPreserveWS=o}leafFallback(e,n){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),n)}ignoreFallback(e,n){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let o=this.parser.matchedStyles[e],i=r.getPropertyValue(o);if(i)for(let e;;){let r=this.parser.matchStyle(o,i,this,e);if(!r)break;if(r.ignore)return null;if(n=r.clearMark?n.filter(e=>!r.clearMark(e)):n.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;e=r}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,"BR"==e.nodeName)||this.leafFallback(e,r);else{let e=this.enter(s,n.attrs||null,r,n.preserveWhitespace);e&&(i=!0,r=e)}else{let e=this.parser.schema.marks[n.mark];r=r.concat(e.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,r,!1));else{let o=e;"string"==typeof n.contentElement?o=e.querySelector(n.contentElement):"function"==typeof n.contentElement?o=n.contentElement(e):n.contentElement&&(o=n.contentElement),this.findAround(e,o,!0),this.addAll(o,r),this.findAround(e,o,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=null==o?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n,r){let o,i;for(let n=this.open,s=0;n>=0;n--){let a=this.nodes[n],c=a.findWrapping(e);if(c&&(!o||o.length>c.length+s)&&(o=c,i=a,!c.length))break;if(a.solid){if(r)break;s+=2}}if(!o)return null;this.sync(i);for(let e=0;e<o.length;e++)n=this.enterInner(o[e],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(n=this.enterInner(e,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let n=this.top;n.match&&(n.match=n.match.matchType(e.type));let r=Mark.none;for(let i of o.concat(e.marks))(n.type?n.type.allowsMarkType(i.type):markMayApply(i.type,e.type))&&(r=i.addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=wsOptionsFor(e,i,s.options);4&s.options&&0==s.content.length&&(a|=4);let c=Mark.none;return r=r.filter(n=>!(s.type?s.type.allowsMarkType(n.type):markMayApply(n.type,e))||(c=n.addToSet(c),!1)),this.nodes.push(new NodeContext(e,n,c,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let n=r.length-1;n>=0;n--)e+=r[n].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)if(null==this.find[o].pos&&1==e.nodeType&&e.contains(this.find[o].node)){n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),match=(e,s)=>{for(;e>=0;e--){let a=n[e];if(""==a){if(e==n.length-1||0==e)continue;for(;s>=i;s--)if(match(e-1,s))return!0;return!1}{let e=s>0||0==s&&o?this.nodes[s].type:r&&s>=i?r.node(s-i).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return match(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let e in this.parser.schema.nodes){let n=this.parser.schema.nodes[e];if(n.isTextblock&&n.defaultAttrs)return n}}}function matches(e,n){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,n)}function copy(e){let n={};for(let r in e)n[r]=e[r];return n}function markMayApply(e,n){let r=n.schema.nodes;for(let o in r){let i=r[o];if(!i.allowsMarkType(e))continue;let s=[],scan=e=>{s.push(e);for(let r=0;r<e.edgeCount;r++){let{type:o,next:i}=e.edge(r);if(o==n)return!0;if(s.indexOf(i)<0&&scan(i))return!0}};if(scan(i.contentMatch))return!0}}class DOMSerializer{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=doc(n).createDocumentFragment());let o=r,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let r=0,s=0;for(;r<i.length&&s<e.marks.length;){let n=e.marks[s];if(this.marks[n.type.name]){if(!n.eq(i[r][0])||!1===n.type.spec.spanning)break;r++,s++}else s++}for(;r<i.length;)o=i.pop()[1];for(;s<e.marks.length;){let r=e.marks[s++],a=this.serializeMark(r,e.isInline,n);a&&(i.push([r,o]),o.appendChild(a.dom),o=a.contentDOM||a.dom)}}o.appendChild(this.serializeNodeInner(e,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=renderSpec(doc(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&renderSpec(doc(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return renderSpec(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=gatherToDOM(e.nodes);return n.text||(n.text=e=>e.text),n}static marksFromSchema(e){return gatherToDOM(e.marks)}}function gatherToDOM(e){let n={};for(let r in e){let o=e[r].spec.toDOM;o&&(n[r]=o)}return n}function doc(e){return e.document||window.document}const g=new WeakMap;function suspiciousAttributes(e){let n=g.get(e);return void 0===n&&g.set(e,n=function suspiciousAttributesInner(e){let n=null;function scan(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])n||(n=[]),n.push(e);else for(let n=0;n<e.length;n++)scan(e[n]);else for(let n in e)scan(e[n])}return scan(e),n}(e)),n}function renderSpec(e,n,r,o){if("string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;let i,s=n[0];if("string"!=typeof s)throw new RangeError("Invalid array passed to renderSpec");if(o&&(i=suspiciousAttributes(o))&&i.indexOf(n)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a,c=s.indexOf(" ");c>0&&(r=s.slice(0,c),s=s.slice(c+1));let u=r?e.createElementNS(r,s):e.createElement(s),p=n[1],f=1;if(p&&"object"==typeof p&&null==p.nodeType&&!Array.isArray(p)){f=2;for(let e in p)if(null!=p[e]){let n=e.indexOf(" ");n>0?u.setAttributeNS(e.slice(0,n),e.slice(n+1),p[e]):"style"==e&&u.style?u.style.cssText=p[e]:u.setAttribute(e,p[e])}}for(let i=f;i<n.length;i++){let s=n[i];if(0===s){if(i<n.length-1||i>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}{let{dom:n,contentDOM:i}=renderSpec(e,s,r,o);if(u.appendChild(n),i){if(a)throw new RangeError("Multiple content holes");a=i}}}return{dom:u,contentDOM:a}}},"./packages/node_modules/prosemirror-schema-list/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{addListNodes:function(){return addListNodes},bulletList:function(){return f},liftListItem:function(){return liftListItem},listItem:function(){return g},orderedList:function(){return p},sinkListItem:function(){return sinkListItem},splitListItem:function(){return splitListItem},splitListItemKeepMarks:function(){return splitListItemKeepMarks},wrapInList:function(){return wrapInList},wrapRangeInList:function(){return wrapRangeInList}});var o=r("./packages/node_modules/prosemirror-transform/dist/index.js"),i=r("./packages/node_modules/prosemirror-model/dist/index.js"),s=r("./packages/node_modules/prosemirror-state/dist/index.js");const a=["ol",0],c=["ul",0],u=["li",0],p={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM(e){return 1==e.attrs.order?a:["ol",{start:e.attrs.order},0]}},f={parseDOM:[{tag:"ul"}],toDOM(){return c}},g={parseDOM:[{tag:"li"}],toDOM(){return u},defining:!0};function add(e,n){let r={};for(let n in e)r[n]=e[n];for(let e in n)r[e]=n[e];return r}function addListNodes(e,n,r){return e.append({ordered_list:add(p,{content:"list_item+",group:r}),bullet_list:add(f,{content:"list_item+",group:r}),list_item:add(g,{content:n})})}function wrapInList(e,n=null){return function(r,o){let{$from:i,$to:s}=r.selection,a=i.blockRange(s);if(!a)return!1;let c=o?r.tr:null;return!!wrapRangeInList(c,a,e,n)&&(o&&o(c.scrollIntoView()),!0)}}function wrapRangeInList(e,n,r,s=null){let a=!1,c=n,u=n.$from.doc;if(n.depth>=2&&n.$from.node(n.depth-1).type.compatibleContent(r)&&0==n.startIndex){if(0==n.$from.index(n.depth-1))return!1;let e=u.resolve(n.start-2);c=new i.NodeRange(e,e,n.depth),n.endIndex<n.parent.childCount&&(n=new i.NodeRange(n.$from,u.resolve(n.$to.end(n.depth)),n.depth)),a=!0}let p=(0,o.findWrapping)(c,r,s,n);return!!p&&(e&&function doWrapInList(e,n,r,s,a){let c=i.Fragment.empty;for(let e=r.length-1;e>=0;e--)c=i.Fragment.from(r[e].type.create(r[e].attrs,c));e.step(new o.ReplaceAroundStep(n.start-(s?2:0),n.end,n.start,n.end,new i.Slice(c,0,0),r.length,!0));let u=0;for(let e=0;e<r.length;e++)r[e].type==a&&(u=e+1);let p=r.length-u,f=n.start+r.length-(s?2:0),g=n.parent;for(let r=n.startIndex,i=n.endIndex,s=!0;r<i;r++,s=!1)!s&&(0,o.canSplit)(e.doc,f,p)&&(e.split(f,p),f+=2*p),f+=g.child(r).nodeSize;return e}(e,n,p,a,r),!0)}function splitListItem(e,n){return function(r,a){let{$from:c,$to:u,node:p}=r.selection;if(p&&p.isBlock||c.depth<2||!c.sameParent(u))return!1;let f=c.node(-1);if(f.type!=e)return!1;if(0==c.parent.content.size&&c.node(-1).childCount==c.indexAfter(-1)){if(3==c.depth||c.node(-3).type!=e||c.index(-2)!=c.node(-2).childCount-1)return!1;if(a){let n=i.Fragment.empty,o=c.index(-1)?1:c.index(-2)?2:3;for(let e=c.depth-o;e>=c.depth-3;e--)n=i.Fragment.from(c.node(e).copy(n));let u=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3;n=n.append(i.Fragment.from(e.createAndFill()));let p=c.before(c.depth-(o-1)),f=r.tr.replace(p,c.after(-u),new i.Slice(n,4-o,0)),g=-1;f.doc.nodesBetween(p,f.doc.content.size,(e,n)=>{if(g>-1)return!1;e.isTextblock&&0==e.content.size&&(g=n+1)}),g>-1&&f.setSelection(s.Selection.near(f.doc.resolve(g))),a(f.scrollIntoView())}return!0}let g=u.pos==c.end()?f.contentMatchAt(0).defaultType:null,b=r.tr.delete(c.pos,u.pos),k=g?[n?{type:e,attrs:n}:null,{type:g}]:void 0;return!!(0,o.canSplit)(b.doc,c.pos,2,k)&&(a&&a(b.split(c.pos,2,k).scrollIntoView()),!0)}}function splitListItemKeepMarks(e,n){let r=splitListItem(e,n);return(e,n)=>r(e,n&&(r=>{let o=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();o&&r.ensureMarks(o),n(r)}))}function liftListItem(e){return function(n,r){let{$from:s,$to:a}=n.selection,c=s.blockRange(a,n=>n.childCount>0&&n.firstChild.type==e);return!!c&&(!r||(s.node(c.depth-1).type==e?function liftToOuterList(e,n,r,s){let a=e.tr,c=s.end,u=s.$to.end(s.depth);c<u&&(a.step(new o.ReplaceAroundStep(c-1,u,c,u,new i.Slice(i.Fragment.from(r.create(null,s.parent.copy())),1,0),1,!0)),s=new i.NodeRange(a.doc.resolve(s.$from.pos),a.doc.resolve(u),s.depth));const p=(0,o.liftTarget)(s);if(null==p)return!1;a.lift(s,p);let f=a.doc.resolve(a.mapping.map(c,-1)-1);(0,o.canJoin)(a.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&a.join(f.pos);return n(a.scrollIntoView()),!0}(n,r,e,c):function liftOutOfList(e,n,r){let s=e.tr,a=r.parent;for(let e=r.end,n=r.endIndex-1,o=r.startIndex;n>o;n--)e-=a.child(n).nodeSize,s.delete(e-1,e+1);let c=s.doc.resolve(r.start),u=c.nodeAfter;if(s.mapping.map(r.end)!=r.start+c.nodeAfter.nodeSize)return!1;let p=0==r.startIndex,f=r.endIndex==a.childCount,g=c.node(-1),b=c.index(-1);if(!g.canReplace(b+(p?0:1),b+1,u.content.append(f?i.Fragment.empty:i.Fragment.from(a))))return!1;let k=c.pos,v=k+u.nodeSize;return s.step(new o.ReplaceAroundStep(k-(p?1:0),v+(f?1:0),k+1,v-1,new i.Slice((p?i.Fragment.empty:i.Fragment.from(a.copy(i.Fragment.empty))).append(f?i.Fragment.empty:i.Fragment.from(a.copy(i.Fragment.empty))),p?0:1,f?0:1),p?0:1)),n(s.scrollIntoView()),!0}(n,r,c)))}}function sinkListItem(e){return function(n,r){let{$from:s,$to:a}=n.selection,c=s.blockRange(a,n=>n.childCount>0&&n.firstChild.type==e);if(!c)return!1;let u=c.startIndex;if(0==u)return!1;let p=c.parent,f=p.child(u-1);if(f.type!=e)return!1;if(r){let s=f.lastChild&&f.lastChild.type==p.type,a=i.Fragment.from(s?e.create():null),u=new i.Slice(i.Fragment.from(e.create(null,i.Fragment.from(p.type.create(null,a)))),s?3:1,0),g=c.start,b=c.end;r(n.tr.step(new o.ReplaceAroundStep(g-(s?3:1),b,g,b,u,1,!0)).scrollIntoView())}return!0}}},"./packages/node_modules/prosemirror-state/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{AllSelection:function(){return AllSelection},EditorState:function(){return EditorState},NodeSelection:function(){return NodeSelection},Plugin:function(){return Plugin},PluginKey:function(){return PluginKey},Selection:function(){return Selection},SelectionRange:function(){return SelectionRange},TextSelection:function(){return TextSelection},Transaction:function(){return Transaction}});var o=r("./packages/node_modules/prosemirror-model/dist/index.js"),i=r("./packages/node_modules/prosemirror-transform/dist/index.js");const s=Object.create(null);class Selection{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new SelectionRange(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=o.Slice.empty){let r=n.content.lastChild,i=null;for(let e=0;e<n.openEnd;e++)i=r,r=r.lastChild;let s=e.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:u,$to:p}=a[c],f=e.mapping.slice(s);e.replaceRange(f.map(u.pos),f.map(p.pos),c?o.Slice.empty:n),0==c&&selectionToInsertionEnd(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],c=e.mapping.slice(r),u=c.map(s.pos),p=c.map(a.pos);i?e.deleteRange(u,p):(e.replaceRangeWith(u,p,n),selectionToInsertionEnd(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new TextSelection(e):findSelectionIn(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let o=e.depth-1;o>=0;o--){let i=n<0?findSelectionIn(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):findSelectionIn(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new AllSelection(e.node(0))}static atStart(e){return findSelectionIn(e,e,0,0,1)||new AllSelection(e)}static atEnd(e){return findSelectionIn(e,e,e.content.size,e.childCount,-1)||new AllSelection(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=s[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in s)throw new RangeError("Duplicate use of selection JSON ID "+e);return s[e]=n,n.prototype.jsonID=e,n}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(e,n){this.$from=e,this.$to=n}}let a=!1;function checkTextSelection(e){a||e.parent.inlineContent||(a=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class TextSelection extends Selection{constructor(e,n=e){checkTextSelection(e),checkTextSelection(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Selection.near(r);let o=e.resolve(n.map(this.anchor));return new TextSelection(o.parent.inlineContent?o:r,r)}replace(e,n=o.Slice.empty){if(super.replace(e,n),n==o.Slice.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof TextSelection&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){let e=Selection.findFrom(n,r,!0)||Selection.findFrom(n,-r,!0);if(!e)return Selection.near(n,r);n=e.$head}return e.parent.inlineContent||(0==o||(e=(Selection.findFrom(e,-r,!0)||Selection.findFrom(e,r,!0)).$anchor).pos<n.pos!=o<0)&&(e=n),new TextSelection(e,n)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(e,n){this.anchor=e,this.head=n}map(e){return new TextBookmark(e.map(this.anchor),e.map(this.head))}resolve(e){return TextSelection.between(e.resolve(this.anchor),e.resolve(this.head))}}class NodeSelection extends Selection{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?Selection.near(i):new NodeSelection(i)}content(){return new o.Slice(o.Fragment.from(this.node),0,0)}eq(e){return e instanceof NodeSelection&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(e.resolve(n.anchor))}static create(e,n){return new NodeSelection(e.resolve(n))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}NodeSelection.prototype.visible=!1,Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new TextBookmark(r,r):new NodeBookmark(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&NodeSelection.isSelectable(r)?new NodeSelection(n):Selection.near(n)}}class AllSelection extends Selection{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=o.Slice.empty){if(n==o.Slice.empty){e.delete(0,e.doc.content.size);let n=Selection.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new AllSelection(e)}map(e){return new AllSelection(e)}eq(e){return e instanceof AllSelection}getBookmark(){return c}}Selection.jsonID("all",AllSelection);const c={map(){return this},resolve(e){return new AllSelection(e)}};function findSelectionIn(e,n,r,o,i,s=!1){if(n.inlineContent)return TextSelection.create(e,r);for(let a=o-(i>0?0:1);i>0?a<n.childCount:a>=0;a+=i){let o=n.child(a);if(o.isAtom){if(!s&&NodeSelection.isSelectable(o))return NodeSelection.create(e,r-(i<0?o.nodeSize:0))}else{let n=findSelectionIn(e,o,r+i,i<0?o.childCount:0,i,s);if(n)return n}r+=o.nodeSize*i}return null}function selectionToInsertionEnd(e,n,r){let o=e.steps.length-1;if(o<n)return;let s,a=e.steps[o];(a instanceof i.ReplaceStep||a instanceof i.ReplaceAroundStep)&&(e.mapping.maps[o].forEach((e,n,r,o)=>{null==s&&(s=o)}),e.setSelection(Selection.near(e.doc.resolve(s),r)))}class Transaction extends i.Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return o.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,n){super.addStep(e,n),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||o.Mark.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(null==n)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(null==r&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let e=this.doc.resolve(n);i=r==n?e.marks():e.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.selection.to!=n+e.length||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(e,n){return this.meta["string"==typeof e?e:e.key]=n,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function bind(e,n){return n&&e?e.bind(n):e}class FieldDesc{constructor(e,n,r){this.name=e,this.init=bind(n.init,r),this.apply=bind(n.apply,r)}}const u=[new FieldDesc("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new FieldDesc("selection",{init(e,n){return e.selection||Selection.atStart(n.doc)},apply(e){return e.selection}}),new FieldDesc("storedMarks",{init(e){return e.storedMarks||null},apply(e,n,r,o){return o.selection.$cursor?e.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(e,n){return e.scrolledIntoView?n+1:n}})];class Configuration{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=u.slice(),n&&n.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new FieldDesc(e.key,e.spec.state,e))})}}class EditorState{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let n=this.config.plugins[r];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let c=o?o[s].n:0,u=o?o[s].state:this,p=c<n.length&&a.spec.appendTransaction.call(a,c?n.slice(c):n,u,r);if(p&&r.filterTransaction(p,s)){if(p.setMeta("appendedTransaction",e),!o){o=[];for(let e=0;e<this.config.plugins.length;e++)o.push(e<s?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new EditorState(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new Transaction(this)}static create(e){let n=new Configuration(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new EditorState(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new Configuration(this.schema,e.plugins),r=n.fields,o=new EditorState(n);for(let n=0;n<r.length;n++){let i=r[n].name;o[i]=this.hasOwnProperty(i)?this[i]:r[n].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let r in e){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Configuration(e.schema,e.plugins),s=new EditorState(i);return i.fields.forEach(i=>{if("doc"==i.name)s.doc=o.Node.fromJSON(e.schema,n.doc);else if("selection"==i.name)s.selection=Selection.fromJSON(s.doc,n.selection);else if("storedMarks"==i.name)n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let o in r){let a=r[o],c=a.spec.state;if(a.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(s[i.name]=c.fromJSON.call(a,e,n[o],s))}s[i.name]=i.init(e,s)}}),s}}function bindProps(e,n,r){for(let o in e){let i=e[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=bindProps(i,n,{})),r[o]=i}return r}class Plugin{constructor(e){this.spec=e,this.props={},e.props&&bindProps(e.props,this,this.props),this.key=e.key?e.key.key:createKey("plugin")}getState(e){return e[this.key]}}const p=Object.create(null);function createKey(e){return e in p?e+"$"+ ++p[e]:(p[e]=0,e+"$")}class PluginKey{constructor(e="key"){this.key=createKey(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},"./packages/node_modules/prosemirror-transform/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{AddMarkStep:function(){return AddMarkStep},AddNodeMarkStep:function(){return AddNodeMarkStep},AttrStep:function(){return AttrStep},DocAttrStep:function(){return DocAttrStep},MapResult:function(){return MapResult},Mapping:function(){return Mapping},RemoveMarkStep:function(){return RemoveMarkStep},RemoveNodeMarkStep:function(){return RemoveNodeMarkStep},ReplaceAroundStep:function(){return ReplaceAroundStep},ReplaceStep:function(){return ReplaceStep},Step:function(){return Step},StepMap:function(){return StepMap},StepResult:function(){return StepResult},Transform:function(){return Transform},TransformError:function(){return a},canJoin:function(){return canJoin},canSplit:function(){return canSplit},dropPoint:function(){return dropPoint},findWrapping:function(){return findWrapping},insertPoint:function(){return insertPoint},joinPoint:function(){return joinPoint},liftTarget:function(){return liftTarget},replaceStep:function(){return replaceStep}});var o=r("./packages/node_modules/prosemirror-model/dist/index.js");const i=Math.pow(2,16);function makeRecover(e,n){return e+n*i}function recoverIndex(e){return 65535&e}class MapResult{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class StepMap{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&StepMap.empty)return StepMap.empty}recover(e){let n=0,r=recoverIndex(e);if(!this.inverted)for(let e=0;e<r;e++)n+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*r]+n+function recoverOffset(e){return(e-(65535&e))/i}(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?o:0);if(c>e)break;let u=this.ranges[a+i],p=this.ranges[a+s],f=c+u;if(e<=f){let i=c+o+((u?e==c?-1:e==f?1:n:n)<0?0:p);if(r)return i;let s=e==(n<0?c:f)?null:makeRecover(a/3,e-c),g=e==c?2:e==f?1:4;return(n<0?e!=c:e!=f)&&(g|=8),new MapResult(i,g,s)}o+=p-u}return r?e+o:new MapResult(e+o,0,null)}touches(e,n){let r=0,o=recoverIndex(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let n=0;n<this.ranges.length;n+=3){let a=this.ranges[n]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[n+i];if(e<=a+c&&n==3*o)return!0;r+=this.ranges[n+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),c=s+(this.inverted?0:i),u=this.ranges[o+n],p=this.ranges[o+r];e(a,a+u,c,c+p),i+=p-u}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?StepMap.empty:new StepMap(e<0?[0,-e,0]:[0,0,e])}}StepMap.empty=new StepMap([]);class Mapping{constructor(e,n,r=0,o=(e?e.length:0)){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Mapping(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=n&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],null!=o&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror)for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),null!=o&&o>n?r-o-1:void 0)}}invert(){let e=new Mapping;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let r=this.from;r<this.to;r++){let i=this._maps[r].mapResult(e,n);if(null!=i.recover){let n=this.getMirror(r);if(null!=n&&n>r&&n<this.to){r=n,e=this._maps[n].recover(i.recover);continue}}o|=i.delInfo,e=i.pos}return r?e:new MapResult(e,o,null)}}const s=Object.create(null);class Step{getMap(){return StepMap.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=s[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in s)throw new RangeError("Duplicate use of step JSON ID "+e);return s[e]=n,n.prototype.jsonID=e,n}}class StepResult{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new StepResult(e,null)}static fail(e){return new StepResult(null,e)}static fromReplace(e,n,r,i){try{return StepResult.ok(e.replace(n,r,i))}catch(e){if(e instanceof o.ReplaceError)return StepResult.fail(e.message);throw e}}}function mapFragment(e,n,r){let i=[];for(let o=0;o<e.childCount;o++){let s=e.child(o);s.content.size&&(s=s.copy(mapFragment(s.content,n,s))),s.isInline&&(s=n(s,r,o)),i.push(s)}return o.Fragment.fromArray(i)}class AddMarkStep extends Step{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new o.Slice(mapFragment(n.content,(e,n)=>e.isAtom&&n.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,i),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,s)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new AddMarkStep(n.pos,r.pos,this.mark)}merge(e){return e instanceof AddMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new AddMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new o.Slice(mapFragment(n.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),n.openStart,n.openEnd);return StepResult.fromReplace(e,this.from,this.to,r)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new RemoveMarkStep(n.pos,r.pos,this.mark)}merge(e){return e instanceof RemoveMarkStep&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new RemoveMarkStep(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(n.from,n.to,e.markFromJSON(n.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new o.Slice(o.Fragment.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let e=this.mark.addToSet(n.marks);if(e.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(e))return new AddNodeMarkStep(this.pos,n.marks[r]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AddNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return StepResult.fromReplace(e,this.pos,this.pos+1,new o.Slice(o.Fragment.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return n&&this.mark.isInSet(n.marks)?new AddNodeMarkStep(this.pos,this.mark):this}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new RemoveNodeMarkStep(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(n.pos,e.markFromJSON(n.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&contentBetween(e,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(e){return new ReplaceStep(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ReplaceStep(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ReplaceStep)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let n=this.slice.size+e.slice.size==0?o.Slice.empty:new o.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ReplaceStep(e.from,this.to,n,this.structure)}}{let n=this.slice.size+e.slice.size==0?o.Slice.empty:new o.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ReplaceStep(this.from,this.to+(e.to-e.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(n.from,n.to,o.Slice.fromJSON(e,n.slice),!!n.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(contentBetween(e,this.from,this.gapFrom)||contentBetween(e,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return StepResult.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?StepResult.fromReplace(e,this.from,this.to,r):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new ReplaceAroundStep(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(n.from,n.to,n.gapFrom,n.gapTo,o.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)}}function contentBetween(e,n,r){let o=e.resolve(n),i=r-n,s=o.depth;for(;i>0&&s>0&&o.indexAfter(s)==o.node(s).childCount;)s--,i--;if(i>0){let e=o.node(s).maybeChild(o.indexAfter(s));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function clearIncompatible(e,n,r,i=r.contentMatch,s=!0){let a=e.doc.nodeAt(n),c=[],u=n+1;for(let n=0;n<a.childCount;n++){let p=a.child(n),f=u+p.nodeSize,g=i.matchType(p.type);if(g){i=g;for(let n=0;n<p.marks.length;n++)r.allowsMarkType(p.marks[n].type)||e.step(new RemoveMarkStep(u,f,p.marks[n]));if(s&&p.isText&&"pre"!=r.whitespace){let e,n,i=/\r?\n|\r/g;for(;e=i.exec(p.text);)n||(n=new o.Slice(o.Fragment.from(r.schema.text(" ",r.allowedMarks(p.marks))),0,0)),c.push(new ReplaceStep(u+e.index,u+e.index+e[0].length,n))}}else c.push(new ReplaceStep(u,f,o.Slice.empty));u=f}if(!i.validEnd){let n=i.fillBefore(o.Fragment.empty,!0);e.replace(u,u,new o.Slice(n,0,0))}for(let n=c.length-1;n>=0;n--)e.step(c[n])}function canCut(e,n,r){return(0==n||e.canReplace(n,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function liftTarget(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth,o=0,i=0;;--r){let s=e.$from.node(r),a=e.$from.index(r)+o,c=e.$to.indexAfter(r)-i;if(r<e.depth&&s.canReplace(a,c,n))return r;if(0==r||s.type.spec.isolating||!canCut(s,a,c))break;a&&(o=1),c<s.childCount&&(i=1)}return null}function findWrapping(e,n,r=null,o=e){let i=function findWrappingOutside(e,n){let{parent:r,startIndex:o,endIndex:i}=e,s=r.contentMatchAt(o).findWrapping(n);if(!s)return null;let a=s.length?s[0]:n;return r.canReplaceWith(o,i,a)?s:null}(e,n),s=i&&function findWrappingInside(e,n){let{parent:r,startIndex:o,endIndex:i}=e,s=r.child(o),a=n.contentMatch.findWrapping(s.type);if(!a)return null;let c=(a.length?a[a.length-1]:n).contentMatch;for(let e=o;c&&e<i;e++)c=c.matchType(r.child(e).type);return c&&c.validEnd?a:null}(o,n);return s?i.map(withAttrs).concat({type:n,attrs:r}).concat(s.map(withAttrs)):null}function withAttrs(e){return{type:e,attrs:null}}function replaceNewlines(e,n,r,o){n.forEach((i,s)=>{if(i.isText){let a,c=/\r?\n|\r/g;for(;a=c.exec(i.text);){let i=e.mapping.slice(o).map(r+1+s+a.index);e.replaceWith(i,i+1,n.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(e,n,r,o){n.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(o).map(r+1+s);e.replaceWith(i,i+1,n.type.schema.text("\n"))}})}function canSplit(e,n,r=1,o){let i=e.resolve(n),s=i.depth-r,a=o&&o[o.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,n=r-2;e>s;e--,n--){let r=i.node(e),s=i.index(e);if(r.type.spec.isolating)return!1;let a=r.content.cutByIndex(s,r.childCount),c=o&&o[n+1];c&&(a=a.replaceChild(0,c.type.create(c.attrs)));let u=o&&o[n]||r;if(!r.canReplace(s+1,r.childCount)||!u.type.validContent(a))return!1}let c=i.indexAfter(s),u=o&&o[0];return i.node(s).canReplaceWith(c,c,u?u.type:i.node(s+1).type)}function canJoin(e,n){let r=e.resolve(n),o=r.index();return joinable(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(o,o+1)}function joinable(e,n){return!(!e||!n||e.isLeaf||!function canAppendWithSubstitutedLinebreaks(e,n){n.content.size||e.type.compatibleContent(n.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:o}=e.type.schema;for(let i=0;i<n.childCount;i++){let s=n.child(i),a=s.type==o?e.type.schema.nodes.text:s.type;if(r=r.matchType(a),!r)return!1;if(!e.type.allowsMarks(s.marks))return!1}return r.validEnd}(e,n))}function joinPoint(e,n,r=-1){let o=e.resolve(n);for(let e=o.depth;;e--){let i,s,a=o.index(e);if(e==o.depth?(i=o.nodeBefore,s=o.nodeAfter):r>0?(i=o.node(e+1),a++,s=o.node(e).maybeChild(a)):(i=o.node(e).maybeChild(a-1),s=o.node(e+1)),i&&!i.isTextblock&&joinable(i,s)&&o.node(e).canReplace(a,a+1))return n;if(0==e)break;n=r<0?o.before(e):o.after(e)}}function insertPoint(e,n,r){let o=e.resolve(n);if(o.parent.canReplaceWith(o.index(),o.index(),r))return n;if(0==o.parentOffset)for(let e=o.depth-1;e>=0;e--){let n=o.index(e);if(o.node(e).canReplaceWith(n,n,r))return o.before(e+1);if(n>0)return null}if(o.parentOffset==o.parent.content.size)for(let e=o.depth-1;e>=0;e--){let n=o.indexAfter(e);if(o.node(e).canReplaceWith(n,n,r))return o.after(e+1);if(n<o.node(e).childCount)return null}return null}function dropPoint(e,n,r){let o=e.resolve(n);if(!r.content.size)return n;let i=r.content;for(let e=0;e<r.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==r.openStart&&r.size?2:1);e++)for(let n=o.depth;n>=0;n--){let r=n==o.depth?0:o.pos<=(o.start(n+1)+o.end(n+1))/2?-1:1,s=o.index(n)+(r>0?1:0),a=o.node(n),c=!1;if(1==e)c=a.canReplace(s,s,i);else{let e=a.contentMatchAt(s).findWrapping(i.firstChild.type);c=e&&a.canReplaceWith(s,s,e[0])}if(c)return 0==r?o.pos:r<0?o.before(n+1):o.after(n+1)}return null}function replaceStep(e,n,r=n,i=o.Slice.empty){if(n==r&&!i.size)return null;let s=e.resolve(n),a=e.resolve(r);return fitsTrivially(s,a,i)?new ReplaceStep(n,r,i):new Fitter(s,a,i).fit()}function fitsTrivially(e,n,r){return!r.openStart&&!r.openEnd&&e.start()==n.start()&&e.parent.canReplace(e.index(),n.index(),r.content)}Step.jsonID("replaceAround",ReplaceAroundStep);class Fitter{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=o.Fragment.empty;for(let n=0;n<=e.depth;n++){let r=e.node(n);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(n))})}for(let n=e.depth;n>0;n--)this.placed=o.Fragment.from(e.node(n).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,a=r.depth,c=i.depth;for(;a&&c&&1==s.childCount;)s=s.firstChild.content,a--,c--;let u=new o.Slice(s,a,c);return e>-1?new ReplaceAroundStep(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new ReplaceStep(r.pos,i.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=1==n?e:this.unplaced.openStart;r>=0;r--){let e,i=null;r?(i=contentAt(this.unplaced.content,r-1).firstChild,e=i.content):e=this.unplaced.content;let s=e.firstChild;for(let e=this.depth;e>=0;e--){let a,{type:c,match:u}=this.frontier[e],p=null;if(1==n&&(s?u.matchType(s.type)||(p=u.fillBefore(o.Fragment.from(s),!1)):i&&c.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:e,parent:i,inject:p};if(2==n&&s&&(a=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:e,parent:i,wrap:a};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=contentAt(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new o.Slice(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=contentAt(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new o.Slice(dropFromFragment(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new o.Slice(dropFromFragment(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let e=0;e<s.length;e++)this.openFrontierNode(s[e]);let a=this.unplaced,c=r?r.content:a.content,u=a.openStart-e,p=0,f=[],{match:g,type:b}=this.frontier[n];if(i){for(let e=0;e<i.childCount;e++)f.push(i.child(e));g=g.matchFragment(i)}let k=c.size+e-(a.content.size-a.openEnd);for(;p<c.childCount;){let e=c.child(p),n=g.matchType(e.type);if(!n)break;p++,(p>1||0==u||e.content.size)&&(g=n,f.push(closeNodeStart(e.mark(b.allowedMarks(e.marks)),1==p?u:0,p==c.childCount?k:-1)))}let v=p==c.childCount;v||(k=-1),this.placed=addToFragment(this.placed,n,o.Fragment.from(f)),this.frontier[n].match=g,v&&k<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,n=c;e<k;e++){let e=n.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),n=e.content}this.unplaced=v?0==e?o.Slice.empty:new o.Slice(dropFromFragment(a.content,e-1,1),e-1,k<0?a.openEnd:e-1):new o.Slice(dropFromFragment(a.content,e,p),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,n=this.frontier[this.depth];if(!n.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,n.type,n.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=contentAfterFits(e,n,o,r,i);if(s){for(let r=n-1;r>=0;r--){let{match:n,type:o}=this.frontier[r],i=contentAfterFits(e,r,o,n,!0);if(!i||i.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=addToFragment(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let n=e.node(r),o=n.type.contentMatch.fillBefore(n.content,!0,e.index(r));this.openFrontierNode(n.type,n.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=addToFragment(this.placed,this.depth,o.Fragment.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(o.Fragment.empty,!0);e.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,e))}}function dropFromFragment(e,n,r){return 0==n?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(dropFromFragment(e.firstChild.content,n-1,r)))}function addToFragment(e,n,r){return 0==n?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(addToFragment(e.lastChild.content,n-1,r)))}function contentAt(e,n){for(let r=0;r<n;r++)e=e.firstChild.content;return e}function closeNodeStart(e,n,r){if(n<=0)return e;let i=e.content;return n>1&&(i=i.replaceChild(0,closeNodeStart(i.firstChild,n-1,1==i.childCount?r-1:0))),n>0&&(i=e.type.contentMatch.fillBefore(i).append(i),r<=0&&(i=i.append(e.type.contentMatch.matchFragment(i).fillBefore(o.Fragment.empty,!0)))),e.copy(i)}function contentAfterFits(e,n,r,o,i){let s=e.node(n),a=i?e.indexAfter(n):e.index(n);if(a==s.childCount&&!r.compatibleContent(s.type))return null;let c=o.fillBefore(s.content,!0,a);return c&&!function invalidMarks(e,n,r){for(let o=r;o<n.childCount;o++)if(!e.allowsMarks(n.child(o).marks))return!0;return!1}(r,s.content,a)?c:null}function definesContent(e){return e.spec.defining||e.spec.definingForContent}function closeFragment(e,n,r,i,s){if(n<r){let o=e.firstChild;e=e.replaceChild(0,o.copy(closeFragment(o.content,n+1,r,i,o)))}if(n>i){let n=s.contentMatchAt(0),r=n.fillBefore(e).append(e);e=r.append(n.matchFragment(r).fillBefore(o.Fragment.empty,!0))}return e}function coveredDepths(e,n){let r=[];for(let o=Math.min(e.depth,n.depth);o>=0;o--){let i=e.start(o);if(i<e.pos-(e.depth-o)||n.end(o)>n.pos+(n.depth-o)||e.node(o).type.spec.isolating||n.node(o).type.spec.isolating)break;(i==n.start(o)||o==e.depth&&o==n.depth&&e.parent.inlineContent&&n.parent.inlineContent&&o&&n.start(o-1)==i-1)&&r.push(o)}return r}class AttrStep extends Step{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return StepResult.fail("No node at attribute step's position");let r=Object.create(null);for(let e in n.attrs)r[e]=n.attrs[e];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return StepResult.fromReplace(e,this.pos,this.pos+1,new o.Slice(o.Fragment.from(i),0,n.isLeaf?0:1))}getMap(){return StepMap.empty}invert(e){return new AttrStep(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new AttrStep(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if("number"!=typeof n.pos||"string"!=typeof n.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(n.pos,n.attr,n.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return StepResult.ok(r)}getMap(){return StepMap.empty}invert(e){return new DocAttrStep(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if("string"!=typeof n.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(n.attr,n.value)}}Step.jsonID("docAttr",DocAttrStep);let a=class extends Error{};a=function TransformError(e){let n=Error.call(this,e);return n.__proto__=TransformError.prototype,n},a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.prototype.name="TransformError";class Transform{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new a(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let o=this.mapping.maps[r];r&&(e=o.map(e,1),n=o.map(n,-1)),o.forEach((r,o,i,s)=>{e=Math.min(e,i),n=Math.max(n,s)})}return 1e9==e?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=o.Slice.empty){let i=replaceStep(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new o.Slice(o.Fragment.from(r),0,0))}delete(e,n){return this.replace(e,n,o.Slice.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return function replaceRange(e,n,r,i){if(!i.size)return e.deleteRange(n,r);let s=e.doc.resolve(n),a=e.doc.resolve(r);if(fitsTrivially(s,a,i))return e.step(new ReplaceStep(n,r,i));let c=coveredDepths(s,a);0==c[c.length-1]&&c.pop();let u=-(s.depth+1);c.unshift(u);for(let e=s.depth,n=s.pos-1;e>0;e--,n--){let r=s.node(e).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;c.indexOf(e)>-1?u=e:s.before(e)==n&&c.splice(1,0,-e)}let p=c.indexOf(u),f=[],g=i.openStart;for(let e=i.content,n=0;;n++){let r=e.firstChild;if(f.push(r),n==i.openStart)break;e=r.content}for(let e=g-1;e>=0;e--){let n=f[e],r=definesContent(n.type);if(r&&!n.sameMarkup(s.node(Math.abs(u)-1)))g=e;else if(r||!n.type.isTextblock)break}for(let n=i.openStart;n>=0;n--){let u=(n+g+1)%(i.openStart+1),b=f[u];if(b)for(let n=0;n<c.length;n++){let f=c[(n+p)%c.length],g=!0;f<0&&(g=!1,f=-f);let k=s.node(f-1),v=s.index(f-1);if(k.canReplaceWith(v,v,b.type,b.marks))return e.replace(s.before(f),g?a.after(f):r,new o.Slice(closeFragment(i.content,0,i.openStart,u),u,i.openEnd))}}let b=e.steps.length;for(let o=c.length-1;o>=0&&(e.replace(n,r,i),!(e.steps.length>b));o--){let e=c[o];e<0||(n=s.before(e),r=a.after(e))}}(this,e,n,r),this}replaceRangeWith(e,n,r){return function replaceRangeWith(e,n,r,i){if(!i.isInline&&n==r&&e.doc.resolve(n).parent.content.size){let o=insertPoint(e.doc,n,i.type);null!=o&&(n=r=o)}e.replaceRange(n,r,new o.Slice(o.Fragment.from(i),0,0))}(this,e,n,r),this}deleteRange(e,n){return function deleteRange(e,n,r){let o=e.doc.resolve(n),i=e.doc.resolve(r),s=coveredDepths(o,i);for(let n=0;n<s.length;n++){let r=s[n],a=n==s.length-1;if(a&&0==r||o.node(r).type.contentMatch.validEnd)return e.delete(o.start(r),i.end(r));if(r>0&&(a||o.node(r-1).canReplace(o.index(r-1),i.indexAfter(r-1))))return e.delete(o.before(r),i.after(r))}for(let s=1;s<=o.depth&&s<=i.depth;s++)if(n-o.start(s)==o.depth-s&&r>o.end(s)&&i.end(s)-r!=i.depth-s&&o.start(s-1)==i.start(s-1)&&o.node(s-1).canReplace(o.index(s-1),i.index(s-1)))return e.delete(o.before(s),r);e.delete(n,r)}(this,e,n),this}lift(e,n){return function lift(e,n,r){let{$from:i,$to:s,depth:a}=n,c=i.before(a+1),u=s.after(a+1),p=c,f=u,g=o.Fragment.empty,b=0;for(let e=a,n=!1;e>r;e--)n||i.index(e)>0?(n=!0,g=o.Fragment.from(i.node(e).copy(g)),b++):p--;let k=o.Fragment.empty,v=0;for(let e=a,n=!1;e>r;e--)n||s.after(e+1)<s.end(e)?(n=!0,k=o.Fragment.from(s.node(e).copy(k)),v++):f++;e.step(new ReplaceAroundStep(p,f,c,u,new o.Slice(g.append(k),b,v),g.size-b,!0))}(this,e,n),this}join(e,n=1){return function join(e,n,r){let i=null,{linebreakReplacement:s}=e.doc.type.schema,a=e.doc.resolve(n-r),c=a.node().type;if(s&&c.inlineContent){let e="pre"==c.whitespace,n=!!c.contentMatch.matchType(s);e&&!n?i=!1:!e&&n&&(i=!0)}let u=e.steps.length;if(!1===i){let o=e.doc.resolve(n+r);replaceLinebreaks(e,o.node(),o.before(),u)}c.inlineContent&&clearIncompatible(e,n+r-1,c,a.node().contentMatchAt(a.index()),null==i);let p=e.mapping.slice(u),f=p.map(n-r);if(e.step(new ReplaceStep(f,p.map(n+r,-1),o.Slice.empty,!0)),!0===i){let n=e.doc.resolve(f);replaceNewlines(e,n.node(),n.before(),e.steps.length)}return e}(this,e,n),this}wrap(e,n){return function wrap(e,n,r){let i=o.Fragment.empty;for(let e=r.length-1;e>=0;e--){if(i.size){let n=r[e].type.contentMatch.matchFragment(i);if(!n||!n.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=o.Fragment.from(r[e].type.create(r[e].attrs,i))}let s=n.start,a=n.end;e.step(new ReplaceAroundStep(s,a,s,a,new o.Slice(i,0,0),r.length,!0))}(this,e,n),this}setBlockType(e,n=e,r,i=null){return function setBlockType(e,n,r,i,s){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=e.steps.length;e.doc.nodesBetween(n,r,(n,r)=>{let c="function"==typeof s?s(n):s;if(n.isTextblock&&!n.hasMarkup(i,c)&&function canChangeType(e,n,r){let o=e.resolve(n),i=o.index();return o.parent.canReplaceWith(i,i+1,r)}(e.doc,e.mapping.slice(a).map(r),i)){let s=null;if(i.schema.linebreakReplacement){let e="pre"==i.whitespace,n=!!i.contentMatch.matchType(i.schema.linebreakReplacement);e&&!n?s=!1:!e&&n&&(s=!0)}!1===s&&replaceLinebreaks(e,n,r,a),clearIncompatible(e,e.mapping.slice(a).map(r,1),i,void 0,null===s);let u=e.mapping.slice(a),p=u.map(r,1),f=u.map(r+n.nodeSize,1);return e.step(new ReplaceAroundStep(p,f,p+1,f-1,new o.Slice(o.Fragment.from(i.create(c,null,n.marks)),0,0),1,!0)),!0===s&&replaceNewlines(e,n,r,a),!1}})}(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return function setNodeMarkup(e,n,r,i,s){let a=e.doc.nodeAt(n);if(!a)throw new RangeError("No node at given position");r||(r=a.type);let c=r.create(i,null,s||a.marks);if(a.isLeaf)return e.replaceWith(n,n+a.nodeSize,c);if(!r.validContent(a.content))throw new RangeError("Invalid content for node type "+r.name);e.step(new ReplaceAroundStep(n,n+a.nodeSize,n+1,n+a.nodeSize-1,new o.Slice(o.Fragment.from(c),0,0),1,!0))}(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new AttrStep(e,n,r)),this}setDocAttribute(e,n){return this.step(new DocAttrStep(e,n)),this}addNodeMark(e,n){return this.step(new AddNodeMarkStep(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof o.Mark)n.isInSet(r.marks)&&this.step(new RemoveNodeMarkStep(e,n));else{let o,i=r.marks,s=[];for(;o=n.isInSet(i);)s.push(new RemoveNodeMarkStep(e,o)),i=o.removeFromSet(i);for(let e=s.length-1;e>=0;e--)this.step(s[e])}return this}split(e,n=1,r){return function split(e,n,r=1,i){let s=e.doc.resolve(n),a=o.Fragment.empty,c=o.Fragment.empty;for(let e=s.depth,n=s.depth-r,u=r-1;e>n;e--,u--){a=o.Fragment.from(s.node(e).copy(a));let n=i&&i[u];c=o.Fragment.from(n?n.type.create(n.attrs,c):s.node(e).copy(c))}e.step(new ReplaceStep(n,n,new o.Slice(a.append(c),r,r),!0))}(this,e,n,r),this}addMark(e,n,r){return function addMark(e,n,r,o){let i,s,a=[],c=[];e.doc.nodesBetween(n,r,(e,u,p)=>{if(!e.isInline)return;let f=e.marks;if(!o.isInSet(f)&&p.type.allowsMarkType(o.type)){let p=Math.max(u,n),g=Math.min(u+e.nodeSize,r),b=o.addToSet(f);for(let e=0;e<f.length;e++)f[e].isInSet(b)||(i&&i.to==p&&i.mark.eq(f[e])?i.to=g:a.push(i=new RemoveMarkStep(p,g,f[e])));s&&s.to==p?s.to=g:c.push(s=new AddMarkStep(p,g,o))}}),a.forEach(n=>e.step(n)),c.forEach(n=>e.step(n))}(this,e,n,r),this}removeMark(e,n,r){return function removeMark(e,n,r,i){let s=[],a=0;e.doc.nodesBetween(n,r,(e,c)=>{if(!e.isInline)return;a++;let u=null;if(i instanceof o.MarkType){let n,r=e.marks;for(;n=i.isInSet(r);)(u||(u=[])).push(n),r=n.removeFromSet(r)}else i?i.isInSet(e.marks)&&(u=[i]):u=e.marks;if(u&&u.length){let o=Math.min(c+e.nodeSize,r);for(let e=0;e<u.length;e++){let r,i=u[e];for(let e=0;e<s.length;e++){let n=s[e];n.step==a-1&&i.eq(s[e].style)&&(r=n)}r?(r.to=o,r.step=a):s.push({style:i,from:Math.max(c,n),to:o,step:a})}}}),s.forEach(n=>e.step(new RemoveMarkStep(n.from,n.to,n.style)))}(this,e,n,r),this}clearIncompatible(e,n,r){return clearIncompatible(this,e,n,r),this}}},"./packages/node_modules/prosemirror-view/dist/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{Decoration:function(){return Decoration},DecorationSet:function(){return DecorationSet},EditorView:function(){return EditorView},__endComposition:function(){return pe},__parseFromClipboard:function(){return de}});var o=r("./packages/node_modules/prosemirror-state/dist/index.js"),i=r("./packages/node_modules/prosemirror-model/dist/index.js"),s=r("./packages/node_modules/prosemirror-transform/dist/index.js");const domIndex=function(e){for(var n=0;;n++)if(!(e=e.previousSibling))return n},parentNode=function(e){let n=e.assignedSlot||e.parentNode;return n&&11==n.nodeType?n.host:n};let a=null;const textRange=function(e,n,r){let o=a||(a=document.createRange());return o.setEnd(e,null==r?e.nodeValue.length:r),o.setStart(e,n||0),o},isEquivalentPosition=function(e,n,r,o){return r&&(scanFor(e,n,r,o,-1)||scanFor(e,n,r,o,1))},c=/^(img|br|input|textarea|hr)$/i;function scanFor(e,n,r,o,i){for(var s;;){if(e==r&&n==o)return!0;if(n==(i<0?0:nodeSize(e))){let r=e.parentNode;if(!r||1!=r.nodeType||hasBlockDesc(e)||c.test(e.nodeName)||"false"==e.contentEditable)return!1;n=domIndex(e)+(i<0?0:1),e=r}else{if(1!=e.nodeType)return!1;{let r=e.childNodes[n+(i<0?-1:0)];if(1==r.nodeType&&"false"==r.contentEditable){if(!(null===(s=r.pmViewDesc)||void 0===s?void 0:s.ignoreForSelection))return!1;n+=i}else e=r,n=i<0?nodeSize(e):0}}}}function nodeSize(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function hasBlockDesc(e){let n;for(let r=e;r&&!(n=r.pmViewDesc);r=r.parentNode);return n&&n.node&&n.node.isBlock&&(n.dom==e||n.contentDOM==e)}const selectionCollapsed=function(e){return e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function keyEvent(e,n){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=n,r}const u="undefined"!=typeof navigator?navigator:null,p="undefined"!=typeof document?document:null,f=u&&u.userAgent||"",g=/Edge\/(\d+)/.exec(f),b=/MSIE \d/.exec(f),k=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(f),v=!!(b||k||g),x=b?document.documentMode:k?+k[1]:g?+g[1]:0,w=!v&&/gecko\/(\d+)/i.test(f);w&&(/Firefox\/(\d+)/.exec(f)||[0,0])[1];const E=!v&&/Chrome\/(\d+)/.exec(f),C=!!E,T=E?+E[1]:0,_=!v&&!!u&&/Apple Computer/.test(u.vendor),P=_&&(/Mobile\/\w+/.test(f)||!!u&&u.maxTouchPoints>2),R=P||!!u&&/Mac/.test(u.platform),A=!!u&&/Win/.test(u.platform),N=/Android \d/.test(f),I=!!p&&"webkitFontSmoothing"in p.documentElement.style,z=I?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(e){let n=e.defaultView&&e.defaultView.visualViewport;return n?{left:0,right:n.width,top:0,bottom:n.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function getSide(e,n){return"number"==typeof e?e:e[n]}function clientRect(e){let n=e.getBoundingClientRect(),r=n.width/e.offsetWidth||1,o=n.height/e.offsetHeight||1;return{left:n.left,right:n.left+e.clientWidth*r,top:n.top,bottom:n.top+e.clientHeight*o}}function scrollRectIntoView(e,n,r){let o=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let a=r||e.dom;a;){if(1!=a.nodeType){a=parentNode(a);continue}let e=a,r=e==s.body,c=r?windowRect(s):clientRect(e),u=0,p=0;if(n.top<c.top+getSide(o,"top")?p=-(c.top-n.top+getSide(i,"top")):n.bottom>c.bottom-getSide(o,"bottom")&&(p=n.bottom-n.top>c.bottom-c.top?n.top+getSide(i,"top")-c.top:n.bottom-c.bottom+getSide(i,"bottom")),n.left<c.left+getSide(o,"left")?u=-(c.left-n.left+getSide(i,"left")):n.right>c.right-getSide(o,"right")&&(u=n.right-c.right+getSide(i,"right")),u||p)if(r)s.defaultView.scrollBy(u,p);else{let r=e.scrollLeft,o=e.scrollTop;p&&(e.scrollTop+=p),u&&(e.scrollLeft+=u);let i=e.scrollLeft-r,s=e.scrollTop-o;n={left:n.left-i,top:n.top-s,right:n.right-i,bottom:n.bottom-s}}let f=r?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(f))break;a="absolute"==f?a.offsetParent:parentNode(a)}}function scrollStack(e){let n=[],r=e.ownerDocument;for(let o=e;o&&(n.push({dom:o,top:o.scrollTop,left:o.scrollLeft}),e!=r);o=parentNode(o));return n}function restoreScrollStack(e,n){for(let r=0;r<e.length;r++){let{dom:o,top:i,left:s}=e[r];o.scrollTop!=i+n&&(o.scrollTop=i+n),o.scrollLeft!=s&&(o.scrollLeft=s)}}let F=null;function findOffsetInNode(e,n){let r,o,i,s,a=2e8,c=0,u=n.top,p=n.top;for(let f=e.firstChild,g=0;f;f=f.nextSibling,g++){let e;if(1==f.nodeType)e=f.getClientRects();else{if(3!=f.nodeType)continue;e=textRange(f).getClientRects()}for(let b=0;b<e.length;b++){let k=e[b];if(k.top<=u&&k.bottom>=p){u=Math.max(k.bottom,u),p=Math.min(k.top,p);let e=k.left>n.left?k.left-n.left:k.right<n.left?n.left-k.right:0;if(e<a){r=f,a=e,o=e&&3==r.nodeType?{left:k.right<n.left?k.right:k.left,top:n.top}:n,1==f.nodeType&&e&&(c=g+(n.left>=(k.left+k.right)/2?1:0));continue}}else k.top>n.top&&!i&&k.left<=n.left&&k.right>=n.left&&(i=f,s={left:Math.max(k.left,Math.min(k.right,n.left)),top:k.top});!r&&(n.left>=k.right&&n.top>=k.top||n.left>=k.left&&n.top>=k.bottom)&&(c=g+1)}}return!r&&i&&(r=i,o=s,a=0),r&&3==r.nodeType?function findOffsetInText(e,n){let r,o=e.nodeValue.length,i=document.createRange();for(let s=0;s<o;s++){i.setEnd(e,s+1),i.setStart(e,s);let o=singleRect(i,1);if(o.top!=o.bottom&&inRect(n,o)){r={node:e,offset:s+(n.left>=(o.left+o.right)/2?1:0)};break}}return i.detach(),r||{node:e,offset:0}}(r,o):!r||a&&1==r.nodeType?{node:e,offset:c}:findOffsetInNode(r,o)}function inRect(e,n){return e.left>=n.left-1&&e.left<=n.right+1&&e.top>=n.top-1&&e.top<=n.bottom+1}function elementFromPoint(e,n,r){let o=e.childNodes.length;if(o&&r.top<r.bottom)for(let i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let r=e.childNodes[s];if(1==r.nodeType){let e=r.getClientRects();for(let o=0;o<e.length;o++){let i=e[o];if(inRect(n,i))return elementFromPoint(r,n,i)}}if((s=(s+1)%o)==i)break}return e}function posAtCoords(e,n){let r,o=e.dom.ownerDocument,i=0,s=function caretFromPoint(e,n,r){if(e.caretPositionFromPoint)try{let o=e.caretPositionFromPoint(n,r);if(o)return{node:o.offsetNode,offset:Math.min(nodeSize(o.offsetNode),o.offset)}}catch(e){}if(e.caretRangeFromPoint){let o=e.caretRangeFromPoint(n,r);if(o)return{node:o.startContainer,offset:Math.min(nodeSize(o.startContainer),o.startOffset)}}}(o,n.left,n.top);s&&({node:r,offset:i}=s);let a,c=(e.root.elementFromPoint?e.root:o).elementFromPoint(n.left,n.top);if(!c||!e.dom.contains(1!=c.nodeType?c.parentNode:c)){let r=e.dom.getBoundingClientRect();if(!inRect(n,r))return null;if(c=elementFromPoint(e.dom,n,r),!c)return null}if(_)for(let e=c;r&&e;e=parentNode(e))e.draggable&&(r=void 0);if(c=function targetKludge(e,n){let r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&n.left<e.getBoundingClientRect().left?r:e}(c,n),r){if(w&&1==r.nodeType&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let e,o=r.childNodes[i];"IMG"==o.nodeName&&(e=o.getBoundingClientRect()).right<=n.left&&e.bottom>n.top&&i++}let o;I&&i&&1==r.nodeType&&1==(o=r.childNodes[i-1]).nodeType&&"false"==o.contentEditable&&o.getBoundingClientRect().top>=n.top&&i--,r==e.dom&&i==r.childNodes.length-1&&1==r.lastChild.nodeType&&n.top>r.lastChild.getBoundingClientRect().bottom?a=e.state.doc.content.size:0!=i&&1==r.nodeType&&"BR"==r.childNodes[i-1].nodeName||(a=function posFromCaret(e,n,r,o){let i=-1;for(let r=n,s=!1;r!=e.dom;){let n,a=e.docView.nearestDesc(r,!0);if(!a)return null;if(1==a.dom.nodeType&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((n=a.dom.getBoundingClientRect()).width||n.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&n.left>o.left||n.top>o.top?i=a.posBefore:(!s&&n.right<o.left||n.bottom<o.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?o.top<(n.top+n.bottom)/2:o.left<(n.left+n.right)/2)?a.posBefore:a.posAfter;r=a.dom.parentNode}return i>-1?i:e.docView.posFromDOM(n,r,-1)}(e,r,i,n))}null==a&&(a=function posFromElement(e,n,r){let{node:o,offset:i}=findOffsetInNode(n,r),s=-1;if(1==o.nodeType&&!o.firstChild){let e=o.getBoundingClientRect();s=e.left!=e.right&&r.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}(e,c,n));let u=e.docView.nearestDesc(c,!0);return{pos:a,inside:u?u.posAtStart-u.border:-1}}function nonZero(e){return e.top<e.bottom||e.left<e.right}function singleRect(e,n){let r=e.getClientRects();if(r.length){let e=r[n<0?0:r.length-1];if(nonZero(e))return e}return Array.prototype.find.call(r,nonZero)||e.getBoundingClientRect()}const B=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(e,n,r){let{node:o,offset:i,atom:s}=e.docView.domFromPos(n,r<0?-1:1),a=I||w;if(3==o.nodeType){if(!a||!B.test(o.nodeValue)&&(r<0?i:i!=o.nodeValue.length)){let e=i,n=i,s=r<0?1:-1;return r<0&&!i?(n++,s=-1):r>=0&&i==o.nodeValue.length?(e--,s=1):r<0?e--:n++,flattenV(singleRect(textRange(o,e,n),s),s<0)}{let e=singleRect(textRange(o,i,i),r);if(w&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){let n=singleRect(textRange(o,i-1,i-1),-1);if(n.top==e.top){let r=singleRect(textRange(o,i,i+1),-1);if(r.top!=e.top)return flattenV(r,r.left<n.left)}}return e}}if(!e.state.doc.resolve(n-(s||0)).parent.inlineContent){if(null==s&&i&&(r<0||i==nodeSize(o))){let e=o.childNodes[i-1];if(1==e.nodeType)return flattenH(e.getBoundingClientRect(),!1)}if(null==s&&i<nodeSize(o)){let e=o.childNodes[i];if(1==e.nodeType)return flattenH(e.getBoundingClientRect(),!0)}return flattenH(o.getBoundingClientRect(),r>=0)}if(null==s&&i&&(r<0||i==nodeSize(o))){let e=o.childNodes[i-1],n=3==e.nodeType?textRange(e,nodeSize(e)-(a?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(n)return flattenV(singleRect(n,1),!1)}if(null==s&&i<nodeSize(o)){let e=o.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let n=e?3==e.nodeType?textRange(e,0,a?0:1):1==e.nodeType?e:null:null;if(n)return flattenV(singleRect(n,-1),!0)}return flattenV(singleRect(3==o.nodeType?textRange(o):o,-r),r>=0)}function flattenV(e,n){if(0==e.width)return e;let r=n?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function flattenH(e,n){if(0==e.height)return e;let r=n?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function withFlushedState(e,n,r){let o=e.state,i=e.root.activeElement;o!=n&&e.updateState(n),i!=e.dom&&e.focus();try{return r()}finally{o!=n&&e.updateState(o),i!=e.dom&&i&&i.focus()}}const L=/[\u0590-\u08ac]/;let j=null,V=null,U=!1;function endOfTextblock(e,n,r){return j==n&&V==r?U:(j=n,V=r,U="up"==r||"down"==r?function endOfTextblockVertical(e,n,r){let o=n.selection,i="up"==r?o.$from:o.$to;return withFlushedState(e,n,()=>{let{node:n}=e.docView.domFromPos(i.pos,"up"==r?-1:1);for(;;){let r=e.docView.nearestDesc(n,!0);if(!r)break;if(r.node.isBlock){n=r.contentDOM||r.dom;break}n=r.dom.parentNode}let o=coordsAtPos(e,i.pos,1);for(let e=n.firstChild;e;e=e.nextSibling){let n;if(1==e.nodeType)n=e.getClientRects();else{if(3!=e.nodeType)continue;n=textRange(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<n.length;e++){let i=n[e];if(i.bottom>i.top+1&&("up"==r?o.top-i.top>2*(i.bottom-o.top):i.bottom-o.bottom>2*(o.bottom-i.top)))return!1}}return!0})}(e,n,r):function endOfTextblockHorizontal(e,n,r){let{$head:o}=n.selection;if(!o.parent.isTextblock)return!1;let i=o.parentOffset,s=!i,a=i==o.parent.content.size,c=e.domSelection();return c?L.test(o.parent.textContent)&&c.modify?withFlushedState(e,n,()=>{let{focusNode:n,focusOffset:i,anchorNode:s,anchorOffset:a}=e.domSelectionRange(),u=c.caretBidiLevel;c.modify("move",r,"character");let p=o.depth?e.docView.domAfterPos(o.before()):e.dom,{focusNode:f,focusOffset:g}=e.domSelectionRange(),b=f&&!p.contains(1==f.nodeType?f:f.parentNode)||n==f&&i==g;try{c.collapse(s,a),n&&(n!=s||i!=a)&&c.extend&&c.extend(n,i)}catch(e){}return null!=u&&(c.caretBidiLevel=u),b}):"left"==r||"backward"==r?s:a:o.pos==o.start()||o.pos==o.end()}(e,n,r))}class ViewDesc{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=0,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(r<0){let r,o;if(e==this.contentDOM)r=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}{let r,o;if(e==this.contentDOM)r=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.nextSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.nextSibling;return r?this.posBeforeChild(o):this.posAtEnd}}let o;if(e==this.dom&&this.contentDOM)o=n>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==n)for(let n=e;;n=n.parentNode){if(n==this.dom){o=!1;break}if(n.previousSibling)break}if(null==o&&n==e.childNodes.length)for(let n=e;;n=n.parentNode){if(n==this.dom){o=!0;break}if(n.nextSibling)break}}return(null==o?r>0:o)?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i,s=this.getDesc(o);if(s&&(!n||s.node)){if(!r||!(i=s.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return s;r=!1}}}getDesc(e){let n=e.pmViewDesc;for(let e=n;e;e=e.parent)if(e==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let e=0;e<o.children.length;e++){let n=o.children[e];if(n.size){o=n;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let n=0;r<this.children.length;r++){let i=this.children[r],s=n+i.size;if(s>e||i instanceof TrailingHackViewDesc){o=e-n;break}n=s}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let e;r&&!(e=this.children[r-1]).size&&e instanceof WidgetViewDesc&&e.side>=0;r--);if(n<=0){let e,o=!0;for(;e=r?this.children[r-1]:null,e&&e.dom.parentNode!=this.contentDOM;r--,o=!1);return e&&n&&o&&!e.border&&!e.domAtom?e.domFromPos(e.size,n):{node:this.contentDOM,offset:e?domIndex(e.dom)+1:0}}{let e,o=!0;for(;e=r<this.children.length?this.children[r]:null,e&&e.dom.parentNode!=this.contentDOM;r++,o=!1);return e&&o&&!e.border&&!e.domAtom?e.domFromPos(0,n):{node:this.contentDOM,offset:e?domIndex(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let r=this.children[a],c=s+r.size;if(-1==o&&e<=c){let i=s+r.border;if(e>=i&&n<=c-r.border&&r.node&&r.contentDOM&&this.contentDOM.contains(r.contentDOM))return r.parseRange(e,n,i);e=s;for(let n=a;n>0;n--){let r=this.children[n-1];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(1)){o=domIndex(r.dom)+1;break}e-=r.size}-1==o&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let e=a+1;e<this.children.length;e++){let r=this.children[e];if(r.size&&r.dom.parentNode==this.contentDOM&&!r.emptyChildAt(-1)){i=domIndex(r.dom);break}n+=r.size}-1==i&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return 0==n.size||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let a=0,c=0;a<this.children.length;a++){let u=this.children[a],p=c+u.size;if(i>c&&s<p)return u.setSelection(e-c-u.border,n-c-u.border,r,o);c=p}let a=this.domFromPos(e,e?-1:1),c=n==e?a:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),p=r.domSelectionRange(),f=!1;if((w||_)&&e==n){let{node:e,offset:n}=a;if(3==e.nodeType){if(f=!(!n||"\n"!=e.nodeValue[n-1]),f&&n==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(a=c={node:n.parentNode,offset:domIndex(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let r=e.childNodes[n-1];f=r&&("BR"==r.nodeName||"false"==r.contentEditable)}}if(w&&p.focusNode&&p.focusNode!=c.node&&1==p.focusNode.nodeType){let e=p.focusNode.childNodes[p.focusOffset];e&&"false"==e.contentEditable&&(o=!0)}if(!(o||f&&_)&&isEquivalentPosition(a.node,a.offset,p.anchorNode,p.anchorOffset)&&isEquivalentPosition(c.node,c.offset,p.focusNode,p.focusOffset))return;let g=!1;if((u.extend||e==n)&&(!f||!w)){u.collapse(a.node,a.offset);try{e!=n&&u.extend(c.node,c.offset),g=!0}catch(e){}}if(!g){if(e>n){let e=a;a=c,c=e}let r=document.createRange();r.setEnd(c.node,c.offset),r.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(r)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let o=r+i.border,a=s-i.border;if(e>=o&&n<=a)return this.dirty=e==r||n==s?2:1,void(e!=o||n!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-o,n-o):i.dirty=3);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}r=s}this.dirty=2}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=1==e?2:1;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class WidgetViewDesc extends ViewDesc{constructor(e,n,r,o){let i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:o)),!n.type.spec.raw){if(1!=s.nodeType){let e=document.createElement("span");e.appendChild(s),s=e}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return!!n&&n(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class MarkViewDesc extends ViewDesc{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new MarkViewDesc(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,n,r){let o=MarkViewDesc.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=replaceNodes(i,n,s,r)),e>0&&(i=replaceNodes(i,0,e,r));for(let e=0;e<i.length;e++)i[e].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(e,n,r,o,i,s,a,c,u){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,a){let c,u=s.nodeViews[n.type.name],p=u&&u(n,s,()=>c?c.parent?c.parent.posBeforeChild(c):void 0:a,r,o),f=p&&p.dom,g=p&&p.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else if(!f){let e=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs);({dom:f,contentDOM:g}=e)}g||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let b=f;return f=applyOuterDeco(f,r,n),p?c=new CustomNodeViewDesc(e,n,r,o,f,g||null,b,p,s,a+1):n.isText?new TextViewDesc(e,n,r,o,f,b,s):new NodeViewDesc(e,n,r,o,f,g||null,b,s,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>i.Fragment.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,n,r){return 0==this.dirty&&e.eq(this.node)&&sameOuterDeco(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,a=s&&s.pos>-1?s:null,c=s&&s.pos<0,u=new ViewTreeUpdater(this,a&&a.node,e);!function iterDeco(e,n,r,o){let i=n.locals(e),s=0;if(0==i.length){for(let r=0;r<e.childCount;r++){let a=e.child(r);o(a,i,n.forChild(s,a),r),s+=a.nodeSize}return}let a=0,c=[],u=null;for(let p=0;;){let f,g,b,k;for(;a<i.length&&i[a].to==s;){let e=i[a++];e.widget&&(f?(g||(g=[f])).push(e):f=e)}if(f)if(g){g.sort(compareSide);for(let e=0;e<g.length;e++)r(g[e],p,!!u)}else r(f,p,!!u);if(u)k=-1,b=u,u=null;else{if(!(p<e.childCount))break;k=p,b=e.child(p++)}for(let e=0;e<c.length;e++)c[e].to<=s&&c.splice(e--,1);for(;a<i.length&&i[a].from<=s&&i[a].to>s;)c.push(i[a++]);let v=s+b.nodeSize;if(b.isText){let e=v;a<i.length&&i[a].from<e&&(e=i[a].from);for(let n=0;n<c.length;n++)c[n].to<e&&(e=c[n].to);e<v&&(u=b.cut(e-s),b=b.cut(0,e-s),v=e,k=-1)}else for(;a<i.length&&i[a].to<v;)a++;o(b,b.isInline&&!b.isLeaf?c.filter(e=>!e.inline):c.slice(),n.forChild(s,b),k),s=v}}(this.node,this.innerDeco,(n,s,a)=>{n.spec.marks?u.syncToMarks(n.spec.marks,r,e,s):n.type.side>=0&&!a&&u.syncToMarks(s==this.node.childCount?i.Mark.none:this.node.child(s).marks,r,e,s),u.placeWidget(n,e,o)},(n,i,a,p)=>{let f;u.syncToMarks(n.marks,r,e,p),u.findNodeMatch(n,i,a,p)||c&&e.state.selection.from>o&&e.state.selection.to<o+n.nodeSize&&(f=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(n,i,a,f,e)||u.updateNextNode(n,i,a,e,p,o)||u.addNode(n,i,a,e,o),o+=n.nodeSize}),u.syncToMarks([],r,e,0),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||2==this.dirty)&&(a&&this.protectLocalComposition(e,a),renderDescs(this.contentDOM,this.children,e),P&&function iosHacks(e){if("UL"==e.nodeName||"OL"==e.nodeName){let n=e.style.cssText;e.style.cssText=n+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=n}}(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof o.TextSelection)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let e=s.nodeValue,o=function findTextInFragment(e,n,r,o){for(let i=0,s=0;i<e.childCount&&s<=o;){let a=e.child(i++),c=s;if(s+=a.nodeSize,!a.isText)continue;let u=a.text;for(;i<e.childCount;){let n=e.child(i++);if(s+=n.nodeSize,!n.isText)break;u+=n.text}if(s>=r){if(s>=o&&u.slice(o-n.length-c,o-c)==n)return o-n.length;let e=c<o?u.lastIndexOf(n,o-c-1):-1;if(e>=0&&e+n.length+c>=r)return c+e;if(r==o&&u.length>=o+n.length-c&&u.slice(o-c,o-c+n.length)==n)return o}}return-1}(this.node.content,e,r-n,i-n);return o<0?null:{node:s,pos:o,text:e}}return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new CompositionViewDesc(this,i,n,o);e.input.compositionNodes.push(s),this.children=replaceNodes(this.children,r,r+o.length,e,s)}update(e,n,r,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(sameOuterDeco(e,this.outerDeco))return;let n=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,n),computeOuterDeco(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.nodeDOM.draggable=!0))}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(e,n,r,o,i){applyOuterDeco(o,n,e);let s=new NodeViewDesc(void 0,e,n,r,o,o,o,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class TextViewDesc extends NodeViewDesc{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(n),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new TextViewDesc(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class CustomNodeViewDesc extends NodeViewDesc{constructor(e,n,r,o,i,s,a,c,u,p){super(e,n,r,o,i,s,a,u,p),this.spec=c}update(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function renderDescs(e,n,r){let o=e.firstChild,i=!1;for(let s=0;s<n.length;s++){let a=n[s],c=a.dom;if(c.parentNode==e){for(;c!=o;)o=rm(o),i=!0;o=o.nextSibling}else i=!0,e.insertBefore(c,o);if(a instanceof MarkViewDesc){let n=o?o.previousSibling:e.lastChild;renderDescs(a.contentDOM,a.children,r),o=n?n.nextSibling:e.firstChild}}for(;o;)o=rm(o),i=!0;i&&r.trackWrites==e&&(r.trackWrites=null)}const OuterDecoLevel=function(e){e&&(this.nodeName=e)};OuterDecoLevel.prototype=Object.create(null);const H=[new OuterDecoLevel];function computeOuterDeco(e,n,r){if(0==e.length)return H;let o=r?H[0]:new OuterDecoLevel,i=[o];for(let s=0;s<e.length;s++){let a=e[s].type.attrs;if(a){a.nodeName&&i.push(o=new OuterDecoLevel(a.nodeName));for(let e in a){let s=a[e];null!=s&&(r&&1==i.length&&i.push(o=new OuterDecoLevel(n.isInline?"span":"div")),"class"==e?o.class=(o.class?o.class+" ":"")+s:"style"==e?o.style=(o.style?o.style+";":"")+s:"nodeName"!=e&&(o[e]=s))}}}return i}function patchOuterDeco(e,n,r,o){if(r==H&&o==H)return n;let i=n;for(let n=0;n<o.length;n++){let s=o[n],a=r[n];if(n){let n;a&&a.nodeName==s.nodeName&&i!=e&&(n=i.parentNode)&&n.nodeName.toLowerCase()==s.nodeName||(n=document.createElement(s.nodeName),n.pmIsDeco=!0,n.appendChild(i),a=H[0]),i=n}patchAttributes(i,a||H[0],s)}return i}function patchAttributes(e,n,r){for(let o in n)"class"==o||"style"==o||"nodeName"==o||o in r||e.removeAttribute(o);for(let o in r)"class"!=o&&"style"!=o&&"nodeName"!=o&&r[o]!=n[o]&&e.setAttribute(o,r[o]);if(n.class!=r.class){let o=n.class?n.class.split(" ").filter(Boolean):[],i=r.class?r.class.split(" ").filter(Boolean):[];for(let n=0;n<o.length;n++)-1==i.indexOf(o[n])&&e.classList.remove(o[n]);for(let n=0;n<i.length;n++)-1==o.indexOf(i[n])&&e.classList.add(i[n]);0==e.classList.length&&e.removeAttribute("class")}if(n.style!=r.style){if(n.style){let r,o=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;r=o.exec(n.style);)e.style.removeProperty(r[1])}r.style&&(e.style.cssText+=r.style)}}function applyOuterDeco(e,n,r){return patchOuterDeco(e,e,H,computeOuterDeco(n,r,1!=e.nodeType))}function sameOuterDeco(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].type.eq(n[r].type))return!1;return!0}function rm(e){let n=e.nextSibling;return e.parentNode.removeChild(e),n}class ViewTreeUpdater{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function preMatch(e,n){let r=n,o=r.children.length,i=e.childCount,s=new Map,a=[];e:for(;i>0;){let c;for(;;)if(o){let e=r.children[o-1];if(!(e instanceof MarkViewDesc)){c=e,o--;break}r=e,o=e.children.length}else{if(r==n)break e;o=r.parent.children.indexOf(r),r=r.parent}let u=c.node;if(u){if(u!=e.child(i-1))break;--i,s.set(c,i),a.push(c)}}return{index:i,matched:s,matches:a.reverse()}}(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,o){let i=0,s=this.stack.length>>1,a=Math.min(s,e.length);for(;i<a&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&!1!==e[i].type.spec.spanning;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let i=-1,a=this.top.children.length;o<this.preMatch.index&&(a=Math.min(this.index+3,a));for(let n=this.index;n<a;n++){let r=this.top.children[n];if(r.matchesMark(e[s])&&!this.isLocked(r.dom)){i=n;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let o=MarkViewDesc.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,o),this.top=o,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let i,s=-1;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let o=this.index,i=Math.min(this.top.children.length,o+5);o<i;o++){let i=this.top.children[o];if(i.matchesNode(e,n,r)&&!this.preMatch.matched.has(i)){s=o;break}}return!(s<0)&&(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(e,n,r,i)&&(this.destroyBetween(this.index,o),this.index++,!0)}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let n=e.pmViewDesc;if(n)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==n)return e;return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof NodeViewDesc){let u=this.preMatch.matched.get(c);if(null!=u&&u!=i)return!1;let p,f=c.dom,g=this.isLocked(f)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&3!=c.dirty&&sameOuterDeco(n,c.outerDeco));if(!g&&c.update(e,n,r,o))return this.destroyBetween(this.index,a),c.dom!=f&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(c,e,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=2,p.updateChildren(o,s+1),p.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!sameOuterDeco(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=NodeViewDesc.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let e of a.children)e.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=NodeViewDesc.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(e)||e!=o.widget&&o.widget.type.toDOM.parentNode){let o=new WidgetViewDesc(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof MarkViewDesc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof TextViewDesc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((_||C)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);"IMG"==e&&(r.className="ProseMirror-separator",r.alt=""),"BR"==e&&(r.className="ProseMirror-trailingBreak");let o=new TrailingHackViewDesc(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function compareSide(e,n){return e.type.side-n.type.side}function replaceNodes(e,n,r,o,i){let s=[];for(let a=0,c=0;a<e.length;a++){let u=e[a],p=c,f=c+=u.size;p>=r||f<=n?s.push(u):(p<n&&s.push(u.slice(0,n-p,o)),i&&(s.push(i),i=void 0),f>r&&s.push(u.slice(r-p,u.size,o)))}return s}function selectionFromDOM(e,n=null){let r=e.domSelectionRange(),i=e.state.doc;if(!r.focusNode)return null;let s=e.docView.nearestDesc(r.focusNode),a=s&&0==s.size,c=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(c<0)return null;let u,p,f=i.resolve(c);if(selectionCollapsed(r)){for(u=c;s&&!s.node;)s=s.parent;let e=s.node;if(s&&e.isAtom&&o.NodeSelection.isSelectable(e)&&s.parent&&(!e.isInline||!function isOnEdge(e,n,r){for(let o=0==n,i=n==nodeSize(e);o||i;){if(e==r)return!0;let n=domIndex(e);if(!(e=e.parentNode))return!1;o=o&&0==n,i=i&&n==nodeSize(e)}}(r.focusNode,r.focusOffset,s.dom))){let e=s.posBefore;p=new o.NodeSelection(c==e?f:i.resolve(e))}}else{if(r instanceof e.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let n=c,o=c;for(let i=0;i<r.rangeCount;i++){let s=r.getRangeAt(i);n=Math.min(n,e.docView.posFromDOM(s.startContainer,s.startOffset,1)),o=Math.max(o,e.docView.posFromDOM(s.endContainer,s.endOffset,-1))}if(n<0)return null;[u,c]=o==e.state.selection.anchor?[o,n]:[n,o],f=i.resolve(c)}else u=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(u<0)return null}let g=i.resolve(u);if(!p){p=selectionBetween(e,g,f,"pointer"==n||e.state.selection.head<f.pos&&!a?1:-1)}return p}function editorOwnsSelection(e){return e.editable?e.hasFocus():hasSelection(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function selectionToDOM(e,n=!1){let r=e.state.selection;if(syncNodeSelection(e,r),editorOwnsSelection(e)){if(!n&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&C){let n=e.domSelectionRange(),r=e.domObserver.currentSelection;if(n.anchorNode&&r.anchorNode&&isEquivalentPosition(n.anchorNode,n.anchorOffset,r.anchorNode,r.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function selectCursorWrapper(e){let n=e.domSelection();if(!n)return;let r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.collapse(r.parentNode,domIndex(r)+1):n.collapse(r,0);!o&&!e.state.selection.visible&&v&&x<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let i,s,{anchor:a,head:c}=r;!q||r instanceof o.TextSelection||(r.$from.parent.inlineContent||(i=temporarilyEditableNear(e,r.from)),r.empty||r.$from.parent.inlineContent||(s=temporarilyEditableNear(e,r.to))),e.docView.setSelection(a,c,e,n),q&&(i&&resetEditable(i),s&&resetEditable(s)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function removeClassOnSelectionChange(e){let n=e.dom.ownerDocument;n.removeEventListener("selectionchange",e.input.hideSelectionGuard);let r=e.domSelectionRange(),o=r.anchorNode,i=r.anchorOffset;n.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{r.anchorNode==o&&r.anchorOffset==i||(n.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{editorOwnsSelection(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const q=_||C&&T<63;function temporarilyEditableNear(e,n){let{node:r,offset:o}=e.docView.domFromPos(n,0),i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(_&&i&&"false"==i.contentEditable)return setEditable(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return setEditable(i);if(s)return setEditable(s)}}function setEditable(e){return e.contentEditable="true",_&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function resetEditable(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function syncNodeSelection(e,n){if(n instanceof o.NodeSelection){let r=e.docView.descAt(n.from);r!=e.lastSelectedViewDesc&&(clearNodeSelection(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else clearNodeSelection(e)}function clearNodeSelection(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function selectionBetween(e,n,r,i){return e.someProp("createSelectionBetween",o=>o(e,n,r))||o.TextSelection.between(n,r,i)}function hasFocusAndSelection(e){return!(e.editable&&!e.hasFocus())&&hasSelection(e)}function hasSelection(e){let n=e.domSelectionRange();if(!n.anchorNode)return!1;try{return e.dom.contains(3==n.anchorNode.nodeType?n.anchorNode.parentNode:n.anchorNode)&&(e.editable||e.dom.contains(3==n.focusNode.nodeType?n.focusNode.parentNode:n.focusNode))}catch(e){return!1}}function moveSelectionBlock(e,n){let{$anchor:r,$head:i}=e.selection,s=n>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?e.doc.resolve(n>0?s.after():s.before()):null:s;return a&&o.Selection.findFrom(a,n)}function apply(e,n){return e.dispatch(e.state.tr.setSelection(n).scrollIntoView()),!0}function selectHorizontally(e,n,r){let i=e.state.selection;if(!(i instanceof o.TextSelection)){if(i instanceof o.NodeSelection&&i.node.isInline)return apply(e,new o.TextSelection(n>0?i.$to:i.$from));{let r=moveSelectionBlock(e.state,n);return!!r&&apply(e,r)}}if(r.indexOf("s")>-1){let{$head:r}=i,s=r.textOffset?null:n<0?r.nodeBefore:r.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let a=e.state.doc.resolve(r.pos+s.nodeSize*(n<0?-1:1));return apply(e,new o.TextSelection(i.$anchor,a))}if(!i.empty)return!1;if(e.endOfTextblock(n>0?"forward":"backward")){let r=moveSelectionBlock(e.state,n);return!!(r&&r instanceof o.NodeSelection)&&apply(e,r)}if(!(R&&r.indexOf("m")>-1)){let r,s=i.$head,a=s.textOffset?null:n<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText)return!1;let c=n<0?s.pos-a.nodeSize:s.pos;return!!(a.isAtom||(r=e.docView.descAt(c))&&!r.contentDOM)&&(o.NodeSelection.isSelectable(a)?apply(e,new o.NodeSelection(n<0?e.state.doc.resolve(s.pos-a.nodeSize):s)):!!I&&apply(e,new o.TextSelection(e.state.doc.resolve(n<0?c:c+a.nodeSize))))}}function nodeLen(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function isIgnorable(e,n){let r=e.pmViewDesc;return r&&0==r.size&&(n<0||e.nextSibling||"BR"!=e.nodeName)}function skipIgnoredNodes(e,n){return n<0?function skipIgnoredNodesBefore(e){let n=e.domSelectionRange(),r=n.focusNode,o=n.focusOffset;if(!r)return;let i,s,a=!1;w&&1==r.nodeType&&o<nodeLen(r)&&isIgnorable(r.childNodes[o],-1)&&(a=!0);for(;;)if(o>0){if(1!=r.nodeType)break;{let e=r.childNodes[o-1];if(isIgnorable(e,-1))i=r,s=--o;else{if(3!=e.nodeType)break;r=e,o=r.nodeValue.length}}}else{if(isBlockNode(r))break;{let n=r.previousSibling;for(;n&&isIgnorable(n,-1);)i=r.parentNode,s=domIndex(n),n=n.previousSibling;if(n)r=n,o=nodeLen(r);else{if(r=r.parentNode,r==e.dom)break;o=0}}}a?setSelFocus(e,r,o):i&&setSelFocus(e,i,s)}(e):function skipIgnoredNodesAfter(e){let n=e.domSelectionRange(),r=n.focusNode,o=n.focusOffset;if(!r)return;let i,s,a=nodeLen(r);for(;;)if(o<a){if(1!=r.nodeType)break;if(!isIgnorable(r.childNodes[o],1))break;i=r,s=++o}else{if(isBlockNode(r))break;{let n=r.nextSibling;for(;n&&isIgnorable(n,1);)i=n.parentNode,s=domIndex(n)+1,n=n.nextSibling;if(n)r=n,o=0,a=nodeLen(r);else{if(r=r.parentNode,r==e.dom)break;o=a=0}}}i&&setSelFocus(e,i,s)}(e)}function isBlockNode(e){let n=e.pmViewDesc;return n&&n.node&&n.node.isBlock}function setSelFocus(e,n,r){if(3!=n.nodeType){let e,o;(o=function textNodeAfter(e,n){for(;e&&n==e.childNodes.length&&!hasBlockDesc(e);)n=domIndex(e)+1,e=e.parentNode;for(;e&&n<e.childNodes.length;){let r=e.childNodes[n];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;e=r,n=0}}(n,r))?(n=o,r=0):(e=function textNodeBefore(e,n){for(;e&&!n&&!hasBlockDesc(e);)n=domIndex(e),e=e.parentNode;for(;e&&n;){let r=e.childNodes[n-1];if(3==r.nodeType)return r;if(1==r.nodeType&&"false"==r.contentEditable)break;n=(e=r).childNodes.length}}(n,r))&&(n=e,r=e.nodeValue.length)}let o=e.domSelection();if(!o)return;if(selectionCollapsed(o)){let e=document.createRange();e.setEnd(n,r),e.setStart(n,r),o.removeAllRanges(),o.addRange(e)}else o.extend&&o.extend(n,r);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&selectionToDOM(e)},50)}function findDirection(e,n){let r=e.state.doc.resolve(n);if(!C&&!A&&r.parent.inlineContent){let o=e.coordsAtPos(n);if(n>r.start()){let r=e.coordsAtPos(n-1),i=(r.top+r.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(r.left-o.left)>1)return r.left<o.left?"ltr":"rtl"}if(n<r.end()){let r=e.coordsAtPos(n+1),i=(r.top+r.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(r.left-o.left)>1)return r.left>o.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function selectVertically(e,n,r){let i=e.state.selection;if(i instanceof o.TextSelection&&!i.empty||r.indexOf("s")>-1)return!1;if(R&&r.indexOf("m")>-1)return!1;let{$from:s,$to:a}=i;if(!s.parent.inlineContent||e.endOfTextblock(n<0?"up":"down")){let r=moveSelectionBlock(e.state,n);if(r&&r instanceof o.NodeSelection)return apply(e,r)}if(!s.parent.inlineContent){let r=n<0?s:a,c=i instanceof o.AllSelection?o.Selection.near(r,n):o.Selection.findFrom(r,n);return!!c&&apply(e,c)}return!1}function stopNativeHorizontalDelete(e,n){if(!(e.state.selection instanceof o.TextSelection))return!0;let{$head:r,$anchor:i,empty:s}=e.state.selection;if(!r.sameParent(i))return!0;if(!s)return!1;if(e.endOfTextblock(n>0?"forward":"backward"))return!0;let a=!r.textOffset&&(n<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){let o=e.state.tr;return n<0?o.delete(r.pos-a.nodeSize,r.pos):o.delete(r.pos,r.pos+a.nodeSize),e.dispatch(o),!0}return!1}function switchEditable(e,n,r){e.domObserver.stop(),n.contentEditable=r,e.domObserver.start()}function captureKeyDown(e,n){let r=n.keyCode,o=function getMods(e){let n="";return e.ctrlKey&&(n+="c"),e.metaKey&&(n+="m"),e.altKey&&(n+="a"),e.shiftKey&&(n+="s"),n}(n);if(8==r||R&&72==r&&"c"==o)return stopNativeHorizontalDelete(e,-1)||skipIgnoredNodes(e,-1);if(46==r&&!n.shiftKey||R&&68==r&&"c"==o)return stopNativeHorizontalDelete(e,1)||skipIgnoredNodes(e,1);if(13==r||27==r)return!0;if(37==r||R&&66==r&&"c"==o){let n=37==r?"ltr"==findDirection(e,e.state.selection.from)?-1:1:-1;return selectHorizontally(e,n,o)||skipIgnoredNodes(e,n)}if(39==r||R&&70==r&&"c"==o){let n=39==r?"ltr"==findDirection(e,e.state.selection.from)?1:-1:1;return selectHorizontally(e,n,o)||skipIgnoredNodes(e,n)}return 38==r||R&&80==r&&"c"==o?selectVertically(e,-1,o)||skipIgnoredNodes(e,-1):40==r||R&&78==r&&"c"==o?function safariDownArrowBug(e){if(!_||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:n,focusOffset:r}=e.domSelectionRange();if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){let r=n.firstChild;switchEditable(e,r,"true"),setTimeout(()=>switchEditable(e,r,"false"),20)}return!1}(e)||selectVertically(e,1,o)||skipIgnoredNodes(e,1):o==(R?"m":"c")&&(66==r||73==r||89==r||90==r)}function serializeForClipboard(e,n){e.someProp("transformCopied",r=>{n=r(n,e)});let r=[],{content:o,openStart:s,openEnd:a}=n;for(;s>1&&a>1&&1==o.childCount&&1==o.firstChild.childCount;){s--,a--;let e=o.firstChild;r.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),o=e.content}let c=e.someProp("clipboardSerializer")||i.DOMSerializer.fromSchema(e.state.schema),u=detachedDoc(),p=u.createElement("div");p.appendChild(c.serializeFragment(o,{document:u}));let f,g=p.firstChild,b=0;for(;g&&1==g.nodeType&&(f=W[g.nodeName.toLowerCase()]);){for(let e=f.length-1;e>=0;e--){let n=u.createElement(f[e]);for(;p.firstChild;)n.appendChild(p.firstChild);p.appendChild(n),b++}g=p.firstChild}return g&&1==g.nodeType&&g.setAttribute("data-pm-slice",`${s} ${a}${b?` -${b}`:""} ${JSON.stringify(r)}`),{dom:p,text:e.someProp("clipboardTextSerializer",r=>r(n,e))||n.content.textBetween(0,n.content.size,"\n\n"),slice:n}}function parseFromClipboard(e,n,r,o,s){let a,c,u=s.parent.type.spec.code;if(!r&&!n)return null;let p=!!n&&(o||u||!r);if(p){if(e.someProp("transformPastedText",r=>{n=r(n,u||o,e)}),u)return c=new i.Slice(i.Fragment.from(e.state.schema.text(n.replace(/\r\n?/g,"\n"))),0,0),e.someProp("transformPasted",n=>{c=n(c,e,!0)}),c;let r=e.someProp("clipboardTextParser",r=>r(n,s,o,e));if(r)c=r;else{let r=s.marks(),{schema:o}=e.state,c=i.DOMSerializer.fromSchema(o);a=document.createElement("div"),n.split(/(?:\r\n?|\n)+/).forEach(e=>{let n=a.appendChild(document.createElement("p"));e&&n.appendChild(c.serializeNode(o.text(e,r)))})}}else e.someProp("transformPastedHTML",n=>{r=n(r,e)}),a=function readHTML(e){let n=/^(\s*<meta [^>]*>)*/.exec(e);n&&(e=e.slice(n[0].length));let r,o=detachedDoc().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);(r=i&&W[i[1].toLowerCase()])&&(e=r.map(e=>"<"+e+">").join("")+e+r.map(e=>"</"+e+">").reverse().join(""));if(o.innerHTML=function maybeWrapTrusted(e){let n=window.trustedTypes;if(!n)return e;J||(J=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return J.createHTML(e)}(e),r)for(let e=0;e<r.length;e++)o=o.querySelector(r[e])||o;return o}(r),I&&function restoreReplacedSpaces(e){let n=e.querySelectorAll(C?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<n.length;r++){let o=n[r];1==o.childNodes.length&&""==o.textContent&&o.parentNode&&o.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),o)}}(a);let f=a&&a.querySelector("[data-pm-slice]"),g=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(g&&g[3])for(let e=+g[3];e>0;e--){let e=a.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;a=e}if(!c){let n=e.someProp("clipboardParser")||e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema);c=n.parseSlice(a,{preserveWhitespace:!(!p&&!g),context:s,ruleFromNode(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||K.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(g)c=function addContext(e,n){if(!e.size)return e;let r,o=e.content.firstChild.type.schema;try{r=JSON.parse(n)}catch(n){return e}let{content:s,openStart:a,openEnd:c}=e;for(let e=r.length-2;e>=0;e-=2){let n=o.nodes[r[e]];if(!n||n.hasRequiredAttrs())break;s=i.Fragment.from(n.create(r[e+1],s)),a++,c++}return new i.Slice(s,a,c)}(closeSlice(c,+g[1],+g[2]),g[4]);else if(c=i.Slice.maxOpen(function normalizeSiblings(e,n){if(e.childCount<2)return e;for(let r=n.depth;r>=0;r--){let o,s=n.node(r).contentMatchAt(n.index(r)),a=[];if(e.forEach(e=>{if(!a)return;let n,r=s.findWrapping(e.type);if(!r)return a=null;if(n=a.length&&o.length&&addToSibling(r,o,e,a[a.length-1],0))a[a.length-1]=n;else{a.length&&(a[a.length-1]=closeRight(a[a.length-1],o.length));let n=withWrappers(e,r);a.push(n),s=s.matchType(n.type),o=r}}),a)return i.Fragment.from(a)}return e}(c.content,s),!0),c.openStart||c.openEnd){let e=0,n=0;for(let n=c.content.firstChild;e<c.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let e=c.content.lastChild;n<c.openEnd&&!e.type.spec.isolating;n++,e=e.lastChild);c=closeSlice(c,e,n)}return e.someProp("transformPasted",n=>{c=n(c,e,p)}),c}const K=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function withWrappers(e,n,r=0){for(let o=n.length-1;o>=r;o--)e=n[o].create(null,i.Fragment.from(e));return e}function addToSibling(e,n,r,o,s){if(s<e.length&&s<n.length&&e[s]==n[s]){let a=addToSibling(e,n,r,o.lastChild,s+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(s==e.length-1?r.type:e[s+1]))return o.copy(o.content.append(i.Fragment.from(withWrappers(r,e,s+1))))}}function closeRight(e,n){if(0==n)return e;let r=e.content.replaceChild(e.childCount-1,closeRight(e.lastChild,n-1)),o=e.contentMatchAt(e.childCount).fillBefore(i.Fragment.empty,!0);return e.copy(r.append(o))}function closeRange(e,n,r,o,s,a){let c=n<0?e.firstChild:e.lastChild,u=c.content;return e.childCount>1&&(a=0),s<o-1&&(u=closeRange(u,n,r,o,s+1,a)),s>=r&&(u=n<0?c.contentMatchAt(0).fillBefore(u,a<=s).append(u):u.append(c.contentMatchAt(c.childCount).fillBefore(i.Fragment.empty,!0))),e.replaceChild(n<0?0:e.childCount-1,c.copy(u))}function closeSlice(e,n,r){return n<e.openStart&&(e=new i.Slice(closeRange(e.content,-1,n,e.openStart,0,e.openEnd),n,e.openEnd)),r<e.openEnd&&(e=new i.Slice(closeRange(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}const W={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let G=null;function detachedDoc(){return G||(G=document.implementation.createHTMLDocument("title"))}let J=null;const Y={},X={},Z={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function setSelectionOrigin(e,n){e.input.lastSelectionOrigin=n,e.input.lastSelectionTime=Date.now()}function ensureListeners(e){e.someProp("handleDOMEvents",n=>{for(let r in n)e.input.eventHandlers[r]||e.dom.addEventListener(r,e.input.eventHandlers[r]=n=>runCustomHandler(e,n))})}function runCustomHandler(e,n){return e.someProp("handleDOMEvents",r=>{let o=r[n.type];return!!o&&(o(e,n)||n.defaultPrevented)})}function eventBelongsToView(e,n){if(!n.bubbles)return!0;if(n.defaultPrevented)return!1;for(let r=n.target;r!=e.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(n))return!1;return!0}function eventCoords(e){return{left:e.clientX,top:e.clientY}}function runHandlerOnContext(e,n,r,o,i){if(-1==o)return!1;let s=e.state.doc.resolve(o);for(let o=s.depth+1;o>0;o--)if(e.someProp(n,n=>o>s.depth?n(e,r,s.nodeAfter,s.before(o),i,!0):n(e,r,s.node(o),s.before(o),i,!1)))return!0;return!1}function updateSelection(e,n,r){if(e.focused||e.focus(),e.state.selection.eq(n))return;let o=e.state.tr.setSelection(n);"pointer"==r&&o.setMeta("pointer",!0),e.dispatch(o)}function handleSingleClick(e,n,r,i,s){return runHandlerOnContext(e,"handleClickOn",n,r,i)||e.someProp("handleClick",r=>r(e,n,i))||(s?function selectClickedNode(e,n){if(-1==n)return!1;let r,i,s=e.state.selection;s instanceof o.NodeSelection&&(r=s.node);let a=e.state.doc.resolve(n);for(let e=a.depth+1;e>0;e--){let n=e>a.depth?a.nodeAfter:a.node(e);if(o.NodeSelection.isSelectable(n)){i=r&&s.$from.depth>0&&e>=s.$from.depth&&a.before(s.$from.depth+1)==s.$from.pos?a.before(s.$from.depth):a.before(e);break}}return null!=i&&(updateSelection(e,o.NodeSelection.create(e.state.doc,i),"pointer"),!0)}(e,r):function selectClickedLeaf(e,n){if(-1==n)return!1;let r=e.state.doc.resolve(n),i=r.nodeAfter;return!!(i&&i.isAtom&&o.NodeSelection.isSelectable(i))&&(updateSelection(e,new o.NodeSelection(r),"pointer"),!0)}(e,r))}function handleDoubleClick(e,n,r,o){return runHandlerOnContext(e,"handleDoubleClickOn",n,r,o)||e.someProp("handleDoubleClick",r=>r(e,n,o))}function handleTripleClick(e,n,r,i){return runHandlerOnContext(e,"handleTripleClickOn",n,r,i)||e.someProp("handleTripleClick",r=>r(e,n,i))||function defaultTripleClick(e,n,r){if(0!=r.button)return!1;let i=e.state.doc;if(-1==n)return!!i.inlineContent&&(updateSelection(e,o.TextSelection.create(i,0,i.content.size),"pointer"),!0);let s=i.resolve(n);for(let n=s.depth+1;n>0;n--){let r=n>s.depth?s.nodeAfter:s.node(n),a=s.before(n);if(r.inlineContent)updateSelection(e,o.TextSelection.create(i,a+1,a+1+r.content.size),"pointer");else{if(!o.NodeSelection.isSelectable(r))continue;updateSelection(e,o.NodeSelection.create(i,a),"pointer")}return!0}}(e,r,i)}function forceDOMFlush(e){return endComposition(e)}X.keydown=(e,n)=>{let r=n;if(e.input.shiftKey=16==r.keyCode||r.shiftKey,!inOrNearComposition(e,r)&&(e.input.lastKeyCode=r.keyCode,e.input.lastKeyCodeTime=Date.now(),!N||!C||13!=r.keyCode))if(229!=r.keyCode&&e.domObserver.forceFlush(),!P||13!=r.keyCode||r.ctrlKey||r.altKey||r.metaKey)e.someProp("handleKeyDown",n=>n(e,r))||captureKeyDown(e,r)?r.preventDefault():setSelectionOrigin(e,"key");else{let n=Date.now();e.input.lastIOSEnter=n,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==n&&(e.someProp("handleKeyDown",n=>n(e,keyEvent(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},X.keyup=(e,n)=>{16==n.keyCode&&(e.input.shiftKey=!1)},X.keypress=(e,n)=>{let r=n;if(inOrNearComposition(e,r)||!r.charCode||r.ctrlKey&&!r.altKey||R&&r.metaKey)return;if(e.someProp("handleKeyPress",n=>n(e,r)))return void r.preventDefault();let i=e.state.selection;if(!(i instanceof o.TextSelection&&i.$from.sameParent(i.$to))){let n=String.fromCharCode(r.charCode),deflt=()=>e.state.tr.insertText(n).scrollIntoView();/[\r\n]/.test(n)||e.someProp("handleTextInput",r=>r(e,i.$from.pos,i.$to.pos,n,deflt))||e.dispatch(deflt()),r.preventDefault()}};const Q=R?"metaKey":"ctrlKey";Y.mousedown=(e,n)=>{let r=n;e.input.shiftKey=r.shiftKey;let o=forceDOMFlush(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&function isNear(e,n){let r=n.x-e.clientX,o=n.y-e.clientY;return r*r+o*o<100}(r,e.input.lastClick)&&!r[Q]&&e.input.lastClick.button==r.button&&("singleClick"==e.input.lastClick.type?s="doubleClick":"doubleClick"==e.input.lastClick.type&&(s="tripleClick")),e.input.lastClick={time:i,x:r.clientX,y:r.clientY,type:s,button:r.button};let a=e.posAtCoords(eventCoords(r));a&&("singleClick"==s?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new MouseDown(e,a,r,!!o)):("doubleClick"==s?handleDoubleClick:handleTripleClick)(e,a.pos,a.inside,r)?r.preventDefault():setSelectionOrigin(e,"pointer"))};class MouseDown{constructor(e,n,r,i){let s,a;if(this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Q],this.allowDefault=r.shiftKey,n.inside>-1)s=e.state.doc.nodeAt(n.inside),a=n.inside;else{let r=e.state.doc.resolve(n.pos);s=r.parent,a=r.depth?r.before():0}const c=i?null:r.target,u=c?e.docView.nearestDesc(c,!0):null;this.target=u&&1==u.nodeDOM.nodeType?u.nodeDOM:null;let{selection:p}=e.state;(0==r.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||p instanceof o.NodeSelection&&p.from<=a&&p.to>a)&&(this.mightDrag={node:s,pos:a,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!w||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(eventCoords(e))),this.updateAllowDefault(e),this.allowDefault||!n?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||_&&this.mightDrag&&!this.mightDrag.node.isAtom||C&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,o.Selection.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(e){this.updateAllowDefault(e),setSelectionOrigin(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function inOrNearComposition(e,n){return!!e.composing||!!(_&&Math.abs(n.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}Y.touchstart=e=>{e.input.lastTouch=Date.now(),forceDOMFlush(e),setSelectionOrigin(e,"pointer")},Y.touchmove=e=>{e.input.lastTouch=Date.now(),setSelectionOrigin(e,"pointer")},Y.contextmenu=e=>forceDOMFlush(e);const ee=N?5e3:-1;function scheduleComposeEnd(e,n){clearTimeout(e.input.composingTimeout),n>-1&&(e.input.composingTimeout=setTimeout(()=>endComposition(e),n))}function clearComposition(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function timestampFromCustomEvent(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(e){let n=e.domSelectionRange();if(!n.focusNode)return null;let r=function textNodeBefore$1(e,n){for(;;){if(3==e.nodeType&&n)return e;if(1==e.nodeType&&n>0){if("false"==e.contentEditable)return null;n=nodeSize(e=e.childNodes[n-1])}else{if(!e.parentNode||hasBlockDesc(e))return null;n=domIndex(e),e=e.parentNode}}}(n.focusNode,n.focusOffset),o=function textNodeAfter$1(e,n){for(;;){if(3==e.nodeType&&n<e.nodeValue.length)return e;if(1==e.nodeType&&n<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[n],n=0}else{if(!e.parentNode||hasBlockDesc(e))return null;n=domIndex(e)+1,e=e.parentNode}}}(n.focusNode,n.focusOffset);if(r&&o&&r!=o){let n=o.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(r==i||o==i)return i;if(!n||!n.isText(o.nodeValue))return o;if(e.input.compositionNode==o){let e=r.pmViewDesc;if(e&&e.isText(r.nodeValue))return o}}return r||o}function endComposition(e,n=!1){if(!(N&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),clearComposition(e),n||e.docView&&e.docView.dirty){let r=selectionFromDOM(e),o=e.state.selection;return r&&!r.eq(o)?e.dispatch(e.state.tr.setSelection(r)):!e.markCursor&&!n||o.$from.node(o.$from.sharedDepth(o.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}X.compositionstart=X.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:n}=e,r=n.selection.$to;if(n.selection instanceof o.TextSelection&&(n.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)||C&&A&&function selectionBeforeUneditable(e){let{focusNode:n,focusOffset:r}=e.domSelectionRange();if(!n||1!=n.nodeType||r>=n.childNodes.length)return!1;let o=n.childNodes[r];return 1==o.nodeType&&"false"==o.contentEditable}(e)))e.markCursor=e.state.storedMarks||r.marks(),endComposition(e,!0),e.markCursor=null;else if(endComposition(e,!n.selection.empty),w&&n.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=e.domSelectionRange();for(let r=n.focusNode,o=n.focusOffset;r&&1==r.nodeType&&0!=o;){let n=o<0?r.lastChild:r.childNodes[o-1];if(!n)break;if(3==n.nodeType){let r=e.domSelection();r&&r.collapse(n,n.nodeValue.length);break}r=n,o=-1}}e.input.composing=!0}scheduleComposeEnd(e,ee)},X.compositionend=(e,n)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=n.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,scheduleComposeEnd(e,20))};const te=v&&x<15||P&&z<604;function doPaste(e,n,r,o,s){let a=parseFromClipboard(e,n,r,o,e.state.selection.$from);if(e.someProp("handlePaste",n=>n(e,s,a||i.Slice.empty)))return!0;if(!a)return!1;let c=function sliceSingleNode(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(a),u=c?e.state.tr.replaceSelectionWith(c,o):e.state.tr.replaceSelection(a);return e.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText(e){let n=e.getData("text/plain")||e.getData("Text");if(n)return n;let r=e.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Y.copy=X.cut=(e,n)=>{let r=n,o=e.state.selection,i="cut"==r.type;if(o.empty)return;let s=te?null:r.clipboardData,a=o.content(),{dom:c,text:u}=serializeForClipboard(e,a);s?(r.preventDefault(),s.clearData(),s.setData("text/html",c.innerHTML),s.setData("text/plain",u)):function captureCopy(e,n){if(!e.dom.parentNode)return;let r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(n),r.style.cssText="position: fixed; left: -10000px; top: 10px";let o=getSelection(),i=document.createRange();i.selectNodeContents(n),e.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),e.focus()},50)}(e,c),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},X.paste=(e,n)=>{let r=n;if(e.composing&&!N)return;let o=te?null:r.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;o&&doPaste(e,getText(o),o.getData("text/html"),i,r)?r.preventDefault():function capturePaste(e,n){if(!e.dom.parentNode)return;let r=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,o=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),o.parentNode&&o.parentNode.removeChild(o),r?doPaste(e,o.value,null,i,n):doPaste(e,o.textContent,o.innerHTML,i,n)},50)}(e,r)};class Dragging{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const ne=R?"altKey":"ctrlKey";function dragMoves(e,n){let r=e.someProp("dragCopies",e=>!e(n));return null!=r?r:!n[ne]}Y.dragstart=(e,n)=>{let r=n,i=e.input.mouseDown;if(i&&i.done(),!r.dataTransfer)return;let s,a=e.state.selection,c=a.empty?null:e.posAtCoords(eventCoords(r));if(c&&c.pos>=a.from&&c.pos<=(a instanceof o.NodeSelection?a.to-1:a.to));else if(i&&i.mightDrag)s=o.NodeSelection.create(e.state.doc,i.mightDrag.pos);else if(r.target&&1==r.target.nodeType){let n=e.docView.nearestDesc(r.target,!0);n&&n.node.type.spec.draggable&&n!=e.docView&&(s=o.NodeSelection.create(e.state.doc,n.posBefore))}let u=(s||e.state.selection).content(),{dom:p,text:f,slice:g}=serializeForClipboard(e,u);(!r.dataTransfer.files.length||!C||T>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(te?"Text":"text/html",p.innerHTML),r.dataTransfer.effectAllowed="copyMove",te||r.dataTransfer.setData("text/plain",f),e.dragging=new Dragging(g,dragMoves(e,r),s)},Y.dragend=e=>{let n=e.dragging;window.setTimeout(()=>{e.dragging==n&&(e.dragging=null)},50)},X.dragover=X.dragenter=(e,n)=>n.preventDefault(),X.drop=(e,n)=>{try{!function handleDrop(e,n,r){if(!n.dataTransfer)return;let a=e.posAtCoords(eventCoords(n));if(!a)return;let c=e.state.doc.resolve(a.pos),u=r&&r.slice;u?e.someProp("transformPasted",n=>{u=n(u,e,!1)}):u=parseFromClipboard(e,getText(n.dataTransfer),te?null:n.dataTransfer.getData("text/html"),!1,c);let p=!(!r||!dragMoves(e,n));if(e.someProp("handleDrop",r=>r(e,n,u||i.Slice.empty,p)))return void n.preventDefault();if(!u)return;n.preventDefault();let f=u?(0,s.dropPoint)(e.state.doc,c.pos,u):c.pos;null==f&&(f=c.pos);let g=e.state.tr;if(p){let{node:e}=r;e?e.replace(g):g.deleteSelection()}let b=g.mapping.map(f),k=0==u.openStart&&0==u.openEnd&&1==u.content.childCount,v=g.doc;k?g.replaceRangeWith(b,b,u.content.firstChild):g.replaceRange(b,b,u);if(g.doc.eq(v))return;let x=g.doc.resolve(b);if(k&&o.NodeSelection.isSelectable(u.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(u.content.firstChild))g.setSelection(new o.NodeSelection(x));else{let n=g.mapping.map(f);g.mapping.maps[g.mapping.maps.length-1].forEach((e,r,o,i)=>n=i),g.setSelection(selectionBetween(e,x,g.doc.resolve(n)))}e.focus(),e.dispatch(g.setMeta("uiEvent","drop"))}(e,n,e.dragging)}finally{e.dragging=null}},Y.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&selectionToDOM(e)},20))},Y.blur=(e,n)=>{let r=n;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),r.relatedTarget&&e.dom.contains(r.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},Y.beforeinput=(e,n)=>{if(C&&N&&"deleteContentBackward"==n.inputType){e.domObserver.flushSoon();let{domChangeCount:n}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=n)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",n=>n(e,keyEvent(8,"Backspace"))))return;let{$cursor:r}=e.state.selection;r&&r.pos>0&&e.dispatch(e.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let e in X)Y[e]=X[e];function compareObjs(e,n){if(e==n)return!0;for(let r in e)if(e[r]!==n[r])return!1;for(let r in n)if(!(r in e))return!1;return!0}class WidgetType{constructor(e,n){this.toDOM=e,this.spec=n||oe,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new Decoration(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof WidgetType&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&compareObjs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class InlineType{constructor(e,n){this.attrs=e,this.spec=n||oe}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Decoration(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof InlineType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}static is(e){return e.type instanceof InlineType}destroy(){}}class NodeType{constructor(e,n){this.attrs=e,this.spec=n||oe}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Decoration(i.pos-r,s.pos-r,this)}valid(e,n){let r,{index:o,offset:i}=e.content.findIndex(n.from);return i==n.from&&!(r=e.child(o)).isText&&i+r.nodeSize==n.to}eq(e){return this==e||e instanceof NodeType&&compareObjs(this.attrs,e.attrs)&&compareObjs(this.spec,e.spec)}destroy(){}}class Decoration{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Decoration(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Decoration(e,e,new WidgetType(n,r))}static inline(e,n,r,o){return new Decoration(e,n,new InlineType(r,o))}static node(e,n,r,o){return new Decoration(e,n,new NodeType(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const re=[],oe={};class DecorationSet{constructor(e,n){this.local=e.length?e:re,this.children=n.length?n:re}static create(e,n){return n.length?buildTree(n,e,0,oe):ie}find(e,n,r){let o=[];return this.findInner(null==e?0:e,null==n?1e9:n,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==ie||0==e.maps.length?this:this.mapInner(e,n,0,0,r||oe)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(e,r,o);c&&c.type.valid(n,c)?(s||(s=[])).push(c):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?function mapChildren(e,n,r,o,i,s,a){let c=e.slice();for(let e=0,n=s;e<r.maps.length;e++){let o=0;r.maps[e].forEach((e,r,i,s)=>{let a=s-i-(r-e);for(let i=0;i<c.length;i+=3){let s=c[i+1];if(s<0||e>s+n-o)continue;let u=c[i]+n-o;r>=u?c[i+1]=e<=u?-2:-1:e>=n&&a&&(c[i]+=a,c[i+1]+=a)}o+=a}),n=r.maps[e].map(n,-1)}let u=!1;for(let n=0;n<c.length;n+=3)if(c[n+1]<0){if(-2==c[n+1]){u=!0,c[n+1]=-1;continue}let p=r.map(e[n]+s),f=p-i;if(f<0||f>=o.content.size){u=!0;continue}let g=r.map(e[n+1]+s,-1)-i,{index:b,offset:k}=o.content.findIndex(f),v=o.maybeChild(b);if(v&&k==f&&k+v.nodeSize==g){let o=c[n+2].mapInner(r,v,p+1,e[n]+s+1,a);o!=ie?(c[n]=f,c[n+1]=g,c[n+2]=o):(c[n+1]=-2,u=!0)}else u=!0}if(u){let u=function mapAndGatherRemainingDecorations(e,n,r,o,i,s,a){function gather(e,n){for(let s=0;s<e.local.length;s++){let c=e.local[s].map(o,i,n);c?r.push(c):a.onRemove&&a.onRemove(e.local[s].spec)}for(let r=0;r<e.children.length;r+=3)gather(e.children[r+2],e.children[r]+n+1)}for(let r=0;r<e.length;r+=3)-1==e[r+1]&&gather(e[r+2],n[r]+s+1);return r}(c,e,n,r,i,s,a),p=buildTree(u,o,0,a);n=p.local;for(let e=0;e<c.length;e+=3)c[e+1]<0&&(c.splice(e,3),e-=3);for(let e=0,n=0;e<p.children.length;e+=3){let r=p.children[e];for(;n<c.length&&c[n]<r;)n+=3;c.splice(n,0,p.children[e],p.children[e+1],p.children[e+2])}}return new DecorationSet(n.sort(byPos),c)}(this.children,s||[],e,n,r,o,i):s?new DecorationSet(s.sort(byPos),re):ie}add(e,n){return n.length?this==ie?DecorationSet.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((e,s)=>{let a,c=s+r;if(a=takeSpansForNode(n,e,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<s;)i+=3;o[i]==s?o[i+2]=o[i+2].addInner(e,a,c+1):o.splice(i,0,s,s+e.nodeSize,buildTree(a,e,c+1,oe)),i+=3}});let s=moveSpans(i?withoutNulls(n):n,-r);for(let n=0;n<s.length;n++)s[n].type.valid(e,s[n])||s.splice(n--,1);return new DecorationSet(s.length?this.local.concat(s).sort(byPos):this.local,o||this.children)}remove(e){return 0==e.length||this==ie?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let o=0;o<r.length;o+=3){let i,s=r[o]+n,a=r[o+1]+n;for(let n,r=0;r<e.length;r++)(n=e[r])&&n.from>s&&n.to<a&&(e[r]=null,(i||(i=[])).push(n));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(i,s+1);c!=ie?r[o+2]=c:(r.splice(o,3),o-=3)}if(o.length)for(let r,i=0;i<e.length;i++)if(r=e[i])for(let e=0;e<o.length;e++)o[e].eq(r,n)&&(o==this.local&&(o=this.local.slice()),o.splice(e--,1));return r==this.children&&o==this.local?this:o.length||r.length?new DecorationSet(o,r):ie}forChild(e,n){if(this==ie)return this;if(n.isLeaf)return DecorationSet.empty;let r,o;for(let n=0;n<this.children.length;n+=3)if(this.children[n]>=e){this.children[n]==e&&(r=this.children[n+2]);break}let i=e+1,s=i+n.content.size;for(let e=0;e<this.local.length;e++){let n=this.local[e];if(n.from<s&&n.to>i&&n.type instanceof InlineType){let e=Math.max(i,n.from)-i,r=Math.min(s,n.to)-i;e<r&&(o||(o=[])).push(n.copy(e,r))}}if(o){let e=new DecorationSet(o.sort(byPos),re);return r?new DecorationGroup([e,r]):e}return r||ie}eq(e){if(this==e)return!0;if(!(e instanceof DecorationSet)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return removeOverlap(this.localsInner(e))}localsInner(e){if(this==ie)return re;if(e.inlineContent||!this.local.some(InlineType.is))return this.local;let n=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof InlineType||n.push(this.local[e]);return n}forEachSet(e){e(this)}}DecorationSet.empty=new DecorationSet([],[]),DecorationSet.removeOverlap=removeOverlap;const ie=DecorationSet.empty;class DecorationGroup{constructor(e){this.members=e}map(e,n){const r=this.members.map(r=>r.map(e,n,oe));return DecorationGroup.from(r)}forChild(e,n){if(n.isLeaf)return DecorationSet.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=ie&&(i instanceof DecorationGroup?r=r.concat(i.members):r.push(i))}return DecorationGroup.from(r)}eq(e){if(!(e instanceof DecorationGroup)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(n){r&&(n=n.slice(),r=!1);for(let e=0;e<i.length;e++)n.push(i[e])}else n=i}return n?removeOverlap(r?n:n.sort(byPos)):re}static from(e){switch(e.length){case 0:return ie;case 1:return e[0];default:return new DecorationGroup(e.every(e=>e instanceof DecorationSet)?e:e.reduce((e,n)=>e.concat(n instanceof DecorationSet?n:n.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function moveSpans(e,n){if(!n||!e.length)return e;let r=[];for(let o=0;o<e.length;o++){let i=e[o];r.push(new Decoration(i.from+n,i.to+n,i.type))}return r}function takeSpansForNode(e,n,r){if(n.isLeaf)return null;let o=r+n.nodeSize,i=null;for(let n,s=0;s<e.length;s++)(n=e[s])&&n.from>r&&n.to<o&&((i||(i=[])).push(n),e[s]=null);return i}function withoutNulls(e){let n=[];for(let r=0;r<e.length;r++)null!=e[r]&&n.push(e[r]);return n}function buildTree(e,n,r,o){let i=[],s=!1;n.forEach((n,a)=>{let c=takeSpansForNode(e,n,a+r);if(c){s=!0;let e=buildTree(c,n,r+a+1,o);e!=ie&&i.push(a,a+n.nodeSize,e)}});let a=moveSpans(s?withoutNulls(e):e,-r).sort(byPos);for(let e=0;e<a.length;e++)a[e].type.valid(n,a[e])||(o.onRemove&&o.onRemove(a[e].spec),a.splice(e--,1));return a.length||i.length?new DecorationSet(a,i):ie}function byPos(e,n){return e.from-n.from||e.to-n.to}function removeOverlap(e){let n=e;for(let r=0;r<n.length-1;r++){let o=n[r];if(o.from!=o.to)for(let i=r+1;i<n.length;i++){let s=n[i];if(s.from!=o.from){s.from<o.to&&(n==e&&(n=e.slice()),n[r]=o.copy(o.from,s.from),insertAhead(n,i,o.copy(s.from,o.to)));break}s.to!=o.to&&(n==e&&(n=e.slice()),n[i]=s.copy(s.from,o.to),insertAhead(n,i+1,s.copy(o.to,s.to)))}}return n}function insertAhead(e,n,r){for(;n<e.length&&byPos(r,e[n])>0;)n++;e.splice(n,0,r)}function viewDecorations(e){let n=[];return e.someProp("decorations",r=>{let o=r(e.state);o&&o!=ie&&n.push(o)}),e.cursorWrapper&&n.push(DecorationSet.create(e.state.doc,[e.cursorWrapper.deco])),DecorationGroup.from(n)}const se={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ae=v&&x<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class DOMObserver{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let e=0;e<n.length;e++)this.queue.push(n[e]);v&&x<=11&&n.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():_&&e.composing&&n.some(e=>"childList"==e.type&&"TR"==e.target.nodeName)?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),ae&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,se)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(v&&x<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&isEquivalentPosition(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n,r=new Set;for(let n=e.focusNode;n;n=parentNode(n))r.add(n);for(let o=e.anchorNode;o;o=parentNode(o))if(r.has(o)){n=o;break}let o=n&&this.view.docView.nearestDesc(n);return o&&o.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&hasFocusAndSelection(e)&&!this.ignoreSelectionChange(r),s=-1,a=-1,c=!1,u=[];if(e.editable)for(let e=0;e<n.length;e++){let r=this.registerMutation(n[e],u);r&&(s=s<0?r.from:Math.min(r.from,s),a=a<0?r.to:Math.max(r.to,a),r.typeOver&&(c=!0))}if(w&&u.length){let n=u.filter(e=>"BR"==e.nodeName);if(2==n.length){let[e,r]=n;e.parentNode&&e.parentNode.parentNode==r.parentNode?r.remove():e.remove()}else{let{focusNode:r}=this.currentSelection;for(let o of n){let n=o.parentNode;!n||"LI"!=n.nodeName||r&&blockParent(e,r)==n||o.remove()}}}else if((C||_)&&u.some(e=>"BR"==e.nodeName)&&(8==e.input.lastKeyCode||46==e.input.lastKeyCode))for(let e of u)if("BR"==e.nodeName&&e.parentNode){let n=e.nextSibling;n&&1==n.nodeType&&"false"==n.contentEditable&&e.parentNode.removeChild(e)}let p=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&selectionCollapsed(r)&&(p=selectionFromDOM(e))&&p.eq(o.Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,selectionToDOM(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,a),function checkCSS(e){if(le.has(e))return;if(le.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=w,ce)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ce=!0}}(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,function fixUpBadSafariComposition(e,n){var r;let{focusNode:o,focusOffset:i}=e.domSelectionRange();for(let s of n)if("TR"==(null===(r=s.parentNode)||void 0===r?void 0:r.nodeName)){let n=s.nextSibling;for(;n&&"TD"!=n.nodeName&&"TH"!=n.nodeName;)n=n.nextSibling;if(n){let r=n;for(;;){let e=r.firstChild;if(!e||1!=e.nodeType||"false"==e.contentEditable||/^(BR|IMG)$/.test(e.nodeName))break;r=e}r.insertBefore(s,r.firstChild),o==s&&e.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}(e,u)),this.handleDOMChange(s,a,c,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||selectionToDOM(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!r||r.ignoreMutation(e))return null;if("childList"==e.type){for(let r=0;r<e.addedNodes.length;r++){let o=e.addedNodes[r];n.push(o),3==o.nodeType&&(this.lastChangedTextNode=o)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(v&&x<=11&&e.addedNodes.length)for(let n=0;n<e.addedNodes.length;n++){let{previousSibling:r,nextSibling:s}=e.addedNodes[n];(!r||Array.prototype.indexOf.call(e.addedNodes,r)<0)&&(o=r),(!s||Array.prototype.indexOf.call(e.addedNodes,s)<0)&&(i=s)}let s=o&&o.parentNode==e.target?domIndex(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),c=i&&i.parentNode==e.target?domIndex(i):e.target.childNodes.length;return{from:a,to:r.localPosFromDOM(e.target,c,1)}}return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let le=new WeakMap,ce=!1;function rangeToSelectionRange(e,n){let r=n.startContainer,o=n.startOffset,i=n.endContainer,s=n.endOffset,a=e.domAtPos(e.state.selection.anchor);return isEquivalentPosition(a.node,a.offset,i,s)&&([r,o,i,s]=[i,s,r,o]),{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}}function blockParent(e,n){for(let r=n.parentNode;r&&r!=e.dom;r=r.parentNode){let n=e.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function ruleFromNode(e){let n=e.pmViewDesc;if(n)return n.parseRule();if("BR"==e.nodeName&&e.parentNode){if(_&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||_&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ue=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(e,n,r,s,a){let c=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,n<0){let n=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,r=selectionFromDOM(e,n);if(r&&!e.state.selection.eq(r)){if(C&&N&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",n=>n(e,keyEvent(13,"Enter"))))return;let o=e.state.tr.setSelection(r);"pointer"==n?o.setMeta("pointer",!0):"key"==n&&o.scrollIntoView(),c&&o.setMeta("composition",c),e.dispatch(o)}return}let u=e.state.doc.resolve(n),p=u.sharedDepth(r);n=u.before(p+1),r=e.state.doc.resolve(r).after(p+1);let f,g,b=e.state.selection,k=function parseBetween(e,n,r){let o,{node:s,fromOffset:a,toOffset:c,from:u,to:p}=e.docView.parseRange(n,r),f=e.domSelectionRange(),g=f.anchorNode;if(g&&e.dom.contains(1==g.nodeType?g:g.parentNode)&&(o=[{node:g,offset:f.anchorOffset}],selectionCollapsed(f)||o.push({node:f.focusNode,offset:f.focusOffset})),C&&8===e.input.lastKeyCode)for(let e=c;e>a;e--){let n=s.childNodes[e-1],r=n.pmViewDesc;if("BR"==n.nodeName&&!r){c=e;break}if(!r||r.size)break}let b=e.state.doc,k=e.someProp("domParser")||i.DOMParser.fromSchema(e.state.schema),v=b.resolve(u),x=null,w=k.parse(s,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:a,to:c,preserveWhitespace:"pre"!=v.parent.type.whitespace||"full",findPositions:o,ruleFromNode:ruleFromNode,context:v});if(o&&null!=o[0].pos){let e=o[0].pos,n=o[1]&&o[1].pos;null==n&&(n=e),x={anchor:e+u,head:n+u}}return{doc:w,sel:x,from:u,to:p}}(e,n,r),w=e.state.doc,E=w.slice(k.from,k.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(f=e.state.selection.to,g="end"):(f=e.state.selection.from,g="start"),e.input.lastKeyCode=null;let T=function findDiff(e,n,r,o,i){let s=e.findDiffStart(n,r);if(null==s)return null;let{a:a,b:c}=e.findDiffEnd(n,r+e.size,r+n.size);if("end"==i){o-=a+Math.max(0,s-Math.min(a,c))-s}if(a<s&&e.size<n.size){let e=o<=s&&o>=a?s-o:0;s-=e,s&&s<n.size&&isSurrogatePair(n.textBetween(s-1,s+1))&&(s+=e?1:-1),c=s+(c-a),a=s}else if(c<s){let n=o<=s&&o>=c?s-o:0;s-=n,s&&s<e.size&&isSurrogatePair(e.textBetween(s-1,s+1))&&(s+=n?1:-1),a=s+(a-c),c=s}return{start:s,endA:a,endB:c}}(E.content,k.doc.content,k.from,f,g);if(T&&e.input.domChangeCount++,(P&&e.input.lastIOSEnter>Date.now()-225||N)&&a.some(e=>1==e.nodeType&&!ue.test(e.nodeName))&&(!T||T.endA>=T.endB)&&e.someProp("handleKeyDown",n=>n(e,keyEvent(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!T){if(!(s&&b instanceof o.TextSelection&&!b.empty&&b.$head.sameParent(b.$anchor))||e.composing||k.sel&&k.sel.anchor!=k.sel.head){if(k.sel){let n=resolveSelection(e,e.state.doc,k.sel);if(n&&!n.eq(e.state.selection)){let r=e.state.tr.setSelection(n);c&&r.setMeta("composition",c),e.dispatch(r)}}return}T={start:b.from,endA:b.to,endB:b.to}}e.state.selection.from<e.state.selection.to&&T.start==T.endB&&e.state.selection instanceof o.TextSelection&&(T.start>e.state.selection.from&&T.start<=e.state.selection.from+2&&e.state.selection.from>=k.from?T.start=e.state.selection.from:T.endA<e.state.selection.to&&T.endA>=e.state.selection.to-2&&e.state.selection.to<=k.to&&(T.endB+=e.state.selection.to-T.endA,T.endA=e.state.selection.to)),v&&x<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>k.from&&" "==k.doc.textBetween(T.start-k.from-1,T.start-k.from+1)&&(T.start--,T.endA--,T.endB--);let _=k.doc.resolveNoCache(T.start-k.from),R=k.doc.resolveNoCache(T.endB-k.from),A=w.resolve(T.start),I=_.sameParent(R)&&_.parent.inlineContent&&A.end()>=T.endA;if((P&&e.input.lastIOSEnter>Date.now()-225&&(!I||a.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!I&&_.pos<k.doc.content.size&&(!_.sameParent(R)||!_.parent.inlineContent)&&_.pos<R.pos&&!/\S/.test(k.doc.textBetween(_.pos,R.pos,"","")))&&e.someProp("handleKeyDown",n=>n(e,keyEvent(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>T.start&&function looksLikeBackspace(e,n,r,o,i){if(r-n<=i.pos-o.pos||skipClosingAndOpening(o,!0,!1)<i.pos)return!1;let s=e.resolve(n);if(!o.parent.isTextblock){let e=s.nodeAfter;return null!=e&&r==n+e.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let a=e.resolve(skipClosingAndOpening(s,!0,!0));return!(!a.parent.isTextblock||a.pos>r||skipClosingAndOpening(a,!0,!1)<r)&&o.parent.content.cut(o.parentOffset).eq(a.parent.content)}(w,T.start,T.endA,_,R)&&e.someProp("handleKeyDown",n=>n(e,keyEvent(8,"Backspace"))))return void(N&&C&&e.domObserver.suppressSelectionUpdates());C&&T.endB==T.start&&(e.input.lastChromeDelete=Date.now()),N&&!I&&_.start()!=R.start()&&0==R.parentOffset&&_.depth==R.depth&&k.sel&&k.sel.anchor==k.sel.head&&k.sel.head==T.endA&&(T.endB-=2,R=k.doc.resolveNoCache(T.endB-k.from),setTimeout(()=>{e.someProp("handleKeyDown",function(n){return n(e,keyEvent(13,"Enter"))})},20));let z,F=T.start,B=T.endA,mkTr=n=>{let r=n||e.state.tr.replace(F,B,k.doc.slice(T.start-k.from,T.endB-k.from));if(k.sel){let n=resolveSelection(e,r.doc,k.sel);n&&!(C&&e.composing&&n.empty&&(T.start!=T.endB||e.input.lastChromeDelete<Date.now()-100)&&(n.head==F||n.head==r.mapping.map(B)-1)||v&&n.empty&&n.head==F)&&r.setSelection(n)}return c&&r.setMeta("composition",c),r.scrollIntoView()};if(I)if(_.pos==R.pos){v&&x<=11&&0==_.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(e),20));let n=mkTr(e.state.tr.delete(F,B)),r=w.resolve(T.start).marksAcross(w.resolve(T.endA));r&&n.ensureMarks(r),e.dispatch(n)}else if(T.endA==T.endB&&(z=function isMarkChange(e,n){let r,o,s,a=e.firstChild.marks,c=n.firstChild.marks,u=a,p=c;for(let e=0;e<c.length;e++)u=c[e].removeFromSet(u);for(let e=0;e<a.length;e++)p=a[e].removeFromSet(p);if(1==u.length&&0==p.length)o=u[0],r="add",s=e=>e.mark(o.addToSet(e.marks));else{if(0!=u.length||1!=p.length)return null;o=p[0],r="remove",s=e=>e.mark(o.removeFromSet(e.marks))}let f=[];for(let e=0;e<n.childCount;e++)f.push(s(n.child(e)));if(i.Fragment.from(f).eq(e))return{mark:o,type:r}}(_.parent.content.cut(_.parentOffset,R.parentOffset),A.parent.content.cut(A.parentOffset,T.endA-A.start())))){let n=mkTr(e.state.tr);"add"==z.type?n.addMark(F,B,z.mark):n.removeMark(F,B,z.mark),e.dispatch(n)}else if(_.parent.child(_.index()).isText&&_.index()==R.index()-(R.textOffset?0:1)){let n=_.parent.textBetween(_.parentOffset,R.parentOffset),deflt=()=>mkTr(e.state.tr.insertText(n,F,B));e.someProp("handleTextInput",r=>r(e,F,B,n,deflt))||e.dispatch(deflt())}else e.dispatch(mkTr());else e.dispatch(mkTr())}function resolveSelection(e,n,r){return Math.max(r.anchor,r.head)>n.content.size?null:selectionBetween(e,n.resolve(r.anchor),n.resolve(r.head))}function skipClosingAndOpening(e,n,r){let o=e.depth,i=n?e.end():e.pos;for(;o>0&&(n||e.indexAfter(o)==e.node(o).childCount);)o--,i++,n=!1;if(r){let n=e.node(o).maybeChild(e.indexAfter(o));for(;n&&!n.isLeaf;)n=n.firstChild,i++}return i}function isSurrogatePair(e){if(2!=e.length)return!1;let n=e.charCodeAt(0),r=e.charCodeAt(1);return n>=56320&&n<=57343&&r>=55296&&r<=56319}const de=parseFromClipboard,pe=endComposition;class EditorView{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(e,n,r,o)=>readDOMChange(this,e,n,r,o)),this.domObserver.start(),function initInput(e){for(let n in Y){let r=Y[n];e.dom.addEventListener(n,e.input.eventHandlers[n]=n=>{!eventBelongsToView(e,n)||runCustomHandler(e,n)||!e.editable&&n.type in X||r(e,n)},Z[n]?{passive:!0}:void 0)}_&&e.dom.addEventListener("input",()=>null),ensureListeners(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(checkStateComponent),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let e in this._props)n[e]=this._props[e];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(clearComposition(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let e=buildNodeViews(this);(function changedNodeViews(e,n){let r=0,o=0;for(let o in e){if(e[o]!=n[o])return!0;r++}for(let e in n)o++;return r!=o})(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let c=viewDecorations(this),u=computeDocDeco(this),p=o.plugins==e.plugins||o.doc.eq(e.doc)?e.scrollToSelection>o.scrollToSelection?"to selection":"preserve":"reset",f=i||!this.docView.matchesNode(e.doc,u,c);!f&&e.selection.eq(o.selection)||(s=!0);let g="preserve"==p&&s&&null==this.dom.style.overflowAnchor&&function storeScrollPos(e){let n,r,o=e.dom.getBoundingClientRect(),i=Math.max(0,o.top);for(let s=(o.left+o.right)/2,a=i+1;a<Math.min(innerHeight,o.bottom);a+=5){let o=e.root.elementFromPoint(s,a);if(!o||o==e.dom||!e.dom.contains(o))continue;let c=o.getBoundingClientRect();if(c.top>=i-20){n=o,r=c.top;break}}return{refDOM:n,refTop:r,stack:scrollStack(e.dom)}}(this);if(s){this.domObserver.stop();let n=f&&(v||C)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&function selectionContextChanged(e,n){let r=Math.min(e.$anchor.sharedDepth(e.head),n.$anchor.sharedDepth(n.head));return e.$anchor.start(r)!=n.$anchor.start(r)}(o.selection,e.selection);if(f){let r=C?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),!i&&this.docView.update(e.doc,u,c,this)||(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=docViewDesc(e.doc,u,c,this.dom,this)),!r||this.trackWrites&&this.dom.contains(this.trackWrites)||(n=!0)}n||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function anchorInRightPlace(e){let n=e.docView.domFromPos(e.state.selection.anchor,0),r=e.domSelectionRange();return isEquivalentPosition(n.node,n.offset,r.anchorNode,r.anchorOffset)}(this))?selectionToDOM(this,n):(syncNodeSelection(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),(null===(r=this.dragging)||void 0===r?void 0:r.node)&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),"reset"==p?this.dom.scrollTop=0:"to selection"==p?this.scrollToSelection():g&&function resetScrollPos({refDOM:e,refTop:n,stack:r}){let o=e?e.getBoundingClientRect().top:0;restoreScrollStack(r,0==o?0:o-n)}(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof o.NodeSelection){let n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&scrollRectIntoView(this,n.getBoundingClientRect(),e)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let n=this.directPlugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let n=this.state.plugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let e=r.from+(this.state.doc.content.size-n.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==r.node&&(i=e)}this.dragging=new Dragging(e.slice,e.move,i<0?void 0:o.NodeSelection.create(this.state.doc,i))}someProp(e,n){let r,o=this._props&&this._props[e];if(null!=o&&(r=n?n(o):o))return r;for(let o=0;o<this.directPlugins.length;o++){let i=this.directPlugins[o].props[e];if(null!=i&&(r=n?n(i):i))return r}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let s=i[o].props[e];if(null!=s&&(r=n?n(s):s))return r}}hasFocus(){if(v){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function focusPreventScroll(e){if(e.setActive)return e.setActive();if(F)return e.focus(F);let n=scrollStack(e);e.focus(null==F?{get preventScroll(){return F={preventScroll:!0},!0}}:void 0),F||(F=!1,restoreScrollStack(n,0))}(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return e||document}updateRoot(){this._root=null}posAtCoords(e){return posAtCoords(this,e)}coordsAtPos(e,n=1){return coordsAtPos(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(null==o)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return endOfTextblock(this,n||this.state,e)}pasteHTML(e,n){return doPaste(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return doPaste(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return serializeForClipboard(this,e)}destroy(){this.docView&&(!function destroyInput(e){e.domObserver.stop();for(let n in e.input.eventHandlers)e.dom.removeEventListener(n,e.input.eventHandlers[n]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,a=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function dispatchEvent(e,n){runCustomHandler(e,n)||!Y[n.type]||!e.editable&&n.type in X||Y[n.type](e,n)}(this,e)}domSelectionRange(){let e=this.domSelection();return e?_&&11===this.root.nodeType&&function deepActiveElement(e){let n=e.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}(this.dom.ownerDocument)==this.dom&&function safariShadowSelectionRange(e,n){if(n.getComposedRanges){let r=n.getComposedRanges(e.root)[0];if(r)return rangeToSelectionRange(e,r)}let r;function read(e){e.preventDefault(),e.stopImmediatePropagation(),r=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",read,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",read,!0),r?rangeToSelectionRange(e,r):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function computeDocDeco(e){let n=Object.create(null);return n.class="ProseMirror",n.contenteditable=String(e.editable),e.someProp("attributes",r=>{if("function"==typeof r&&(r=r(e.state)),r)for(let e in r)"class"==e?n.class+=" "+r[e]:"style"==e?n.style=(n.style?n.style+";":"")+r[e]:n[e]||"contenteditable"==e||"nodeName"==e||(n[e]=String(r[e]))}),n.translate||(n.translate="no"),[Decoration.node(0,e.state.doc.content.size,n)]}function updateCursorWrapper(e){if(e.markCursor){let n=document.createElement("img");n.className="ProseMirror-separator",n.setAttribute("mark-placeholder","true"),n.setAttribute("alt",""),e.cursorWrapper={dom:n,deco:Decoration.widget(e.state.selection.from,n,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function getEditable(e){return!e.someProp("editable",n=>!1===n(e.state))}function buildNodeViews(e){let n=Object.create(null);function add(e){for(let r in e)Object.prototype.hasOwnProperty.call(n,r)||(n[r]=e[r])}return e.someProp("nodeViews",add),e.someProp("markViews",add),n}function checkStateComponent(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}EditorView.prototype.dispatch=function(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}},"./packages/node_modules/react/cjs/react-jsx-runtime.development.js":function(e,n,r){"use strict";(function(){var e=r("react"),o=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),p=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),w=Symbol.iterator;var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function error(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];!function printWarning(e,n,r){var o=E.ReactDebugCurrentFrame,i=o.getStackAddendum();""!==i&&(n+="%s",r=r.concat([i]));var s=r.map(function(e){return String(e)});s.unshift("Warning: "+n),Function.prototype.apply.call(console[e],console,s)}("error",e,r)}var C;function getContextName(e){return e.displayName||"Context"}function getComponentNameFromType(e){if(null==e)return null;if("number"==typeof e.tag&&error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case s:return"Fragment";case i:return"Portal";case c:return"Profiler";case a:return"StrictMode";case g:return"Suspense";case b:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return getContextName(e)+".Consumer";case u:return getContextName(e._context)+".Provider";case f:return function getWrappedName(e,n,r){var o=e.displayName;if(o)return o;var i=n.displayName||n.name||"";return""!==i?r+"("+i+")":r}(e,e.render,"ForwardRef");case k:var n=e.displayName||null;return null!==n?n:getComponentNameFromType(e.type)||"Memo";case v:var r=e,o=r._payload,x=r._init;try{return getComponentNameFromType(x(o))}catch(e){return null}}return null}C=Symbol.for("react.module.reference");var T,_,P,R,A,N,I,z=Object.assign,F=0;function disabledLog(){}disabledLog.__reactDisabledLog=!0;var B,L=E.ReactCurrentDispatcher;function describeBuiltInComponentFrame(e,n,r){if(void 0===B)try{throw Error()}catch(e){var o=e.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return"\n"+B+e}var j,V=!1,U="function"==typeof WeakMap?WeakMap:Map;function describeNativeComponentFrame(e,n){if(!e||V)return"";var r,o=j.get(e);if(void 0!==o)return o;V=!0;var i,s=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=L.current,L.current=null,function disableLogs(){if(0===F){T=console.log,_=console.info,P=console.warn,R=console.error,A=console.group,N=console.groupCollapsed,I=console.groupEnd;var e={configurable:!0,enumerable:!0,value:disabledLog,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}F++}();try{if(n){var Fake=function(){throw Error()};if(Object.defineProperty(Fake.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(Fake,[])}catch(e){r=e}Reflect.construct(e,[],Fake)}else{try{Fake.call()}catch(e){r=e}e.call(Fake.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(n){if(n&&r&&"string"==typeof n.stack){for(var a=n.stack.split("\n"),c=r.stack.split("\n"),u=a.length-1,p=c.length-1;u>=1&&p>=0&&a[u]!==c[p];)p--;for(;u>=1&&p>=0;u--,p--)if(a[u]!==c[p]){if(1!==u||1!==p)do{if(u--,--p<0||a[u]!==c[p]){var f="\n"+a[u].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),"function"==typeof e&&j.set(e,f),f}}while(u>=1&&p>=0);break}}}finally{V=!1,L.current=i,function reenableLogs(){if(0===--F){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:z({},e,{value:T}),info:z({},e,{value:_}),warn:z({},e,{value:P}),error:z({},e,{value:R}),group:z({},e,{value:A}),groupCollapsed:z({},e,{value:N}),groupEnd:z({},e,{value:I})})}F<0&&error("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=s}var g=e?e.displayName||e.name:"",b=g?describeBuiltInComponentFrame(g):"";return"function"==typeof e&&j.set(e,b),b}function describeUnknownElementTypeFrameInDEV(e,n,r){if(null==e)return"";if("function"==typeof e)return describeNativeComponentFrame(e,function shouldConstruct(e){var n=e.prototype;return!(!n||!n.isReactComponent)}(e));if("string"==typeof e)return describeBuiltInComponentFrame(e);switch(e){case g:return describeBuiltInComponentFrame("Suspense");case b:return describeBuiltInComponentFrame("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case f:return function describeFunctionComponentFrame(e,n,r){return describeNativeComponentFrame(e,!1)}(e.render);case k:return describeUnknownElementTypeFrameInDEV(e.type,n,r);case v:var o=e,i=o._payload,s=o._init;try{return describeUnknownElementTypeFrameInDEV(s(i),n,r)}catch(e){}}return""}j=new U;var H=Object.prototype.hasOwnProperty,q={},K=E.ReactDebugCurrentFrame;function setCurrentlyValidatingElement(e){if(e){var n=e._owner,r=describeUnknownElementTypeFrameInDEV(e.type,e._source,n?n.type:null);K.setExtraStackFrame(r)}else K.setExtraStackFrame(null)}var W=Array.isArray;function isArray(e){return W(e)}function testStringCoercion(e){return""+e}function checkKeyStringCoercion(e){if(function willCoercionThrow(e){try{return testStringCoercion(e),!1}catch(e){return!0}}(e))return error("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function typeName(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),testStringCoercion(e)}var G,J,Y,X=E.ReactCurrentOwner,Z={key:!0,ref:!0,__self:!0,__source:!0};Y={};function jsxDEV(e,n,r,i,s){var a,c={},u=null,p=null;for(a in void 0!==r&&(checkKeyStringCoercion(r),u=""+r),function hasValidKey(e){if(H.call(e,"key")){var n=Object.getOwnPropertyDescriptor(e,"key").get;if(n&&n.isReactWarning)return!1}return void 0!==e.key}(n)&&(checkKeyStringCoercion(n.key),u=""+n.key),function hasValidRef(e){if(H.call(e,"ref")){var n=Object.getOwnPropertyDescriptor(e,"ref").get;if(n&&n.isReactWarning)return!1}return void 0!==e.ref}(n)&&(p=n.ref,function warnIfStringRefCannotBeAutoConverted(e,n){if("string"==typeof e.ref&&X.current&&n&&X.current.stateNode!==n){var r=getComponentNameFromType(X.current.type);Y[r]||(error('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',getComponentNameFromType(X.current.type),e.ref),Y[r]=!0)}}(n,s)),n)H.call(n,a)&&!Z.hasOwnProperty(a)&&(c[a]=n[a]);if(e&&e.defaultProps){var f=e.defaultProps;for(a in f)void 0===c[a]&&(c[a]=f[a])}if(u||p){var g="function"==typeof e?e.displayName||e.name||"Unknown":e;u&&function defineKeyPropWarningGetter(e,n){var warnAboutAccessingKey=function(){G||(G=!0,error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",n))};warnAboutAccessingKey.isReactWarning=!0,Object.defineProperty(e,"key",{get:warnAboutAccessingKey,configurable:!0})}(c,g),p&&function defineRefPropWarningGetter(e,n){var warnAboutAccessingRef=function(){J||(J=!0,error("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",n))};warnAboutAccessingRef.isReactWarning=!0,Object.defineProperty(e,"ref",{get:warnAboutAccessingRef,configurable:!0})}(c,g)}return function(e,n,r,i,s,a,c){var u={$$typeof:o,type:e,key:n,ref:r,props:c,_owner:a,_store:{}};return Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u}(e,u,p,s,i,X.current,c)}var Q,ee=E.ReactCurrentOwner,te=E.ReactDebugCurrentFrame;function setCurrentlyValidatingElement$1(e){if(e){var n=e._owner,r=describeUnknownElementTypeFrameInDEV(e.type,e._source,n?n.type:null);te.setExtraStackFrame(r)}else te.setExtraStackFrame(null)}function isValidElement(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}function getDeclarationErrorAddendum(){if(ee.current){var e=getComponentNameFromType(ee.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}Q=!1;var ne={};function validateExplicitKey(e,n){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var r=function getCurrentComponentErrorInfo(e){var n=getDeclarationErrorAddendum();if(!n){var r="string"==typeof e?e:e.displayName||e.name;r&&(n="\n\nCheck the top-level render call using <"+r+">.")}return n}(n);if(!ne[r]){ne[r]=!0;var o="";e&&e._owner&&e._owner!==ee.current&&(o=" It was passed a child from "+getComponentNameFromType(e._owner.type)+"."),setCurrentlyValidatingElement$1(e),error('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,o),setCurrentlyValidatingElement$1(null)}}}function validateChildKeys(e,n){if("object"==typeof e)if(isArray(e))for(var r=0;r<e.length;r++){var o=e[r];isValidElement(o)&&validateExplicitKey(o,n)}else if(isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var i=function getIteratorFn(e){if(null===e||"object"!=typeof e)return null;var n=w&&e[w]||e["@@iterator"];return"function"==typeof n?n:null}(e);if("function"==typeof i&&i!==e.entries)for(var s,a=i.call(e);!(s=a.next()).done;)isValidElement(s.value)&&validateExplicitKey(s.value,n)}}function validatePropTypes(e){var n,r=e.type;if(null!=r&&"string"!=typeof r){if("function"==typeof r)n=r.propTypes;else{if("object"!=typeof r||r.$$typeof!==f&&r.$$typeof!==k)return;n=r.propTypes}if(n){var o=getComponentNameFromType(r);!function checkPropTypes(e,n,r,o,i){var s=Function.call.bind(H);for(var a in e)if(s(e,a)){var c=void 0;try{if("function"!=typeof e[a]){var u=Error((o||"React class")+": "+r+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw u.name="Invariant Violation",u}c=e[a](n,a,o,r,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){c=e}!c||c instanceof Error||(setCurrentlyValidatingElement(i),error("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",o||"React class",r,a,typeof c),setCurrentlyValidatingElement(null)),c instanceof Error&&!(c.message in q)&&(q[c.message]=!0,setCurrentlyValidatingElement(i),error("Failed %s type: %s",r,c.message),setCurrentlyValidatingElement(null))}}(n,e.props,"prop",o,e)}else if(void 0!==r.PropTypes&&!Q){Q=!0,error("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",getComponentNameFromType(r)||"Unknown")}"function"!=typeof r.getDefaultProps||r.getDefaultProps.isReactClassApproved||error("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var re={};function jsxWithValidation(e,n,r,i,w,E){var T=function isValidElementType(e){return"string"==typeof e||"function"==typeof e||e===s||e===c||e===a||e===g||e===b||e===x||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===k||e.$$typeof===u||e.$$typeof===p||e.$$typeof===f||e.$$typeof===C||void 0!==e.getModuleId)}(e);if(!T){var _="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(_+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var P,R=function getSourceInfoErrorAddendum(e){return void 0!==e?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":""}(w);_+=R||getDeclarationErrorAddendum(),null===e?P="null":isArray(e)?P="array":void 0!==e&&e.$$typeof===o?(P="<"+(getComponentNameFromType(e.type)||"Unknown")+" />",_=" Did you accidentally export a JSX literal instead of a component?"):P=typeof e,error("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",P,_)}var A=jsxDEV(e,n,r,w,E);if(null==A)return A;if(T){var N=n.children;if(void 0!==N)if(i)if(isArray(N)){for(var I=0;I<N.length;I++)validateChildKeys(N[I],e);Object.freeze&&Object.freeze(N)}else error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else validateChildKeys(N,e)}if(H.call(n,"key")){var z=getComponentNameFromType(e),F=Object.keys(n).filter(function(e){return"key"!==e}),B=F.length>0?"{key: someKey, "+F.join(": ..., ")+": ...}":"{key: someKey}";if(!re[z+B])error('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',B,z,F.length>0?"{"+F.join(": ..., ")+": ...}":"{}",z),re[z+B]=!0}return e===s?function validateFragmentProps(e){for(var n=Object.keys(e.props),r=0;r<n.length;r++){var o=n[r];if("children"!==o&&"key"!==o){setCurrentlyValidatingElement$1(e),error("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",o),setCurrentlyValidatingElement$1(null);break}}null!==e.ref&&(setCurrentlyValidatingElement$1(e),error("Invalid attribute `ref` supplied to `React.Fragment`."),setCurrentlyValidatingElement$1(null))}(A):validatePropTypes(A),A}var oe=function jsxWithValidationDynamic(e,n,r){return jsxWithValidation(e,n,r,!1)},ie=function jsxWithValidationStatic(e,n,r){return jsxWithValidation(e,n,r,!0)};n.Fragment=s,n.jsx=oe,n.jsxs=ie})()},"./packages/node_modules/react/jsx-runtime.js":function(e,n,r){"use strict";e.exports=r("./packages/node_modules/react/cjs/react-jsx-runtime.development.js")},"./packages/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js":function(e,n,r){"use strict";!function(){function checkIfSnapshotChanged(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!o(e,r)}catch(e){return!0}}"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var e=r("react"),o="function"==typeof Object.is?Object.is:function is(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n},i=e.useState,s=e.useEffect,a=e.useLayoutEffect,c=e.useDebugValue,u=!1,p=!1,f="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function useSyncExternalStore$1(e,n){return n()}:function useSyncExternalStore$2(n,r){u||void 0===e.startTransition||(u=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var f=r();if(!p){var g=r();o(f,g)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),p=!0)}var b=(g=i({inst:{value:f,getSnapshot:r}}))[0].inst,k=g[1];return a(function(){b.value=f,b.getSnapshot=r,checkIfSnapshotChanged(b)&&k({inst:b})},[n,f,r]),s(function(){return checkIfSnapshotChanged(b)&&k({inst:b}),n(function(){checkIfSnapshotChanged(b)&&k({inst:b})})},[n]),c(f),f};n.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:f,"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()},"./packages/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js":function(e,n,r){"use strict";!function(){"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var e=r("react"),o=r("./packages/node_modules/use-sync-external-store/shim/index.js"),i="function"==typeof Object.is?Object.is:function is(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n},s=o.useSyncExternalStore,a=e.useRef,c=e.useEffect,u=e.useMemo,p=e.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,n,r,o,f){var g=a(null);if(null===g.current){var b={hasValue:!1,value:null};g.current=b}else b=g.current;g=u(function(){function memoizedSelector(n){if(!a){if(a=!0,e=n,n=o(n),void 0!==f&&b.hasValue){var r=b.value;if(f(r,n))return s=r}return s=n}if(r=s,i(e,n))return r;var c=o(n);return void 0!==f&&f(r,c)?(e=n,r):(e=n,s=c)}var e,s,a=!1,c=void 0===r?null:r;return[function(){return memoizedSelector(n())},null===c?void 0:function(){return memoizedSelector(c())}]},[n,r,o,f]);var k=s(e,g[0],g[1]);return c(function(){b.hasValue=!0,b.value=k},[k]),p(k),k},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}()},"./packages/node_modules/use-sync-external-store/shim/index.js":function(e,n,r){"use strict";e.exports=r("./packages/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js")},"./packages/node_modules/use-sync-external-store/shim/with-selector.js":function(e,n,r){"use strict";e.exports=r("./packages/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js")},"./packages/node_modules/w3c-keyname/index.js":function(e,n,r){"use strict";r.r(n),r.d(n,{base:function(){return o},keyName:function(){return keyName},shift:function(){return i}});for(var o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),a="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),c=0;c<10;c++)o[48+c]=o[96+c]=String(c);for(c=1;c<=24;c++)o[c+111]="F"+c;for(c=65;c<=90;c++)o[c]=String.fromCharCode(c+32),i[c]=String.fromCharCode(c);for(var u in o)i.hasOwnProperty(u)||(i[u]=o[u]);function keyName(e){var n=!(s&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||a&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?i:o)[e.keyCode]||e.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}},"./packages/packages/libs/editor-controls/src/api.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{apiClient:function(){return s}});var o=r("@elementor/http-client");const i="elementor/v1/settings",s={getElementorSetting:e=>(0,o.httpService)().get(`${i}/${e}`).then(e=>formatSettingResponse(e.data)),updateElementorSetting:(e,n)=>(0,o.httpService)().put(`${i}/${e}`,{value:n})},formatSettingResponse=e=>e.data.value},"./packages/packages/libs/editor-controls/src/bound-prop-context/errors.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{HookOutsideProviderError:function(){return a},MissingPropTypeError:function(){return i},UnsupportedParentError:function(){return s}});var o=r("@elementor/utils");const i=(0,o.createError)({code:"missing_prop_provider_prop_type",message:"Prop type is missing"}),s=(0,o.createError)({code:"unsupported_prop_provider_prop_type",message:"Parent prop type is not supported"}),a=(0,o.createError)({code:"hook_outside_provider",message:"Hook used outside of provider"})},"./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{PropKeyProvider:function(){return i.PropKeyProvider},PropProvider:function(){return o.PropProvider},useBoundProp:function(){return s.useBoundProp},usePropContext:function(){return o.usePropContext},usePropKeyContext:function(){return i.usePropKeyContext}});var o=r("./packages/packages/libs/editor-controls/src/bound-prop-context/prop-context.tsx"),i=r("./packages/packages/libs/editor-controls/src/bound-prop-context/prop-key-context.tsx"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/use-bound-prop.ts")},"./packages/packages/libs/editor-controls/src/bound-prop-context/prop-context.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{PropProvider:function(){return PropProvider},usePropContext:function(){return usePropContext}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/bound-prop-context/errors.ts");const s=(0,o.createContext)(null),PropProvider=({children:e,value:n,setValue:r,propType:i,placeholder:a,isDisabled:c})=>o.createElement(s.Provider,{value:{value:n,propType:i,setValue:r,placeholder:a,isDisabled:c}},e),usePropContext=()=>{const e=(0,o.useContext)(s);if(!e)throw new i.HookOutsideProviderError({context:{hook:"usePropContext",provider:"PropProvider"}});return e}},"./packages/packages/libs/editor-controls/src/bound-prop-context/prop-key-context.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{PropKeyProvider:function(){return PropKeyProvider},usePropKeyContext:function(){return usePropKeyContext}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/bound-prop-context/errors.ts"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/prop-context.tsx");const a=(0,o.createContext)(null),PropKeyProvider=({children:e,bind:n})=>{const{propType:r}=(0,s.usePropContext)();if(!r)throw new i.MissingPropTypeError({context:{bind:n}});if("array"===r.kind)return o.createElement(ArrayPropKeyProvider,{bind:n},e);if("object"===r.kind)return o.createElement(ObjectPropKeyProvider,{bind:n},e);throw new i.UnsupportedParentError({context:{propType:r}})},ObjectPropKeyProvider=({children:e,bind:n})=>{const r=(0,s.usePropContext)(),{path:i}=(0,o.useContext)(a)??{},c=r.value?.[n],u=r.placeholder?.[n],p=r.propType.shape[n];return o.createElement(a.Provider,{value:{...r,value:c,setValue:(e,o,i)=>{const s={...r.value,[n]:e};return r?.setValue(s,o,{...i,bind:n})},placeholder:u,bind:n,propType:p,path:[...i??[],n]}},e)},ArrayPropKeyProvider=({children:e,bind:n})=>{const r=(0,s.usePropContext)(),{path:i}=(0,o.useContext)(a)??{},c=r.value?.[Number(n)],u=r.propType.item_prop_type;return o.createElement(a.Provider,{value:{...r,value:c,setValue:(e,o)=>{const i=[...r.value??[]];return i[Number(n)]=e,r?.setValue(i,o,{bind:n})},bind:n,propType:u,path:[...i??[],n]}},e)},usePropKeyContext=()=>{const e=(0,o.useContext)(a);if(!e)throw new i.HookOutsideProviderError({context:{hook:"usePropKeyContext",provider:"PropKeyProvider"}});return e}},"./packages/packages/libs/editor-controls/src/bound-prop-context/use-bound-prop.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{useBoundProp:function(){return useBoundProp}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/bound-prop-context/errors.ts"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/prop-key-context.tsx");function useBoundProp(e){const n=(0,s.usePropKeyContext)(),{isValid:r,validate:o,restoreValue:i}=useValidation(n.propType),a=n.isDisabled?.(n.propType),resetValue=()=>{n.setValue(n.propType.initial_value??null)};if(!e)return{...n,disabled:a,resetValue:resetValue};const c=resolveUnionPropType(n.propType,e.key),u=e.extract(n.value??c.default??null),p=e.extract(n.placeholder??null);return{...n,propType:c,setValue:function setValue(r,i,s){if(o(r,s?.validation))return null===r?n?.setValue(null,i,s):n?.setValue(e?.create(r,i),{},s)},value:r?u:null,restoreValue:i,placeholder:p,disabled:a,resetValue:resetValue}}const useValidation=e=>{const[n,r]=(0,o.useState)(!0);return{isValid:n,setIsValid:r,validate:(n,o)=>{let i=!0;return e.settings.required&&null===n&&(i=!1),o&&!o(n)&&(i=!1),r(i),i},restoreValue:()=>r(!0)}},resolveUnionPropType=(e,n)=>{let r=e;if("union"===e.kind&&(r=e.prop_types[n]),!r)throw new i.MissingPropTypeError({context:{key:n}});return r}},"./packages/packages/libs/editor-controls/src/components/autocomplete.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{Autocomplete:function(){return a},findMatchingOption:function(){return findMatchingOption},isCategorizedOptionPool:function(){return isCategorizedOptionPool}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const a=(0,o.forwardRef)((e,n)=>{const{options:r,onOptionChange:i,onTextChange:a,allowCustomValues:c=!1,placeholder:u="",minInputLength:p=2,value:f="",startAdornment:g,disablePortal:b=!0,inputProps:k,...v}=e,x=function factoryFilter(e,n,r){if(null===e)return n;const o=String(e||"")?.toLowerCase();if(o.length<r)return new Array(0);return n.filter(e=>String(e.id).toLowerCase().includes(o)||e.label.toLowerCase().includes(o))}(f,r,p).map(({id:e})=>e),w=!!f,E=c||!!f?.toString()?.length?void 0:()=>!0,C="number"==typeof f&&!!findMatchingOption(r,f),T=(f?.toString()?.length??0)>=p&&(!c||x.length>0);return o.createElement(s.Autocomplete,_extends({},v,{ref:n,forcePopupIcon:!1,disablePortal:b,disableClearable:!0,freeSolo:c,openOnFocus:!1,open:T,value:f?.toString()||"",size:"tiny",onChange:(e,n)=>i(Number(n)),readOnly:C,options:x,getOptionKey:e=>findMatchingOption(r,e)?.id||e,getOptionLabel:e=>findMatchingOption(r,e)?.label||e.toString(),groupBy:isCategorizedOptionPool(r)?e=>findMatchingOption(r,e)?.groupLabel||e:void 0,isOptionEqualToValue:E,filterOptions:()=>x,renderOption:(e,n)=>o.createElement(s.Box,_extends({component:"li"},e,{key:e.id}),findMatchingOption(r,n)?.label??n),renderInput:e=>o.createElement(TextInput,{params:e,handleChange:e=>a?.(e),allowClear:w,placeholder:u,hasSelectedValue:C,startAdornment:g,extraInputProps:k})}))}),TextInput=({params:e,allowClear:n,placeholder:r,handleChange:i,hasSelectedValue:a,startAdornment:c,extraInputProps:u})=>o.createElement(s.TextField,_extends({},e,{placeholder:r,onChange:e=>{i(e.target.value)},inputProps:{...e.inputProps??{},...u??{}},sx:{"& .MuiInputBase-input":{cursor:a?"default":void 0}},InputProps:{...e.InputProps,startAdornment:c?o.createElement(s.InputAdornment,{position:"start"},c):e.InputProps.startAdornment,endAdornment:o.createElement(ClearButton,{params:e,allowClear:n,handleChange:i})}})),ClearButton=({allowClear:e,handleChange:n,params:r})=>o.createElement(s.InputAdornment,{position:"end"},e&&o.createElement(s.IconButton,{size:r.size,onClick:()=>n(null),sx:{cursor:"pointer"}},o.createElement(i.XIcon,{fontSize:r.size})));function findMatchingOption(e,n=null){const r=(n||"").toString();return e.find(({id:e})=>r===e.toString())}function isCategorizedOptionPool(e){if(e.length<=1)return!1;return new Set(e.map(e=>e.groupLabel)).size>1}},"./packages/packages/libs/editor-controls/src/components/conditional-control-infotip.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ConditionalControlInfotip:function(){return c}});var o=r("react"),i=r("@elementor/editor-ui"),s=r("@elementor/ui");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const a="secondary",c=o.forwardRef(({children:e,title:n,description:r,alertProps:c,infotipProps:u,...p},f)=>{const g="rtl"===(0,s.useTheme)().direction,b=p.isEnabled&&(n||r);return o.createElement(s.Box,{ref:f},b?o.createElement(s.DirectionProvider,{rtl:g},o.createElement(s.Infotip,_extends({placement:"right",color:a,slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,10]}}]}}},u,{content:o.createElement(i.InfoAlert,_extends({color:a,sx:{width:300,px:1.5,py:2}},c),o.createElement(s.Box,{sx:{flexDirection:"column",display:"flex",gap:.5}},o.createElement(s.AlertTitle,null,n),o.createElement(s.Box,null,r)))}),e)):e)})},"./packages/packages/libs/editor-controls/src/components/conditional-tooltip.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ConditionalTooltip:function(){return ConditionalTooltip}});var o=r("react"),i=r("@elementor/ui");const ConditionalTooltip=({showTooltip:e,children:n,label:r})=>e&&r?o.createElement(i.Tooltip,{title:r,disableFocusListener:!0,placement:"top"},n):n},"./packages/packages/libs/editor-controls/src/components/control-form-label.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlFormLabel:function(){return ControlFormLabel}});var o=r("react"),i=r("@elementor/ui");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const ControlFormLabel=e=>o.createElement(i.FormLabel,_extends({size:"tiny"},e))},"./packages/packages/libs/editor-controls/src/components/control-label.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlLabel:function(){return ControlLabel}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/control-adornments/control-adornments.tsx"),a=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx");const ControlLabel=({children:e,...n})=>o.createElement(i.Stack,{direction:"row",alignItems:"center",justifyItems:"start",gap:.25},o.createElement(a.ControlFormLabel,n,e),o.createElement(s.ControlAdornments,null))},"./packages/packages/libs/editor-controls/src/components/control-repeater/actions/disable-item-action.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{DisableItemAction:function(){return DisableItemAction}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx");const u="tiny",DisableItemAction=()=>{const{items:e,updateItem:n,index:r=-1}=(0,c.useRepeaterContext)();if(-1===r)return null;const p=e[r].item.disabled??!1,f=p?(0,a.__)("Show","elementor"):(0,a.__)("Hide","elementor");return o.createElement(s.Tooltip,{title:f,placement:"top"},o.createElement(s.IconButton,{size:u,onClick:()=>{const o=structuredClone(e[r].item);o.disabled=!o.disabled,o.disabled||delete o.disabled,n(o,r)},"aria-label":f},p?o.createElement(i.EyeOffIcon,{fontSize:u}):o.createElement(i.EyeIcon,{fontSize:u})))}},"./packages/packages/libs/editor-controls/src/components/control-repeater/actions/duplicate-item-action.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{DuplicateItemAction:function(){return DuplicateItemAction}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx");const u="tiny",DuplicateItemAction=()=>{const{items:e,addItem:n,index:r=-1,isItemDisabled:p}=(0,c.useRepeaterContext)();if(-1===r)return null;const f=(0,a.__)("Duplicate","elementor"),g=e[r]?.item;return o.createElement(s.Tooltip,{title:f,placement:"top"},o.createElement(s.IconButton,{size:u,onClick:e=>{const o=structuredClone(g);n(e,{item:o,index:r+1})},"aria-label":f,disabled:p(r)},o.createElement(i.CopyIcon,{fontSize:u})))}},"./packages/packages/libs/editor-controls/src/components/control-repeater/actions/remove-item-action.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{RemoveItemAction:function(){return RemoveItemAction}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx");const u="tiny",RemoveItemAction=()=>{const{removeItem:e,index:n=-1}=(0,c.useRepeaterContext)();if(-1===n)return null;const r=(0,a.__)("Remove","elementor");return o.createElement(s.Tooltip,{title:r,placement:"top"},o.createElement(s.IconButton,{size:u,onClick:()=>e(n),"aria-label":r},o.createElement(i.XIcon,{fontSize:u})))}},"./packages/packages/libs/editor-controls/src/components/control-repeater/actions/tooltip-add-item-action.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TooltipAddItemAction:function(){return TooltipAddItemAction}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx");const u="tiny",TooltipAddItemAction=({disabled:e=!1,enableTooltip:n=!1,tooltipContent:r=null,newItemIndex:p,ariaLabel:f})=>{const{addItem:g}=(0,c.useRepeaterContext)();return o.createElement(ConditionalToolTip,{content:r,enable:n},o.createElement(s.Box,{component:"span",sx:{cursor:e?"not-allowed":"pointer"}},o.createElement(s.IconButton,{size:u,disabled:e,onClick:e=>g(e,{index:p}),"aria-label":(0,a.sprintf)((0,a.__)("Add %s item","elementor"),f?.toLowerCase())},o.createElement(i.PlusIcon,{fontSize:u}))))},ConditionalToolTip=({children:e,enable:n,content:r})=>n&&r?o.createElement(s.Infotip,{placement:"right",color:"secondary",content:r},e):e},"./packages/packages/libs/editor-controls/src/components/control-repeater/context/item-context.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ItemContext:function(){return i}});var o=r("react");const i=(0,o.createContext)({index:-1,value:{}})},"./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{EMPTY_OPEN_ITEM:function(){return f},RepeaterContextProvider:function(){return RepeaterContextProvider},useRepeaterContext:function(){return useRepeaterContext}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/use-bound-prop.ts"),a=r("./packages/packages/libs/editor-controls/src/hooks/use-sync-external-state.tsx"),c=r("./packages/packages/libs/editor-controls/src/services/event-bus.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/item-context.tsx");const p=(0,o.createContext)(null),f=-1,useRepeaterContext=()=>{const e=o.useContext(p),n=o.useContext(u.ItemContext);if(!e)throw new Error("useRepeaterContext must be used within a RepeaterContextProvider");return{...e,...n}},RepeaterContextProvider=({children:e,initial:n,propTypeUtil:r,isItemDisabled:u=()=>!1})=>{const{value:g,setValue:b}=(0,s.useBoundProp)(r),[k,v]=(0,a.useSyncExternalState)({external:g,fallback:()=>[],setExternal:b,persistWhen:()=>!0}),[x,w]=(0,o.useState)(()=>k?.map(()=>generateUniqueKey())??[]);o.useEffect(()=>{const e=k?.length??0;w(n=>{const r=n.length;return r===e?n:r>e?n.slice(0,e):[...n,...Array.from({length:e-r},generateUniqueKey)]})},[k?.length]);const E=(0,o.useMemo)(()=>x.map((e,n)=>({key:e,item:k[n]})).filter(({item:e})=>void 0!==e),[x,k]),[C,T]=(0,o.useState)(f),[_,P]=(0,o.useState)(null),R=C!==f,A=(0,i.usePopupState)({variant:"popover"});return o.createElement(p.Provider,{value:{isOpen:R,openItemIndex:C,setOpenItemIndex:T,items:E??[],setItems:e=>{v(e.map(({item:e})=>e))},popoverState:A,initial:n,updateItem:(e,n)=>{const r=[...k.slice(0,n),e,...k.slice(n+1)];v(r)},addItem:(e,o)=>{const i=o?.item??{...n},s=o?.index??k.length,a=generateUniqueKey(),u=[...k];u.splice(s,0,i),v(u),w([...x.slice(0,s),a,...x.slice(s)]),T(s),A.open(_??e),c.eventBus.emit(`${r.key}-item-added`,{itemValue:n.value})},removeItem:e=>{const n=k[e];v(k.filter((n,r)=>r!==e)),w(x.filter((n,r)=>r!==e)),c.eventBus.emit(`${r.key}-item-removed`,{itemValue:n?.value})},rowRef:_,setRowRef:P,isItemDisabled:e=>u(E[e].item)}},e)},generateUniqueKey=()=>Date.now()+Math.floor(1e6*Math.random())},"./packages/packages/libs/editor-controls/src/components/control-repeater/control-repeater.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlRepeater:function(){return ControlRepeater}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/components/section-content.tsx"),s=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx");const ControlRepeater=({children:e,initial:n,propTypeUtil:r,isItemDisabled:a})=>o.createElement(i.SectionContent,null,o.createElement(s.RepeaterContextProvider,{initial:n,propTypeUtil:r,isItemDisabled:a},e))},"./packages/packages/libs/editor-controls/src/components/control-repeater/index.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlRepeater:function(){return a.ControlRepeater},Item:function(){return s.Item},ItemsContainer:function(){return i.ItemsContainer},TooltipAddItemAction:function(){return o.TooltipAddItemAction}});var o=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/tooltip-add-item-action.tsx"),i=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/items-container.tsx"),s=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/item.tsx"),a=r("./packages/packages/libs/editor-controls/src/components/control-repeater/control-repeater.tsx")},"./packages/packages/libs/editor-controls/src/components/control-repeater/items/edit-item-popover.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{EditItemPopover:function(){return EditItemPopover}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),a=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-popover.tsx"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const EditItemPopover=({children:e})=>{const{popoverState:n,openItemIndex:r,isOpen:u,rowRef:p,setOpenItemIndex:f,setRowRef:g}=(0,c.useRepeaterContext)();if(!u||!p)return null;return o.createElement(a.RepeaterPopover,_extends({width:p.offsetWidth},(0,i.bindPopover)(n),{onClose:()=>{g(null),n.setAnchorEl(null),f(c.EMPTY_OPEN_ITEM)}}),o.createElement(s.PropKeyProvider,{bind:String(r)},o.createElement(i.Box,null,e)))}},"./packages/packages/libs/editor-controls/src/components/control-repeater/items/item.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{Item:function(){return Item}});var o=r("react"),i=r("@elementor/ui"),s=r("@wordpress/i18n"),a=r("./packages/packages/libs/editor-controls/src/hooks/use-repeatable-control-context.ts"),c=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-tag.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/control-repeater/locations.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const Item=({Label:e,Icon:n,actions:r})=>{const{popoverState:f,setRowRef:g,openItemIndex:b,setOpenItemIndex:k,index:v=-1,value:x,isItemDisabled:w}=(0,u.useRepeaterContext)(),E=o.useContext(a.RepeatableControlContext),C=!!E?.props?.readOnly,T=(0,i.bindTrigger)(f);return o.createElement(c.RepeaterTag,_extends({ref:e=>{e&&b===v&&e!==f.anchorEl&&(g(e),f.setAnchorEl(e))},label:o.createElement(p.RepeaterItemLabelSlot,{value:x},o.createElement(e,{value:x})),"aria-label":(0,s.__)("Open item","elementor")},T,{onClick:e=>{C||w(v)||(T.onClick(e),k(v))},startIcon:o.createElement(p.RepeaterItemIconSlot,{value:x},o.createElement(n,{value:x})),sx:{minHeight:e=>e.spacing(3.5),...w(v)&&{'[role="button"]':{cursor:"not-allowed"}}},actions:o.createElement(o.Fragment,null,o.createElement(p.RepeaterItemActionsSlot,{index:v??-1}),r)}))}},"./packages/packages/libs/editor-controls/src/components/control-repeater/items/items-container.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ItemsContainer:function(){return ItemsContainer}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/components/repeater/sortable.tsx"),s=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/item-context.tsx"),a=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx");const ItemsContainer=({isSortable:e=!0,children:n})=>{const{items:r,setItems:c}=(0,a.useRepeaterContext)(),u=r.map(({key:e})=>e);if(!n)return null;return o.createElement(o.Fragment,null,o.createElement(i.SortableProvider,{value:u,onChange:e=>{c(e.map(e=>{const n=r.findIndex(n=>n.key===e);return r[n]}))}},u.map((a,c)=>{const u=r[c].item;return o.createElement(i.SortableItem,{id:a,key:`sortable-${a}`,disabled:!e},o.createElement(s.ItemContext.Provider,{value:{index:c,value:u}},n))})))}},"./packages/packages/libs/editor-controls/src/components/control-repeater/locations.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{RepeaterItemActionsSlot:function(){return u},RepeaterItemIconSlot:function(){return i},RepeaterItemLabelSlot:function(){return a},injectIntoRepeaterItemActions:function(){return p},injectIntoRepeaterItemIcon:function(){return s},injectIntoRepeaterItemLabel:function(){return c}});var o=r("@elementor/locations");const{Slot:i,inject:s}=(0,o.createReplaceableLocation)(),{Slot:a,inject:c}=(0,o.createReplaceableLocation)(),{Slot:u,inject:p}=(0,o.createLocation)()},"./packages/packages/libs/editor-controls/src/components/control-toggle-button-group.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlToggleButtonGroup:function(){return ControlToggleButtonGroup},StyledToggleButton:function(){return p},ToggleButtonGroupUi:function(){return f}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),c=r("./packages/packages/libs/editor-controls/src/components/conditional-tooltip.tsx");const u=(0,s.styled)(s.ToggleButtonGroup)`
	${({justify:e})=>`justify-content: ${e};`}
	button:not( :last-of-type ) {
		border-start-end-radius: 0;
		border-end-end-radius: 0;
	}
	button:not( :first-of-type ) {
		border-start-start-radius: 0;
		border-end-start-radius: 0;
	}
	button:last-of-type {
		border-start-end-radius: 8px;
		border-end-end-radius: 8px;
	}
`,p=(0,s.styled)(s.ToggleButton,{shouldForwardProp:e=>"isPlaceholder"!==e})`
	${({theme:e,isPlaceholder:n})=>n&&`\n\t\tcolor: ${e.palette.text.tertiary};\n\t\tbackground-color: ${"dark"===e.palette.mode?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.02)"};\n\n\t\t&:hover {\n\t\t\tbackground-color: ${"dark"===e.palette.mode?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.04)"};\n\t\t}\n\t`}
`,f=o.forwardRef(({justify:e="end",size:n="tiny",value:r,onChange:i,items:a,maxItems:f,exclusive:g=!1,fullWidth:b=!1,disabled:k,placeholder:v},x)=>{const w=g&&void 0!==f&&a.length>f,E=w?a.slice(f-1):[],C=w?a.slice(0,f-1):a,T="rtl"===(0,s.useTheme)().direction,_=(0,o.useMemo)(()=>{const e=E?.length;return`repeat(${e?C.length+1:C.length}, minmax(0, 25%)) ${e?"auto":""}`},[E?.length,C.length]),P=g&&(null==r||""===r),R=!g&&Array.isArray(r)?r.map(e=>"string"==typeof e?e:"").join(" ").trim().split(/\s+/).filter(Boolean):[],A=!g&&0===R.length,N=(I=v,Array.isArray(I)?I.flatMap(e=>"string"==typeof e?e.trim().split(/\s+/).filter(Boolean):[]):"string"==typeof I?I.trim().split(/\s+/).filter(Boolean):[]);var I;return o.createElement(u,{ref:x,justify:e,value:r,onChange:(e,n)=>{i(n)},exclusive:g,disabled:k,sx:{direction:T?"rtl /* @noflip */":"ltr /* @noflip */",display:"grid",gridTemplateColumns:_,width:"100%"}},C.map(({label:e,value:r,renderContent:i,showTooltip:s})=>{const a=N.length>0&&N.includes(r)&&(P||A);return o.createElement(c.ConditionalTooltip,{key:r,label:e,showTooltip:s||!1},o.createElement(p,{value:r,"aria-label":e,size:n,fullWidth:b,isPlaceholder:a},o.createElement(i,{size:n})))}),E.length&&g&&o.createElement(SplitButtonGroup,{size:n,value:r||null,onChange:i,items:E,fullWidth:b}))}),ControlToggleButtonGroup=e=>o.createElement(a.default,null,o.createElement(f,e)),SplitButtonGroup=({size:e="tiny",onChange:n,items:r,fullWidth:a,value:c})=>{const u=usePreviewButton(r,c),[p,f]=(0,o.useState)(!1),g=(0,o.useRef)(null),onMenuItemClick=e=>{f(!1),onToggleItem(e)},onToggleItem=e=>{n(e===c?null:e)};return o.createElement(o.Fragment,null,o.createElement(s.ToggleButton,{value:u.value,"aria-label":u.label,size:e,fullWidth:a,onClick:e=>{e.preventDefault(),onMenuItemClick(u.value)}},u.renderContent({size:e})),o.createElement(s.ToggleButton,{size:e,"aria-expanded":p?"true":void 0,"aria-haspopup":"menu","aria-pressed":void 0,onClick:e=>{f(e=>!e),e.preventDefault()},ref:g,value:"__chevron-icon-button__"},o.createElement(i.ChevronDownIcon,{fontSize:e})),o.createElement(s.Menu,{open:p,onClose:()=>f(!1),anchorEl:g.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{mt:.5}},r.map(({label:e,value:n})=>o.createElement(s.MenuItem,{key:n,selected:n===c,onClick:()=>onMenuItemClick(n)},o.createElement(s.ListItemText,null,o.createElement(s.Typography,{sx:{fontSize:"14px"}},e))))))},usePreviewButton=(e,n)=>{const[r,i]=(0,o.useState)(e.find(e=>e.value===n)??e[0]);return(0,o.useEffect)(()=>{const r=e.find(e=>e.value===n);r&&i(r)},[e,n]),r}},"./packages/packages/libs/editor-controls/src/components/enable-unfiltered-modal.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{EnableUnfilteredModal:function(){return EnableUnfilteredModal}});var o=r("react"),i=r("@elementor/ui"),s=r("@wordpress/i18n"),a=r("./packages/packages/libs/editor-controls/src/hooks/use-unfiltered-files-upload.ts");const c=(0,s.__)("Enable Unfiltered Uploads","elementor"),u=(0,s.__)("Before you enable unfiltered files upload, note that such files include a security risk. Elementor does run a process to remove possible malicious code, but there is still risk involved when using such files.","elementor"),p=(0,s.__)("Failed to enable unfiltered files upload.","elementor"),f=(0,s.__)("You can try again, if the problem persists, please contact support.","elementor"),EnableUnfilteredModal=e=>{const{mutateAsync:n,isPending:r}=(0,a.useUpdateUnfilteredFilesUpload)(),[i,s]=(0,o.useState)(!1),c={...e,isPending:r,handleEnable:async()=>{try{const r=await n({allowUnfilteredFilesUpload:!0});!1===r?.data?.success?s(!0):e.onClose(!0)}catch{s(!0)}},isError:i,onClose:n=>{e.onClose(n),setTimeout(()=>s(!1),300)}};return o.createElement(AdminDialog,c)},AdminDialog=({open:e,onClose:n,handleEnable:r,isPending:a,isError:g})=>o.createElement(i.Dialog,{open:e,maxWidth:"sm",onClose:()=>n(!1)},o.createElement(i.DialogHeader,{logo:!1},o.createElement(i.DialogTitle,null,c)),o.createElement(i.Divider,null),o.createElement(i.DialogContent,null,o.createElement(i.DialogContentText,null,g?o.createElement(o.Fragment,null,p," ",o.createElement("br",null)," ",f):u)),o.createElement(i.DialogActions,null,o.createElement(i.Button,{size:"medium",color:"secondary",onClick:()=>n(!1)},(0,s.__)("Cancel","elementor")),o.createElement(i.Button,{size:"medium",onClick:()=>r(),variant:"contained",color:"primary",disabled:a},a?o.createElement(i.CircularProgress,{size:24}):(0,s.__)("Enable","elementor"))))},"./packages/packages/libs/editor-controls/src/components/floating-bar.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{FloatingActionsBar:function(){return FloatingActionsBar},useFloatingActionsBar:function(){return useFloatingActionsBar}});var o=r("react"),i=r("@elementor/ui");const s=(0,i.styled)("span")`
	display: contents;

	.MuiFloatingActionBar-popper:has( .MuiFloatingActionBar-actions:empty ) {
		display: none;
	}

	.MuiFloatingActionBar-popper {
		z-index: 1000;
	}
`,a=(0,o.createContext)(null);function FloatingActionsBar({actions:e,children:n}){const[r,c]=(0,o.useState)(!1);return o.createElement(a.Provider,{value:{open:r,setOpen:c}},o.createElement(s,null,o.createElement(i.UnstableFloatingActionBar,{actions:e,open:r||void 0},n)))}function useFloatingActionsBar(){const e=(0,o.useContext)(a);if(!e)throw new Error("useFloatingActions must be used within a FloatingActionsBar");return e}},"./packages/packages/libs/editor-controls/src/components/icon-buttons/clear-icon-button.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ClearIconButton:function(){return ClearIconButton}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui");const a=(0,s.styled)(s.IconButton)(({theme:e})=>({width:e.spacing(2.5),height:e.spacing(2.5)})),ClearIconButton=({tooltipText:e,onClick:n,disabled:r,size:c="tiny"})=>o.createElement(s.Tooltip,{title:e,placement:"top",disableInteractive:!0},o.createElement(a,{"aria-label":e,size:c,onClick:n,disabled:r},o.createElement(i.BrushBigIcon,{fontSize:c})))},"./packages/packages/libs/editor-controls/src/components/inline-editor-toolbar.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{InlineEditorToolbar:function(){return InlineEditorToolbar}});var o=r("react"),i=r("@elementor/editor-elements"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("./packages/node_modules/@tiptap/react/dist/index.js"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/components/url-popover.tsx");const InlineEditorToolbar=({editor:e,elementId:n,sx:r={}})=>{const[i,s]=(0,o.useState)(""),[u,f]=(0,o.useState)(!1),v=(0,o.useRef)(null),x=(0,a.usePopupState)({variant:"popover"}),w=!!n&&checkIfElementHasLink(n),E=(0,c.useEditorState)({editor:e,selector:e=>k.filter(n=>e.editor.isActive(n))}),C=(0,o.useMemo)(()=>{const e=Object.values(b);return w?e.filter(e=>"link"!==e.action):e},[w]);return o.useEffect(()=>{e?.commands?.focus()},[e]),o.createElement(a.Box,{ref:v,sx:{display:"inline-flex",gap:.5,padding:.5,borderRadius:"8px",backgroundColor:"background.paper",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)",alignItems:"center",visibility:x.isOpen?"hidden":"visible",pointerEvents:x.isOpen?"none":"all",...r}},o.createElement(a.Tooltip,{title:g.label,placement:"top",sx:{borderRadius:"8px"}},o.createElement(a.IconButton,{"aria-label":g.label,onClick:()=>g.method(e),size:"tiny"},g.icon)),o.createElement(a.ToggleButtonGroup,{value:E,size:"tiny",sx:{display:"flex",gap:.5,border:"none",[`& .${a.toggleButtonGroupClasses.firstButton}, & .${a.toggleButtonGroupClasses.middleButton}, & .${a.toggleButtonGroupClasses.lastButton}`]:{borderRadius:"8px",border:"none",marginLeft:0,"&.Mui-selected":{marginLeft:0},"& + &.Mui-selected":{marginLeft:0}}}},C.map(n=>o.createElement(a.Tooltip,{title:n.label,key:n.action,placement:"top"},o.createElement(a.ToggleButton,{value:n.action,"aria-label":n.label,size:"tiny",onClick:()=>{"link"===n.action?(()=>{const n=e.getAttributes("link");s(n.href||""),f("_blank"===n.target),x.open(v.current)})():n.method?.(e),e?.commands?.focus()}},n.icon)))),o.createElement(p.UrlPopover,{popupState:x,anchorRef:v,restoreValue:()=>{i?e.chain().focus().setLink({href:i,target:u?"_blank":"_self"}).run():e.chain().focus().unsetLink().run(),n&&window.dispatchEvent(new CustomEvent("elementor:inline-link-changed",{detail:{elementId:n}})),x.close()},value:i,onChange:e=>{s(e.target.value)},openInNewTab:u,onToggleNewTab:()=>{f(!u)}}))},checkIfElementHasLink=e=>!!(0,i.getElementSetting)(e,"link")?.value?.destination,f={clear:{label:(0,u.__)("Clear","elementor"),icon:o.createElement(s.MinusIcon,{fontSize:"tiny"}),action:"clear",method:e=>{e.chain().focus().clearNodes().unsetAllMarks().run()}},bold:{label:(0,u.__)("Bold","elementor"),icon:o.createElement(s.BoldIcon,{fontSize:"tiny"}),action:"bold",method:e=>{e.chain().focus().toggleBold().run()}},italic:{label:(0,u.__)("Italic","elementor"),icon:o.createElement(s.ItalicIcon,{fontSize:"tiny"}),action:"italic",method:e=>{e.chain().focus().toggleItalic().run()}},underline:{label:(0,u.__)("Underline","elementor"),icon:o.createElement(s.UnderlineIcon,{fontSize:"tiny"}),action:"underline",method:e=>{e.chain().focus().toggleUnderline().run()}},strike:{label:(0,u.__)("Strikethrough","elementor"),icon:o.createElement(s.StrikethroughIcon,{fontSize:"tiny"}),action:"strike",method:e=>{e.chain().focus().toggleStrike().run()}},superscript:{label:(0,u.__)("Superscript","elementor"),icon:o.createElement(s.SuperscriptIcon,{fontSize:"tiny"}),action:"superscript",method:e=>{e.chain().focus().toggleSuperscript().run()}},subscript:{label:(0,u.__)("Subscript","elementor"),icon:o.createElement(s.SubscriptIcon,{fontSize:"tiny"}),action:"subscript",method:e=>{e.chain().focus().toggleSubscript().run()}},link:{label:(0,u.__)("Link","elementor"),icon:o.createElement(s.LinkIcon,{fontSize:"tiny"}),action:"link",method:null}},{clear:g,...b}=f,k=Object.keys(b)},"./packages/packages/libs/editor-controls/src/components/inline-editor.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{InlineEditor:function(){return R}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/node_modules/@tiptap/extension-bold/dist/index.js"),a=r("./packages/node_modules/@tiptap/extension-document/dist/index.js"),c=r("./packages/node_modules/@tiptap/extension-hard-break/dist/index.js"),u=r("./packages/node_modules/@tiptap/extension-heading/dist/index.js"),p=r("./packages/node_modules/@tiptap/extension-italic/dist/index.js"),f=r("./packages/node_modules/@tiptap/extension-link/dist/index.js"),g=r("./packages/node_modules/@tiptap/extension-paragraph/dist/index.js"),b=r("./packages/node_modules/@tiptap/extension-strike/dist/index.js"),k=r("./packages/node_modules/@tiptap/extension-subscript/dist/index.js"),v=r("./packages/node_modules/@tiptap/extension-superscript/dist/index.js"),x=r("./packages/node_modules/@tiptap/extension-text/dist/index.js"),w=r("./packages/node_modules/@tiptap/extension-underline/dist/index.js"),E=r("./packages/node_modules/@tiptap/react/dist/index.js"),C=r("./packages/packages/libs/editor-controls/src/utils/inline-editing.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const T="i",_="b",P="u",R=o.forwardRef((e,n)=>{const{value:r,setValue:i,editorProps:R={},elementClasses:A="",autofocus:N=!1,sx:I={},onBlur:z,expectedTag:F=null,onEditorCreate:B,wrapperClassName:L,onSelectionEnd:j}=e,V=(0,o.useRef)(null),U=F?"block+":"inline*",editedElementAttributes=e=>({...e,class:A}),H=(0,E.useEditor)({extensions:[a.default.extend({content:U}),g.default.extend({renderHTML({HTMLAttributes:e}){return[F??"p",editedElementAttributes(e),0]}}),u.default.extend({renderHTML({node:e,HTMLAttributes:n}){if(F)return[F,editedElementAttributes(n),0];return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,editedElementAttributes(n),0]}}).configure({levels:[1,2,3,4,5,6]}),f.default.configure({openOnClick:!1}),x.default,s.default,p.default,b.default,v.default,k.default,w.default,c.default.extend({addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.setHardBreak()}}})],content:r,onUpdate:({editor:e})=>{const n=e.getHTML();i((0,C.isEmpty)(n)?null:n)},autofocus:N,editorProps:{...R,handleDOMEvents:{keydown:(e,n)=>{"Escape"===n.key&&z?.(),!n.metaKey&&!n.ctrlKey||n.altKey||[T,_,P].includes(n.key)&&n.stopPropagation()}},attributes:{...R.attributes??{},role:"textbox"}},onCreate:B?({editor:e})=>B(e):void 0,onSelectionUpdate:j?({editor:e})=>j(e.view):void 0});return useOnUpdate(()=>{if(!H)return;H.getHTML()!==r&&H.commands.setContent(r,{emitUpdate:!1})},[H,r]),o.createElement(o.Fragment,null,o.createElement(Wrapper,{containerRef:V,editor:H,sx:I,onBlur:z,className:L},o.createElement(E.EditorContent,{ref:n,editor:H})))}),Wrapper=({children:e,containerRef:n,editor:r,sx:s,onBlur:a,className:c})=>{const u=o.createElement(i.Box,_extends({ref:n},s,{className:c}),e);return a?o.createElement(i.ClickAwayListener,{onClickAway:e=>{n.current?.contains(e.target)||r.view.dom.contains(e.target)||a?.()}},u):o.createElement(o.Fragment,null,u)},useOnUpdate=(e,n)=>{const r=(0,o.useRef)(!1);(0,o.useEffect)(()=>{r.current?e():r.current=!0},n)}},"./packages/packages/libs/editor-controls/src/components/item-selector.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ItemSelector:function(){return ItemSelector}});var o=r("react"),i=r("@elementor/editor-ui"),s=r("@elementor/ui"),a=r("@elementor/utils"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/hooks/use-filtered-items-list.ts");const ItemSelector=({itemsList:e,selectedItem:n,onItemChange:r,onClose:a,sectionWidth:p,title:f,itemStyle:g=()=>({}),onDebounce:b=()=>{},icon:k,disabledItems:v,id:x="item-selector",footer:w,categoryItemContentTemplate:E})=>{const[C,T]=(0,o.useState)(""),_=(0,u.useFilteredItemsList)(e,C,v),P=k,handleClose=()=>{T(""),a()};return o.createElement(i.PopoverBody,{width:p,id:x},o.createElement(i.PopoverHeader,{title:f,onClose:handleClose,icon:o.createElement(P,{fontSize:"tiny"})}),o.createElement(i.SearchField,{value:C,onSearch:e=>{T(e)},placeholder:(0,c.__)("Search","elementor"),id:x+"-search"}),o.createElement(s.Divider,null),o.createElement(s.Box,{sx:{flex:1,overflow:"auto",minHeight:0}},_.length>0?o.createElement(ItemList,{itemListItems:_,setSelectedItem:r,handleClose:handleClose,selectedItem:n,itemStyle:g,onDebounce:b,categoryItemContentTemplate:E}):o.createElement(s.Stack,{alignItems:"center",justifyContent:"center",height:"100%",p:2.5,gap:1.5,overflow:"hidden"},o.createElement(P,{fontSize:"large"}),o.createElement(s.Box,{sx:{maxWidth:160,overflow:"hidden"}},o.createElement(s.Typography,{align:"center",variant:"subtitle2",color:"text.secondary"},(0,c.__)("Sorry, nothing matched","elementor")),o.createElement(s.Typography,{variant:"subtitle2",color:"text.secondary",sx:{display:"flex",width:"100%",justifyContent:"center"}},o.createElement("span",null,""),o.createElement(s.Box,{component:"span",sx:{maxWidth:"80%",overflow:"hidden",textOverflow:"ellipsis"}},C),o.createElement("span",null,"."))),o.createElement(s.Typography,{align:"center",variant:"caption",color:"text.secondary",sx:{display:"flex",flexDirection:"column"}},(0,c.__)("Try something else.","elementor"),o.createElement(s.Link,{color:"secondary",variant:"caption",component:"button",onClick:()=>T("")},(0,c.__)("Clear & try again","elementor"))))),w)},ItemList=({itemListItems:e,setSelectedItem:n,handleClose:r,selectedItem:s,itemStyle:a=()=>({}),onDebounce:c=()=>{},categoryItemContentTemplate:u})=>{const p=e.find(e=>e.value===s),f=useDebounce(e=>{e.forEach(e=>{e&&"item"===e.type&&c(e.value)})},100),g=(0,o.useCallback)(e=>a(e),[a]);return o.createElement(i.PopoverMenuList,{items:e,selectedValue:p?.value,onChange:f,onSelect:n,onClose:r,itemStyle:g,"data-testid":"item-list",categoryItemContentTemplate:u})},useDebounce=(e,n)=>{const[r]=(0,o.useState)(()=>(0,a.debounce)(e,n));return(0,o.useEffect)(()=>()=>r.cancel(),[r]),r}},"./packages/packages/libs/editor-controls/src/components/number-input.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{NumberInput:function(){return a}});var o=r("react"),i=r("@elementor/ui");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const s=["e","E","+"],a=(0,o.forwardRef)((e,n)=>{const[r,a]=(0,o.useState)(0);return o.createElement(i.TextField,_extends({},e,{ref:n,key:r,onKeyDown:n=>{!function blockRestrictedKeys(e,n){const r=[...s];n>=0&&r.push("-");r.includes(e.key)&&e.preventDefault()}(n,e.inputProps?.min),e.onKeyDown?.(n)},onBlur:n=>{e.onBlur?.(n);const{valid:r}=n.target.validity;r||a(e=>e+1)}}))})},"./packages/packages/libs/editor-controls/src/components/popover-content.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{PopoverContent:function(){return PopoverContent}});var o=r("react"),i=r("@elementor/ui");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const PopoverContent=({gap:e=1.5,children:n,...r})=>o.createElement(i.Stack,_extends({},r,{gap:e}),n)},"./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{PopoverGridContainer:function(){return s}});var o=r("react"),i=r("@elementor/ui");const s=(0,o.forwardRef)(({gap:e=1.5,alignItems:n="center",flexWrap:r="nowrap",children:s},a)=>o.createElement(i.Grid,{container:!0,gap:e,alignItems:n,flexWrap:r,ref:a},s))},"./packages/packages/libs/editor-controls/src/components/promotions/attributes-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{AttributesControl:function(){return f}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/promotions/promotion-trigger.tsx");const p=(0,a.__)("Attributes","elementor"),f=(0,c.createControl)(()=>{const e=(0,o.useRef)(null);return o.createElement(s.Stack,{direction:"row",spacing:2,sx:{justifyContent:"flex-end",alignItems:"center"}},o.createElement(u.PromotionTrigger,{ref:e,promotionKey:"attributes"}),o.createElement(s.Tooltip,{title:p,placement:"top"},o.createElement(i.PlusIcon,{"aria-label":p,fontSize:"tiny",color:"disabled",onClick:()=>e.current?.toggle(),sx:{cursor:"pointer"}})))})},"./packages/packages/libs/editor-controls/src/components/promotions/display-conditions-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{DisplayConditionsControl:function(){return f}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/promotions/promotion-trigger.tsx");const p=(0,a.__)("Display Conditions","elementor"),f=(0,c.createControl)(()=>{const e=(0,o.useRef)(null);return o.createElement(s.Stack,{direction:"row",spacing:2,sx:{justifyContent:"flex-end",alignItems:"center"}},o.createElement(u.PromotionTrigger,{ref:e,promotionKey:"displayConditions"}),o.createElement(s.Tooltip,{title:p,placement:"top"},o.createElement(s.IconButton,{size:"tiny","aria-label":p,"data-behavior":"display-conditions",onClick:()=>e.current?.toggle(),sx:{border:"1px solid",borderColor:"divider",borderRadius:1}},o.createElement(i.SitemapIcon,{fontSize:"tiny",color:"disabled"}))))})},"./packages/packages/libs/editor-controls/src/components/promotions/promotion-trigger.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{PromotionTrigger:function(){return a}});var o=r("react"),i=r("@elementor/editor-ui"),s=r("@elementor/ui");const a=(0,o.forwardRef)(({promotionKey:e,children:n},r)=>{const[a,c]=(0,o.useState)(!1),u=function getV4Promotion(e){return window.elementor?.config?.v4Promotions?.[e]}(e),toggle=()=>c(e=>!e);return(0,o.useImperativeHandle)(r,()=>({toggle:toggle}),[]),o.createElement(o.Fragment,null,u&&o.createElement(i.PromotionInfotip,{title:u.title,content:u.content,assetUrl:u.image,ctaUrl:u.ctaUrl,open:a,onClose:e=>{e.stopPropagation(),c(!1)}},o.createElement(s.Box,{onClick:e=>{e.stopPropagation(),toggle()},sx:{cursor:"pointer",display:"inline-flex"}},n??o.createElement(i.PromotionChip,null))))})},"./packages/packages/libs/editor-controls/src/components/repeater/repeater-header.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{RepeaterHeader:function(){return a}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/control-adornments/control-adornments.tsx");const a=(0,o.forwardRef)(({label:e,children:n,adornment:r=s.ControlAdornments},a)=>o.createElement(i.Stack,{direction:"row",alignItems:"center",gap:1,sx:{marginInlineEnd:-.75,py:.25},ref:a},o.createElement(i.Box,{display:"flex",alignItems:"center",gap:1,sx:{flexGrow:1}},o.createElement(i.Typography,{component:"label",variant:"caption",color:"text.secondary",sx:{lineHeight:1}},e),o.createElement(r,null)),n))},"./packages/packages/libs/editor-controls/src/components/repeater/repeater-popover.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{RepeaterPopover:function(){return RepeaterPopover}});var o=r("react"),i=r("@elementor/ui");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const RepeaterPopover=({children:e,width:n,...r})=>o.createElement(i.Popover,_extends({disablePortal:!0,disableEnforceFocus:!0,anchorOrigin:{vertical:"bottom",horizontal:"left"},slotProps:{paper:{sx:{marginBlockStart:.5,width:n,overflow:"visible"}}}},r),e)},"./packages/packages/libs/editor-controls/src/components/repeater/repeater-tag.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{RepeaterTag:function(){return s}});var o=r("react"),i=r("@elementor/ui");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const s=(0,o.forwardRef)((e,n)=>o.createElement(i.UnstableTag,_extends({ref:n,fullWidth:!0,showActionsOnHover:!0,variant:"outlined",sx:{minHeight:e=>e.spacing(3.5)}},e)))},"./packages/packages/libs/editor-controls/src/components/repeater/repeater.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{Repeater:function(){return Repeater}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/control-adornments/control-adornments.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/control-repeater/locations.ts"),p=r("./packages/packages/libs/editor-controls/src/components/section-content.tsx"),f=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-header.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-popover.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-tag.tsx"),k=r("./packages/packages/libs/editor-controls/src/components/repeater/sortable.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const v="tiny",Repeater=({label:e,itemSettings:n,disabled:r=!1,openOnAdd:g=!1,values:b=[],setValues:x,showDuplicate:w=!0,showToggle:E=!0,showRemove:C=!0,disableAddItemButton:T=!1,addButtonInfotipContent:_,openItem:P=-1,isSortable:R=!0})=>{const[A,N]=(0,o.useState)(P),I=b.map((e,r)=>R&&"getId"in n?n.getId({item:e,index:r}):String(r)),z=r||T,F=z&&_,B=o.createElement(s.IconButton,{size:v,sx:{ml:"auto"},disabled:z,onClick:()=>{const e=structuredClone(n.initialValues),r=b.length;x([...b,e],{},{action:{type:"add",payload:[{index:r,item:e}]}}),g&&N(r)},"aria-label":(0,a.__)("Add item","elementor")},o.createElement(i.PlusIcon,{fontSize:v}));return o.createElement(p.SectionContent,{gap:2},o.createElement(f.RepeaterHeader,{label:e,adornment:c.ControlAdornments},F?o.createElement(s.Infotip,{placement:"right",content:_,color:"secondary",slotProps:{popper:{sx:{width:300}}}},o.createElement(s.Box,{sx:{...z?{cursor:"not-allowed"}:{}}},B)):B),0<I.length&&o.createElement(k.SortableProvider,{value:I,onChange:(e,n)=>{x(e.map(e=>b[I.indexOf(e)]),{},{action:{type:"reorder",payload:{...n}}})}},I.map(e=>{const i=I.indexOf(e),s=b[i];return s?o.createElement(k.SortableItem,{id:e,key:`sortable-${e}`,disabled:!R},o.createElement(RepeaterItem,{disabled:r,propDisabled:s?.disabled,label:o.createElement(u.RepeaterItemLabelSlot,{value:s},o.createElement(n.Label,{value:s,index:i})),startIcon:o.createElement(u.RepeaterItemIconSlot,{value:s},o.createElement(n.Icon,{value:s})),removeItem:()=>(e=>{const n=b[e];x(b.filter((n,r)=>r!==e),{},{action:{type:"remove",payload:[{index:e,item:n}]}})})(i),duplicateItem:()=>(e=>{const n=structuredClone(b[e]),r=1+e;x([...b.slice(0,r),n,...b.slice(r)],{},{action:{type:"duplicate",payload:[{index:e,item:n}]}})})(i),toggleDisableItem:()=>(e=>{x(b.map((n,r)=>{if(r===e){const{disabled:e,...r}=n;return{...r,...e?{}:{disabled:!0}}}return n}),{},{action:{type:"toggle-disable"}})})(i),openOnMount:g&&A===i,onOpen:()=>N(-1),showDuplicate:w,showToggle:E,showRemove:C,actions:n.actions,value:s},e=>o.createElement(n.Content,_extends({},e,{value:s,bind:String(i),index:i})))):null})))},RepeaterItem=({label:e,propDisabled:n,startIcon:r,children:c,removeItem:u,duplicateItem:p,toggleDisableItem:f,openOnMount:k,onOpen:x,showDuplicate:w,showToggle:E,showRemove:C,disabled:T,actions:_,value:P})=>{const{popoverState:R,popoverProps:A,ref:N,setRef:I}=usePopover(k,x),z=(0,a.__)("Duplicate","elementor"),F=n?(0,a.__)("Show","elementor"):(0,a.__)("Hide","elementor"),B=(0,a.__)("Remove","elementor");return o.createElement(o.Fragment,null,o.createElement(b.RepeaterTag,_extends({disabled:T,label:e,ref:I,"aria-label":(0,a.__)("Open item","elementor")},(0,s.bindTrigger)(R),{startIcon:r,actions:o.createElement(o.Fragment,null,w&&o.createElement(s.Tooltip,{title:z,placement:"top"},o.createElement(s.IconButton,{size:v,onClick:p,"aria-label":z},o.createElement(i.CopyIcon,{fontSize:v}))),E&&o.createElement(s.Tooltip,{title:F,placement:"top"},o.createElement(s.IconButton,{size:v,onClick:f,"aria-label":F},n?o.createElement(i.EyeOffIcon,{fontSize:v}):o.createElement(i.EyeIcon,{fontSize:v}))),_?.(P),C&&o.createElement(s.Tooltip,{title:B,placement:"top"},o.createElement(s.IconButton,{size:v,onClick:u,"aria-label":B},o.createElement(i.XIcon,{fontSize:v}))))})),o.createElement(g.RepeaterPopover,_extends({width:N?.getBoundingClientRect().width},A,{anchorEl:N}),o.createElement(s.Box,null,c({anchorEl:N}))))},usePopover=(e,n)=>{const[r,i]=(0,o.useState)(null),a=(0,s.usePopupState)({variant:"popover"}),c=(0,s.bindPopover)(a);return(0,o.useEffect)(()=>{e&&r&&(a.open(r),n?.())},[r]),{popoverState:a,ref:r,setRef:i,popoverProps:c}}},"./packages/packages/libs/editor-controls/src/components/repeater/sortable.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SortableItem:function(){return SortableItem},SortableProvider:function(){return SortableProvider}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const SortableProvider=e=>o.createElement(s.List,{sx:{p:0,my:-.5,mx:0}},o.createElement(s.UnstableSortableProvider,_extends({restrictAxis:!0,disableDragOverlay:!1,variant:"static"},e))),SortableItem=({id:e,children:n,disabled:r})=>o.createElement(s.UnstableSortableItem,{id:e,disabled:r,render:({itemProps:e,triggerProps:i,itemStyle:s,triggerStyle:a,showDropIndication:p,dropIndicationStyle:f})=>o.createElement(c,_extends({},e,{style:s,tabIndex:-1}),!r&&o.createElement(SortableTrigger,_extends({},i,{style:a})),n,p&&o.createElement(u,{style:f}))}),c=(0,s.styled)(s.ListItem)`
	position: relative;
	margin-inline: 0px;
	padding-inline: 0px;
	padding-block: ${({theme:e})=>e.spacing(.5)};

	& .class-item-sortable-trigger {
		color: ${({theme:e})=>e.palette.action.active};
		height: 100%;
		display: flex;
		align-items: center;
		visibility: hidden;
		position: absolute;
		top: 50%;
		padding-inline-end: ${({theme:e})=>e.spacing(.5)};
		transform: translate( -75%, -50% );
	}

	&[aria-describedby=''] > .MuiTag-root {
		background-color: ${({theme:e})=>e.palette.background.paper};
		box-shadow: ${({theme:e})=>e.shadows[3]};
	}

	&:hover,
	&:focus-within {
		& .class-item-sortable-trigger {
			visibility: visible;
		}
	}
`,SortableTrigger=e=>o.createElement("div",_extends({},e,{role:"button",className:"class-item-sortable-trigger",tabIndex:0,"aria-label":(0,a.__)("Drag item","elementor")}),o.createElement(i.GripVerticalIcon,{fontSize:"tiny"})),u=(0,s.styled)(s.Divider)`
	height: 0px;
	border: none;
	overflow: visible;

	&:after {
		--height: 2px;
		content: '';
		display: block;
		width: 100%;
		height: var( --height );
		margin-block: calc( -1 * var( --height ) / 2 );
		border-radius: ${({theme:e})=>e.spacing(.5)};
		background-color: ${({theme:e})=>e.palette.text.primary};
	}
`},"./packages/packages/libs/editor-controls/src/components/restricted-link-infotip.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{RestrictedLinkInfotip:function(){return RestrictedLinkInfotip}});var o=r("react"),i=r("@elementor/editor-elements"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n");const u={label:(0,c.__)("Learn More","elementor"),href:"https://go.elementor.com/element-link-inside-link-infotip"},p={descendant:(0,c.__)("To add a link or action to this element, first remove the link or action from the elements inside of it.","elementor"),ancestor:(0,c.__)("To add a link or action to this container, first remove the link or action from its parent container.","elementor")},RestrictedLinkInfotip=({linkInLinkRestriction:e,isVisible:n,children:r})=>{const{shouldRestrict:f,reason:g,elementId:b}=e,k=o.createElement(a.Alert,{color:"secondary",icon:o.createElement(s.InfoCircleFilledIcon,null),action:o.createElement(a.AlertAction,{sx:{width:"fit-content"},variant:"contained",color:"secondary",onClick:()=>{b&&(0,i.selectElement)(b)}},(0,c.__)("Take me there","elementor"))},o.createElement(a.AlertTitle,null,(0,c.__)("Nested links","elementor")),o.createElement(a.Box,{component:"span"},p[g??"descendant"]," ",o.createElement(a.Link,{href:u.href,target:"_blank",color:"info.main"},u.label)));return f&&n?o.createElement(a.Infotip,{placement:"right",content:k,color:"secondary",slotProps:{popper:{sx:{width:300}}}},o.createElement(a.Box,null,r)):o.createElement(o.Fragment,null,r)}},"./packages/packages/libs/editor-controls/src/components/section-content.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SectionContent:function(){return SectionContent}});var o=r("react"),i=r("@elementor/ui");const SectionContent=({gap:e=.5,sx:n,children:r})=>o.createElement(i.Stack,{gap:e,sx:{...n}},r)},"./packages/packages/libs/editor-controls/src/components/size-control/size-input.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SizeInput:function(){return SizeInput}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),c=r("./packages/packages/libs/editor-controls/src/utils/size-control.ts"),u=r("./packages/packages/libs/editor-controls/src/components/size-control/text-field-inner-selection.tsx");const p=["auto"],SizeInput=({units:e,handleUnitChange:n,handleSizeChange:r,placeholder:f,startIcon:g,onBlur:b,onFocus:k,onClick:v,size:x,unit:w,popupState:E,disabled:C,min:T,id:_,ariaLabel:P})=>{const R=(0,o.useRef)(""),A=(0,c.isUnitExtendedOption)(w)?"text":"number",N=!(0,c.isUnitExtendedOption)(w)&&Number.isNaN(x)?"":x??"",I={"aria-controls":E.isOpen?E.popupId:void 0,"aria-haspopup":!0},z=e.includes("custom")?{custom:I}:void 0,F={custom:o.createElement(i.MathFunctionIcon,{fontSize:"tiny"})},B={...I,readOnly:(0,c.isUnitExtendedOption)(w),autoComplete:"off",onClick:v,onFocus:k,startAdornment:g?o.createElement(s.InputAdornment,{position:"start",disabled:C},g):void 0,endAdornment:o.createElement(u.SelectionEndAdornment,{disabled:C,options:e,onClick:n,value:w,alternativeOptionLabels:F,menuItemsAttributes:z})};return o.createElement(a.default,null,o.createElement(s.Box,null,o.createElement(u.TextFieldInnerSelection,{disabled:C,placeholder:f,type:A,value:N,onChange:r,onKeyUp:r=>{const{key:o}=r;if(!/^[a-zA-Z%]$/.test(o))return;r.preventDefault();const i=o.toLowerCase(),s=(R.current+i).slice(-3);R.current=s;const a=e.find(e=>!p.includes(e)&&e.includes(s))||e.find(e=>!p.includes(e)&&e.startsWith(i))||e.find(e=>!p.includes(e)&&e.includes(i));a&&n(a)},onBlur:b,InputProps:B,inputProps:{min:T,step:"any","aria-label":P},isPopoverOpen:E.isOpen,id:_})))}},"./packages/packages/libs/editor-controls/src/components/size-control/text-field-inner-selection.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SelectionEndAdornment:function(){return SelectionEndAdornment},TextFieldInnerSelection:function(){return f}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-ui"),a=r("@elementor/ui"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/utils/size-control.ts"),p=r("./packages/packages/libs/editor-controls/src/components/number-input.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const f=(0,o.forwardRef)(({placeholder:e,type:n,value:r,onChange:s,onBlur:a,onKeyDown:u,onKeyUp:f,InputProps:g,inputProps:b,disabled:k,isPopoverOpen:v,id:x},w)=>{const{placeholder:E}=(0,c.useBoundProp)(i.sizePropTypeUtil);return o.createElement(p.NumberInput,{ref:w,sx:{input:{cursor:g.readOnly?"default !important":void 0}},size:"tiny",fullWidth:!0,type:n,value:r,onInput:s,onKeyDown:u,onKeyUp:f,disabled:k,onBlur:a,focused:!!v||void 0,placeholder:e??(String(E?.size??"")||void 0),InputProps:g,inputProps:b,id:x})}),SelectionEndAdornment=({options:e,alternativeOptionLabels:n={},onClick:r,value:p,menuItemsAttributes:f={},disabled:b})=>{const k=(0,a.usePopupState)({variant:"popover",popupId:(0,o.useId)()}),{placeholder:v,showPrimaryColor:x}=function useUnitPlaceholder(e){const{value:n,placeholder:r}=(0,c.useBoundProp)(i.sizePropTypeUtil),o=n?.size,s=n?.unit,a="custom"===e&&Boolean(o),p="auto"===e,f=p||a||Boolean(o);if(!r)return{placeholder:null,showPrimaryColor:f};const g=!s&&e===u.DEFAULT_UNIT;return{placeholder:g?r.unit:void 0,showPrimaryColor:f}}(p),w={display:"flex",flexDirection:"column",justifyContent:"center"};return o.createElement(a.InputAdornment,{position:"end"},o.createElement(g,_extends({isPrimaryColor:x,size:"small",disabled:b},(0,a.bindTrigger)(k)),v??n[p]??p),o.createElement(a.Menu,_extends({MenuListProps:{dense:!0}},(0,a.bindMenu)(k)),e.map((i,a)=>o.createElement(s.MenuListItem,_extends({key:i,onClick:()=>(n=>{r(e[n]),k.close()})(a)},f?.[i],{primaryTypographyProps:{variant:"caption",sx:{...w,lineHeight:"1"}},menuItemTextProps:{sx:w}}),n[i]??i.toUpperCase()))))};const g=(0,a.styled)(a.Button,{shouldForwardProp:e=>"isPrimaryColor"!==e})(({isPrimaryColor:e,theme:n})=>({color:e?n.palette.text.primary:n.palette.text.tertiary,font:"inherit",minWidth:"initial",textTransform:"uppercase"}))},"./packages/packages/libs/editor-controls/src/components/text-field-popover.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TextFieldPopover:function(){return TextFieldPopover}});var o=r("react"),i=r("@elementor/editor-ui"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const TextFieldPopover=e=>{const{popupState:n,restoreValue:r,anchorRef:u,value:p,onChange:f}=e,g=(0,o.useRef)(null);(0,o.useEffect)(()=>{n.isOpen&&requestAnimationFrame(()=>{g.current&&g.current.focus()})},[n.isOpen]);const handleClose=()=>{r(),n.close()};return o.createElement(a.Popover,_extends({disablePortal:!0,slotProps:{paper:{sx:{borderRadius:2,width:u.current?.offsetWidth+"px"}}}},(0,a.bindPopover)(n),{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:handleClose}),o.createElement(i.PopoverHeader,{title:(0,c.__)("CSS function","elementor"),onClose:handleClose,icon:o.createElement(s.MathFunctionIcon,{fontSize:"tiny"})}),o.createElement(a.TextField,{value:p,onChange:f,size:"tiny",type:"text",fullWidth:!0,inputProps:{ref:g},sx:{pt:0,pr:1.5,pb:1.5,pl:1.5}}))}},"./packages/packages/libs/editor-controls/src/components/url-popover.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{UrlPopover:function(){return UrlPopover}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const UrlPopover=({popupState:e,restoreValue:n,anchorRef:r,value:c,onChange:u,openInNewTab:p,onToggleNewTab:f})=>{const g=(0,o.useRef)(null);(0,o.useEffect)(()=>{e.isOpen&&requestAnimationFrame(()=>g.current?.focus())},[e.isOpen]);const handleClose=()=>{n(),e.close()};return o.createElement(s.Popover,_extends({slotProps:{paper:{sx:{borderRadius:"16px",width:r.current?.offsetWidth+"px",marginTop:-1}}}},(0,s.bindPopover)(e),{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:handleClose}),o.createElement(s.Stack,{direction:"row",alignItems:"center",gap:1,sx:{p:1.5}},o.createElement(s.TextField,{value:c,onChange:u,size:"tiny",fullWidth:!0,placeholder:(0,a.__)("Type a URL","elementor"),inputProps:{ref:g},color:"secondary",InputProps:{sx:{borderRadius:"8px"}},onKeyUp:e=>"Enter"===e.key&&handleClose()}),o.createElement(s.Tooltip,{title:(0,a.__)("Open in a new tab","elementor")},o.createElement(s.ToggleButton,{size:"tiny",value:"newTab",selected:p,onClick:f,"aria-label":(0,a.__)("Open in a new tab","elementor"),sx:{borderRadius:"8px"}},o.createElement(i.ExternalLinkIcon,{fontSize:"tiny"})))))}},"./packages/packages/libs/editor-controls/src/control-actions/control-actions-context.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlActionsProvider:function(){return ControlActionsProvider},useControlActions:function(){return useControlActions}});var o=r("react");const i=(0,o.createContext)(null),ControlActionsProvider=({children:e,items:n})=>o.createElement(i.Provider,{value:{items:n}},e),useControlActions=()=>{const e=(0,o.useContext)(i);if(!e)throw new Error("useControlActions must be used within a ControlActionsProvider");return e}},"./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return ControlActions}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),s=r("./packages/packages/libs/editor-controls/src/components/floating-bar.tsx"),a=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions-context.tsx");function ControlActions({children:e}){const{items:n}=(0,a.useControlActions)(),{disabled:r}=(0,i.useBoundProp)();if(0===n.length||r)return e;const c=n.map(({MenuItem:e,id:n})=>o.createElement(e,{key:n}));return o.createElement(s.FloatingActionsBar,{actions:c},e)}},"./packages/packages/libs/editor-controls/src/control-adornments/control-adornments-context.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlAdornmentsProvider:function(){return ControlAdornmentsProvider},useControlAdornments:function(){return useControlAdornments}});var o=r("react");const i=(0,o.createContext)(null),ControlAdornmentsProvider=({children:e,items:n})=>o.createElement(i.Provider,{value:{items:n}},e),useControlAdornments=()=>{const e=(0,o.useContext)(i);return e?.items??[]}},"./packages/packages/libs/editor-controls/src/control-adornments/control-adornments.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlAdornments:function(){return ControlAdornments}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/control-adornments/control-adornments-context.tsx");function ControlAdornments({customContext:e}){const n=(0,i.useControlAdornments)();return 0===n?.length?null:o.createElement(o.Fragment,null,n.map(({Adornment:n,id:r})=>o.createElement(n,{key:r,customContext:e})))}},"./packages/packages/libs/editor-controls/src/control-replacements.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ControlReplacementsProvider:function(){return ControlReplacementsProvider},createControlReplacementsRegistry:function(){return createControlReplacementsRegistry},useControlReplacement:function(){return useControlReplacement}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts");const s=(0,o.createContext)([]),ControlReplacementsProvider=({replacements:e,children:n})=>o.createElement(s.Provider,{value:e},n),useControlReplacement=e=>{const{value:n,placeholder:r}=(0,i.useBoundProp)(),a=(0,o.useContext)(s);try{const o=a.find(e=>e.condition({value:n,placeholder:r}));return{ControlToRender:o?.component??e,OriginalControl:e,isReplaced:!!o}}catch{return{ControlToRender:e,OriginalControl:e}}},createControlReplacementsRegistry=()=>{const e=[];return{registerControlReplacement:function registerControlReplacement(n){e.push(n)},getControlReplacements:function getControlReplacements(){return e}}}},"./packages/packages/libs/editor-controls/src/controls/aspect-ratio-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{AspectRatioControl:function(){return x}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-ui"),a=r("@elementor/icons"),c=r("@elementor/ui"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),g=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),b=r("./packages/packages/libs/editor-controls/src/create-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const k=[{label:(0,u.__)("Auto","elementor"),value:"auto"},{label:"1/1",value:"1/1"},{label:"4/3",value:"4/3"},{label:"3/4",value:"3/4"},{label:"16/9",value:"16/9"},{label:"9/16",value:"9/16"},{label:"3/2",value:"3/2"},{label:"2/3",value:"2/3"}],v="custom",x=(0,b.createControl)(({label:e})=>{const{value:n,setValue:r,disabled:b}=(0,p.useBoundProp)(i.stringPropTypeUtil),x=n&&!k.some(e=>e.value===n),[w,E]=x?n.split("/"):["",""],[C,T]=(0,o.useState)(x),[_,P]=(0,o.useState)(w),[R,A]=(0,o.useState)(E),[N,I]=(0,o.useState)(x?v:n||"");(0,o.useEffect)(()=>{if(n&&!k.some(e=>e.value===n)){const[e,r]=n.split("/");P(e||""),A(r||""),I(v),T(!0)}else I(n||""),T(!1),P(""),A("")},[n]);return o.createElement(g.default,null,o.createElement(c.Stack,{direction:"column",gap:2},o.createElement(c.Grid,{container:!0,gap:2,alignItems:"center",flexWrap:"nowrap"},o.createElement(c.Grid,{item:!0,xs:6},o.createElement(f.ControlLabel,null,e)),o.createElement(c.Grid,{item:!0,xs:6},o.createElement(c.Select,{size:"tiny",displayEmpty:!0,sx:{overflow:"hidden"},disabled:b,value:N,onChange:e=>{const n=e.target.value,o=n===v;T(o),I(n),o||r(n)},fullWidth:!0},[...k,{label:(0,u.__)("Custom","elementor"),value:v}].map(({label:e,...n})=>o.createElement(s.MenuListItem,_extends({key:n.value},n,{value:n.value??""}),e))))),C&&o.createElement(c.Grid,{container:!0,gap:2,alignItems:"center",flexWrap:"nowrap"},o.createElement(c.Grid,{item:!0,xs:6},o.createElement(c.TextField,{size:"tiny",type:"number",fullWidth:!0,disabled:b,value:_,onChange:e=>{const n=e.target.value;P(n),n&&R&&r(`${n}/${R}`)},InputProps:{startAdornment:o.createElement(a.ArrowsMoveHorizontalIcon,{fontSize:"tiny"})}})),o.createElement(c.Grid,{item:!0,xs:6},o.createElement(c.TextField,{size:"tiny",type:"number",fullWidth:!0,disabled:b,value:R,onChange:e=>{const n=e.target.value;A(n),_&&n&&r(`${_}/${n}`)},InputProps:{startAdornment:o.createElement(a.ArrowsMoveVerticalIcon,{fontSize:"tiny"})}})))))})},"./packages/packages/libs/editor-controls/src/controls/background-control/background-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BackgroundControl:function(){return w}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/color-control.tsx"),g=r("./packages/packages/libs/editor-controls/src/controls/select-control.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-overlay-repeater-control.tsx");const k=[{label:(0,a.__)("Full element","elementor"),value:"border-box"},{label:(0,a.__)("Padding edges","elementor"),value:"padding-box"},{label:(0,a.__)("Content edges","elementor"),value:"content-box"},{label:(0,a.__)("Text","elementor"),value:"text"}],v=(0,a.__)("Color","elementor"),x=(0,a.__)("Clipping","elementor"),w=(0,p.createControl)(()=>{const e=(0,c.useBoundProp)(i.backgroundPropTypeUtil);return o.createElement(c.PropProvider,e,o.createElement(c.PropKeyProvider,{bind:"background-overlay"},o.createElement(b.BackgroundOverlayRepeaterControl,null)),o.createElement(BackgroundColorField,null),o.createElement(BackgroundClipField,null))}),BackgroundColorField=()=>o.createElement(c.PropKeyProvider,{bind:"color"},o.createElement(s.Grid,{container:!0,gap:2,alignItems:"center",flexWrap:"nowrap"},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlLabel,null,v)),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(f.ColorControl,null)))),BackgroundClipField=()=>o.createElement(c.PropKeyProvider,{bind:"clip"},o.createElement(s.Grid,{container:!0,gap:2,alignItems:"center",flexWrap:"nowrap"},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlLabel,null,x)),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(g.SelectControl,{options:k}))))},"./packages/packages/libs/editor-controls/src/controls/background-control/background-gradient-color-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BackgroundGradientColorControl:function(){return c},initialBackgroundGradientOverlay:function(){return u}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts");const c=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(()=>{const{value:e,setValue:n}=(0,a.useBoundProp)(i.backgroundGradientOverlayPropTypeUtil),createTransformableValue=e=>({...e,type:i.stringPropTypeUtil.create(e.type),angle:i.numberPropTypeUtil.create(e.angle),stops:i.gradientColorStopPropTypeUtil.create(e.stops.map(({color:e,offset:n})=>i.colorStopPropTypeUtil.create({color:i.colorPropTypeUtil.create(e),offset:i.numberPropTypeUtil.create(n)})))});return o.createElement(s.UnstableGradientBox,{sx:{width:"auto",padding:1.5},value:(()=>{if(!e)return;const{type:n,angle:r,stops:o,positions:i}=e;return{type:n.value,angle:r?.value||0,stops:o.value.map(({value:{color:e,offset:n}})=>({color:e.value,offset:n.value})),positions:i?.value.split(" ")}})(),onChange:e=>{const r=createTransformableValue(e);r.positions&&(r.positions=i.stringPropTypeUtil.create(e.positions.join(" "))),n(r)}})}),u=i.backgroundGradientOverlayPropTypeUtil.create({type:i.stringPropTypeUtil.create("linear"),angle:i.numberPropTypeUtil.create(180),stops:i.gradientColorStopPropTypeUtil.create([i.colorStopPropTypeUtil.create({color:i.colorPropTypeUtil.create("rgb(0,0,0)"),offset:i.numberPropTypeUtil.create(0)}),i.colorStopPropTypeUtil.create({color:i.colorPropTypeUtil.create("rgb(255,255,255)"),offset:i.numberPropTypeUtil.create(100)})])})},"./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-attachment.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BackgroundImageOverlayAttachment:function(){return BackgroundImageOverlayAttachment}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),p=r("./packages/packages/libs/editor-controls/src/controls/toggle-control.tsx");const f=[{value:"fixed",label:(0,a.__)("Fixed","elementor"),renderContent:({size:e})=>o.createElement(i.PinIcon,{fontSize:e}),showTooltip:!0},{value:"scroll",label:(0,a.__)("Scroll","elementor"),renderContent:({size:e})=>o.createElement(i.PinnedOffIcon,{fontSize:e}),showTooltip:!0}],BackgroundImageOverlayAttachment=()=>o.createElement(u.PopoverGridContainer,null,o.createElement(s.Grid,{item:!0,xs:6},o.createElement(c.ControlFormLabel,null,(0,a.__)("Attachment","elementor"))),o.createElement(s.Grid,{item:!0,xs:6,sx:{display:"flex",justifyContent:"flex-end",overflow:"hidden"}},o.createElement(p.ToggleControl,{options:f})))},"./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-position.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BackgroundImageOverlayPosition:function(){return BackgroundImageOverlayPosition}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-ui"),a=r("@elementor/icons"),c=r("@elementor/ui"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),b=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),k=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const v=[{label:(0,u.__)("Center center","elementor"),value:"center center"},{label:(0,u.__)("Center left","elementor"),value:"center left"},{label:(0,u.__)("Center right","elementor"),value:"center right"},{label:(0,u.__)("Top center","elementor"),value:"top center"},{label:(0,u.__)("Top left","elementor"),value:"top left"},{label:(0,u.__)("Top right","elementor"),value:"top right"},{label:(0,u.__)("Bottom center","elementor"),value:"bottom center"},{label:(0,u.__)("Bottom left","elementor"),value:"bottom left"},{label:(0,u.__)("Bottom right","elementor"),value:"bottom right"},{label:(0,u.__)("Custom","elementor"),value:"custom"}],BackgroundImageOverlayPosition=()=>{const e=(0,p.useBoundProp)(i.backgroundImagePositionOffsetPropTypeUtil),n=(0,p.useBoundProp)(i.stringPropTypeUtil),r=!!e.value,x=(0,o.useRef)(null);return o.createElement(c.Grid,{container:!0,spacing:1.5},o.createElement(c.Grid,{item:!0,xs:12},o.createElement(g.PopoverGridContainer,null,o.createElement(c.Grid,{item:!0,xs:6},o.createElement(f.ControlFormLabel,null,(0,u.__)("Position","elementor"))),o.createElement(c.Grid,{item:!0,xs:6,sx:{display:"flex",justifyContent:"flex-end",overflow:"hidden"}},o.createElement(b.default,null,o.createElement(c.Select,{fullWidth:!0,size:"tiny",onChange:r=>{const o=r.target.value||null;"custom"===o?e.setValue({x:null,y:null}):n.setValue(o)},disabled:n.disabled,value:(e.value?"custom":n.value)??""},v.map(({label:e,value:n})=>o.createElement(s.MenuListItem,{key:n,value:n??""},e))))))),r?o.createElement(p.PropProvider,e,o.createElement(c.Grid,{item:!0,xs:12},o.createElement(c.Grid,{container:!0,spacing:1.5,ref:x},o.createElement(c.Grid,{item:!0,xs:6},o.createElement(p.PropKeyProvider,{bind:"x"},o.createElement(k.SizeControl,{startIcon:o.createElement(a.LetterXIcon,{fontSize:"tiny"}),anchorRef:x,min:-Number.MAX_SAFE_INTEGER}))),o.createElement(c.Grid,{item:!0,xs:6},o.createElement(p.PropKeyProvider,{bind:"y"},o.createElement(k.SizeControl,{startIcon:o.createElement(a.LetterYIcon,{fontSize:"tiny"}),anchorRef:x,min:-Number.MAX_SAFE_INTEGER})))))):null)}},"./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-repeat.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BackgroundImageOverlayRepeat:function(){return BackgroundImageOverlayRepeat}});var o=r("react"),i=r("@elementor/icons"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),p=r("./packages/packages/libs/editor-controls/src/controls/toggle-control.tsx");const f=[{value:"repeat",label:(0,a.__)("Repeat","elementor"),renderContent:({size:e})=>o.createElement(i.GridDotsIcon,{fontSize:e}),showTooltip:!0},{value:"repeat-x",label:(0,a.__)("Repeat-x","elementor"),renderContent:({size:e})=>o.createElement(i.DotsHorizontalIcon,{fontSize:e}),showTooltip:!0},{value:"repeat-y",label:(0,a.__)("Repeat-y","elementor"),renderContent:({size:e})=>o.createElement(i.DotsVerticalIcon,{fontSize:e}),showTooltip:!0},{value:"no-repeat",label:(0,a.__)("No-repeat","elementor"),renderContent:({size:e})=>o.createElement(i.XIcon,{fontSize:e}),showTooltip:!0}],BackgroundImageOverlayRepeat=()=>o.createElement(u.PopoverGridContainer,null,o.createElement(s.Grid,{item:!0,xs:6},o.createElement(c.ControlFormLabel,null,(0,a.__)("Repeat","elementor"))),o.createElement(s.Grid,{item:!0,xs:6,sx:{display:"flex",justifyContent:"flex-end"}},o.createElement(p.ToggleControl,{options:f})))},"./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-size.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BackgroundImageOverlaySize:function(){return BackgroundImageOverlaySize}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),f=r("./packages/packages/libs/editor-controls/src/components/control-toggle-button-group.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const k=[{value:"auto",label:(0,c.__)("Auto","elementor"),renderContent:({size:e})=>o.createElement(s.LetterAIcon,{fontSize:e}),showTooltip:!0},{value:"cover",label:(0,c.__)("Cover","elementor"),renderContent:({size:e})=>o.createElement(s.ArrowsMaximizeIcon,{fontSize:e}),showTooltip:!0},{value:"contain",label:(0,c.__)("Contain","elementor"),renderContent:({size:e})=>o.createElement(s.ArrowBarBothIcon,{fontSize:e}),showTooltip:!0},{value:"custom",label:(0,c.__)("Custom","elementor"),renderContent:({size:e})=>o.createElement(s.PencilIcon,{fontSize:e}),showTooltip:!0}],BackgroundImageOverlaySize=()=>{const e=(0,u.useBoundProp)(i.backgroundImageSizeScalePropTypeUtil),n=(0,u.useBoundProp)(i.stringPropTypeUtil),r=!!e.value,v=(0,o.useRef)(null);return o.createElement(a.Grid,{container:!0,spacing:1.5},o.createElement(a.Grid,{item:!0,xs:12},o.createElement(g.PopoverGridContainer,null,o.createElement(a.Grid,{item:!0,xs:6},o.createElement(p.ControlFormLabel,null,(0,c.__)("Size","elementor"))),o.createElement(a.Grid,{item:!0,xs:6,sx:{display:"flex",justifyContent:"flex-end"}},o.createElement(f.ControlToggleButtonGroup,{exclusive:!0,items:k,onChange:r=>{"custom"===r?e.setValue({width:null,height:null}):n.setValue(r)},disabled:n.disabled,value:e.value?"custom":n.value})))),r?o.createElement(u.PropProvider,e,o.createElement(a.Grid,{item:!0,xs:12,ref:v},o.createElement(g.PopoverGridContainer,null,o.createElement(a.Grid,{item:!0,xs:6},o.createElement(u.PropKeyProvider,{bind:"width"},o.createElement(b.SizeControl,{startIcon:o.createElement(s.ArrowsMoveHorizontalIcon,{fontSize:"tiny"}),extendedOptions:["auto"],anchorRef:v}))),o.createElement(a.Grid,{item:!0,xs:6},o.createElement(u.PropKeyProvider,{bind:"height"},o.createElement(b.SizeControl,{startIcon:o.createElement(s.ArrowsMoveVerticalIcon,{fontSize:"tiny"}),extendedOptions:["auto"],anchorRef:v})))))):null)}},"./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-overlay-repeater-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BackgroundOverlayRepeaterControl:function(){return j},ItemContent:function(){return ItemContent},ItemLabel:function(){return ItemLabel},getInitialBackgroundOverlay:function(){return getInitialBackgroundOverlay},initialBackgroundColorOverlay:function(){return B}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@elementor/wp-media"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/components/control-repeater/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/disable-item-action.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/duplicate-item-action.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/remove-item-action.tsx"),k=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx"),v=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/edit-item-popover.tsx"),x=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/item.tsx"),w=r("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),E=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-header.tsx"),C=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),T=r("./packages/packages/libs/editor-controls/src/env.ts"),_=r("./packages/packages/libs/editor-controls/src/controls/color-control.tsx"),P=r("./packages/packages/libs/editor-controls/src/controls/image-control.tsx"),R=r("./packages/packages/libs/editor-controls/src/controls/background-control/background-gradient-color-control.tsx"),A=r("./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-attachment.tsx"),N=r("./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-position.tsx"),I=r("./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-repeat.tsx"),z=r("./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/background-image-overlay/background-image-overlay-size.tsx"),F=r("./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/use-background-tabs-history.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const B=i.backgroundColorOverlayPropTypeUtil.create({color:i.colorPropTypeUtil.create("#00000033")}),getInitialBackgroundOverlay=()=>({$$type:"background-image-overlay",value:{image:{$$type:"image",value:{src:{$$type:"image-src",value:{url:{$$type:"url",value:T.env.background_placeholder_image},id:null}},size:{$$type:"string",value:"large"}}}}}),L=[{label:(0,c.__)("Thumbnail - 150 x 150","elementor"),value:"thumbnail"},{label:(0,c.__)("Medium - 300 x 300","elementor"),value:"medium"},{label:(0,c.__)("Large 1024 x 1024","elementor"),value:"large"},{label:(0,c.__)("Full","elementor"),value:"full"}],j=(0,C.createControl)(()=>{const{propType:e,value:n,setValue:r}=(0,u.useBoundProp)(i.backgroundOverlayPropTypeUtil);return o.createElement(u.PropProvider,{propType:e,value:n,setValue:r},o.createElement(p.ControlRepeater,{initial:getInitialBackgroundOverlay(),propTypeUtil:i.backgroundOverlayPropTypeUtil},o.createElement(E.RepeaterHeader,{label:(0,c.__)("Overlay","elementor")},o.createElement(p.TooltipAddItemAction,{newItemIndex:0})),o.createElement(p.ItemsContainer,null,o.createElement(x.Item,{Icon:ItemIcon,Label:ItemLabel,actions:o.createElement(o.Fragment,null,o.createElement(g.DuplicateItemAction,null),o.createElement(f.DisableItemAction,null),o.createElement(b.RemoveItemAction,null))})),o.createElement(v.EditItemPopover,null,o.createElement(ItemContent,null))))}),ItemContent=()=>{const{getTabsProps:e,getTabProps:n,getTabPanelProps:r}=(0,F.useBackgroundTabsHistory)({image:getInitialBackgroundOverlay().value,color:B.value,gradient:R.initialBackgroundGradientOverlay.value}),{rowRef:i}=(0,k.useRepeaterContext)();return o.createElement(s.Box,{sx:{width:"100%"}},o.createElement(s.Box,{sx:{borderBottom:1,borderColor:"divider"}},o.createElement(s.Tabs,_extends({size:"small",variant:"fullWidth"},e(),{"aria-label":(0,c.__)("Background Overlay","elementor")}),o.createElement(s.Tab,_extends({label:(0,c.__)("Image","elementor")},n("image"))),o.createElement(s.Tab,_extends({label:(0,c.__)("Gradient","elementor")},n("gradient"))),o.createElement(s.Tab,_extends({label:(0,c.__)("Color","elementor")},n("color"))))),o.createElement(s.TabPanel,_extends({sx:{p:1.5}},r("image")),o.createElement(w.PopoverContent,null,o.createElement(ImageOverlayContent,null))),o.createElement(s.TabPanel,_extends({sx:{p:1.5}},r("gradient")),o.createElement(R.BackgroundGradientColorControl,null)),o.createElement(s.TabPanel,_extends({sx:{p:1.5}},r("color")),o.createElement(w.PopoverContent,null,o.createElement(ColorOverlayContent,{anchorEl:i}))))},ItemIcon=({value:e})=>{switch(e.$$type){case"background-image-overlay":return o.createElement(ItemIconImage,{value:e});case"background-color-overlay":return o.createElement(ItemIconColor,{value:e});case"background-gradient-overlay":return o.createElement(ItemIconGradient,{value:e});default:return null}},extractColorFrom=e=>e?.value?.color?.value?e.value.color.value:"",ItemIconColor=({value:e})=>{const n=extractColorFrom(e);return o.createElement(V,{size:"inherit",component:"span",value:n})},ItemIconImage=({value:e})=>{const{imageUrl:n}=useImage(e);return o.createElement(s.CardMedia,{image:n,sx:e=>({height:"1rem",width:"1rem",borderRadius:e.shape.borderRadius/2+"px",outline:`1px solid ${e.palette.action.disabled}`})})},ItemIconGradient=({value:e})=>{const n=getGradientValue(e);return o.createElement(V,{size:"inherit",component:"span",value:n})},ItemLabel=({value:e})=>{switch(e.$$type){case"background-image-overlay":return o.createElement(ItemLabelImage,{value:e});case"background-color-overlay":return o.createElement(ItemLabelColor,{value:e});case"background-gradient-overlay":return o.createElement(ItemLabelGradient,{value:e});default:return null}},ItemLabelColor=({value:e})=>{const n=extractColorFrom(e);return o.createElement("span",null,n)},ItemLabelImage=({value:e})=>{const{imageTitle:n}=useImage(e);return o.createElement("span",null,n)},ItemLabelGradient=({value:e})=>"linear"===e.value.type.value?o.createElement("span",null,(0,c.__)("Linear Gradient","elementor")):o.createElement("span",null,(0,c.__)("Radial Gradient","elementor")),ColorOverlayContent=({anchorEl:e})=>{const n=(0,u.useBoundProp)(i.backgroundColorOverlayPropTypeUtil);return o.createElement(u.PropProvider,n,o.createElement(u.PropKeyProvider,{bind:"color"},o.createElement(_.ColorControl,{anchorEl:e})))},ImageOverlayContent=()=>{const e=(0,u.useBoundProp)(i.backgroundImageOverlayPropTypeUtil);return o.createElement(u.PropProvider,e,o.createElement(u.PropKeyProvider,{bind:"image"},o.createElement(P.ImageControl,{sizes:L})),o.createElement(u.PropKeyProvider,{bind:"position"},o.createElement(N.BackgroundImageOverlayPosition,null)),o.createElement(u.PropKeyProvider,{bind:"repeat"},o.createElement(I.BackgroundImageOverlayRepeat,null)),o.createElement(u.PropKeyProvider,{bind:"size"},o.createElement(z.BackgroundImageOverlaySize,null)),o.createElement(u.PropKeyProvider,{bind:"attachment"},o.createElement(A.BackgroundImageOverlayAttachment,null)))},V=(0,s.styled)(s.UnstableColorIndicator)(({theme:e})=>({height:"1rem",width:"1rem",borderRadius:e.shape.borderRadius/2+"px"})),useImage=e=>{let n,r=null;const o=e?.value.image.value?.src.value,{data:i}=(0,a.useWpMediaAttachment)(o.id?.value||null);if(o.id){const e=getFileExtensionFromFilename(i?.filename);n=`${i?.title}${e}`||null,r=i?.url||null}else o.url&&(r=o.url.value,n=r?.substring(r.lastIndexOf("/")+1)||null);return{imageTitle:n,imageUrl:r}},getFileExtensionFromFilename=e=>{if(!e)return"";return`.${e.substring(e.lastIndexOf(".")+1)}`},getGradientValue=e=>{const n=e.value,r=n.stops.value?.map(({value:{color:e,offset:n}})=>`${e.value} ${n.value??0}%`)?.join(",");return"linear"===n.type.value?`linear-gradient(${n.angle.value}deg, ${r})`:`radial-gradient(circle at ${n.positions.value}, ${r})`}},"./packages/packages/libs/editor-controls/src/controls/background-control/background-overlay/use-background-tabs-history.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{useBackgroundTabsHistory:function(){return useBackgroundTabsHistory}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts");const useBackgroundTabsHistory=({color:e,image:n,gradient:r})=>{const{value:c,setValue:u}=(0,a.useBoundProp)(i.backgroundImageOverlayPropTypeUtil),{value:p,setValue:f}=(0,a.useBoundProp)(i.backgroundColorOverlayPropTypeUtil),{value:g,setValue:b}=(0,a.useBoundProp)(i.backgroundGradientOverlayPropTypeUtil),{getTabsProps:k,getTabProps:v,getTabPanelProps:x}=(0,s.useTabs)(p?"color":g?"gradient":"image"),w=(0,o.useRef)({image:n,color:e,gradient:r}),saveToHistory=(e,n)=>{n&&(w.current[e]=n)},onTabChange=(e,n)=>{switch(n){case"image":u(w.current.image),saveToHistory("color",p),saveToHistory("gradient",g);break;case"gradient":b(w.current.gradient),saveToHistory("color",p),saveToHistory("image",c);break;case"color":f(w.current.color),saveToHistory("image",c),saveToHistory("gradient",g)}return k().onChange(e,n)};return{getTabProps:v,getTabPanelProps:x,getTabsProps:()=>({...k(),onChange:onTabChange})}}},"./packages/packages/libs/editor-controls/src/controls/box-shadow-repeater-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{BoxShadowRepeaterControl:function(){return P}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-repeater/index.ts"),p=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/disable-item-action.tsx"),f=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/duplicate-item-action.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/remove-item-action.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx"),k=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/edit-item-popover.tsx"),v=r("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),x=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),w=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-header.tsx"),E=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),C=r("./packages/packages/libs/editor-controls/src/controls/color-control.tsx"),T=r("./packages/packages/libs/editor-controls/src/controls/select-control.tsx"),_=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const P=(0,E.createControl)(()=>{const{propType:e,value:n,setValue:r,disabled:s}=(0,c.useBoundProp)(i.boxShadowPropTypeUtil);return o.createElement(c.PropProvider,{propType:e,value:n,setValue:r,isDisabled:()=>s},o.createElement(u.ControlRepeater,{initial:A,propTypeUtil:i.boxShadowPropTypeUtil},o.createElement(w.RepeaterHeader,{label:(0,a.__)("Box shadow","elementor")},o.createElement(u.TooltipAddItemAction,{newItemIndex:0,disabled:s,ariaLabel:"Box shadow"})),o.createElement(u.ItemsContainer,null,o.createElement(u.Item,{Icon:ItemIcon,Label:ItemLabel,actions:o.createElement(o.Fragment,null,o.createElement(f.DuplicateItemAction,null),o.createElement(p.DisableItemAction,null),o.createElement(g.RemoveItemAction,null))})),o.createElement(k.EditItemPopover,null,o.createElement(Content,null))))}),R=(0,s.styled)(s.UnstableColorIndicator)(({theme:e})=>({height:"1rem",width:"1rem",borderRadius:e.shape.borderRadius/2+"px"})),ItemIcon=({value:e})=>o.createElement(R,{size:"inherit",component:"span",value:e.value.color?.value}),Content=()=>{const e=(0,c.useBoundProp)(i.shadowPropTypeUtil),n=[(0,o.useRef)(null),(0,o.useRef)(null)],{rowRef:r}=(0,b.useRepeaterContext)();return o.createElement(c.PropProvider,e,o.createElement(v.PopoverContent,{p:1.5},o.createElement(x.PopoverGridContainer,null,o.createElement(Control,{bind:"color",label:(0,a.__)("Color","elementor")},o.createElement(C.ColorControl,{anchorEl:r})),o.createElement(Control,{bind:"position",label:(0,a.__)("Position","elementor"),sx:{overflow:"hidden"}},o.createElement(T.SelectControl,{options:[{label:(0,a.__)("Inset","elementor"),value:"inset"},{label:(0,a.__)("Outset","elementor"),value:null}]}))),o.createElement(x.PopoverGridContainer,{ref:n[0]},o.createElement(Control,{bind:"hOffset",label:(0,a.__)("Horizontal","elementor")},o.createElement(_.SizeControl,{anchorRef:n[0]})),o.createElement(Control,{bind:"vOffset",label:(0,a.__)("Vertical","elementor")},o.createElement(_.SizeControl,{anchorRef:n[0]}))),o.createElement(x.PopoverGridContainer,{ref:n[1]},o.createElement(Control,{bind:"blur",label:(0,a.__)("Blur","elementor")},o.createElement(_.SizeControl,{anchorRef:n[1]})),o.createElement(Control,{bind:"spread",label:(0,a.__)("Spread","elementor")},o.createElement(_.SizeControl,{anchorRef:n[1]})))))},Control=({label:e,bind:n,children:r,sx:i})=>o.createElement(c.PropKeyProvider,{bind:n},o.createElement(s.Grid,{item:!0,xs:6,sx:i},o.createElement(s.Grid,{container:!0,gap:.75,alignItems:"center"},o.createElement(s.Grid,{item:!0,xs:12},o.createElement(s.FormLabel,{size:"tiny"},e)),o.createElement(s.Grid,{item:!0,xs:12},r)))),ItemLabel=({value:e})=>{const{position:n,hOffset:r,vOffset:i,blur:s,spread:a}=e.value,{size:c="",unit:u=""}=s?.value||{},{size:p="",unit:f=""}=a?.value||{},{size:g="unset",unit:b=""}=r?.value||{},{size:k="unset",unit:v=""}=i?.value||{},x=n?.value||"outset",w=[[g,b],[k,v],[c,u],[p,f]].map(([e,n])=>"custom"!==n?e+n:e||_.CUSTOM_SIZE_LABEL).join(" ");return o.createElement("span",{style:{textTransform:"capitalize"}},x,": ",w)},A={$$type:"shadow",value:{hOffset:{$$type:"size",value:{unit:"px",size:0}},vOffset:{$$type:"size",value:{unit:"px",size:0}},blur:{$$type:"size",value:{unit:"px",size:10}},spread:{$$type:"size",value:{unit:"px",size:0}},color:{$$type:"color",value:"rgba(0, 0, 0, 1)"},position:null}}},"./packages/packages/libs/editor-controls/src/controls/color-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ColorControl:function(){return u}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const u=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(({propTypeUtil:e=i.colorPropTypeUtil,anchorEl:n,slotProps:r={},id:u,...p})=>{const{value:f,setValue:g,placeholder:b,disabled:k}=(0,a.useBoundProp)(e),v=p.placeholder??b;return o.createElement(c.default,null,o.createElement(s.UnstableColorField,_extends({id:u,size:"tiny",fullWidth:!0,value:f??"",placeholder:v??"",onChange:e=>{g(e||null)}},p,{disabled:k,slotProps:{...r,colorPicker:{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:-10},slotProps:{colorIndicator:{value:f??v??""},colorBox:{value:f??v??""}}}}})))})},"./packages/packages/libs/editor-controls/src/controls/date-time-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{DateTimeControl:function(){return g}});var o=r("react"),i=r("./packages/node_modules/dayjs/dayjs.min.js"),s=r.n(i),a=r("@elementor/editor-props"),c=r("@elementor/ui"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),f=r("./packages/packages/libs/editor-controls/src/create-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const g=(0,f.createControl)(({inputDisabled:e})=>{const{value:n,setValue:r,...i}=(0,u.useBoundProp)(a.DateTimePropTypeUtil),handleChange=(e,o)=>{const i=o.bind,s=e[i];if((0,a.isTransformable)(s))return r({...n,[i]:s});let c="";if(s){const e=s;c="date"===i?e.format("YYYY-MM-DD"):e.format("HH:mm")}r({...n,[i]:{$$type:"string",value:c}})};return o.createElement(u.PropProvider,_extends({},i,{value:n,setValue:r}),o.createElement(p.default,null,o.createElement(c.LocalizationProvider,null,o.createElement(c.Box,{display:"flex",gap:1,alignItems:"center"},o.createElement(u.PropKeyProvider,{bind:"date"},o.createElement(c.DatePicker,{value:(e=>{if(!e)return null;const n=s()(e);return n&&"function"==typeof n.isValid&&n.isValid()?n:null})(a.stringPropTypeUtil.extract(n?.date)),onChange:e=>handleChange({date:e},{bind:"date"}),disabled:e,slotProps:{textField:{size:"tiny"},openPickerButton:{size:"tiny"},openPickerIcon:{fontSize:"tiny"}}})),o.createElement(u.PropKeyProvider,{bind:"time"},o.createElement(c.TimePicker,{value:(e=>{if(!e)return null;const[n,r]=e.split(":"),o=Number.parseInt(n??"",10),i=Number.parseInt(r??"",10);if(Number.isNaN(o)||Number.isNaN(i))return null;return s()().hour(o).minute(i).second(0).millisecond(0)})(a.stringPropTypeUtil.extract(n?.time)),onChange:e=>handleChange({time:e},{bind:"time"}),disabled:e,slotProps:{textField:{size:"tiny"},openPickerButton:{size:"tiny"},openPickerIcon:{fontSize:"tiny"}}}))))))})},"./packages/packages/libs/editor-controls/src/controls/equal-unequal-sizes-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{EqualUnequalSizesControl:function(){return EqualUnequalSizesControl}});var o=r("react"),i=r("@elementor/ui"),s=r("@wordpress/i18n"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/control-toggle-button-group.tsx"),f=r("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}function EqualUnequalSizesControl({label:e,icon:n,tooltipLabel:r,items:k,multiSizePropTypeUtil:v}){const x=(0,o.useId)(),w=(0,i.usePopupState)({variant:"popover",popupId:x}),E=[(0,o.useRef)(null),(0,o.useRef)(null)],{propType:C,disabled:T}=(0,a.useBoundProp)(v),{value:_,setValue:P,placeholder:R}=(0,a.useBoundProp)(),getMultiSizeValues=e=>{if(v.isValid(e))return e.value;const n={};k.forEach(r=>{n[r.bind]=e});const r=v.create(n);return r?.value},A=!w.isOpen,N=getMultiSizeValues(_),I=getMultiSizeValues(R),isEqualValues=e=>{if(!e)return!0;const n=v.create(e),r={};k.forEach(e=>{r[e.bind]=n?.value?.[e.bind]??null});const o=Object.values(r).map(e=>JSON.stringify(e));return o.every(e=>e===o[0])},z=!_&&!isEqualValues(I),F=z||!isEqualValues(N);return o.createElement(o.Fragment,null,o.createElement(i.Grid,{container:!0,gap:2,alignItems:"center",flexWrap:"nowrap",ref:E[0]},o.createElement(i.Grid,{item:!0,xs:6},A?o.createElement(u.ControlLabel,null,e):o.createElement(c.ControlFormLabel,null,e)),o.createElement(i.Grid,{item:!0,xs:6},o.createElement(i.Stack,{direction:"row",alignItems:"center",gap:1},o.createElement(i.Box,{flexGrow:1},o.createElement(b.SizeControl,{placeholder:F?(0,s.__)("Mixed","elementor"):void 0,enablePropTypeUnits:!F||!z,anchorRef:E[0]})),o.createElement(i.Tooltip,{title:r,placement:"top"},o.createElement(p.StyledToggleButton,_extends({size:"tiny",value:"check",sx:{marginLeft:"auto"}},(0,i.bindToggle)(w),{selected:w.isOpen,isPlaceholder:z,"aria-label":r}),n))))),o.createElement(i.Popover,_extends({disablePortal:!0,disableScrollLock:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},(0,i.bindPopover)(w),{slotProps:{paper:{sx:{mt:.5,width:E[0].current?.getBoundingClientRect().width}}}}),o.createElement(a.PropProvider,{propType:C,value:N,placeholder:I,setValue:e=>{isEqualValues(e)?P(Object.values(e)?.pop()??null):P(v.create(e))},isDisabled:()=>T},o.createElement(f.PopoverContent,{p:1.5},o.createElement(g.PopoverGridContainer,{ref:E[1]},o.createElement(MultiSizeValueControl,{item:k[0],rowRef:E[1]}),o.createElement(MultiSizeValueControl,{item:k[1],rowRef:E[1]})),o.createElement(g.PopoverGridContainer,{ref:E[2]},o.createElement(MultiSizeValueControl,{item:k[2],rowRef:E[2]}),o.createElement(MultiSizeValueControl,{item:k[3],rowRef:E[2]}))))))}const MultiSizeValueControl=({item:e,rowRef:n})=>{const{bind:r,label:s,icon:c,ariaLabel:p}=e;return o.createElement(a.PropKeyProvider,{bind:r},o.createElement(i.Grid,{item:!0,xs:6},o.createElement(i.Grid,{container:!0,gap:.75,alignItems:"center"},o.createElement(i.Grid,{item:!0,xs:12},o.createElement(u.ControlLabel,null,s)),o.createElement(i.Grid,{item:!0,xs:12},o.createElement(b.SizeControl,{startIcon:c,ariaLabel:p,anchorRef:n})))))}},"./packages/packages/libs/editor-controls/src/controls/filter-control/configs.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{FILTERS_BY_GROUP:function(){return i}});var o=r("@wordpress/i18n");const i={blur:{blur:{name:(0,o.__)("Blur","elementor"),valueName:(0,o.__)("Radius","elementor")}},intensity:{brightness:{name:(0,o.__)("Brightness","elementor")},contrast:{name:(0,o.__)("Contrast","elementor")},saturate:{name:(0,o.__)("Saturate","elementor")}},"hue-rotate":{"hue-rotate":{name:(0,o.__)("Hue Rotate","elementor"),valueName:(0,o.__)("Angle","elementor")}},"color-tone":{grayscale:{name:(0,o.__)("Grayscale","elementor")},invert:{name:(0,o.__)("Invert","elementor")},sepia:{name:(0,o.__)("Sepia","elementor")}},"drop-shadow":{"drop-shadow":{name:(0,o.__)("Drop shadow","elementor"),valueName:(0,o.__)("Drop-shadow","elementor")}}}},"./packages/packages/libs/editor-controls/src/controls/filter-control/context/filter-config-context.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{FilterConfigProvider:function(){return FilterConfigProvider},useFilterConfig:function(){return useFilterConfig}});var o=r("react"),i=r("@elementor/editor-props"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),a=r("./packages/packages/libs/editor-controls/src/controls/filter-control/utils.ts");const c=(0,o.createContext)(null);function FilterConfigProvider({children:e}){const n=(0,s.useBoundProp)(i.cssFilterFunctionPropUtil),r=(0,o.useMemo)(()=>{const e=(0,a.buildFilterConfig)(n.propType.item_prop_type),r=Object.entries(e).map(([e,n])=>({value:e,label:n.name}));return{config:e,filterOptions:r,getFilterFunctionConfig:n=>e[n],getInitialValue:()=>e.blur.defaultValue}},[n.propType]);return o.createElement(c.Provider,{value:r},e)}function useFilterConfig(){const e=(0,o.useContext)(c);if(!e)throw new Error("useFilterConfig must be used within FilterConfigProvider");return e}},"./packages/packages/libs/editor-controls/src/controls/filter-control/drop-shadow/drop-shadow-item-content.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{DropShadowItemContent:function(){return DropShadowItemContent}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/color-control.tsx"),g=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const b=[{bind:"xAxis",label:(0,a.__)("X-axis","elementor"),rowIndex:0},{bind:"yAxis",label:(0,a.__)("Y-axis","elementor"),rowIndex:0},{bind:"blur",label:(0,a.__)("Blur","elementor"),rowIndex:1},{bind:"color",label:(0,a.__)("Color","elementor"),rowIndex:1}],DropShadowItemContent=({anchorEl:e})=>{const n=(0,c.useBoundProp)(i.dropShadowFilterPropTypeUtil),r=[(0,o.useRef)(null),(0,o.useRef)(null)];return o.createElement(c.PropProvider,n,b.map(n=>o.createElement(p.PopoverGridContainer,{key:n.bind,ref:r[n.rowIndex]??null},o.createElement(c.PropKeyProvider,{bind:n.bind},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlFormLabel,null,n.label)),o.createElement(s.Grid,{item:!0,xs:6},"color"===n.bind?o.createElement(f.ColorControl,{anchorEl:e}):o.createElement(g.SizeControl,{anchorRef:r[n.rowIndex],enablePropTypeUnits:!0,defaultUnit:"px"}))))))}},"./packages/packages/libs/editor-controls/src/controls/filter-control/drop-shadow/drop-shadow-item-label.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{DropShadowItemLabel:function(){return DropShadowItemLabel}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const DropShadowItemLabel=({value:e})=>{const n=e.value.args.value,r=["xAxis","yAxis","blur"].map(e=>"custom"!==n[e]?.value?.unit?`${n[e]?.value?.size??0}${n[e]?.value?.unit??"px"}`:n[e]?.value?.size||s.CUSTOM_SIZE_LABEL);return o.createElement(i.Box,{component:"span"},o.createElement(i.Box,{component:"span",style:{textTransform:"capitalize"}},"Drop shadow:"),` ${r.join(" ")}`)}},"./packages/packages/libs/editor-controls/src/controls/filter-control/filter-content.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{FilterContent:function(){return FilterContent}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx"),f=r("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/select-control.tsx"),k=r("./packages/packages/libs/editor-controls/src/controls/filter-control/context/filter-config-context.tsx"),v=r("./packages/packages/libs/editor-controls/src/controls/filter-control/drop-shadow/drop-shadow-item-content.tsx"),x=r("./packages/packages/libs/editor-controls/src/controls/filter-control/single-size/single-size-item-content.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const FilterContent=()=>{const e=(0,c.useBoundProp)(i.cssFilterFunctionPropUtil),{filterOptions:n,getFilterFunctionConfig:r}=(0,k.useFilterConfig)();return o.createElement(c.PropProvider,_extends({},e,{setValue:(n,o,i)=>{let s=structuredClone(n);const a=r(s?.func.value);"func"===i?.bind&&(s=a.defaultValue.value),s.args&&e.setValue(s)}}),o.createElement(c.PropKeyProvider,{bind:"css-filter-func"},o.createElement(f.PopoverContent,{p:1.5},o.createElement(g.PopoverGridContainer,null,o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlFormLabel,null,(0,a.__)("Filter","elementor"))),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(c.PropKeyProvider,{bind:"func"},o.createElement(b.SelectControl,{options:n})))),o.createElement(c.PropKeyProvider,{bind:"args"},o.createElement(FilterValueContent,null)))))},FilterValueContent=()=>{const{openItemIndex:e,items:n}=(0,p.useRepeaterContext)(),r=n[e].item.value.func.value;return"drop-shadow"===r?o.createElement(v.DropShadowItemContent,null):o.createElement(x.SingleSizeItemContent,{filterFunc:r})}},"./packages/packages/libs/editor-controls/src/controls/filter-control/filter-icon.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{FilterIcon:function(){return FilterIcon}});var o=r("react"),i=r("@elementor/ui");const FilterIcon=({value:e})=>"drop-shadow"!==e.value.func.value?null:o.createElement(s,{size:"inherit",component:"span",value:e.value.args.value?.color.value}),s=(0,i.styled)(i.UnstableColorIndicator)(({theme:e})=>({borderRadius:e.shape.borderRadius/2+"px"}))},"./packages/packages/libs/editor-controls/src/controls/filter-control/filter-label.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{FilterLabel:function(){return FilterLabel}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/controls/filter-control/drop-shadow/drop-shadow-item-label.tsx"),s=r("./packages/packages/libs/editor-controls/src/controls/filter-control/single-size/single-size-item-label.tsx");const FilterLabel=({value:e})=>"drop-shadow"===e.value.func.value?o.createElement(i.DropShadowItemLabel,{value:e}):o.createElement(s.SingleSizeItemLabel,{value:e})},"./packages/packages/libs/editor-controls/src/controls/filter-control/filter-repeater-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{FilterRepeaterControl:function(){return T}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@wordpress/i18n"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/disable-item-action.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/duplicate-item-action.tsx"),f=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/remove-item-action.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/edit-item-popover.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-header.tsx"),k=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),v=r("./packages/packages/libs/editor-controls/src/controls/filter-control/context/filter-config-context.tsx"),x=r("./packages/packages/libs/editor-controls/src/controls/filter-control/filter-content.tsx"),w=r("./packages/packages/libs/editor-controls/src/controls/filter-control/filter-icon.tsx"),E=r("./packages/packages/libs/editor-controls/src/controls/filter-control/filter-label.tsx");const C={filter:{propTypeUtil:i.filterPropTypeUtil,label:(0,s.__)("Filters","elementor")},"backdrop-filter":{propTypeUtil:i.backdropFilterPropTypeUtil,label:(0,s.__)("Backdrop filters","elementor")}},T=(0,k.createControl)(({filterPropName:e="filter"})=>{const{propTypeUtil:n,label:r}=function ensureFilterConfig(e){if(e&&e in C)return C[e];return C.filter}(e),{propType:i,value:s,setValue:c}=(0,a.useBoundProp)(n);return o.createElement(v.FilterConfigProvider,null,o.createElement(a.PropProvider,{propType:i,value:s,setValue:c},o.createElement(Repeater,{propTypeUtil:n,label:r,filterPropName:e})))}),Repeater=({propTypeUtil:e,label:n,filterPropName:r})=>{const{getInitialValue:i}=(0,v.useFilterConfig)();return o.createElement(c.ControlRepeater,{initial:i(),propTypeUtil:e},o.createElement(b.RepeaterHeader,{label:n},o.createElement(c.TooltipAddItemAction,{newItemIndex:0,ariaLabel:"backdrop-filter"===r?"backdrop filter":"filter"})),o.createElement(c.ItemsContainer,null,o.createElement(c.Item,{Label:E.FilterLabel,Icon:w.FilterIcon,actions:o.createElement(o.Fragment,null,o.createElement(p.DuplicateItemAction,null),o.createElement(u.DisableItemAction,null),o.createElement(f.RemoveItemAction,null))})),o.createElement(g.EditItemPopover,null,o.createElement(x.FilterContent,null)))}},"./packages/packages/libs/editor-controls/src/controls/filter-control/single-size/single-size-item-content.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SingleSizeItemContent:function(){return SingleSizeItemContent},propTypeMap:function(){return g}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),u=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),p=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/filter-control/context/filter-config-context.tsx");const g={blur:i.blurFilterPropTypeUtil,intensity:i.intensityFilterPropTypeUtil,"hue-rotate":i.hueRotateFilterPropTypeUtil,"color-tone":i.colorToneFilterPropTypeUtil},SingleSizeItemContent=({filterFunc:e})=>{const n=(0,o.useRef)(null),{getFilterFunctionConfig:r}=(0,f.useFilterConfig)(),{valueName:i,filterFunctionGroup:b}=r(e),k=(0,a.useBoundProp)(g[b]);return o.createElement(a.PropProvider,k,o.createElement(a.PropKeyProvider,{bind:b},o.createElement(a.PropKeyProvider,{bind:"size"},o.createElement(u.PopoverGridContainer,{ref:n},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(c.ControlFormLabel,null,i)),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(p.SizeControl,{anchorRef:n,enablePropTypeUnits:!0}))))))}},"./packages/packages/libs/editor-controls/src/controls/filter-control/single-size/single-size-item-label.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SingleSizeItemLabel:function(){return SingleSizeItemLabel}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/utils/size-control.ts"),a=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx"),c=r("./packages/packages/libs/editor-controls/src/controls/filter-control/context/filter-config-context.tsx");const SingleSizeItemLabel=({value:e})=>{const{func:n,args:r}=e.value,{getFilterFunctionConfig:u}=(0,c.useFilterConfig)(),{defaultValue:p}=u(n.value??""),f=p.value.args.value?.size?.value?.unit??s.lengthUnits[0],{unit:g,size:b}=r.value.size?.value??{unit:f,size:0},k=o.createElement(i.Box,{component:"span",style:{textTransform:"capitalize"}},n.value??"",":");return o.createElement(i.Box,{component:"span"},k," "+("custom"!==g?`${b??0}${g??f}`:b||a.CUSTOM_SIZE_LABEL))}},"./packages/packages/libs/editor-controls/src/controls/filter-control/utils.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{buildFilterConfig:function(){return buildFilterConfig}});var o=r("@wordpress/i18n"),i=r("./packages/packages/libs/editor-controls/src/controls/filter-control/configs.ts");const s=(0,o.__)("Amount","elementor"),a={"drop-shadow":e=>function buildDropShadowDefault(e){const n=e.shape;return{blur:n?.blur?.default,xAxis:n?.xAxis?.default,yAxis:n?.yAxis?.default,color:n?.color?.default??(n?.color).prop_types.color.default}}(e)};function buildFilterConfig(e){const n=Object.entries(i.FILTERS_BY_GROUP).flatMap(([n,r])=>Object.entries(r).map(([r,o])=>function createEntry(n,r,{name:o,valueName:i}){const c=function extractPropType(e,n){return e.shape?.args?.prop_types[n]}(e,n),u=a[r]?.(c)??function buildSizeDefault(e){const n=e?.shape?.size;return{size:n?.default}}(c),p=function createDefaultValue({filterFunction:e,filterFunctionGroup:n,value:r}){return{$$type:"css-filter-func",value:{func:{$$type:"string",value:e},args:{$$type:n,value:r}}}}({filterFunction:r,filterFunctionGroup:n,value:u});return[r,{name:o,valueName:i??s,defaultValue:p,filterFunctionGroup:n}]}(n,r,o)));return Object.fromEntries(n)}},"./packages/packages/libs/editor-controls/src/controls/font-family-control/enqueue-font.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{enqueueFont:function(){return enqueueFont}});const enqueueFont=(e,n="editor")=>{const r=window;return r.elementor?.helpers?.enqueueFont?.(e,n)??null}},"./packages/packages/libs/editor-controls/src/controls/font-family-control/font-family-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{FontFamilyControl:function(){return k}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/components/item-selector.tsx"),f=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),g=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/font-family-control/enqueue-font.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const k=(0,g.createControl)(({fontFamilies:e,sectionWidth:n,ariaLabel:r})=>{const{value:g,setValue:k,disabled:v,placeholder:x}=(0,u.useBoundProp)(i.stringPropTypeUtil),w=(0,a.usePopupState)({variant:"popover"}),E=!g&&x,C=o.useMemo(()=>e.map(({label:e,fonts:n})=>({label:e,items:n})),[e]);return o.createElement(o.Fragment,null,o.createElement(f.default,null,o.createElement(a.UnstableTag,_extends({id:"font-family-control",variant:"outlined",label:g||x,endIcon:o.createElement(s.ChevronDownIcon,{fontSize:"tiny"})},(0,a.bindTrigger)(w),{fullWidth:!0,disabled:v,"aria-label":r,sx:E?{"& .MuiTag-label":{color:e=>e.palette.text.tertiary},textTransform:"capitalize"}:void 0}))),o.createElement(a.Popover,_extends({disablePortal:!0,disableScrollLock:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{my:1.5}},(0,a.bindPopover)(w)),o.createElement(p.ItemSelector,{id:"font-family-selector",itemsList:C,selectedItem:g,onItemChange:k,onClose:w.close,sectionWidth:n,title:(0,c.__)("Font family","elementor"),itemStyle:e=>({fontFamily:e.value}),onDebounce:b.enqueueFont,icon:s.TextIcon})))})},"./packages/packages/libs/editor-controls/src/controls/gap-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{GapControl:function(){return GapControl}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-responsive"),a=r("@elementor/icons"),c=r("@elementor/ui"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/control-toggle-button-group.tsx"),k=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const GapControl=({label:e})=>{const n=(0,o.useRef)(null),{disabled:r}=(0,p.useBoundProp)(i.sizePropTypeUtil),{value:k,setValue:v,propType:x,placeholder:w,disabled:E}=(0,p.useBoundProp)(i.layoutDirectionPropTypeUtil),{value:C,setValue:T,placeholder:_}=(0,p.useBoundProp)(),inferIsLinked=()=>!i.layoutDirectionPropTypeUtil.isValid(C)&&!(!C&&i.layoutDirectionPropTypeUtil.isValid(_)),[P,R]=(0,o.useState)(()=>inferIsLinked()),A=(0,s.useActiveBreakpoint)();(0,o.useLayoutEffect)(()=>{R(inferIsLinked())},[A]);const N=e.toLowerCase(),I=P?a.LinkIcon:a.DetachIcon,z=(0,u.__)("Link %s","elementor").replace("%s",N),F=(0,u.__)("Unlink %s","elementor").replace("%s",N),B=r||E,L={propType:x,value:k,setValue:v,placeholder:w},j=!C&&(w||_);return o.createElement(p.PropProvider,L,o.createElement(c.Stack,{direction:"row",gap:2,flexWrap:"nowrap"},o.createElement(g.ControlLabel,null,e),o.createElement(c.Tooltip,{title:P?F:z,placement:"top"},o.createElement(b.StyledToggleButton,{"aria-label":P?F:z,size:"tiny",value:"check",selected:P,sx:{marginLeft:"auto"},onChange:()=>{if(R(e=>!e),!i.layoutDirectionPropTypeUtil.isValid(C)){const e=C||null;return e?void T(i.layoutDirectionPropTypeUtil.create({row:e,column:e})):void T(null)}T(k?.column??k?.row??null)},disabled:B,isPlaceholder:j},o.createElement(I,{fontSize:"tiny"})))),o.createElement(c.Stack,{direction:"row",gap:2,flexWrap:"nowrap",ref:n},o.createElement(c.Grid,{container:!0,gap:.75,alignItems:"center"},o.createElement(c.Grid,{item:!0,xs:12},o.createElement(f.ControlFormLabel,null,(0,u.__)("Column","elementor"))),o.createElement(c.Grid,{item:!0,xs:12},o.createElement(Control,{bind:"column",ariaLabel:(0,u.__)("Column gap","elementor"),isLinked:P,anchorRef:n}))),o.createElement(c.Grid,{container:!0,gap:.75,alignItems:"center"},o.createElement(c.Grid,{item:!0,xs:12},o.createElement(f.ControlFormLabel,null,(0,u.__)("Row","elementor"))),o.createElement(c.Grid,{item:!0,xs:12},o.createElement(Control,{bind:"row",ariaLabel:(0,u.__)("Row gap","elementor"),isLinked:P,anchorRef:n})))))},Control=({bind:e,ariaLabel:n,isLinked:r,anchorRef:i})=>r?o.createElement(k.SizeControl,{anchorRef:i,ariaLabel:n}):o.createElement(p.PropKeyProvider,{bind:e},o.createElement(k.SizeControl,{anchorRef:i,ariaLabel:n}))},"./packages/packages/libs/editor-controls/src/controls/html-tag-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{HtmlTagControl:function(){return v}});var o=r("react"),i=r("@elementor/editor-elements"),s=r("@elementor/editor-props"),a=r("@elementor/editor-ui"),c=r("@elementor/ui"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/conditional-control-infotip.tsx"),g=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),b=r("./packages/packages/libs/editor-controls/src/create-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const k=(0,c.styled)(c.Select)(()=>({".MuiSelect-select.Mui-disabled":{cursor:"not-allowed"}})),v=(0,b.createControl)(({options:e,onChange:n,fallbackLabels:r={}})=>{const{value:b,setValue:v,disabled:x,placeholder:w}=(0,p.useBoundProp)(s.stringPropTypeUtil),E=(0,i.getElementLabel)()??"element",C={title:(0,u.__)("HTML Tag","elementor"),description:(0,u.__)("The tag is locked to 'a' tag because this %s has a link. To pick a different tag, remove the link first.","elementor").replace("%s",E),isEnabled:!!x},findOptionByValue=n=>e.find(e=>e.value===n);return o.createElement(g.default,null,o.createElement(f.ConditionalControlInfotip,C,o.createElement(k,{sx:{overflow:"hidden",cursor:x?"not-allowed":void 0},displayEmpty:!0,size:"tiny",renderValue:e=>{if(e)return findOptionByValue(e)?.label||r[e]||e;if(!w)return"";const n=findOptionByValue(w),i=n?.label||w;return o.createElement(c.Typography,{component:"span",variant:"caption",color:"text.tertiary"},i)},value:b??"",onChange:e=>{const r=e.target.value||null;n?.(r,b),v(r)},disabled:x,fullWidth:!0},e.map(({label:e,...n})=>o.createElement(a.MenuListItem,_extends({key:n.value},n,{value:n.value??""}),e)))))})},"./packages/packages/libs/editor-controls/src/controls/image-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ImageControl:function(){return v}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),f=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),g=r("./packages/packages/libs/editor-controls/src/hooks/use-unfiltered-files-upload.ts"),b=r("./packages/packages/libs/editor-controls/src/controls/image-media-control.tsx"),k=r("./packages/packages/libs/editor-controls/src/controls/select-control.tsx");const v=(0,f.createControl)(({sizes:e,label:n=(0,a.__)("Image","elementor")})=>{const r=(0,c.useBoundProp)(i.imagePropTypeUtil);return o.createElement(c.PropProvider,r,o.createElement(s.Stack,{gap:1.5},o.createElement(p.ControlLabel,null,n),o.createElement(ImageSrcControl,null),o.createElement(s.Grid,{container:!0,gap:1.5,alignItems:"center",flexWrap:"nowrap"},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlFormLabel,null,(0,a.__)("Resolution","elementor"))),o.createElement(s.Grid,{item:!0,xs:6,sx:{overflow:"hidden"}},o.createElement(ImageSizeControl,{sizes:e})))))}),ImageSrcControl=()=>{const{data:e}=(0,g.useUnfilteredFilesUpload)(),n=e?["image","svg"]:["image"];return o.createElement(c.PropKeyProvider,{bind:"src"},o.createElement(b.ImageMediaControl,{mediaTypes:n}))},ImageSizeControl=({sizes:e})=>o.createElement(c.PropKeyProvider,{bind:"size"},o.createElement(k.SelectControl,{options:e}))},"./packages/packages/libs/editor-controls/src/controls/image-media-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ImageMediaControl:function(){return g}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@elementor/wp-media"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx");const g=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(({mediaTypes:e=["image"]})=>{const{value:n,setValue:r,propType:g}=(0,p.useBoundProp)(i.imageSrcPropTypeUtil),{id:b,url:k}=n??{},{data:v,isFetching:x}=(0,c.useWpMediaAttachment)(b?.value||null),w=v?.url??k?.value??null,{open:E}=(0,c.useWpMediaFrame)({mediaTypes:e,multiple:!1,selected:b?.value||null,onSelect:e=>{r({id:{$$type:"image-attachment-id",value:e.id},url:null})}});return o.createElement(f.default,null,o.createElement(a.Card,{variant:"outlined"},o.createElement(a.CardMedia,{image:w,sx:{height:g.meta.isDynamic?134:150}},x?o.createElement(a.Stack,{justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},o.createElement(a.CircularProgress,null)):o.createElement(o.Fragment,null)),o.createElement(a.CardOverlay,null,o.createElement(a.Stack,{gap:1},o.createElement(a.Button,{size:"tiny",color:"inherit",variant:"outlined",onClick:()=>E({mode:"browse"})},(0,u.__)("Select image","elementor")),o.createElement(a.Button,{size:"tiny",variant:"text",color:"inherit",startIcon:o.createElement(s.UploadIcon,null),onClick:()=>E({mode:"upload"})},(0,u.__)("Upload","elementor"))))))})},"./packages/packages/libs/editor-controls/src/controls/inline-editing-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{InlineEditingControl:function(){return p}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/inline-editor.tsx"),u=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const p=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(({sx:e,attributes:n,props:r})=>{const{value:p,setValue:f}=(0,a.useBoundProp)(i.htmlPropTypeUtil);return o.createElement(u.default,null,o.createElement(s.Box,_extends({sx:{p:.8,border:"1px solid",borderColor:"grey.200",borderRadius:"8px",transition:"border-color .2s ease, box-shadow .2s ease","&:hover":{borderColor:"black"},"&:focus-within":{borderColor:"black",boxShadow:"0 0 0 1px black"},"& .ProseMirror:focus":{outline:"none"},"& .ProseMirror":{minHeight:"70px",fontSize:"12px","& a":{color:"inherit"},"& .elementor-inline-editor-reset":{margin:0,padding:0}},".strip-styles *":{all:"unset"},...e}},n,r),o.createElement(c.InlineEditor,{value:p||"",setValue:e=>f(e??"")})))})},"./packages/packages/libs/editor-controls/src/controls/key-value-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{KeyValueControl:function(){return g}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),p=r("./packages/packages/libs/editor-controls/src/utils/escape-html-attr.ts"),f=r("./packages/packages/libs/editor-controls/src/controls/text-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const getInitialFieldValue=e=>{const n=e;return e&&"object"==typeof e&&"dynamic"!==n.$$type&&n.value||""},g=(0,u.createControl)((e={})=>{const{value:n,setValue:r,...u}=(0,c.useBoundProp)(i.keyValuePropTypeUtil),[g,b]=(0,o.useState)(""),[k,v]=(0,o.useState)(""),[x,w]=(0,o.useState)({key:getInitialFieldValue(n?.key),value:getInitialFieldValue(n?.value)}),E=e.keyName||(0,a.__)("Key","elementor"),C=e.valueName||(0,a.__)("Value","elementor"),{keyHelper:T,valueHelper:_}=e.getHelperText?.(x.key,x.value)||{keyHelper:void 0,valueHelper:void 0},[P,R,A]=(0,o.useMemo)(()=>[e.regexKey?new RegExp(e.regexKey):void 0,e.regexValue?new RegExp(e.regexValue):void 0,e.validationErrorMessage||(0,a.__)("Invalid Format","elementor")],[e.regexKey,e.regexValue,e.validationErrorMessage]);return o.createElement(c.PropProvider,_extends({},u,{value:n,setValue:(e,o,s)=>{const a=s?.bind;if(!a)return;const c=e[a];if((0,i.isTransformable)(c)&&"dynamic"===c.$$type)return void r({...n,[a]:c});const u=i.stringPropTypeUtil.extract(c);w(e=>({...e,[a]:u})),u&&((e,n)=>{if("key"===n&&P){const n=P.test(e);return b(n?"":A),n}if("value"===n&&R){const n=R.test(e);return v(n?"":A),n}return!0})(u,a)?r({...n,[a]:c}):r({...n,[a]:{value:"",$$type:"string"}})}}),o.createElement(s.Grid,{container:!0,gap:1.5},o.createElement(s.Grid,{item:!0,xs:12,display:"flex",flexDirection:"column"},o.createElement(s.FormLabel,{size:"tiny",sx:{pb:1}},E),o.createElement(c.PropKeyProvider,{bind:"key"},o.createElement(f.TextControl,{inputValue:e.escapeHtml?(0,p.escapeHtmlAttr)(x.key):x.key,error:!!g,helperText:T})),!!g&&o.createElement(s.FormHelperText,{error:!0},g)),o.createElement(s.Grid,{item:!0,xs:12,display:"flex",flexDirection:"column"},o.createElement(s.FormLabel,{size:"tiny",sx:{pb:1}},C),o.createElement(c.PropKeyProvider,{bind:"value"},o.createElement(f.TextControl,{inputValue:e.escapeHtml?(0,p.escapeHtmlAttr)(x.value):x.value,error:!!k,inputDisabled:!!g,helperText:_})),!!k&&o.createElement(s.FormHelperText,{error:!0},k))))})},"./packages/packages/libs/editor-controls/src/controls/link-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{LinkControl:function(){return T}});var o=r("react"),i=r("@elementor/editor-elements"),s=r("@elementor/editor-props"),a=r("@elementor/icons"),c=r("@elementor/session"),u=r("@elementor/ui"),p=r("@elementor/utils"),f=r("@wordpress/i18n"),g=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),b=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),k=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),v=r("./packages/packages/libs/editor-controls/src/components/restricted-link-infotip.tsx"),x=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),w=r("./packages/packages/libs/editor-controls/src/controls/query-control.tsx"),E=r("./packages/packages/libs/editor-controls/src/controls/switch-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const C="tiny",T=(0,x.createControl)(e=>{const{value:n,path:r,setValue:a,...x}=(0,g.useBoundProp)(s.linkPropTypeUtil),[C,T]=(0,c.useSessionStorage)(r.join("/")),[_,P]=(0,o.useState)(!!n),{allowCustomValues:R=!0,queryOptions:A,placeholder:N,minInputLength:I=2,context:{elementId:z},label:F=(0,f.__)("Link","elementor"),ariaLabel:B}=e||{},[L,j]=(0,o.useState)((0,i.getLinkInLinkRestriction)(z,n)),V=!_&&L.shouldRestrict,U=(0,o.useMemo)(()=>(0,p.debounce)(()=>{const e=(0,i.getLinkInLinkRestriction)(z,n);e.shouldRestrict&&_&&P(!1),j(e)},300),[z,_,n]);(0,o.useEffect)(()=>{U();const handleInlineLinkChanged=e=>{e.detail.elementId===z&&U()};return window.addEventListener("elementor:inline-link-changed",handleInlineLinkChanged),()=>{window.removeEventListener("elementor:inline-link-changed",handleInlineLinkChanged),U.cancel()}},[z,U]);return o.createElement(g.PropProvider,_extends({},x,{value:n,setValue:a}),o.createElement(u.Stack,{gap:1.5},o.createElement(u.Stack,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",marginInlineEnd:-.75}},o.createElement(k.ControlLabel,null,F),o.createElement(v.RestrictedLinkInfotip,{isVisible:!_,linkInLinkRestriction:L},o.createElement(ToggleIconControl,{disabled:V,active:_,onIconClick:()=>{if(j((0,i.getLinkInLinkRestriction)(z,n)),L.shouldRestrict&&!_)return;const e=!_;P(e),e||null===n||a(null),e&&C?.value&&a(C.value),T({value:C?.value,meta:{isEnabled:e}})},label:(0,f.__)("Toggle link","elementor")}))),o.createElement(u.Collapse,{in:_,timeout:"auto",unmountOnExit:!0},o.createElement(u.Stack,{gap:1.5},o.createElement(g.PropKeyProvider,{bind:"destination"},o.createElement(w.QueryControl,{queryOptions:A,allowCustomValues:R,minInputLength:I,placeholder:N,onSetValue:e=>{const r=e?{...n,destination:e}:null;T({...C,value:r})},ariaLabel:B||F})),o.createElement(g.PropKeyProvider,{bind:"isTargetBlank"},o.createElement(u.Grid,{container:!0,alignItems:"center",flexWrap:"nowrap",justifyContent:"space-between"},o.createElement(u.Grid,{item:!0},o.createElement(b.ControlFormLabel,null,(0,f.__)("Open in a new tab","elementor"))),o.createElement(u.Grid,{item:!0,sx:{marginInlineEnd:-1}},o.createElement(E.SwitchControl,null))))))))}),ToggleIconControl=({disabled:e,active:n,onIconClick:r,label:i})=>o.createElement(u.IconButton,{size:C,onClick:r,"aria-label":i,disabled:e},n?o.createElement(a.MinusIcon,{fontSize:C}):o.createElement(a.PlusIcon,{fontSize:C}))},"./packages/packages/libs/editor-controls/src/controls/linked-dimensions-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{LinkedDimensionsControl:function(){return LinkedDimensionsControl}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-responsive"),a=r("@elementor/icons"),c=r("@elementor/ui"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/control-toggle-button-group.tsx"),k=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const LinkedDimensionsControl=({label:e,isSiteRtl:n=!1,extendedOptions:r,min:g})=>{const k=[(0,o.useRef)(null),(0,o.useRef)(null)],{disabled:v}=(0,p.useBoundProp)(i.sizePropTypeUtil),{value:x,setValue:w,propType:E,placeholder:C,disabled:T}=(0,p.useBoundProp)(i.dimensionsPropTypeUtil),{value:_,placeholder:P,setValue:R}=(0,p.useBoundProp)(),inferIsLinked=()=>!i.dimensionsPropTypeUtil.isValid(_)&&!(!_&&i.dimensionsPropTypeUtil.isValid(P)),[A,N]=(0,o.useState)(()=>inferIsLinked()),I=(0,s.useActiveBreakpoint)();(0,o.useLayoutEffect)(()=>{N(inferIsLinked)},[I]);const z=e.toLowerCase(),F=A?a.LinkIcon:a.DetachIcon,B=(0,u.__)("Link %s","elementor").replace("%s",z),L=(0,u.__)("Unlink %s","elementor").replace("%s",z),j=v||T,V={propType:E,value:x,placeholder:C,setValue:w,isDisabled:()=>T},U=!_&&(C||P);return o.createElement(p.PropProvider,V,o.createElement(c.Stack,{direction:"row",gap:2,flexWrap:"nowrap"},o.createElement(f.ControlFormLabel,null,e),o.createElement(c.Tooltip,{title:A?L:B,placement:"top"},o.createElement(b.StyledToggleButton,{"aria-label":A?L:B,size:"tiny",value:"check",selected:A,sx:{marginLeft:"auto"},onChange:()=>{if(N(e=>!e),!i.dimensionsPropTypeUtil.isValid(_)){const e=_||null;return e?void R(i.dimensionsPropTypeUtil.create({"block-start":e,"block-end":e,"inline-start":e,"inline-end":e})):void R(null)}const e=x?.["block-start"]??x?.["inline-end"]??x?.["block-end"]??x?.["inline-start"]??null;R(e||null)},disabled:j,isPlaceholder:U},o.createElement(F,{fontSize:"tiny"})))),function getCssDimensionProps(e,n){return[[{bind:"block-start",label:(0,u.__)("Top","elementor"),ariaLabel:(0,u.sprintf)((0,u.__)("%s top","elementor"),e),icon:o.createElement(a.SideTopIcon,{fontSize:"tiny"})},{bind:"inline-end",label:n?(0,u.__)("Left","elementor"):(0,u.__)("Right","elementor"),ariaLabel:n?(0,u.sprintf)((0,u.__)("%s left","elementor"),e):(0,u.sprintf)((0,u.__)("%s right","elementor"),e),icon:n?o.createElement(a.SideLeftIcon,{fontSize:"tiny"}):o.createElement(a.SideRightIcon,{fontSize:"tiny"})}],[{bind:"block-end",label:(0,u.__)("Bottom","elementor"),ariaLabel:(0,u.sprintf)((0,u.__)("%s bottom","elementor"),e),icon:o.createElement(a.SideBottomIcon,{fontSize:"tiny"})},{bind:"inline-start",label:n?(0,u.__)("Right","elementor"):(0,u.__)("Left","elementor"),ariaLabel:n?(0,u.sprintf)((0,u.__)("%s right","elementor"),e):(0,u.sprintf)((0,u.__)("%s left","elementor"),e),icon:n?o.createElement(a.SideRightIcon,{fontSize:"tiny"}):o.createElement(a.SideLeftIcon,{fontSize:"tiny"})}]]}(e,n).map((e,n)=>o.createElement(c.Stack,{direction:"row",gap:2,flexWrap:"nowrap",key:n,ref:k[n]},e.map(({icon:e,...i})=>o.createElement(c.Grid,{container:!0,gap:.75,alignItems:"center",key:i.bind},o.createElement(c.Grid,{item:!0,xs:12},o.createElement(Label,i)),o.createElement(c.Grid,{item:!0,xs:12},o.createElement(Control,{bind:i.bind,ariaLabel:i.ariaLabel,startIcon:e,isLinked:A,extendedOptions:r,anchorRef:k[n],min:g})))))))},Control=({bind:e,ariaLabel:n,startIcon:r,isLinked:i,extendedOptions:s,anchorRef:a,min:c})=>i?o.createElement(k.SizeControl,{ariaLabel:n,startIcon:r,extendedOptions:s,anchorRef:a,min:c}):o.createElement(p.PropKeyProvider,{bind:e},o.createElement(k.SizeControl,{ariaLabel:n,startIcon:r,extendedOptions:s,anchorRef:a,min:c})),Label=({label:e,bind:n})=>o.createElement(p.PropKeyProvider,{bind:n},o.createElement(g.ControlLabel,null,e))},"./packages/packages/libs/editor-controls/src/controls/number-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{NumberControl:function(){return f}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/number-input.tsx"),u=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),p=r("./packages/packages/libs/editor-controls/src/create-control.tsx");const isEmptyOrNaN=e=>null==e||""===e||Number.isNaN(Number(e)),f=(0,p.createControl)(({placeholder:e,max:n=Number.MAX_SAFE_INTEGER,min:r=-Number.MAX_SAFE_INTEGER,step:p=1,shouldForceInt:f=!1,startIcon:g})=>{const{value:b,setValue:k,placeholder:v,disabled:x,restoreValue:w}=(0,a.useBoundProp)(i.numberPropTypeUtil);return o.createElement(u.default,null,o.createElement(c.NumberInput,{size:"tiny",type:"number",fullWidth:!0,disabled:x,value:isEmptyOrNaN(b)?"":b,onInput:e=>{const{value:o,validity:{valid:i}}=e.target;let s;if(isEmptyOrNaN(o))s=null;else{const e=f?+parseInt(o):Number(o);s=Math.min(Math.max(e,r??Number.MIN_SAFE_INTEGER),n??Number.MAX_SAFE_INTEGER)}k(s,void 0,{validation:()=>i})},onBlur:w,placeholder:e??(isEmptyOrNaN(v)?"":String(v)),inputProps:{step:p,min:r},InputProps:{startAdornment:g?o.createElement(s.InputAdornment,{position:"start",disabled:x},g):void 0}}))})},"./packages/packages/libs/editor-controls/src/controls/position-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{PositionControl:function(){return PositionControl}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-ui"),a=r("@elementor/icons"),c=r("@elementor/ui"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),g=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const b=[{label:(0,u.__)("Center center","elementor"),value:"center center"},{label:(0,u.__)("Center left","elementor"),value:"center left"},{label:(0,u.__)("Center right","elementor"),value:"center right"},{label:(0,u.__)("Top center","elementor"),value:"top center"},{label:(0,u.__)("Top left","elementor"),value:"top left"},{label:(0,u.__)("Top right","elementor"),value:"top right"},{label:(0,u.__)("Bottom center","elementor"),value:"bottom center"},{label:(0,u.__)("Bottom left","elementor"),value:"bottom left"},{label:(0,u.__)("Bottom right","elementor"),value:"bottom right"},{label:(0,u.__)("Custom","elementor"),value:"custom"}],PositionControl=()=>{const e=(0,p.useBoundProp)(i.positionPropTypeUtil),n=(0,p.useBoundProp)(i.stringPropTypeUtil),r=!!e.value;return o.createElement(c.Grid,{container:!0,spacing:1.5},o.createElement(c.Grid,{item:!0,xs:12},o.createElement(c.Grid,{container:!0,gap:2,alignItems:"center",flexWrap:"nowrap"},o.createElement(c.Grid,{item:!0,xs:6},o.createElement(f.ControlFormLabel,null,(0,u.__)("Object position","elementor"))),o.createElement(c.Grid,{item:!0,xs:6,sx:{overflow:"hidden"}},o.createElement(c.Select,{size:"tiny",disabled:n.disabled,value:(e.value?"custom":n.value)??"",onChange:r=>{const o=r.target.value||null;"custom"===o?e.setValue({x:null,y:null}):n.setValue(o)},fullWidth:!0},b.map(({label:e,value:n})=>o.createElement(s.MenuListItem,{key:n,value:n??""},e)))))),r&&o.createElement(p.PropProvider,e,o.createElement(c.Grid,{item:!0,xs:12},o.createElement(c.Grid,{container:!0,spacing:1.5},o.createElement(c.Grid,{item:!0,xs:6},o.createElement(p.PropKeyProvider,{bind:"x"},o.createElement(g.SizeControl,{startIcon:o.createElement(a.LetterXIcon,{fontSize:"tiny"}),min:-Number.MAX_SAFE_INTEGER}))),o.createElement(c.Grid,{item:!0,xs:6},o.createElement(p.PropKeyProvider,{bind:"y"},o.createElement(g.SizeControl,{startIcon:o.createElement(a.LetterYIcon,{fontSize:"tiny"}),min:-Number.MAX_SAFE_INTEGER})))))))}},"./packages/packages/libs/editor-controls/src/controls/query-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{QueryControl:function(){return b}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/http-client"),a=r("@elementor/icons"),c=r("@elementor/utils"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/autocomplete.tsx"),g=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx");const b=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(e=>{const{value:n,setValue:r}=(0,p.useBoundProp)(),{allowCustomValues:b=!0,queryOptions:{url:k,params:v={}},placeholder:x,minInputLength:w=2,onSetValue:E,ariaLabel:C}=e||{},T=x||(0,u.__)("Search","elementor"),[_,P]=(0,o.useState)(function generateFirstLoadedOption(e){const n=e?.id?.value,r=e?.label?.value,o=e?.id?.$$type||"url";return n&&r&&"number"===o?[{id:n.toString(),label:r}]:[]}(n?.value)),updateOptions=e=>{P([]),!e||!k||e.length<w||R({...v,term:e})},R=(0,o.useMemo)(()=>(0,c.debounce)(e=>async function fetchOptions(e,n){if(!n||!e)return[];try{const{data:r}=await(0,s.httpService)().get(e,{params:n});return r.data.value}catch{return[]}}(k,e).then(e=>{P(function formatOptions(e){const n=(0,f.isCategorizedOptionPool)(e)?"groupLabel":"label";return e.sort((e,r)=>e[n]&&r[n]?e[n].localeCompare(r[n]):0)}(e))}),400),[k]);return o.createElement(g.default,null,o.createElement(f.Autocomplete,{options:_,allowCustomValues:b,placeholder:T,startAdornment:o.createElement(a.SearchIcon,{fontSize:"tiny"}),value:n?.value?.id?.value||n?.value,onOptionChange:e=>{if(null===e)return r(null),void E?.(null);const n={$$type:"query",value:{id:i.numberPropTypeUtil.create(e),label:i.stringPropTypeUtil.create((0,f.findMatchingOption)(_,e)?.label||null)}};r(n),E?.(n)},onTextChange:e=>{if(!e)return r(null),void E?.(null);const n=e?.trim()||"",o=n?i.urlPropTypeUtil.create(n):null;r(o),E?.(o),updateOptions(e)},minInputLength:w,disablePortal:!1,inputProps:{...C?{"aria-label":C}:{}}}))})},"./packages/packages/libs/editor-controls/src/controls/repeatable-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{RepeatableControl:function(){return _}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/disable-item-action.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/duplicate-item-action.tsx"),f=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/remove-item-action.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/edit-item-popover.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/items-container.tsx"),k=r("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),v=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),x=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-header.tsx"),w=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),E=r("./packages/packages/libs/editor-controls/src/hooks/use-repeatable-control-context.ts"),C=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const T=/\$\{([^}]+)\}/g,_=(0,w.createControl)(({repeaterLabel:e,childControlConfig:n,showDuplicate:r,showToggle:s,initialValues:k,patternLabel:v,placeholder:w,propKey:C,addItemTooltipProps:T})=>{const{propTypeUtil:_,isItemDisabled:P}=n;if(!_)return null;const R=(0,o.useMemo)(()=>(0,i.createArrayPropUtils)(_.key,_.schema,C),[_.key,_.schema,C]),A=(0,o.useMemo)(()=>({...n,placeholder:w||"",patternLabel:v||""}),[n,w,v]),{propType:N,value:I,setValue:z}=(0,a.useBoundProp)(R);return o.createElement(a.PropProvider,{propType:N,value:I,setValue:z},o.createElement(E.RepeatableControlContext.Provider,{value:A},o.createElement(c.ControlRepeater,{initial:_.create(k||null),propTypeUtil:R,isItemDisabled:P},o.createElement(x.RepeaterHeader,{label:e},o.createElement(c.TooltipAddItemAction,_extends({},T,{newItemIndex:0,ariaLabel:e}))),o.createElement(b.ItemsContainer,{isSortable:!1},o.createElement(c.Item,{Icon:ItemIcon,Label:ItemLabel,actions:o.createElement(o.Fragment,null,r&&o.createElement(p.DuplicateItemAction,null),s&&o.createElement(u.DisableItemAction,null),o.createElement(f.RemoveItemAction,null))})),o.createElement(g.EditItemPopover,null,o.createElement(Content,null)))))}),ItemIcon=()=>o.createElement(o.Fragment,null),Content=()=>{const{component:e,props:n={}}=(0,E.useRepeatableControlContext)();return o.createElement(k.PopoverContent,{p:1.5},o.createElement(v.PopoverGridContainer,null,o.createElement(e,n)))},getNestedValue=(e,n)=>{let r={};const o=n.split("."),i=o.slice(-1)[0];let s=o.reduce((e,n,i)=>(i===o.length-2&&(r=e),e&&"object"==typeof e?e[n]:{}),e);s=s||"";const a=r?.$$type,c=r?.value;return"unit"===i&&"size"===a&&"custom"===c?.unit?c?.size?"":C.CUSTOM_SIZE_LABEL:s},isEmptyValue=e=>"string"==typeof e?""===e.trim():!!Number.isNaN(e)||(Array.isArray(e)?0===e.length:"object"==typeof e&&null!==e&&0===Object.keys(e).length),ItemLabel=({value:e})=>{const{placeholder:n,patternLabel:r,props:i}=(0,E.useRepeatableControlContext)(),a=((e,n)=>{const r=getAllProperties(e).map(e=>getNestedValue(n,e));return!(0===r.length||!r.some(e=>null==e)&&!r.every(isEmptyValue))})(r,e),c=a?n:(u=r,(p=e)?u.replace(T,(e,n)=>{const r=getNestedValue(p,n);return"object"!=typeof r||null===r||Array.isArray(r)?Array.isArray(r)?r.join(", "):String(r??""):"name"in r&&r.name?r.name:JSON.stringify(r)}):u);var u,p;const f=((e,n)=>e?"text.disabled":n?"text.tertiary":"text.primary")(!!i?.readOnly,a);return o.createElement(s.Box,{component:"span",color:f},c)},getAllProperties=e=>e.match(T)?.map(e=>e.slice(2,-1))||[]},"./packages/packages/libs/editor-controls/src/controls/select-control-wrapper.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SelectControlWrapper:function(){return c}});var o=r("react"),i=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),s=r("./packages/packages/libs/editor-controls/src/controls/select-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const a={"off-canvas":()=>{const e=window,n=e.elementor.config.document.id,r=e.elementor.$previewContents[0].querySelectorAll(`[data-elementor-id="${n}"] .elementor-widget-off-canvas.elementor-element-edit-mode`);return Array.from(r).map(e=>({label:e.querySelector(".e-off-canvas")?.getAttribute("aria-label")??"",value:e.dataset.id}))}},c=(0,i.createControl)(({collectionId:e,options:n,...r})=>{const i=((e,n)=>{const[r,i]=(0,o.useState)(n??[]);return(0,o.useEffect)(()=>{e&&a[e]?i(a[e]()):i(n??[])},[e,n]),r})(e,n);return o.createElement(s.SelectControl,_extends({options:i},r))})},"./packages/packages/libs/editor-controls/src/controls/select-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SelectControl:function(){return g}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-ui"),a=r("@elementor/ui"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),p=r("./packages/packages/libs/editor-controls/src/create-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const f={MenuListProps:{sx:{maxHeight:"160px"}}},g=(0,p.createControl)(({options:e,onChange:n,MenuProps:r=f,ariaLabel:p})=>{const{value:g,setValue:b,disabled:k,placeholder:v}=(0,c.useBoundProp)(i.stringPropTypeUtil),x=k||0===e.length;return o.createElement(u.default,null,o.createElement(a.Select,{sx:{overflow:"hidden"},displayEmpty:!0,size:"tiny",MenuProps:r,"aria-label":p||v,renderValue:n=>{const findOptionByValue=n=>e.find(e=>e.value===n);if(!n||""===n){if(v){const e=findOptionByValue(v),n=e?.label||v;return o.createElement(a.Typography,{component:"span",variant:"caption",color:"text.tertiary"},n)}return""}const r=findOptionByValue(n);return r?.label||n},value:g??"",onChange:e=>{const r=e.target.value||null;n?.(r,g),b(r)},disabled:x,fullWidth:!0},e.map(({label:e,...n})=>o.createElement(s.MenuListItem,_extends({key:n.value},n,{value:n.value??""}),e))))})},"./packages/packages/libs/editor-controls/src/controls/selection-size-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SelectionSizeControl:function(){return f}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),u=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),p=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const f=(0,u.createControl)(({selectionLabel:e,sizeLabel:n,selectionConfig:r,sizeConfigMap:u})=>{const{value:f,setValue:g,propType:b}=(0,a.useBoundProp)(i.selectionSizePropTypeUtil),k=(0,o.useRef)(null),v=n.replace(/\s+/g,"-").toLowerCase(),x=(0,o.useMemo)(()=>{switch(f.selection.$$type){case"key-value":return u[f?.selection?.value.value.value||""];case"string":return u[f?.selection?.value||""];default:return null}},[f,u]),w=r.component;return o.createElement(a.PropProvider,{value:f,setValue:g,propType:b},o.createElement(s.Grid,{container:!0,spacing:1.5,ref:k},o.createElement(s.Grid,{item:!0,xs:6,sx:{display:"flex",alignItems:"center"}},o.createElement(c.ControlFormLabel,null,e)),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(a.PropKeyProvider,{bind:"selection"},o.createElement(w,r.props))),x&&o.createElement(o.Fragment,null,o.createElement(s.Grid,{item:!0,xs:6,sx:{display:"flex",alignItems:"center"}},o.createElement(c.ControlFormLabel,{htmlFor:v},n)),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(a.PropKeyProvider,{bind:"size"},o.createElement(p.SizeControl,{anchorRef:k,variant:x.variant,units:x.units,defaultUnit:x.defaultUnit,id:v}))))))})},"./packages/packages/libs/editor-controls/src/controls/size-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{CUSTOM_SIZE_LABEL:function(){return w},SizeControl:function(){return E}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-responsive"),a=r("@elementor/ui"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/size-control/size-input.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/text-field-popover.tsx"),f=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),g=r("./packages/packages/libs/editor-controls/src/hooks/use-size-extended-options.ts"),b=r("./packages/packages/libs/editor-controls/src/hooks/use-sync-external-state.tsx"),k=r("./packages/packages/libs/editor-controls/src/utils/size-control.ts");const v={length:"px",angle:"deg",time:"ms"},x={length:[...k.lengthUnits],angle:[...k.angleUnits],time:[...k.timeUnits]},w="fx",E=(0,f.createControl)(({variant:e="length",defaultUnit:n,units:r,placeholder:f,startIcon:w,anchorRef:E,extendedOptions:C,disableCustom:T,min:_=0,enablePropTypeUnits:P=!1,id:R,ariaLabel:A})=>{const{value:N,setValue:I,disabled:z,restoreValue:F,placeholder:B,propType:L}=(0,c.useBoundProp)(i.sizePropTypeUtil),j=n??B?.unit??v[e],V=(0,s.useActiveBreakpoint)(),U=function resolveUnits(e,n,r,o,i){const s=[...x[r]];if(!n)return[...o??s,...i||[]];return e.settings?.available_units??s}(L,P,e,r,(0,g.useSizeExtendedOptions)(C||[],T??!1)),H=(0,a.usePopupState)({variant:"popover"}),q=(0,o.useMemo)(()=>function createStateFromSizeProp(e,n,r="",o=""){const i=e?.unit??n,s=e?.size??r;return{numeric:(0,k.isUnitExtendedOption)(i)||isNaN(Number(s))||!s&&0!==s?k.DEFAULT_SIZE:Number(s),custom:"custom"===i?String(s):o,unit:i}}(N,j),[N,j]),[K,W]=(0,b.useSyncExternalState)({external:q,setExternal:(e,n,r)=>I(extractValueFromState(e),n,r),persistWhen:e=>!!extractValueFromState(e),fallback:e=>({unit:e?.unit??j,numeric:e?.numeric??k.DEFAULT_SIZE,custom:e?.custom??""})}),{size:G=k.DEFAULT_SIZE,unit:J=j}=extractValueFromState(K,!0)||{},handleSizeChange=e=>{const n=e.target.value,r=e.target.validity.valid;"auto"!==J?W(e=>({...e,["custom"===J?"custom":"numeric"]:formatSize(n,J),unit:J}),void 0,{validation:()=>r}):W(e=>({...e,unit:J}))},Y=o.useCallback(()=>{H&&H.isOpen&&H.close()},[H]);return(0,o.useEffect)(()=>{Y()},[V]),o.createElement(o.Fragment,null,o.createElement(u.SizeInput,{disabled:z,size:G,unit:J,units:[...U],placeholder:f,startIcon:w,handleSizeChange:handleSizeChange,handleUnitChange:e=>{"custom"===e&&H.open(E?.current),W(n=>({...n,unit:e}))},onBlur:F,onClick:e=>{e.target.closest("input")&&"custom"===K.unit&&H.open(E?.current)},popupState:H,min:_,id:R,ariaLabel:A}),E?.current&&H.isOpen&&o.createElement(p.TextFieldPopover,{popupState:H,anchorRef:E,restoreValue:F,value:G,onChange:handleSizeChange}))});function formatSize(e,n){return(0,k.isUnitExtendedOption)(n)?"auto"===n?"":String(e??""):e||0===e?Number(e):NaN}function extractValueFromState(e,n=!1){if(!e)return null;if(!e?.unit)return{size:k.DEFAULT_SIZE,unit:k.DEFAULT_UNIT};const{unit:r}=e;if("auto"===r)return{size:"",unit:r};if("custom"===r)return{size:e.custom??"",unit:"custom"};const o=e.numeric;return n||null!=o&&!Number.isNaN(o)?{size:o,unit:r}:null}},"./packages/packages/libs/editor-controls/src/controls/stroke-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{StrokeControl:function(){return v}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/section-content.tsx"),f=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),g=r("./packages/packages/libs/editor-controls/src/controls/color-control.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const k=["px","em","rem"],v=(0,f.createControl)(()=>{const e=(0,c.useBoundProp)(i.strokePropTypeUtil),n=(0,o.useRef)(null);return o.createElement(c.PropProvider,e,o.createElement(p.SectionContent,null,o.createElement(x,{bind:"width",label:(0,a.__)("Stroke width","elementor"),ref:n},o.createElement(b.SizeControl,{units:k,anchorRef:n})),o.createElement(x,{bind:"color",label:(0,a.__)("Stroke color","elementor")},o.createElement(g.ColorControl,null))))}),x=(0,o.forwardRef)(({bind:e,label:n,children:r},i)=>o.createElement(c.PropKeyProvider,{bind:e},o.createElement(s.Grid,{container:!0,gap:2,alignItems:"center",flexWrap:"nowrap",ref:i},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlFormLabel,null,n)),o.createElement(s.Grid,{item:!0,xs:6},r))))},"./packages/packages/libs/editor-controls/src/controls/svg-media-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SvgMediaControl:function(){return A}});var o=r("react"),i=r("@elementor/editor-current-user"),s=r("@elementor/editor-props"),a=r("@elementor/icons"),c=r("@elementor/ui"),u=r("@elementor/wp-media"),p=r("@wordpress/i18n"),f=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),g=r("./packages/packages/libs/editor-controls/src/components/conditional-control-infotip.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/enable-unfiltered-modal.tsx"),k=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),v=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),x=r("./packages/packages/libs/editor-controls/src/hooks/use-unfiltered-files-upload.ts");const w="transparent",E="#c1c1c1",C=`linear-gradient(45deg, ${E} 25%, ${w} 0, ${w} 75%, ${E} 0, ${E})`,T=(0,c.styled)(c.Card)`
	background-color: white;
	background-image: ${C}, ${C};
	background-size: ${8}px ${8}px;
	background-position:
		0 0,
		${4}px ${4}px;
	border: none;
`,_=(0,c.styled)(c.Stack)`
	position: relative;
	height: 140px;
	object-fit: contain;
	padding: 5px;
	justify-content: center;
	align-items: center;
	background-color: rgba( 255, 255, 255, 0.37 );
`,P={mode:"browse"},R={mode:"upload"},A=(0,v.createControl)(()=>{const{value:e,setValue:n}=(0,f.useBoundProp)(s.imageSrcPropTypeUtil),{id:r,url:v}=e??{},{data:w,isFetching:E}=(0,u.useWpMediaAttachment)(r?.value||null),C=w?.url??v?.value??null,{data:A}=(0,x.useUnfilteredFilesUpload)(),[N,I]=(0,o.useState)(!1),{isAdmin:z}=(0,i.useCurrentUserCapabilities)(),{open:F}=(0,u.useWpMediaFrame)({mediaTypes:["svg"],multiple:!1,selected:r?.value||null,onSelect:e=>{n({id:{$$type:"image-attachment-id",value:e.id},url:null})}}),handleClick=e=>{A||e!==R?F(e):I(!0)},B={title:(0,p.__)("Sorry, you can't upload that file yet.","elementor"),description:o.createElement(o.Fragment,null,(0,p.__)("To upload them anyway, ask the site administrator to enable unfiltered","elementor"),o.createElement("br",null),(0,p.__)("file uploads.","elementor")),isEnabled:!z};return o.createElement(c.Stack,{gap:1,"aria-label":"SVG Control"},o.createElement(b.EnableUnfilteredModal,{open:N,onClose:e=>{I(!1),e&&F(R)}}),o.createElement(k.default,null,o.createElement(T,{variant:"outlined"},o.createElement(_,null,E?o.createElement(c.CircularProgress,{role:"progressbar"}):o.createElement(c.CardMedia,{component:"img",image:C,alt:(0,p.__)("Preview SVG","elementor"),sx:{maxHeight:"140px",width:"50px"}})),o.createElement(c.CardOverlay,{sx:{"&:hover":{backgroundColor:"rgba( 0, 0, 0, 0.75 )"}}},o.createElement(c.Stack,{gap:1},o.createElement(c.Button,{size:"tiny",color:"inherit",variant:"outlined",onClick:()=>handleClick(P),"aria-label":"Select SVG"},(0,p.__)("Select SVG","elementor")),o.createElement(g.ConditionalControlInfotip,B,o.createElement("span",null,o.createElement(c.ThemeProvider,{colorScheme:z?"light":"dark"},o.createElement(c.Button,{size:"tiny",variant:"text",color:"inherit",startIcon:o.createElement(a.UploadIcon,null),disabled:!z,onClick:()=>z&&handleClick(R),"aria-label":"Upload SVG"},(0,p.__)("Upload","elementor"))))))))))})},"./packages/packages/libs/editor-controls/src/controls/switch-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{SwitchControl:function(){return c}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/use-bound-prop.ts");const c=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(()=>{const{value:e,setValue:n,disabled:r}=(0,a.useBoundProp)(i.booleanPropTypeUtil);return o.createElement(s.Box,{sx:{display:"flex",justifyContent:"flex-end"}},o.createElement(s.Switch,{checked:!!e,onChange:e=>{n(e.target.checked)},size:"small",disabled:r,inputProps:{...r?{style:{opacity:0}}:{}}}))})},"./packages/packages/libs/editor-controls/src/controls/text-area-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TextAreaControl:function(){return u}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx");const u=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(({placeholder:e,ariaLabel:n})=>{const{value:r,setValue:u,disabled:p}=(0,a.useBoundProp)(i.stringPropTypeUtil);return o.createElement(c.default,null,o.createElement(s.TextField,{size:"tiny",multiline:!0,fullWidth:!0,minRows:5,disabled:p,value:r??"",onChange:e=>{u(e.target.value)},placeholder:e,inputProps:{...n?{"aria-label":n}:{}}}))})},"./packages/packages/libs/editor-controls/src/controls/text-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TextControl:function(){return u}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx");const u=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(({placeholder:e,error:n,inputValue:r,inputDisabled:u,helperText:p,sx:f,ariaLabel:g})=>{const{value:b,setValue:k,disabled:v}=(0,a.useBoundProp)(i.stringPropTypeUtil);return o.createElement(c.default,null,o.createElement(s.TextField,{size:"tiny",fullWidth:!0,disabled:u??v,value:r??b??"",onChange:e=>k(e.target.value),placeholder:e,error:n,helperText:p,sx:f,inputProps:{...g?{"aria-label":g}:{}}}))})},"./packages/packages/libs/editor-controls/src/controls/toggle-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ToggleControl:function(){return p}});var o=r("react"),i=r("@elementor/editor-props"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),a=r("./packages/packages/libs/editor-controls/src/components/control-toggle-button-group.tsx"),c=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),u=r("./packages/packages/libs/editor-controls/src/utils/convert-toggle-options-to-atomic.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const p=(0,c.createControl)(({options:e,fullWidth:n=!1,size:r="tiny",exclusive:c=!0,maxItems:p,convertOptions:f=!1})=>{const{value:g,setValue:b,placeholder:k,disabled:v}=(0,s.useBoundProp)(i.stringPropTypeUtil),x=f?(0,u.convertToggleOptionsToAtomic)(e):e,w=x.filter(e=>e.exclusive).map(e=>e.value),E={items:x,maxItems:p,fullWidth:n,size:r,placeholder:k};return c?o.createElement(a.ControlToggleButtonGroup,_extends({},E,{value:g??null,onChange:b,disabled:v,exclusive:!0})):o.createElement(a.ControlToggleButtonGroup,_extends({},E,{value:g?.split(" ")??[],onChange:e=>{const n=e[e.length-1],r=w.includes(n)?[n]:e?.filter(e=>!w.includes(e));b(r?.join(" ")||null)},disabled:v,exclusive:!1}))})},"./packages/packages/libs/editor-controls/src/controls/transform-control/functions/axis-row.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{AxisRow:function(){return AxisRow}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),a=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),c=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),u=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const AxisRow=({label:e,bind:n,startIcon:r,anchorRef:p,units:f,variant:g="angle"})=>{const b=e.replace(/\s+/g,"-").toLowerCase();return o.createElement(i.Grid,{item:!0,xs:12},o.createElement(c.PopoverGridContainer,{ref:p},o.createElement(i.Grid,{item:!0,xs:6},o.createElement(a.ControlLabel,{htmlFor:b},e)),o.createElement(i.Grid,{item:!0,xs:6},o.createElement(s.PropKeyProvider,{bind:n},o.createElement(u.SizeControl,{anchorRef:p,startIcon:r,units:f,variant:g,min:-Number.MAX_SAFE_INTEGER,id:b})))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/functions/move.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{Move:function(){return Move}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts"),f=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/axis-row.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const g=[{label:(0,c.__)("Move X","elementor"),bind:"x",startIcon:o.createElement(s.ArrowRightIcon,{fontSize:"tiny"}),units:["px","%","em","rem","vw"]},{label:(0,c.__)("Move Y","elementor"),bind:"y",startIcon:o.createElement(s.ArrowDownSmallIcon,{fontSize:"tiny"}),units:["px","%","em","rem","vh"]},{label:(0,c.__)("Move Z","elementor"),bind:"z",startIcon:o.createElement(s.ArrowDownLeftIcon,{fontSize:"tiny"}),units:["px","%","em","rem","vw","vh"]}],Move=()=>{const e=(0,u.useBoundProp)(i.moveTransformPropTypeUtil),n=[(0,o.useRef)(null),(0,o.useRef)(null),(0,o.useRef)(null)];return o.createElement(a.Grid,{container:!0,spacing:1.5},o.createElement(u.PropProvider,e,o.createElement(u.PropKeyProvider,{bind:p.TransformFunctionKeys.move},g.map((e,r)=>o.createElement(f.AxisRow,_extends({key:e.bind},e,{anchorRef:n[r],units:e.units,variant:"length"}))))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/functions/rotate.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{Rotate:function(){return Rotate}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts"),f=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/axis-row.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const g=[{label:(0,c.__)("Rotate X","elementor"),bind:"x",startIcon:o.createElement(s.Arrow360Icon,{fontSize:"tiny"})},{label:(0,c.__)("Rotate Y","elementor"),bind:"y",startIcon:o.createElement(s.Arrow360Icon,{fontSize:"tiny",style:{transform:"scaleX(-1) rotate(-90deg)"}})},{label:(0,c.__)("Rotate Z","elementor"),bind:"z",startIcon:o.createElement(s.RotateClockwiseIcon,{fontSize:"tiny"})}],b=["deg","rad","grad","turn"],Rotate=()=>{const e=(0,u.useBoundProp)(i.rotateTransformPropTypeUtil),n=[(0,o.useRef)(null),(0,o.useRef)(null),(0,o.useRef)(null)];return o.createElement(a.Grid,{container:!0,spacing:1.5},o.createElement(u.PropProvider,e,o.createElement(u.PropKeyProvider,{bind:p.TransformFunctionKeys.rotate},g.map((e,r)=>o.createElement(f.AxisRow,_extends({key:e.bind},e,{anchorRef:n[r],units:b}))))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/functions/scale-axis-row.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ScaleAxisRow:function(){return ScaleAxisRow}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),a=r("./packages/packages/libs/editor-controls/src/components/control-label.tsx"),c=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),u=r("./packages/packages/libs/editor-controls/src/controls/number-control.tsx");const ScaleAxisRow=({label:e,bind:n,startIcon:r,anchorRef:p})=>o.createElement(i.Grid,{item:!0,xs:12},o.createElement(c.PopoverGridContainer,{ref:p},o.createElement(i.Grid,{item:!0,xs:6},o.createElement(a.ControlLabel,null,e)),o.createElement(i.Grid,{item:!0,xs:6},o.createElement(s.PropKeyProvider,{bind:n},o.createElement(u.NumberControl,{step:.1,placeholder:"1",startIcon:r})))))},"./packages/packages/libs/editor-controls/src/controls/transform-control/functions/scale.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{Scale:function(){return Scale}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts"),f=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/scale-axis-row.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const g=[{label:(0,c.__)("Scale X","elementor"),bind:"x",startIcon:o.createElement(s.ArrowRightIcon,{fontSize:"tiny"})},{label:(0,c.__)("Scale Y","elementor"),bind:"y",startIcon:o.createElement(s.ArrowDownSmallIcon,{fontSize:"tiny"})},{label:(0,c.__)("Scale Z","elementor"),bind:"z",startIcon:o.createElement(s.ArrowDownLeftIcon,{fontSize:"tiny"})}],Scale=()=>{const e=(0,u.useBoundProp)(i.scaleTransformPropTypeUtil),n=[(0,o.useRef)(null),(0,o.useRef)(null),(0,o.useRef)(null)];return o.createElement(a.Grid,{container:!0,spacing:1.5},o.createElement(u.PropProvider,e,o.createElement(u.PropKeyProvider,{bind:p.TransformFunctionKeys.scale},g.map((e,r)=>o.createElement(f.ScaleAxisRow,_extends({key:e.bind},e,{anchorRef:n[r]}))))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/functions/skew.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{Skew:function(){return Skew}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts"),f=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/axis-row.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const g=[{label:(0,c.__)("Skew X","elementor"),bind:"x",startIcon:o.createElement(s.ArrowRightIcon,{fontSize:"tiny"})},{label:(0,c.__)("Skew Y","elementor"),bind:"y",startIcon:o.createElement(s.ArrowLeftIcon,{fontSize:"tiny",style:{transform:"scaleX(-1) rotate(-90deg)"}})}],b=["deg","rad","grad","turn"],Skew=()=>{const e=(0,u.useBoundProp)(i.skewTransformPropTypeUtil),n=[(0,o.useRef)(null),(0,o.useRef)(null),(0,o.useRef)(null)];return o.createElement(a.Grid,{container:!0,spacing:1.5},o.createElement(u.PropProvider,e,o.createElement(u.PropKeyProvider,{bind:p.TransformFunctionKeys.skew},g.map((e,r)=>o.createElement(f.AxisRow,_extends({key:e.bind},e,{anchorRef:n[r],units:b}))))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{TransformFunctionKeys:function(){return i},defaultValues:function(){return s},initialRotateValue:function(){return u},initialScaleValue:function(){return c},initialSkewValue:function(){return p},initialTransformValue:function(){return a}});var o=r("@elementor/editor-props");const i={move:"transform-move",scale:"transform-scale",rotate:"transform-rotate",skew:"transform-skew"},s={move:{size:0,unit:"px"},scale:1,rotate:{size:0,unit:"deg"},skew:{size:0,unit:"deg"}},a={$$type:i.move,value:{x:{$$type:"size",value:{size:s.move.size,unit:s.move.unit}},y:{$$type:"size",value:{size:s.move.size,unit:s.move.unit}},z:{$$type:"size",value:{size:s.move.size,unit:s.move.unit}}}},c=o.scaleTransformPropTypeUtil.create({x:o.numberPropTypeUtil.create(s.scale),y:o.numberPropTypeUtil.create(s.scale),z:o.numberPropTypeUtil.create(s.scale)}),u=o.rotateTransformPropTypeUtil.create({x:{$$type:"size",value:{size:s.rotate.size,unit:s.rotate.unit}},y:{$$type:"size",value:{size:s.rotate.size,unit:s.rotate.unit}},z:{$$type:"size",value:{size:s.rotate.size,unit:s.rotate.unit}}}),p=o.skewTransformPropTypeUtil.create({x:{$$type:"size",value:{size:s.skew.size,unit:s.skew.unit}},y:{$$type:"size",value:{size:s.skew.size,unit:s.skew.unit}}})},"./packages/packages/libs/editor-controls/src/controls/transform-control/transform-base-controls/children-perspective-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{ChildrenPerspectiveControl:function(){return ChildrenPerspectiveControl}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const g=["px","%","em","rem"],b={label:(0,a.__)("Perspective","elementor"),bind:"perspective",units:["px","em","rem","vw","vh"]},k=[{label:(0,a.__)("Origin X","elementor"),bind:"x",units:g},{label:(0,a.__)("Origin Y","elementor"),bind:"y",units:g}],ChildrenPerspectiveControl=()=>o.createElement(s.Stack,{direction:"column",spacing:1.5},o.createElement(u.ControlFormLabel,null,(0,a.__)("Children perspective","elementor")),o.createElement(PerspectiveControl,null),o.createElement(PerspectiveOriginControl,null)),PerspectiveControl=()=>o.createElement(c.PropKeyProvider,{bind:"perspective"},o.createElement(ControlFields,{control:b,key:b.bind})),PerspectiveOriginControl=()=>o.createElement(c.PropKeyProvider,{bind:"perspective-origin"},o.createElement(PerspectiveOriginControlProvider,null)),PerspectiveOriginControlProvider=()=>{const e=(0,c.useBoundProp)(i.perspectiveOriginPropTypeUtil);return o.createElement(c.PropProvider,e,k.map(e=>o.createElement(c.PropKeyProvider,{bind:e.bind,key:e.bind},o.createElement(ControlFields,{control:e}))))},ControlFields=({control:e})=>{const n=o.useRef(null);return o.createElement(p.PopoverGridContainer,{ref:n},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlFormLabel,null,e.label)),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(f.SizeControl,{variant:"length",units:e.units,anchorRef:n,disableCustom:!0})))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/transform-base-controls/transform-origin-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransformOriginControl:function(){return TransformOriginControl}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("@wordpress/i18n"),c=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),u=r("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),p=r("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx");const g=["px","%","em","rem"],b=g.filter(e=>"%"!==e),k=[{label:(0,a.__)("Origin X","elementor"),bind:"x",units:g},{label:(0,a.__)("Origin Y","elementor"),bind:"y",units:g},{label:(0,a.__)("Origin Z","elementor"),bind:"z",units:b}],TransformOriginControl=()=>o.createElement(s.Stack,{direction:"column",spacing:1.5},o.createElement(u.ControlFormLabel,null,(0,a.__)("Transform","elementor")),k.map(e=>o.createElement(ControlFields,{control:e,key:e.bind}))),ControlFields=({control:e})=>{const n=(0,c.useBoundProp)(i.transformOriginPropTypeUtil),r=o.useRef(null);return o.createElement(c.PropProvider,n,o.createElement(c.PropKeyProvider,{bind:e.bind},o.createElement(p.PopoverGridContainer,{ref:r},o.createElement(s.Grid,{item:!0,xs:6},o.createElement(u.ControlFormLabel,null,e.label)),o.createElement(s.Grid,{item:!0,xs:6},o.createElement(f.SizeControl,{variant:"length",units:e.units,anchorRef:r,disableCustom:!0})))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/transform-content.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransformContent:function(){return TransformContent}});var o=r("react"),i=r("@elementor/ui"),s=r("@wordpress/i18n"),a=r("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),c=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/move.tsx"),u=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/rotate.tsx"),p=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/scale.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/transform-control/functions/skew.tsx"),g=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts"),b=r("./packages/packages/libs/editor-controls/src/controls/transform-control/use-transform-tabs-history.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const TransformContent=()=>{const{getTabsProps:e,getTabProps:n,getTabPanelProps:r}=(0,b.useTransformTabsHistory)({move:g.initialTransformValue.value,scale:g.initialScaleValue.value,rotate:g.initialRotateValue.value,skew:g.initialSkewValue.value});return o.createElement(a.PopoverContent,null,o.createElement(i.Box,{sx:{width:"100%"}},o.createElement(i.Box,{sx:{borderBottom:1,borderColor:"divider"}},o.createElement(i.Tabs,_extends({size:"small",variant:"fullWidth",sx:{"& .MuiTab-root":{minWidth:"62px"}}},e(),{"aria-label":(0,s.__)("Transform","elementor")}),o.createElement(i.Tab,_extends({label:(0,s.__)("Move","elementor")},n(g.TransformFunctionKeys.move))),o.createElement(i.Tab,_extends({label:(0,s.__)("Scale","elementor")},n(g.TransformFunctionKeys.scale))),o.createElement(i.Tab,_extends({label:(0,s.__)("Rotate","elementor")},n(g.TransformFunctionKeys.rotate))),o.createElement(i.Tab,_extends({label:(0,s.__)("Skew","elementor")},n(g.TransformFunctionKeys.skew))))),o.createElement(i.TabPanel,_extends({sx:{p:1.5}},r(g.TransformFunctionKeys.move)),o.createElement(c.Move,null)),o.createElement(i.TabPanel,_extends({sx:{p:1.5}},r(g.TransformFunctionKeys.scale)),o.createElement(p.Scale,null)),o.createElement(i.TabPanel,_extends({sx:{p:1.5}},r(g.TransformFunctionKeys.rotate)),o.createElement(u.Rotate,null)),o.createElement(i.TabPanel,_extends({sx:{p:1.5}},r(g.TransformFunctionKeys.skew)),o.createElement(f.Skew,null))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/transform-icon.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransformIcon:function(){return TransformIcon}});var o=r("react"),i=r("@elementor/icons"),s=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts");const TransformIcon=({value:e})=>{switch(e.$$type){case s.TransformFunctionKeys.move:return o.createElement(i.ArrowsMaximizeIcon,{fontSize:"tiny"});case s.TransformFunctionKeys.scale:return o.createElement(i.ArrowAutofitHeightIcon,{fontSize:"tiny"});case s.TransformFunctionKeys.rotate:return o.createElement(i.RotateClockwise2Icon,{fontSize:"tiny"});case s.TransformFunctionKeys.skew:return o.createElement(i.SkewXIcon,{fontSize:"tiny"});default:return null}}},"./packages/packages/libs/editor-controls/src/controls/transform-control/transform-label.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransformLabel:function(){return TransformLabel}});var o=r("react"),i=r("@elementor/ui"),s=r("@wordpress/i18n"),a=r("./packages/packages/libs/editor-controls/src/controls/size-control.tsx"),c=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts");const u=["x","y","z"],formatLabel=(e,n)=>u.map(r=>{const o=e[r];if("scale"===n)return o?.value||c.defaultValues[n];const i=c.defaultValues[n],s=o?.value?.size??i.size,u=o?.value?.unit??i.unit;return"custom"===u?s||a.CUSTOM_SIZE_LABEL:`${s}${u}`}).join(", "),TransformLabel=e=>{const{$$type:n,value:r}=e.value;switch(n){case c.TransformFunctionKeys.move:return o.createElement(Label,{label:(0,s.__)("Move","elementor"),value:formatLabel(r,"move")});case c.TransformFunctionKeys.scale:return o.createElement(Label,{label:(0,s.__)("Scale","elementor"),value:formatLabel(r,"scale")});case c.TransformFunctionKeys.rotate:return o.createElement(Label,{label:(0,s.__)("Rotate","elementor"),value:formatLabel(r,"rotate")});case c.TransformFunctionKeys.skew:return o.createElement(Label,{label:(0,s.__)("Skew","elementor"),value:formatLabel(r,"skew")});default:return""}},Label=({label:e,value:n})=>o.createElement(i.Box,{component:"span"},e,": ",n)},"./packages/packages/libs/editor-controls/src/controls/transform-control/transform-repeater-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransformRepeaterControl:function(){return A}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/components/control-repeater/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/disable-item-action.tsx"),g=r("./packages/packages/libs/editor-controls/src/components/control-repeater/actions/remove-item-action.tsx"),b=r("./packages/packages/libs/editor-controls/src/components/control-repeater/items/edit-item-popover.tsx"),k=r("./packages/packages/libs/editor-controls/src/components/repeater/repeater-header.tsx"),v=r("./packages/packages/libs/editor-controls/src/control-adornments/control-adornments.tsx"),x=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),w=r("./packages/packages/libs/editor-controls/src/hooks/use-element-can-have-children.ts"),E=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts"),C=r("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-content.tsx"),T=r("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-icon.tsx"),_=r("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-label.tsx"),P=r("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-settings-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const R="tiny",A=(0,x.createControl)(()=>{const e=(0,u.useBoundProp)(i.transformPropTypeUtil),n=(0,o.useRef)(null),r=(0,a.usePopupState)({variant:"popover"}),s=(0,w.useElementCanHaveChildren)();return o.createElement(u.PropProvider,e,o.createElement(P.TransformSettingsControl,{popupState:r,anchorRef:n,showChildrenPerspective:s}),o.createElement(u.PropKeyProvider,{bind:"transform-functions"},o.createElement(Repeater,{headerRef:n,propType:e.propType,popupState:r})))}),N=o.createElement(a.Box,{component:"span","aria-label":void 0,sx:{display:"flex",gap:.5,p:2,width:320,borderRadius:1}},o.createElement(s.InfoCircleFilledIcon,{sx:{color:"secondary.main"}}),o.createElement(a.Typography,{variant:"body2",color:"text.secondary",fontSize:"14px"},(0,c.__)("You can use each kind of transform only once per element.","elementor"))),Repeater=({headerRef:e,propType:n,popupState:r})=>{const s=(0,u.useBoundProp)(i.transformFunctionsPropTypeUtil),a=[E.initialTransformValue,E.initialScaleValue,E.initialRotateValue,E.initialSkewValue],{value:x,bind:w}=s,getInitialValue=()=>a.find(e=>!x?.some(n=>n.$$type===e.$$type)),P=!getInitialValue();return o.createElement(u.PropProvider,s,o.createElement(p.ControlRepeater,{initial:getInitialValue()??E.initialTransformValue,propTypeUtil:i.transformFunctionsPropTypeUtil},o.createElement(k.RepeaterHeader,{label:(0,c.__)("Transform","elementor"),adornment:()=>o.createElement(v.ControlAdornments,{customContext:{path:["transform"],propType:n}}),ref:e},o.createElement(TransformBasePopoverTrigger,{popupState:r,repeaterBindKey:w}),o.createElement(p.TooltipAddItemAction,{disabled:P,tooltipContent:N,enableTooltip:P,ariaLabel:"transform"})),o.createElement(p.ItemsContainer,null,o.createElement(p.Item,{Icon:T.TransformIcon,Label:_.TransformLabel,actions:o.createElement(o.Fragment,null,o.createElement(f.DisableItemAction,null),o.createElement(g.RemoveItemAction,null))})),o.createElement(b.EditItemPopover,null,o.createElement(C.TransformContent,null))))},TransformBasePopoverTrigger=({popupState:e,repeaterBindKey:n})=>{const{bind:r}=(0,u.useBoundProp)(),i=(0,c.__)("Transform settings","elementor");return r!==n?null:o.createElement(a.Tooltip,{title:i,placement:"top"},o.createElement(a.IconButton,_extends({size:R,"aria-label":i},(0,a.bindTrigger)(e)),o.createElement(s.AdjustmentsIcon,{fontSize:R})))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/transform-settings-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransformSettingsControl:function(){return TransformSettingsControl}});var o=r("react"),i=r("@elementor/editor-ui"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-base-controls/children-perspective-control.tsx"),g=r("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-base-controls/transform-origin-control.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}const TransformSettingsControl=({popupState:e,anchorRef:n,showChildrenPerspective:r})=>{const b=(0,a.bindPopover)({...e,anchorEl:n.current??void 0});return o.createElement(a.Popover,_extends({disablePortal:!0,anchorOrigin:{vertical:"bottom",horizontal:"left"},slotProps:{paper:{sx:{width:(n.current?.offsetWidth||0)-6+"px",mt:.5}}}},b),o.createElement(i.PopoverHeader,{title:(0,c.__)("Transform settings","elementor"),onClose:e.close,icon:o.createElement(s.AdjustmentsIcon,{fontSize:"tiny"})}),o.createElement(a.Divider,null),o.createElement(p.PopoverContent,{sx:{px:2,py:1.5}},o.createElement(u.PropKeyProvider,{bind:"transform-origin"},o.createElement(g.TransformOriginControl,null)),r&&o.createElement(o.Fragment,null,o.createElement(a.Box,{sx:{my:.5}},o.createElement(a.Divider,null)),o.createElement(f.ChildrenPerspectiveControl,null))))}},"./packages/packages/libs/editor-controls/src/controls/transform-control/use-transform-tabs-history.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{useTransformTabsHistory:function(){return useTransformTabsHistory}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/components/control-repeater/context/repeater-context.tsx"),u=r("./packages/packages/libs/editor-controls/src/controls/transform-control/initial-values.ts");const useTransformTabsHistory=({move:e,scale:n,rotate:r,skew:p})=>{const{value:f,setValue:g}=(0,a.useBoundProp)(i.moveTransformPropTypeUtil),{value:b,setValue:k}=(0,a.useBoundProp)(i.scaleTransformPropTypeUtil),{value:v,setValue:x}=(0,a.useBoundProp)(i.rotateTransformPropTypeUtil),{value:w,setValue:E}=(0,a.useBoundProp)(i.skewTransformPropTypeUtil),{openItemIndex:C,items:T}=(0,c.useRepeaterContext)(),{getTabsProps:_,getTabProps:P,getTabPanelProps:R}=(0,s.useTabs)((()=>{switch(!0){case!!b:return u.TransformFunctionKeys.scale;case!!v:return u.TransformFunctionKeys.rotate;case!!w:return u.TransformFunctionKeys.skew;default:return u.TransformFunctionKeys.move}})()),A=(0,o.useRef)({move:e,scale:n,rotate:r,skew:p}),saveToHistory=(e,n)=>{n&&(A.current[e]=n)},onTabChange=(e,n)=>{switch(n){case u.TransformFunctionKeys.move:g(A.current.move),saveToHistory("scale",b),saveToHistory("rotate",v),saveToHistory("skew",w);break;case u.TransformFunctionKeys.scale:k(A.current.scale),saveToHistory("move",f),saveToHistory("rotate",v),saveToHistory("skew",w);break;case u.TransformFunctionKeys.rotate:x(A.current.rotate),saveToHistory("move",f),saveToHistory("scale",b),saveToHistory("skew",w);break;case u.TransformFunctionKeys.skew:E(A.current.skew),saveToHistory("move",f),saveToHistory("scale",b),saveToHistory("rotate",v)}return _().onChange(e,n)};return{getTabProps:e=>{return{...P(e),disabled:(n=e,!!T.find(({item:{$$type:e}},r)=>n===e&&r!==C))};var n},getTabPanelProps:R,getTabsProps:()=>({..._(),onChange:onTabChange})}}},"./packages/packages/libs/editor-controls/src/controls/transition-control/data.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{initialTransitionValue:function(){return s},transitionProperties:function(){return a},transitionsItemsList:function(){return c}});var o=r("@elementor/utils"),i=r("@wordpress/i18n");const s={selection:{$$type:"key-value",value:{key:{value:(0,i.__)("All properties","elementor"),$$type:"string"},value:{value:"all",$$type:"string"}}},size:{$$type:"size",value:{size:200,unit:"ms"}}},a=(()=>{const e=!!window.elementorFrontend?.config?.is_rtl,n=[{label:(0,i.__)("Default","elementor"),type:"category",properties:[{label:(0,i.__)("All properties","elementor"),value:"all"}]},{label:(0,i.__)("Margin","elementor"),type:"category",properties:[{label:(0,i.__)("Margin (all)","elementor"),value:"margin",isDisabled:!0},{label:(0,i.__)("Margin bottom","elementor"),value:"margin-block-end",isDisabled:!0},{label:e?(0,i.__)("Margin right","elementor"):(0,i.__)("Margin left","elementor"),value:"margin-inline-start",isDisabled:!0},{label:e?(0,i.__)("Margin left","elementor"):(0,i.__)("Margin right","elementor"),value:"margin-inline-end",isDisabled:!0},{label:(0,i.__)("Margin top","elementor"),value:"margin-block-start",isDisabled:!0}]},{label:(0,i.__)("Padding","elementor"),type:"category",properties:[{label:(0,i.__)("Padding (all)","elementor"),value:"padding",isDisabled:!0},{label:(0,i.__)("Padding bottom","elementor"),value:"padding-block-end",isDisabled:!0},{label:e?(0,i.__)("Padding right","elementor"):(0,i.__)("Padding left","elementor"),value:"padding-inline-start",isDisabled:!0},{label:e?(0,i.__)("Padding left","elementor"):(0,i.__)("Padding right","elementor"),value:"padding-inline-end",isDisabled:!0},{label:(0,i.__)("Padding top","elementor"),value:"padding-block-start",isDisabled:!0}]},{label:(0,i.__)("Flex","elementor"),type:"category",properties:[{label:(0,i.__)("Flex (all)","elementor"),value:"flex",isDisabled:!0},{label:(0,i.__)("Flex grow","elementor"),value:"flex-grow",isDisabled:!0},{label:(0,i.__)("Flex shrink","elementor"),value:"flex-shrink",isDisabled:!0},{label:(0,i.__)("Flex basis","elementor"),value:"flex-basis",isDisabled:!0}]},{label:(0,i.__)("Size","elementor"),type:"category",properties:[{label:(0,i.__)("Width","elementor"),value:"width",isDisabled:!0},{label:(0,i.__)("Height","elementor"),value:"height",isDisabled:!0},{label:(0,i.__)("Max height","elementor"),value:"max-height",isDisabled:!0},{label:(0,i.__)("Max width","elementor"),value:"max-width",isDisabled:!0},{label:(0,i.__)("Min height","elementor"),value:"min-height",isDisabled:!0},{label:(0,i.__)("Min width","elementor"),value:"min-width",isDisabled:!0}]},{label:(0,i.__)("Position","elementor"),type:"category",properties:[{label:(0,i.__)("Top","elementor"),value:"inset-block-start",isDisabled:!0},{label:e?(0,i.__)("Right","elementor"):(0,i.__)("Left","elementor"),value:"inset-inline-start",isDisabled:!0},{label:e?(0,i.__)("Left","elementor"):(0,i.__)("Right","elementor"),value:"inset-inline-end",isDisabled:!0},{label:(0,i.__)("Bottom","elementor"),value:"inset-block-end",isDisabled:!0},{label:(0,i.__)("Z-index","elementor"),value:"z-index",isDisabled:!0}]},{label:(0,i.__)("Typography","elementor"),type:"category",properties:[{label:(0,i.__)("Font color","elementor"),value:"color",isDisabled:!0},{label:(0,i.__)("Font size","elementor"),value:"font-size",isDisabled:!0},{label:(0,i.__)("Line height","elementor"),value:"line-height",isDisabled:!0},{label:(0,i.__)("Letter spacing","elementor"),value:"letter-spacing",isDisabled:!0},{label:(0,i.__)("Word spacing","elementor"),value:"word-spacing",isDisabled:!0},{label:(0,i.__)("Font variations","elementor"),value:"font-variation-settings",isDisabled:!0},{label:(0,i.__)("Text stroke color","elementor"),value:"-webkit-text-stroke-color",isDisabled:!0}]},{label:(0,i.__)("Background","elementor"),type:"category",properties:[{label:(0,i.__)("Background color","elementor"),value:"background-color",isDisabled:!0},{label:(0,i.__)("Background position","elementor"),value:"background-position",isDisabled:!0},{label:(0,i.__)("Box shadow","elementor"),value:"box-shadow",isDisabled:!0}]},{label:(0,i.__)("Border","elementor"),type:"category",properties:[{label:(0,i.__)("Border (all)","elementor"),value:"border",isDisabled:!0},{label:(0,i.__)("Border radius","elementor"),value:"border-radius",isDisabled:!0},{label:(0,i.__)("Border color","elementor"),value:"border-color",isDisabled:!0},{label:(0,i.__)("Border width","elementor"),value:"border-width",isDisabled:!0}]},{label:(0,i.__)("Effects","elementor"),type:"category",properties:[{label:(0,i.__)("Opacity","elementor"),value:"opacity",isDisabled:!0},{label:(0,i.__)("Transform (all)","elementor"),value:"transform",isDisabled:!0},{label:(0,i.__)("Filter (all)","elementor"),value:"filter",isDisabled:!0}]}];return(()=>{if(!window.elementorPro)return!0;const e=window.elementorPro?.config?.version;return!!e&&(0,o.isVersionGreaterOrEqual)(e,"3.35")})()?n:[n[0]]})(),c=a.map(e=>({label:e.label,items:e.properties.map(e=>e.label)}))},"./packages/packages/libs/editor-controls/src/controls/transition-control/trainsition-events.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{subscribeToTransitionEvent:function(){return subscribeToTransitionEvent}});var o=r("@elementor/editor-elements"),i=r("@elementor/events"),s=r("./packages/packages/libs/editor-controls/src/services/event-bus.ts");const a={eventName:"click_added_transition",location:"V4 Style Tab",secondaryLocation:"Transition control",trigger:"click"};function subscribeToTransitionEvent(){s.eventBus.subscribe("transition-item-added",e=>{const n=e,r=n?.itemValue?.selection?.value?.value?.value,s=(0,o.getSelectedElements)(),c=s[0]?.type??null;(0,i.trackEvent)({transition_type:r??"unknown",...a,widget_type:c})})}},"./packages/packages/libs/editor-controls/src/controls/transition-control/transition-repeater-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransitionRepeaterControl:function(){return C}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/icons"),a=r("@elementor/ui"),c=r("@wordpress/i18n"),u=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),p=r("./packages/packages/libs/editor-controls/src/create-control.tsx"),f=r("./packages/packages/libs/editor-controls/src/controls/repeatable-control.tsx"),g=r("./packages/packages/libs/editor-controls/src/controls/selection-size-control.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/transition-control/data.ts"),k=r("./packages/packages/libs/editor-controls/src/controls/transition-control/trainsition-events.ts"),v=r("./packages/packages/libs/editor-controls/src/controls/transition-control/transition-selector.tsx");const x={variant:"time",units:["s","ms"],defaultUnit:"ms"},w=(0,i.createArrayPropUtils)(i.selectionSizePropTypeUtil.key,i.selectionSizePropTypeUtil.schema,"transition");(0,k.subscribeToTransitionEvent)();const getSelectionSizeProps=(e,n,r)=>({selectionLabel:(0,c.__)("Type","elementor"),sizeLabel:(0,c.__)("Duration","elementor"),selectionConfig:{component:v.TransitionSelector,props:{recentlyUsedList:e,disabledItems:n,showPromotion:r}},sizeConfigMap:{...b.transitionProperties.reduce((e,n)=>(n.properties.forEach(n=>{e[n.value]=x}),e),{})}}),isItemDisabled=e=>{const n=(0,v.getTransitionPropertyByValue)(e.value.selection.value?.value);return!!n&&!!n.isDisabled},getChildControlConfig=(e,n,r)=>({propTypeUtil:i.selectionSizePropTypeUtil,component:g.SelectionSizeControl,props:getSelectionSizeProps(e,n,r),isItemDisabled:isItemDisabled}),isPropertyUsed=(e,n)=>(e??[]).some(e=>e?.value?.selection?.value?.value?.value===n.value),getInitialValue=(e=[])=>{if(!e?.length)return b.initialTransitionValue;for(const n of b.transitionProperties)for(const r of n.properties)if(!isPropertyUsed(e,r))return{...b.initialTransitionValue,selection:{$$type:"key-value",value:{key:{value:r.label,$$type:"string"},value:{value:r.value,$$type:"string"}}}};return b.initialTransitionValue},E=o.createElement(a.Alert,{sx:{width:280,gap:.5},color:"secondary",icon:o.createElement(s.InfoCircleFilledIcon,null)},o.createElement(a.AlertTitle,null,(0,c.__)("Transitions","elementor")),o.createElement(a.Box,{component:"span"},o.createElement(a.Typography,{variant:"body2"},(0,c.__)("Switch to 'Normal' state to add a transition.","elementor")))),C=(0,p.createControl)(({recentlyUsedListGetter:e,currentStyleState:n})=>{const r=null===n,[i,s]=(0,o.useState)([]),{value:a,setValue:p}=(0,u.useBoundProp)(w),{allDisabled:g,proDisabled:k}=(0,o.useMemo)(()=>((e=[])=>{const n=(e||[]).map(e=>e.value?.selection?.value?.key?.value),r=[];return b.transitionProperties.forEach(e=>{const o=e.properties.filter(e=>e.isDisabled&&!n.includes(e.label)).map(e=>e.label);r.push(...o)}),{allDisabled:[...n,...r],proDisabled:r}})(a),[a]),v=(0,o.useMemo)(()=>{const e=new Set;return b.transitionProperties.forEach(n=>{n.properties.forEach(n=>e.add(n.value))}),e},[]);(0,o.useEffect)(()=>{if(!a||0===a.length)return;const e=a.filter(e=>{const n=e?.value?.selection?.value?.value?.value??"";return v.has(n)});e.length!==a.length&&p(e)},[v]),(0,o.useEffect)(()=>{e().then(s)},[e]);const x=(0,o.useMemo)(()=>((e=[])=>!!e?.length&&b.transitionProperties.every(n=>n.properties.every(n=>n.isDisabled||!!e?.find(e=>e.value?.selection?.value?.value?.value===n.value))))(a),[a]),C=!r||x;return o.createElement(f.RepeatableControl,{label:(0,c.__)("Transitions","elementor"),repeaterLabel:(0,c.__)("Transitions","elementor"),patternLabel:"${value.selection.value.key.value}: ${value.size.value.size}${value.size.value.unit}",placeholder:(0,c.__)("Empty Transition","elementor"),showDuplicate:!1,showToggle:!0,initialValues:getInitialValue(a),childControlConfig:getChildControlConfig(i,g,k.length>0),propKey:"transition",addItemTooltipProps:{disabled:C,enableTooltip:!r,tooltipContent:E}})})},"./packages/packages/libs/editor-controls/src/controls/transition-control/transition-selector.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{TransitionSelector:function(){return TransitionSelector},getTransitionPropertyByValue:function(){return getTransitionPropertyByValue}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/editor-ui"),a=r("@elementor/icons"),c=r("@elementor/ui"),u=r("@wordpress/i18n"),p=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),f=r("./packages/packages/libs/editor-controls/src/components/item-selector.tsx"),g=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx"),b=r("./packages/packages/libs/editor-controls/src/controls/transition-control/data.ts");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(null,arguments)}function getTransitionPropertyByValue(e){if(!e?.value)return null;for(const n of b.transitionProperties)for(const r of n.properties)if(r.value===e.value)return r;return null}const includeCurrentValueInOptions=(e,n)=>n.filter(n=>n!==e.key.value),TransitionSelector=({recentlyUsedList:e=[],disabledItems:n=[],showPromotion:r=!1})=>{const{value:k,setValue:v}=(0,p.useBoundProp)(i.keyValuePropTypeUtil),{key:{value:x}}=k,w=(0,o.useRef)(null),E=(0,c.usePopupState)({variant:"popover"}),C=(0,o.useMemo)(()=>new Set(b.transitionProperties.filter(e=>e.properties.some(e=>e.isDisabled)).map(e=>e.label)),[]);return o.createElement(c.Box,{ref:w},o.createElement(g.default,null,o.createElement(c.UnstableTag,_extends({variant:"outlined",label:x,endIcon:o.createElement(a.ChevronDownIcon,{fontSize:"tiny"})},(0,c.bindTrigger)(E),{fullWidth:!0}))),o.createElement(c.Popover,_extends({disablePortal:!0,disableScrollLock:!0},(0,c.bindPopover)(E),{anchorReference:"anchorPosition",anchorPosition:(()=>{if(!w.current)return;const e=w.current.getBoundingClientRect();return{top:e.top,left:e.right+36}})(),anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"}}),o.createElement(f.ItemSelector,{itemsList:(()=>{const n=e.map(e=>getTransitionPropertyByValue({value:e,$$type:"string"})?.label).filter(e=>!!e),r=b.transitionsItemsList.map(e=>({...e,items:e.items.filter(e=>!n.includes(e))}));if(0===n.length)return r;const[o,...i]=r;return[o,{label:(0,u.__)("Recently Used","elementor"),items:n},...i]})(),selectedItem:x,onItemChange:e=>{const n=(e=>{for(const n of b.transitionProperties){const r=n.properties.find(n=>n.label===e);if(r)return{key:{value:r.label,$$type:"string"},value:{value:r.value,$$type:"string"}}}return null})(e);n&&(v(n),E.close())},onClose:E.close,sectionWidth:268,title:(0,u.__)("Transition Property","elementor"),icon:a.VariationsIcon,disabledItems:includeCurrentValueInOptions(k,n),categoryItemContentTemplate:e=>o.createElement(c.Box,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}},o.createElement("span",null,e.value),r&&C.has(e.value)&&o.createElement(s.PromotionChip,null)),footer:r?o.createElement(c.Alert,{variant:"standard",color:"promotion",icon:!1,role:"dialog","aria-label":"promotion-alert",size:"small",sx:{m:1.5,mt:0}},(0,u.__)("Upgrade to customize transition properties and control effects.","elementor"),o.createElement(c.Box,{component:"a",href:"https://go.elementor.com/go-pro-transitions-modal/",target:"_blank",rel:"noopener noreferrer",sx:{display:"flex",alignItems:"center",gap:.5,color:"promotion.main"}},o.createElement(a.CrownFilledIcon,{fontSize:"tiny"}),(0,u.__)("Upgrade now","elementor"))):null})))}},"./packages/packages/libs/editor-controls/src/controls/url-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{UrlControl:function(){return u}});var o=r("react"),i=r("@elementor/editor-props"),s=r("@elementor/ui"),a=r("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),c=r("./packages/packages/libs/editor-controls/src/control-actions/control-actions.tsx");const u=(0,r("./packages/packages/libs/editor-controls/src/create-control.tsx").createControl)(({placeholder:e,ariaLabel:n})=>{const{value:r,setValue:u,disabled:p}=(0,a.useBoundProp)(i.urlPropTypeUtil);return o.createElement(c.default,null,o.createElement(s.TextField,{size:"tiny",fullWidth:!0,value:r??"",disabled:p,onChange:e=>u(e.target.value),placeholder:e,inputProps:{...n?{"aria-label":n}:{}}}))})},"./packages/packages/libs/editor-controls/src/create-control.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{createControl:function(){return createControl}});var o=r("react"),i=r("@elementor/ui"),s=r("./packages/packages/libs/editor-controls/src/control-replacements.tsx");Symbol("control");function createControl(e){return n=>{const{ControlToRender:r,OriginalControl:a,isReplaced:c}=(0,s.useControlReplacement)(e),u=c?{...n,OriginalControl:a}:n;return o.createElement(i.ErrorBoundary,{fallback:null},o.createElement(r,u))}}},"./packages/packages/libs/editor-controls/src/env.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{env:function(){return i}});var o=r("@elementor/env");const{env:i}=(0,o.parseEnv)("@elementor/editor-controls")},"./packages/packages/libs/editor-controls/src/hooks/use-element-can-have-children.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{useElementCanHaveChildren:function(){return useElementCanHaveChildren}});var o=r("react"),i=r("@elementor/editor-elements");const useElementCanHaveChildren=()=>{const{element:e}=(0,i.useSelectedElement)(),n=e?.id||"";return(0,o.useMemo)(()=>{const e=(0,i.getContainer)(n);return!!e&&"widget"!==e.model.get("elType")},[n])}},"./packages/packages/libs/editor-controls/src/hooks/use-filtered-items-list.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{useFilteredItemsList:function(){return useFilteredItemsList}});const useFilteredItemsList=(e,n,r)=>e.reduce((e,o)=>{const i=o.items.filter(e=>e.toLowerCase().includes(n.toLowerCase()));return i.length&&(e.push({type:"category",value:o.label}),i.forEach(n=>{e.push({type:"item",value:n,disabled:r?.includes(n)??!1})})),e},[])},"./packages/packages/libs/editor-controls/src/hooks/use-repeatable-control-context.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{RepeatableControlContext:function(){return i},useRepeatableControlContext:function(){return useRepeatableControlContext}});var o=r("react");const i=(0,o.createContext)(void 0),useRepeatableControlContext=()=>{const e=(0,o.useContext)(i);if(!e)throw new Error("useRepeatableControlContext must be used within RepeatableControl");return e}},"./packages/packages/libs/editor-controls/src/hooks/use-size-extended-options.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{useSizeExtendedOptions:function(){return useSizeExtendedOptions}});var o=r("react");function useSizeExtendedOptions(e,n){return(0,o.useMemo)(()=>{const r=[...e];return n||r.includes("custom")?e.includes("custom")&&r.splice(r.indexOf("custom"),1):r.push("custom"),r},[e,n])}},"./packages/packages/libs/editor-controls/src/hooks/use-sync-external-state.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{useSyncExternalState:function(){return useSyncExternalState}});var o=r("react");const useSyncExternalState=({external:e,setExternal:n,persistWhen:r,fallback:i})=>{function toInternal(e,n){return e||i(n)}const[s,a]=(0,o.useState)(toInternal(e,null));(0,o.useEffect)(()=>{a(n=>toInternal(e,n))},[e]);return[s,(e,o,i)=>{const c=("function"==typeof e?e:()=>e)(s);a(c),n(function toExternal(e){return r(e)?e:null}(c),o,i)}]}},"./packages/packages/libs/editor-controls/src/hooks/use-unfiltered-files-upload.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{UNFILTERED_FILES_UPLOAD_KEY:function(){return s},useUnfilteredFilesUpload:function(){return useUnfilteredFilesUpload},useUpdateUnfilteredFilesUpload:function(){return useUpdateUnfilteredFilesUpload}});var o=r("@elementor/query"),i=r("./packages/packages/libs/editor-controls/src/api.ts");const s="elementor_unfiltered_files_upload",a={queryKey:[s]},useUnfilteredFilesUpload=()=>(0,o.useQuery)({...a,queryFn:()=>i.apiClient.getElementorSetting(s).then(e=>formatResponse(e)),staleTime:1/0});function useUpdateUnfilteredFilesUpload(){const e=(0,o.useQueryClient)();return(0,o.useMutation)({mutationFn:({allowUnfilteredFilesUpload:e})=>i.apiClient.updateElementorSetting(s,e?"1":"0"),onSuccess:()=>e.invalidateQueries(a)})}const formatResponse=e=>Boolean("1"===e)},"./packages/packages/libs/editor-controls/src/services/event-bus.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{eventBus:function(){return o}});const o=new class EventBus{listeners=new Map;subscribe(e,n){this.listeners.has(e)||this.listeners.set(e,new Set);const r=this.listeners.get(e);r&&r.add(n)}unsubscribe(e,n){const r=this.listeners.get(e);r&&(r.delete(n),0===r.size&&this.listeners.delete(e))}emit(e,n){const r=this.listeners.get(e);r&&r.forEach(e=>e(n))}clearAll(){this.listeners.clear()}}},"./packages/packages/libs/editor-controls/src/utils/convert-toggle-options-to-atomic.tsx":function(e,n,r){"use strict";r.r(n),r.d(n,{convertToggleOptionsToAtomic:function(){return convertToggleOptionsToAtomic}});var o=r("react"),i=r("@elementor/icons");const convertToggleOptionsToAtomic=e=>e.map(e=>{const n=e.icon,r=i[n];return{value:e.value,label:e.label,renderContent:({size:n})=>r?o.createElement(r,{fontSize:n}):e.label,showTooltip:e.showTooltip,exclusive:e.exclusive}})},"./packages/packages/libs/editor-controls/src/utils/escape-html-attr.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{escapeHtmlAttr:function(){return escapeHtmlAttr}});const escapeHtmlAttr=e=>{const n={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return e.replace(/[&<>'"]/g,e=>n[e]||e)}},"./packages/packages/libs/editor-controls/src/utils/inline-editing.ts":function(e,n,r){"use strict";function isEmpty(e=""){if(!e)return!0;const n=document.createElement("div");return n.innerHTML=e,!n.textContent?.length}r.r(n),r.d(n,{isEmpty:function(){return isEmpty}})},"./packages/packages/libs/editor-controls/src/utils/size-control.ts":function(e,n,r){"use strict";r.r(n),r.d(n,{DEFAULT_SIZE:function(){return u},DEFAULT_UNIT:function(){return c},angleUnits:function(){return i},isUnitExtendedOption:function(){return isUnitExtendedOption},lengthUnits:function(){return o},timeUnits:function(){return s}});const o=["px","%","em","rem","vw","vh","ch"],i=["deg","rad","grad","turn"],s=["s","ms"],a=["auto","custom"],c="px",u=NaN;function isUnitExtendedOption(e){return a.includes(e)}},"@elementor/editor-current-user":function(e){"use strict";e.exports=window.elementorV2.editorCurrentUser},"@elementor/editor-elements":function(e){"use strict";e.exports=window.elementorV2.editorElements},"@elementor/editor-props":function(e){"use strict";e.exports=window.elementorV2.editorProps},"@elementor/editor-responsive":function(e){"use strict";e.exports=window.elementorV2.editorResponsive},"@elementor/editor-ui":function(e){"use strict";e.exports=window.elementorV2.editorUi},"@elementor/env":function(e){"use strict";e.exports=window.elementorV2.env},"@elementor/events":function(e){"use strict";e.exports=window.elementorV2.events},"@elementor/http-client":function(e){"use strict";e.exports=window.elementorV2.httpClient},"@elementor/icons":function(e){"use strict";e.exports=window.elementorV2.icons},"@elementor/locations":function(e){"use strict";e.exports=window.elementorV2.locations},"@elementor/query":function(e){"use strict";e.exports=window.elementorV2.query},"@elementor/session":function(e){"use strict";e.exports=window.elementorV2.session},"@elementor/ui":function(e){"use strict";e.exports=window.elementorV2.ui},"@elementor/utils":function(e){"use strict";e.exports=window.elementorV2.utils},"@elementor/wp-media":function(e){"use strict";e.exports=window.elementorV2.wpMedia},"@wordpress/i18n":function(e){"use strict";e.exports=window.wp.i18n},react:function(e){"use strict";e.exports=window.React},"react-dom":function(e){"use strict";e.exports=window.ReactDOM}},n={};function __webpack_require__(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return e[r].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=function(e,n){for(var r in n)__webpack_require__.o(n,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},__webpack_require__.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";__webpack_require__.r(r),__webpack_require__.d(r,{AspectRatioControl:function(){return R.AspectRatioControl},AttributesControl:function(){return Y.AttributesControl},BackgroundControl:function(){return N.BackgroundControl},BoxShadowRepeaterControl:function(){return a.BoxShadowRepeaterControl},ClearIconButton:function(){return Q.ClearIconButton},ColorControl:function(){return f.ColorControl},ControlActionsProvider:function(){return se.ControlActionsProvider},ControlAdornments:function(){return ce.ControlAdornments},ControlAdornmentsProvider:function(){return le.ControlAdornmentsProvider},ControlFormLabel:function(){return G.ControlFormLabel},ControlReplacementsProvider:function(){return ie.ControlReplacementsProvider},ControlToggleButtonGroup:function(){return Z.ControlToggleButtonGroup},DateTimeControl:function(){return K.DateTimeControl},DisplayConditionsControl:function(){return J.DisplayConditionsControl},EqualUnequalSizesControl:function(){return k.EqualUnequalSizesControl},FilterRepeaterControl:function(){return c.FilterRepeaterControl},FloatingActionsBar:function(){return te.FloatingActionsBar},FontFamilyControl:function(){return x.FontFamilyControl},GapControl:function(){return P.GapControl},HtmlTagControl:function(){return T.HtmlTagControl},ImageControl:function(){return e.ImageControl},InlineEditingControl:function(){return W.InlineEditingControl},InlineEditor:function(){return re.InlineEditor},InlineEditorToolbar:function(){return oe.InlineEditorToolbar},ItemSelector:function(){return w.ItemSelector},KeyValueControl:function(){return F.KeyValueControl},LinkControl:function(){return C.LinkControl},LinkedDimensionsControl:function(){return v.LinkedDimensionsControl},NumberControl:function(){return b.NumberControl},PopoverContent:function(){return U.PopoverContent},PopoverGridContainer:function(){return ne.PopoverGridContainer},PositionControl:function(){return B.PositionControl},PromotionTrigger:function(){return X.PromotionTrigger},PropKeyProvider:function(){return ae.PropKeyProvider},PropProvider:function(){return ae.PropProvider},QueryControl:function(){return _.QueryControl},RepeatableControl:function(){return z.RepeatableControl},Repeater:function(){return ee.Repeater},SelectControl:function(){return u.SelectControl},SelectControlWrapper:function(){return p.SelectControlWrapper},SizeControl:function(){return i.SizeControl},StrokeControl:function(){return s.StrokeControl},SvgMediaControl:function(){return A.SvgMediaControl},SwitchControl:function(){return I.SwitchControl},TextAreaControl:function(){return o.TextAreaControl},TextControl:function(){return n.TextControl},ToggleButtonGroupUi:function(){return Z.ToggleButtonGroupUi},ToggleControl:function(){return g.ToggleControl},TransformRepeaterControl:function(){return L.TransformRepeaterControl},TransformSettingsControl:function(){return j.TransformSettingsControl},TransitionRepeaterControl:function(){return V.TransitionRepeaterControl},UrlControl:function(){return E.UrlControl},createControl:function(){return ue.createControl},createControlReplacementsRegistry:function(){return ie.createControlReplacementsRegistry},enqueueFont:function(){return H.enqueueFont},injectIntoRepeaterItemActions:function(){return de.injectIntoRepeaterItemActions},injectIntoRepeaterItemIcon:function(){return de.injectIntoRepeaterItemIcon},injectIntoRepeaterItemLabel:function(){return de.injectIntoRepeaterItemLabel},transitionProperties:function(){return q.transitionProperties},transitionsItemsList:function(){return q.transitionsItemsList},useBoundProp:function(){return ae.useBoundProp},useControlActions:function(){return se.useControlActions},useControlReplacement:function(){return ie.useControlReplacement},useElementCanHaveChildren:function(){return me.useElementCanHaveChildren},useFloatingActionsBar:function(){return te.useFloatingActionsBar},useSyncExternalState:function(){return pe.useSyncExternalState}});var e=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/image-control.tsx"),n=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/text-control.tsx"),o=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/text-area-control.tsx"),i=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/size-control.tsx"),s=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/stroke-control.tsx"),a=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/box-shadow-repeater-control.tsx"),c=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/filter-control/filter-repeater-control.tsx"),u=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/select-control.tsx"),p=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/select-control-wrapper.tsx"),f=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/color-control.tsx"),g=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/toggle-control.tsx"),b=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/number-control.tsx"),k=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/equal-unequal-sizes-control.tsx"),v=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/linked-dimensions-control.tsx"),x=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/font-family-control/font-family-control.tsx"),w=__webpack_require__("./packages/packages/libs/editor-controls/src/components/item-selector.tsx"),E=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/url-control.tsx"),C=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/link-control.tsx"),T=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/html-tag-control.tsx"),_=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/query-control.tsx"),P=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/gap-control.tsx"),R=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/aspect-ratio-control.tsx"),A=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/svg-media-control.tsx"),N=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/background-control/background-control.tsx"),I=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/switch-control.tsx"),z=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/repeatable-control.tsx"),F=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/key-value-control.tsx"),B=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/position-control.tsx"),L=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-repeater-control.tsx"),j=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/transform-control/transform-settings-control.tsx"),V=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/transition-control/transition-repeater-control.tsx"),U=__webpack_require__("./packages/packages/libs/editor-controls/src/components/popover-content.tsx"),H=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/font-family-control/enqueue-font.tsx"),q=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/transition-control/data.ts"),K=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/date-time-control.tsx"),W=__webpack_require__("./packages/packages/libs/editor-controls/src/controls/inline-editing-control.tsx"),G=__webpack_require__("./packages/packages/libs/editor-controls/src/components/control-form-label.tsx"),J=__webpack_require__("./packages/packages/libs/editor-controls/src/components/promotions/display-conditions-control.tsx"),Y=__webpack_require__("./packages/packages/libs/editor-controls/src/components/promotions/attributes-control.tsx"),X=__webpack_require__("./packages/packages/libs/editor-controls/src/components/promotions/promotion-trigger.tsx"),Z=__webpack_require__("./packages/packages/libs/editor-controls/src/components/control-toggle-button-group.tsx"),Q=__webpack_require__("./packages/packages/libs/editor-controls/src/components/icon-buttons/clear-icon-button.tsx"),ee=__webpack_require__("./packages/packages/libs/editor-controls/src/components/repeater/repeater.tsx"),te=__webpack_require__("./packages/packages/libs/editor-controls/src/components/floating-bar.tsx"),ne=__webpack_require__("./packages/packages/libs/editor-controls/src/components/popover-grid-container.tsx"),re=__webpack_require__("./packages/packages/libs/editor-controls/src/components/inline-editor.tsx"),oe=__webpack_require__("./packages/packages/libs/editor-controls/src/components/inline-editor-toolbar.tsx"),ie=__webpack_require__("./packages/packages/libs/editor-controls/src/control-replacements.tsx"),se=__webpack_require__("./packages/packages/libs/editor-controls/src/control-actions/control-actions-context.tsx"),ae=__webpack_require__("./packages/packages/libs/editor-controls/src/bound-prop-context/index.ts"),le=__webpack_require__("./packages/packages/libs/editor-controls/src/control-adornments/control-adornments-context.tsx"),ce=__webpack_require__("./packages/packages/libs/editor-controls/src/control-adornments/control-adornments.tsx"),ue=__webpack_require__("./packages/packages/libs/editor-controls/src/create-control.tsx"),de=__webpack_require__("./packages/packages/libs/editor-controls/src/components/control-repeater/locations.ts"),pe=__webpack_require__("./packages/packages/libs/editor-controls/src/hooks/use-sync-external-state.tsx"),me=__webpack_require__("./packages/packages/libs/editor-controls/src/hooks/use-element-can-have-children.ts")}(),(window.elementorV2=window.elementorV2||{}).editorControls=r}(),window.elementorV2.editorControls?.init?.();
//# sourceMappingURL=editor-controls.js.map