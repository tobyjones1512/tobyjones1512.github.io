"use strict";(self.webpackChunkelementor=self.webpackChunkelementor||[]).push([[8523],{68523:(e,t,r)=>{var n;if(r.r(t),r.d(t,{default:()=>Zu}),"undefined"==typeof window){var i={hostname:""};n={crypto:{randomUUID:function(){throw Error("unsupported")}},navigator:{userAgent:"",onLine:!0},document:{createElement:function(){return{}},location:i,referrer:""},screen:{width:0,height:0},location:i,addEventListener:function(){},removeEventListener:function(){}}}else n=window;function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function asyncGeneratorStep(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function _async_to_generator(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function _next(e){asyncGeneratorStep(o,n,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,n,i,_next,_throw,"throw",e)}_next(void 0)})}}function _construct(e,t,r){return _construct=_is_native_reflect_construct()?Reflect.construct:function construct(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&_set_prototype_of(i,r.prototype),i},_construct.apply(null,arguments)}function _create_class(e,t,r){return t&&function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(this,arguments)}function _get_prototype_of(e){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},_get_prototype_of(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_set_prototype_of(e,t)}function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _object_without_properties_loose(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function _set_prototype_of(e,t){return _set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(e,t){return e.__proto__=t,e},_set_prototype_of(e,t)}function _type_of(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _wrap_native_super(e){var t="function"==typeof Map?new Map:void 0;return _wrap_native_super=function wrapNativeSuper(e){if(null===e||!function _is_native_function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_get_prototype_of(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(Wrapper,e)},_wrap_native_super(e)}function _is_native_reflect_construct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_is_native_reflect_construct=function(){return!!e})()}function _create_for_of_iterator_helper_loose(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_array_like_to_array(e,t):void 0}}(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _ts_generator(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(o){return function(a){return function step(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function _ts_values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s=Object.defineProperty,__publicField=function(e,t,r){return function(e,t,r){return t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==(void 0===t?"undefined":_type_of(t))?t+"":t,r)},a=Object.defineProperty,__publicField$1=function(e,t,r){return function(e,t,r){return t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==(void 0===t?"undefined":_type_of(t))?t+"":t,r)},c=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(c||{}),u={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},l={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},p={};function getUntaintedPrototype$1(e){if(p[e])return p[e];var t=globalThis[e],r=t.prototype,n=e in u?u[e]:void 0,i=Boolean(n&&n.every(function(e){var t,n;return Boolean(null==(n=null==(t=Object.getOwnPropertyDescriptor(r,e))?void 0:t.get)?void 0:n.toString().includes("[native code]"))})),o=e in l?l[e]:void 0,s=Boolean(o&&o.every(function(e){var t;return"function"==typeof r[e]&&(null==(t=r[e])?void 0:t.toString().includes("[native code]"))}));if(i&&s&&!globalThis.Zone)return p[e]=t.prototype,t.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var c=a.contentWindow;if(!c)return t.prototype;var h=c[e].prototype;return document.body.removeChild(a),h?p[e]=h:r}catch(e){return r}}var h={};function getUntaintedAccessor$1(e,t,r){var n,i=e+"."+String(r);if(h[i])return h[i].call(t);var o=getUntaintedPrototype$1(e),s=null==(n=Object.getOwnPropertyDescriptor(o,r))?void 0:n.get;return s?(h[i]=s,s.call(t)):t[r]}var d={};function getUntaintedMethod$1(e,t,r){var n=e+"."+String(r);if(d[n])return d[n].bind(t);var i=getUntaintedPrototype$1(e)[r];return"function"!=typeof i?t[r]:(d[n]=i,i.bind(t))}var f={childNodes:function childNodes$1(e){return getUntaintedAccessor$1("Node",e,"childNodes")},parentNode:function parentNode$1(e){return getUntaintedAccessor$1("Node",e,"parentNode")},parentElement:function parentElement$1(e){return getUntaintedAccessor$1("Node",e,"parentElement")},textContent:function textContent$1(e){return getUntaintedAccessor$1("Node",e,"textContent")},contains:function contains$1(e,t){return getUntaintedMethod$1("Node",e,"contains")(t)},getRootNode:function getRootNode$1(e){return getUntaintedMethod$1("Node",e,"getRootNode")()},host:function host$1(e){return e&&"host"in e?getUntaintedAccessor$1("ShadowRoot",e,"host"):null},styleSheets:function styleSheets$1(e){return e.styleSheets},shadowRoot:function shadowRoot$1(e){return e&&"shadowRoot"in e?getUntaintedAccessor$1("Element",e,"shadowRoot"):null},querySelector:function querySelector$1(e,t){return getUntaintedAccessor$1("Element",e,"querySelector")(t)},querySelectorAll:function querySelectorAll$1(e,t){return getUntaintedAccessor$1("Element",e,"querySelectorAll")(t)},mutationObserver:function mutationObserverCtor$1(){return getUntaintedPrototype$1("MutationObserver").constructor},patch:function patch$1(e,t,r){try{if(!(t in e))return function(){};var n=e[t],i=r(n);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=i,function(){e[t]=n}}catch(e){return function(){}}}};function isElement(e){return e.nodeType===e.ELEMENT_NODE}function isShadowRoot(e){var t=e&&"host"in e&&"mode"in e&&f.host(e)||null;return Boolean(t&&"shadowRoot"in t&&f.shadowRoot(t)===e)}function isNativeShadowDom(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function stringifyStylesheet(e){try{var t=e.rules||e.cssRules;if(!t)return null;var r=e.href;return!r&&e.ownerNode&&e.ownerNode.ownerDocument&&(r=e.ownerNode.ownerDocument.location.href),function fixBrowserCompatibilityIssuesInCSS(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}(Array.from(t,function(e){return stringifyRule(e,r)}).join(""))}catch(e){return null}}function stringifyRule(e,t){if(function isCSSImportRule(e){return"styleSheet"in e}(e)){var r;try{r=stringifyStylesheet(e.styleSheet)||function escapeImportStatement(e){var t=e.cssText;if(t.split('"').length<3)return t;var r=["@import","url("+JSON.stringify(e.href)+")"];return""===e.layerName?r.push("layer"):e.layerName&&r.push("layer("+e.layerName+")"),e.supportsText&&r.push("supports("+e.supportsText+")"),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}(e)}catch(t){r=e.cssText}return e.styleSheet.href?absolutifyURLs(r,e.styleSheet.href):r}var n=e.cssText;return function isCSSStyleRule(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(n=function fixSafariColons(e){var t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(n)),t?absolutifyURLs(n,t):n}var g=function(){function Mirror(){__publicField$1(this,"idNodeMap",new Map),__publicField$1(this,"nodeMetaMap",new WeakMap)}var e=Mirror.prototype;return e.getId=function getId(e){var t;if(!e)return-1;var r=null==(t=this.getMeta(e))?void 0:t.id;return null!=r?r:-1},e.getNode=function getNode(e){return this.idNodeMap.get(e)||null},e.getIds=function getIds(){return Array.from(this.idNodeMap.keys())},e.getMeta=function getMeta(e){return this.nodeMetaMap.get(e)||null},e.removeNodeFromMap=function removeNodeFromMap(e){var t=this,r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(function(e){return t.removeNodeFromMap(e)})},e.has=function has(e){return this.idNodeMap.has(e)},e.hasNode=function hasNode(e){return this.nodeMetaMap.has(e)},e.add=function add(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)},e.replace=function replace(e,t){var r=this.getNode(e);if(r){var n=this.nodeMetaMap.get(r);n&&this.nodeMetaMap.set(t,n)}this.idNodeMap.set(e,t)},e.reset=function reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},Mirror}();function maskInputValue(e){var t=e.element,r=e.maskInputOptions,n=e.tagName,i=e.type,o=e.value,s=e.maskInputFn,a=o||"",c=i&&toLowerCase(i);return(r[n.toLowerCase()]||c&&r[c])&&(a=s?s(a,t):"*".repeat(a.length)),a}function toLowerCase(e){return e.toLowerCase()}var m="__rrweb_original__";function getInputType(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?toLowerCase(t):null}function extractFileExtension(e,t){var r;try{r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}var n,i=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!=(n=null==i?void 0:i[1])?n:null}var v=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,_=/^(?:[a-z+]+:)?\/\//i,y=/^www\..*/i,b=/^(data:)([^,]*),(.*)/i;function absolutifyURLs(e,t){return(e||"").replace(v,function(e,r,n,i,o,s){var a=n||o||s,c=r||i||"";if(!a)return e;if(_.test(a)||y.test(a))return"url("+c+a+c+")";if(b.test(a))return"url("+c+a+c+")";if("/"===a[0])return"url("+c+(function extractOrigin(e){return(e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0]).split("?")[0]}(t)+a)+c+")";var u=t.split("/"),l=a.split("/");u.pop();for(var p,h=_create_for_of_iterator_helper_loose(l);!(p=h()).done;){var d=p.value;"."!==d&&(".."===d?u.pop():u.push(d))}return"url("+c+u.join("/")+c+")"})}function normalizeCssString(e,t){return void 0===t&&(t=!1),t?e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):e.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function markCssSplits(e,t){return function splitCssText(e,t,r){void 0===r&&(r=!1);var n=Array.from(t.childNodes),i=[],o=0;if(n.length>1&&e&&"string"==typeof e)for(var s=normalizeCssString(e,r),a=s.length/e.length,c=1;c<n.length;c++)if(n[c].textContent&&"string"==typeof n[c].textContent){for(var u=normalizeCssString(n[c].textContent,r),l=3;l<u.length&&(u[l].match(/[a-zA-Z0-9]/)||-1!==u.indexOf(u.substring(0,l),1));l++);for(;l<u.length;l++){var p=u.substring(0,l),h=s.split(p),d=-1;if(2===h.length)d=h[0].length;else if(h.length>2&&""===h[0]&&""!==n[c-1].textContent)d=s.indexOf(p,1);else if(1===h.length){if(p=p.substring(0,p.length-1),(h=s.split(p)).length<=1)return i.push(e),i;l=101}else l===u.length-1&&(d=s.indexOf(p));if(h.length>=2&&l>100){var f=n[c-1].textContent;if(f&&"string"==typeof f){var g=normalizeCssString(f).length;d=s.indexOf(p,g)}-1===d&&(d=h[0].length)}if(-1!==d){for(var m=Math.floor(d/a);m>0&&m<e.length;){if((o+=1)>50*n.length)return i.push(e),i;var v=normalizeCssString(e.substring(0,m),r);if(v.length===d){i.push(e.substring(0,m)),e=e.substring(m),s=s.substring(d);break}v.length<d?m+=Math.max(1,Math.floor((d-v.length)/a)):m-=Math.max(1,Math.floor((v.length-d)*a))}break}}}return i.push(e),i}(e,t).join("/* rr_split */")}var w,k,S=1,C=new RegExp("[^a-z0-9-_:]");function genId(){return S++}var I=/^[^ \t\n\r\u000c]+/,x=/^[, \t\n\r\u000c]+/;var O=new WeakMap;function absoluteToDoc(e,t){return t&&""!==t.trim()?getHref(e,t):t}function isSVGElement(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function getHref(e,t){var r=O.get(e);if(r||(r=e.createElement("a"),O.set(e,r)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return r.setAttribute("href",t),r.href}function transformAttribute(e,t,r,n){return n?"src"===r||"href"===r&&("use"!==t||"#"!==n[0])||"xlink:href"===r&&"#"!==n[0]?absoluteToDoc(e,n):"background"!==r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===r?function getAbsoluteSrcsetString(e,t){if(""===t.trim())return t;var r=0;function collectCharacters(e){var n,i=e.exec(t.substring(r));return i?(n=i[0],r+=n.length,n):""}for(var n=[];collectCharacters(x),!(r>=t.length);){var i=collectCharacters(I);if(","===i.slice(-1))i=absoluteToDoc(e,i.substring(0,i.length-1)),n.push(i);else{var o="";i=absoluteToDoc(e,i);for(var s=!1;;){var a=t.charAt(r);if(""===a){n.push((i+o).trim());break}if(s)")"===a&&(s=!1);else{if(","===a){r+=1,n.push((i+o).trim());break}"("===a&&(s=!0)}o+=a,r+=1}}}return n.join(", ")}(e,n):"style"===r?absolutifyURLs(n,getHref(e)):"object"===t&&"data"===r?absoluteToDoc(e,n):n:absoluteToDoc(e,n):n}function ignoreAttribute(e,t,r){return("video"===e||"audio"===e)&&"autoplay"===t}function classMatchesRegex(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&classMatchesRegex(f.parentNode(e),t,r);for(var n=e.classList.length;n--;){var i=e.classList[n];if(t.test(i))return!0}return!!r&&classMatchesRegex(f.parentNode(e),t,r)}function needMaskingText(e,t,r,n){var i;if(isElement(e)){if(i=e,!f.childNodes(i).length)return!1}else{if(null===f.parentElement(e))return!1;i=f.parentElement(e)}try{if("string"==typeof t){if(n){if(i.closest("."+t))return!0}else if(i.classList.contains(t))return!0}else if(classMatchesRegex(i,t,n))return!0;if(r)if(n){if(i.closest(r))return!0}else if(i.matches(r))return!0}catch(e){}return!1}function serializeNode(e,t){var r=t.doc,n=t.mirror,i=t.blockClass,o=t.blockSelector,s=t.needsMask,a=t.inlineStylesheet,u=t.maskInputOptions,l=void 0===u?{}:u,p=t.maskTextFn,h=t.maskInputFn,d=t.dataURLOptions,g=void 0===d?{}:d,v=t.inlineImages,_=t.recordCanvas,y=t.keepIframeSrcFn,b=t.newlyAddedElement,S=void 0!==b&&b,I=t.cssCaptured,x=void 0!==I&&I,O=function getRootId(e,t){if(!t.hasNode(e))return;var r=t.getId(e);return 1===r?void 0:r}(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:c.Document,childNodes:[],compatMode:e.compatMode}:{type:c.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:c.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:O};case e.ELEMENT_NODE:return function serializeElementNode(e,t){for(var r,n=t.doc,i=t.blockClass,o=t.blockSelector,s=t.inlineStylesheet,a=t.maskInputOptions,u=void 0===a?{}:a,l=t.maskInputFn,p=t.dataURLOptions,h=void 0===p?{}:p,d=t.inlineImages,f=t.recordCanvas,g=t.keepIframeSrcFn,v=t.newlyAddedElement,_=void 0!==v&&v,y=t.rootId,b=function _isBlockedElement(e,t,r){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var n=e.classList.length;n--;){var i=e.classList[n];if(t.test(i))return!0}if(r)return e.matches(r)}catch(e){}return!1}(e,i,o),S=function getValidTagName$1(e){if(_instanceof(e,HTMLFormElement))return"form";var t=toLowerCase(e.tagName);return C.test(t)?"div":t}(e),I={},x=e.attributes.length,O=0;O<x;O++){var E=e.attributes[O];ignoreAttribute(S,E.name,E.value)||(I[E.name]=transformAttribute(n,S,toLowerCase(E.name),E.value))}if("link"===S&&s){var M=Array.from(n.styleSheets).find(function(t){return t.href===e.href}),R=null;M&&(R=stringifyStylesheet(M)),R&&(delete I.rel,delete I.href,I._cssText=R)}if("style"===S&&e.sheet){var A=stringifyStylesheet(e.sheet);A&&(e.childNodes.length>1&&(A=markCssSplits(A,e)),I._cssText=A)}if("input"===S||"textarea"===S||"select"===S){var T=e.value,P=e.checked;"radio"!==I.type&&"checkbox"!==I.type&&"submit"!==I.type&&"button"!==I.type&&T?I.value=maskInputValue({element:e,type:getInputType(e),tagName:S,value:T,maskInputOptions:u,maskInputFn:l}):P&&(I.checked=P)}"option"===S&&(e.selected&&!u.select?I.selected=!0:delete I.selected);"dialog"===S&&e.open&&(I.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===S&&f)if("2d"===e.__context)(function is2DCanvasBlank(e){var t=e.getContext("2d");if(!t)return!0;for(var r=0;r<e.width;r+=50)for(var n=0;n<e.height;n+=50){var i=t.getImageData,o=m in i?i[m]:i;if(new Uint32Array(o.call(t,r,n,Math.min(50,e.width-r),Math.min(50,e.height-n)).data.buffer).some(function(e){return 0!==e}))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(h.type,h.quality));else if(!("__context"in e)){var N=e.toDataURL(h.type,h.quality),D=n.createElement("canvas");D.width=e.width,D.height=e.height,N!==D.toDataURL(h.type,h.quality)&&(I.rr_dataURL=N)}if("img"===S&&d){w||(w=n.createElement("canvas"),k=w.getContext("2d"));var L=e,F=L.currentSrc||L.getAttribute("src")||"<unknown-src>",U=L.crossOrigin,recordInlineImage=function(){L.removeEventListener("load",recordInlineImage);try{w.width=L.naturalWidth,w.height=L.naturalHeight,k.drawImage(L,0,0),I.rr_dataURL=w.toDataURL(h.type,h.quality)}catch(e){if("anonymous"!==L.crossOrigin)return L.crossOrigin="anonymous",void(L.complete&&0!==L.naturalWidth?recordInlineImage():L.addEventListener("load",recordInlineImage));console.warn("Cannot inline img src="+F+"! Error: "+e)}"anonymous"===L.crossOrigin&&(U?I.crossOrigin=U:L.removeAttribute("crossorigin"))};L.complete&&0!==L.naturalWidth?recordInlineImage():L.addEventListener("load",recordInlineImage)}if("audio"===S||"video"===S){var B=I;B.rr_mediaState=e.paused?"paused":"played",B.rr_mediaCurrentTime=e.currentTime,B.rr_mediaPlaybackRate=e.playbackRate,B.rr_mediaMuted=e.muted,B.rr_mediaLoop=e.loop,B.rr_mediaVolume=e.volume}_||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(b){var $=e.getBoundingClientRect(),z=$.width,j=$.height;I={class:I.class,rr_width:z+"px",rr_height:j+"px"}}"iframe"!==S||g(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);try{customElements.get(S)&&(r=!0)}catch(e){}return{type:c.Element,tagName:S,attributes:I,childNodes:[],isSVG:isSVGElement(e)||void 0,needBlock:b,rootId:y,isCustom:r}}(e,{doc:r,blockClass:i,blockSelector:o,inlineStylesheet:a,maskInputOptions:l,maskInputFn:h,dataURLOptions:g,inlineImages:v,recordCanvas:_,keepIframeSrcFn:y,newlyAddedElement:S,rootId:O});case e.TEXT_NODE:return function serializeTextNode(e,t){var r=t.needsMask,n=t.maskTextFn,i=t.rootId,o=t.cssCaptured,s=f.parentNode(e),a=s&&s.tagName,u="",l="STYLE"===a||void 0,p="SCRIPT"===a||void 0;p?u="SCRIPT_PLACEHOLDER":o||(u=f.textContent(e),l&&u&&(u=absolutifyURLs(u,getHref(t.doc))));!l&&!p&&u&&r&&(u=n?n(u,f.parentElement(e)):u.replace(/[\S]/g,"*"));return{type:c.Text,textContent:u||"",rootId:i}}(e,{doc:r,needsMask:s,maskTextFn:p,rootId:O,cssCaptured:x});case e.CDATA_SECTION_NODE:return{type:c.CDATA,textContent:"",rootId:O};case e.COMMENT_NODE:return{type:c.Comment,textContent:f.textContent(e)||"",rootId:O};default:return!1}}function lowerIfExists(e){return null==e?"":e.toLowerCase()}function serializeNodeWithId(e,t){var r=t.doc,n=t.mirror,i=t.blockClass,o=t.blockSelector,s=t.maskTextClass,a=t.maskTextSelector,u=t.skipChild,l=void 0!==u&&u,p=t.inlineStylesheet,h=void 0===p||p,d=t.maskInputOptions,g=void 0===d?{}:d,m=t.maskTextFn,v=t.maskInputFn,_=t.slimDOMOptions,y=t.dataURLOptions,b=void 0===y?{}:y,w=t.inlineImages,k=void 0!==w&&w,S=t.recordCanvas,C=void 0!==S&&S,I=t.onSerialize,x=t.onIframeLoad,O=t.iframeLoadTimeout,E=void 0===O?5e3:O,M=t.onStylesheetLoad,R=t.stylesheetLoadTimeout,A=void 0===R?5e3:R,T=t.keepIframeSrcFn,P=void 0===T?function(){return!1}:T,N=t.newlyAddedElement,D=void 0!==N&&N,L=t.cssCaptured,F=void 0!==L&&L,U=t.needsMask,B=t.preserveWhiteSpace,$=void 0===B||B;U||(U=needMaskingText(e,s,a,void 0===U));var z,j=serializeNode(e,{doc:r,mirror:n,blockClass:i,blockSelector:o,needsMask:U,inlineStylesheet:h,maskInputOptions:g,maskTextFn:m,maskInputFn:v,dataURLOptions:b,inlineImages:k,recordCanvas:C,keepIframeSrcFn:P,newlyAddedElement:D,cssCaptured:F});if(!j)return console.warn(e,"not serialized"),null;z=n.hasNode(e)?n.getId(e):function slimDOMExcluded(e,t){if(t.comment&&e.type===c.Comment)return!0;if(e.type===c.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel&&"script"===e.attributes.as||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===extractFileExtension(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(lowerIfExists(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(e.attributes.name)||"icon"===lowerIfExists(e.attributes.rel)||"apple-touch-icon"===lowerIfExists(e.attributes.rel)||"shortcut icon"===lowerIfExists(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&lowerIfExists(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(lowerIfExists(e.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===lowerIfExists(e.attributes.name)||"googlebot"===lowerIfExists(e.attributes.name)||"bingbot"===lowerIfExists(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===lowerIfExists(e.attributes.name)||"generator"===lowerIfExists(e.attributes.name)||"framework"===lowerIfExists(e.attributes.name)||"publisher"===lowerIfExists(e.attributes.name)||"progid"===lowerIfExists(e.attributes.name)||lowerIfExists(e.attributes.property).match(/^article:/)||lowerIfExists(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===lowerIfExists(e.attributes.name)||"yandex-verification"===lowerIfExists(e.attributes.name)||"csrf-token"===lowerIfExists(e.attributes.name)||"p:domain_verify"===lowerIfExists(e.attributes.name)||"verify-v1"===lowerIfExists(e.attributes.name)||"verification"===lowerIfExists(e.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(e.attributes.name)))return!0}}return!1}(j,_)||!$&&j.type===c.Text&&!j.textContent.replace(/^\s+|\s+$/gm,"").length?-2:genId();var q=Object.assign(j,{id:z});if(n.add(e,q),-2===z)return null;I&&I(e);var W=!l;if(q.type===c.Element){W=W&&!q.needBlock,delete q.needBlock;var V=f.shadowRoot(e);V&&isNativeShadowDom(V)&&(q.isShadowHost=!0)}if((q.type===c.Document||q.type===c.Element)&&W){_.headWhitespace&&q.type===c.Element&&"head"===q.tagName&&($=!1);var G={doc:r,mirror:n,blockClass:i,blockSelector:o,needsMask:U,maskTextClass:s,maskTextSelector:a,skipChild:l,inlineStylesheet:h,maskInputOptions:g,maskTextFn:m,maskInputFn:v,slimDOMOptions:_,dataURLOptions:b,inlineImages:k,recordCanvas:C,preserveWhiteSpace:$,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:E,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:P,cssCaptured:!1};if(q.type===c.Element&&"textarea"===q.tagName&&void 0!==q.attributes.value);else{q.type===c.Element&&void 0!==q.attributes._cssText&&"string"==typeof q.attributes._cssText&&(G.cssCaptured=!0);for(var H,J=_create_for_of_iterator_helper_loose(Array.from(f.childNodes(e)));!(H=J()).done;){var Y=serializeNodeWithId(H.value,G);Y&&q.childNodes.push(Y)}}var Z=null;if(isElement(e)&&(Z=f.shadowRoot(e)))for(var X,K=_create_for_of_iterator_helper_loose(Array.from(f.childNodes(Z)));!(X=K()).done;){var Q=serializeNodeWithId(X.value,G);Q&&(isNativeShadowDom(Z)&&(Q.isShadow=!0),q.childNodes.push(Q))}}var ee=f.parentNode(e);return ee&&isShadowRoot(ee)&&isNativeShadowDom(ee)&&(q.isShadow=!0),q.type===c.Element&&"iframe"===q.tagName&&function onceIframeLoaded(e,t,r){var n=e.contentWindow;if(n){var i,o=!1;try{i=n.document.readyState}catch(e){return}if("complete"===i){var s="about:blank";if(n.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var a=setTimeout(function(){o||(t(),o=!0)},r);e.addEventListener("load",function(){clearTimeout(a),o=!0,t()})}}}(e,function(){var t=e.contentDocument;if(t&&x){var r=serializeNodeWithId(t,{doc:t,mirror:n,blockClass:i,blockSelector:o,needsMask:U,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskTextFn:m,maskInputFn:v,slimDOMOptions:_,dataURLOptions:b,inlineImages:k,recordCanvas:C,preserveWhiteSpace:$,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:E,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:P});r&&x(e,r)}},E),q.type===c.Element&&"link"===q.tagName&&"string"==typeof q.attributes.rel&&("stylesheet"===q.attributes.rel||"preload"===q.attributes.rel&&"string"==typeof q.attributes.href&&"css"===extractFileExtension(q.attributes.href))&&function onceStylesheetLoaded(e,t,r){var n,i=!1;try{n=e.sheet}catch(e){return}if(!n){var o=setTimeout(function(){i||(t(),i=!0)},r);e.addEventListener("load",function(){clearTimeout(o),i=!0,t()})}}(e,function(){if(M){var t=serializeNodeWithId(e,{doc:r,mirror:n,blockClass:i,blockSelector:o,needsMask:U,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskTextFn:m,maskInputFn:v,slimDOMOptions:_,dataURLOptions:b,inlineImages:k,recordCanvas:C,preserveWhiteSpace:$,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:E,onStylesheetLoad:M,stylesheetLoadTimeout:A,keepIframeSrcFn:P});t&&M(e,t)}},A),q}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function a22(){return _instanceof(this,a22)?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function get(){return e[t]}})}),r}var E={exports:{}},M=String,R=function create$1(){return{isColorSupported:!1,reset:M,bold:M,dim:M,italic:M,underline:M,inverse:M,hidden:M,strikethrough:M,black:M,red:M,green:M,yellow:M,blue:M,magenta:M,cyan:M,white:M,gray:M,bgBlack:M,bgRed:M,bgGreen:M,bgYellow:M,bgBlue:M,bgMagenta:M,bgCyan:M,bgWhite:M}};E.exports=R(),E.exports.createColors=R;var A=E.exports,T=getAugmentedNamespace$1(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),P=A,N=T,D=function(e){function CssSyntaxError(t,r,n,i,o,s){var a;return(a=e.call(this,t)||this).name="CssSyntaxError",a.reason=t,o&&(a.file=o),i&&(a.source=i),s&&(a.plugin=s),void 0!==r&&void 0!==n&&("number"==typeof r?(a.line=r,a.column=n):(a.line=r.line,a.column=r.column,a.endLine=n.line,a.endColumn=n.column)),a.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(a,CssSyntaxError),a}_inherits(CssSyntaxError,e);var t=CssSyntaxError.prototype;return t.setMessage=function setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},t.showSourceCode=function showSourceCode(e){var t=this;if(!this.source)return"";var r=this.source;null==e&&(e=P.isColorSupported),N&&e&&(r=N(r));var n,i,o=r.split(/\r?\n/),s=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),c=String(a).length;if(e){var u=P.createColors(!0),l=u.bold,p=u.gray,h=u.red;n=function(e){return l(h(e))},i=function(e){return p(e)}}else n=i=function(e){return e};return o.slice(s,a).map(function(e,r){var o=s+1+r,a=" "+(" "+o).slice(-c)+" | ";if(o===t.line){var u=i(a.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," ");return n(">")+i(a)+e+"\n "+u+n("^")}return" "+i(a)+e}).join("\n")},t.toString=function toString(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e},CssSyntaxError}(_wrap_native_super(Error)),L=D;D.default=D;var F={};F.isClean=Symbol("isClean"),F.my=Symbol("my");var U={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var B=function(){function Stringifier(e){this.builder=e}var e=Stringifier.prototype;return e.atrule=function atrule(e,t){var r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{var i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}},e.beforeAfter=function beforeAfter(e,t){var r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var n=e.parent,i=0;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){var o=this.raw(e,null,"indent");if(o.length)for(var s=0;s<i;s++)r+=o}return r},e.block=function block(e,t){var r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")},e.body=function body(e){for(var t=e.nodes.length-1;t>0&&"comment"===e.nodes[t].type;)t-=1;for(var r=this.raw(e,"semicolon"),n=0;n<e.nodes.length;n++){var i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}},e.comment=function comment(e){var t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)},e.decl=function decl(e,t){var r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)},e.document=function document1(e){this.body(e)},e.raw=function raw(e,t,r){var n;if(r||(r=t),t&&void 0!==(n=e.raws[t]))return n;var i=e.parent;if("before"===r){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return U[r];var o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);var s="raw"+function capitalize$1(e){return e[0].toUpperCase()+e.slice(1)}(r);return this[s]?n=this[s](o,e):o.walk(function(e){if(void 0!==(n=e.raws[t]))return!1}),void 0===n&&(n=U[r]),o.rawCache[r]=n,n},e.rawBeforeClose=function rawBeforeClose(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t},e.rawBeforeComment=function rawBeforeComment(e,t){var r;return e.walkComments(function(e){if(void 0!==e.raws.before)return(r=e.raws.before).includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r},e.rawBeforeDecl=function rawBeforeDecl(e,t){var r;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(r=e.raws.before).includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r},e.rawBeforeOpen=function rawBeforeOpen(e){var t;return e.walk(function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1}),t},e.rawBeforeRule=function rawBeforeRule(e){var t;return e.walk(function(r){if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return(t=r.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t},e.rawColon=function rawColon(e){var t;return e.walkDecls(function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t},e.rawEmptyBody=function rawEmptyBody(e){var t;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1}),t},e.rawIndent=function rawIndent(e){return e.raws.indent?e.raws.indent:(e.walk(function(r){var n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){var i=r.raws.before.split("\n");return t=(t=i[i.length-1]).replace(/\S/g,""),!1}}),t);var t},e.rawSemicolon=function rawSemicolon(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1}),t},e.rawValue=function rawValue(e,t){var r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r},e.root=function root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)},e.rule=function rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")},e.stringify=function stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)},Stringifier}(),$=B;B.default=B;var z=$;function stringify$4$1(e,t){new z(t).stringify(e)}var j=stringify$4$1;stringify$4$1.default=stringify$4$1;var q=F.isClean,W=F.my,V=L,G=$,H=j;function cloneNode$1(e,t){var r=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"proxyCache"!==n){var i=e[n],o=void 0===i?"undefined":_type_of(i);"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map(function(e){return cloneNode$1(e,r)}):("object"===o&&null!==i&&(i=cloneNode$1(i)),r[n]=i)}return r}var J=function(){function Node2(e){for(var t in void 0===e&&(e={}),this.raws={},this[q]=!1,this[W]=!0,e)if("nodes"===t){this.nodes=[];for(var r,n=_create_for_of_iterator_helper_loose(e[t]);!(r=n()).done;){var i=r.value;"function"==typeof i.clone?this.append(i.clone()):this.append(i)}}else this[t]=e[t]}var e=Node2.prototype;return e.addToError=function addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&"+t.input.from+":"+t.start.line+":"+t.start.column+"$&")}return e},e.after=function after(e){return this.parent.insertAfter(this,e),this},e.assign=function assign(e){for(var t in void 0===e&&(e={}),e)this[t]=e[t];return this},e.before=function before(e){return this.parent.insertBefore(this,e),this},e.cleanRaws=function cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between},e.clone=function clone(e){void 0===e&&(e={});var t=cloneNode$1(this);for(var r in e)t[r]=e[r];return t},e.cloneAfter=function cloneAfter(e){void 0===e&&(e={});var t=this.clone(e);return this.parent.insertAfter(this,t),t},e.cloneBefore=function cloneBefore(e){void 0===e&&(e={});var t=this.clone(e);return this.parent.insertBefore(this,t),t},e.error=function error(e,t){if(void 0===t&&(t={}),this.source){var r=this.rangeBy(t),n=r.end,i=r.start;return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},t)}return new V(e)},e.getProxyProcessor=function getProxyProcessor(){return{get:function get(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function set(e,t,r){return e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}},e.markDirty=function markDirty(){if(this[q]){this[q]=!1;for(var e=this;e=e.parent;)e[q]=!1}},e.next=function next(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}},e.positionBy=function positionBy(e,t){var r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){var n=(t=this.toString()).indexOf(e.word);-1!==n&&(r=this.positionInside(n,t))}return r},e.positionInside=function positionInside(e,t){for(var r=t||this.toString(),n=this.source.start.column,i=this.source.start.line,o=0;o<e;o++)"\n"===r[o]?(n=1,i+=1):n+=1;return{column:n,line:i}},e.prev=function prev(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}},e.rangeBy=function rangeBy(e){var t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var n=this.toString(),i=n.indexOf(e.word);-1!==i&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}},e.raw=function raw(e,t){return(new G).raw(this,e,t)},e.remove=function remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function replaceWith(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.parent){for(var n,i=this,o=!1,s=_create_for_of_iterator_helper_loose(t);!(n=s()).done;){var a=n.value;a===this?o=!0:o?(this.parent.insertAfter(i,a),i=a):this.parent.insertBefore(i,a)}o||this.remove()}return this},e.root=function root(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e},e.toJSON=function toJSON(e,t){var r={},n=null==t;t=t||new Map;var i=0;for(var o in this)if(Object.prototype.hasOwnProperty.call(this,o)&&"parent"!==o&&"proxyCache"!==o){var s=this[o];if(Array.isArray(s))r[o]=s.map(function(e){return"object"===(void 0===e?"undefined":_type_of(e))&&e.toJSON?e.toJSON(null,t):e});else if("object"===(void 0===s?"undefined":_type_of(s))&&s.toJSON)r[o]=s.toJSON(null,t);else if("source"===o){var a=t.get(s.input);null==a&&(a=i,t.set(s.input,i),i++),r[o]={end:s.end,inputId:a,start:s.start}}else r[o]=s}return n&&(r.inputs=[].concat(t.keys()).map(function(e){return e.toJSON()})),r},e.toProxy=function toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache},e.toString=function toString(e){void 0===e&&(e=H),e.stringify&&(e=e.stringify);var t="";return e(this,function(e){t+=e}),t},e.warn=function warn(e,t,r){var n={node:this};for(var i in r)n[i]=r[i];return e.warn(t,n)},_create_class(Node2,[{key:"proxyOf",get:function get(){return this}}]),Node2}(),Y=J;J.default=J;var Z=function(e){function Declaration(t){var r;return t&&void 0!==t.value&&"string"!=typeof t.value&&(t=_extends({},t,{value:String(t.value)})),(r=e.call(this,t)||this).type="decl",r}return _inherits(Declaration,e),_create_class(Declaration,[{key:"variable",get:function get(){return this.prop.startsWith("--")||"$"===this.prop[0]}}]),Declaration}(Y),X=Z;Z.default=Z;var nonSecure$1_nanoid=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},K=T.SourceMapConsumer,Q=T.SourceMapGenerator,ee=T.existsSync,te=T.readFileSync,re=T.dirname,ne=T.join;var ie=function(){function PreviousMap(e,t){if(!1!==t.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=re(this.mapFile)),n&&(this.text=n)}}var e=PreviousMap.prototype;return e.consumer=function consumer(){return this.consumerCache||(this.consumerCache=new K(this.text)),this.consumerCache},e.decodeInline=function decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return function fromBase64$1(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}(e.substr(RegExp.lastMatch.length));var t=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+t)},e.getAnnotationURL=function getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()},e.isMap=function isMap(e){return"object"===(void 0===e?"undefined":_type_of(e))&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))},e.loadAnnotation=function loadAnnotation(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){var r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}},e.loadFile=function loadFile(e){if(this.root=re(e),ee(e))return this.mapFile=e,te(e,"utf-8").toString().trim()},e.loadMap=function loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(_instanceof(t,K))return Q.fromSourceMap(t).toString();if(_instanceof(t,Q))return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}var r=t(e);if(r){var n=this.loadFile(r);if(!n)throw new Error("Unable to load previous source map: "+r.toString());return n}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var i=this.annotation;return e&&(i=ne(re(e),i)),this.loadFile(i)}}},e.startWith=function startWith(e,t){return!!e&&e.substr(0,t.length)===t},e.withContent=function withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},PreviousMap}(),oe=ie;ie.default=ie;var se=T.SourceMapConsumer,ae=T.SourceMapGenerator,ce=T.fileURLToPath,ue=T.pathToFileURL,le=T.isAbsolute,pe=T.resolve,he=nonSecure$1_nanoid,de=T,fe=L,ge=oe,me=Symbol("fromOffsetCache"),ve=Boolean(se&&ae),_e=Boolean(pe&&le),ye=function(){function Input(e,t){if(void 0===t&&(t={}),null==e||"object"===(void 0===e?"undefined":_type_of(e))&&!e.toString)throw new Error("PostCSS received "+e+" instead of CSS string");if(this.css=e.toString(),"\ufeff"===this.css[0]||"ï¿¾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!_e||/^\w+:\/\//.test(t.from)||le(t.from)?this.file=t.from:this.file=pe(t.from)),_e&&ve){var r=new ge(this.css,t);if(r.text){this.map=r;var n=r.consumer().file;!this.file&&n&&(this.file=this.mapResolve(n))}}this.file||(this.id="<input css "+he(6)+">"),this.map&&(this.map.file=this.from)}var e=Input.prototype;return e.error=function error(e,t,r,n){var i,o,s;if(void 0===n&&(n={}),t&&"object"===(void 0===t?"undefined":_type_of(t))){var a=t,c=r;if("number"==typeof a.offset){var u=this.fromOffset(a.offset);t=u.line,r=u.col}else t=a.line,r=a.column;if("number"==typeof c.offset){var l=this.fromOffset(c.offset);o=l.line,s=l.col}else o=c.line,s=c.column}else if(!r){var p=this.fromOffset(t);t=p.line,r=p.col}var h=this.origin(t,r,o,s);return(i=h?new fe(e,void 0===h.endLine?h.line:{column:h.column,line:h.line},void 0===h.endLine?h.column:{column:h.endColumn,line:h.endLine},h.source,h.file,n.plugin):new fe(e,void 0===o?t:{column:r,line:t},void 0===o?r:{column:s,line:o},this.css,this.file,n.plugin)).input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(ue&&(i.input.url=ue(this.file).toString()),i.input.file=this.file),i},e.fromOffset=function fromOffset(e){var t;if(this[me])t=this[me];else{var r=this.css.split("\n");t=new Array(r.length);for(var n=0,i=0,o=r.length;i<o;i++)t[i]=n,n+=r[i].length+1;this[me]=t}var s=0;if(e>=t[t.length-1])s=t.length-1;else for(var a,c=t.length-2;s<c;)if(e<t[a=s+(c-s>>1)])c=a-1;else{if(!(e>=t[a+1])){s=a;break}s=a+1}return{col:e-t[s]+1,line:s+1}},e.mapResolve=function mapResolve(e){return/^\w+:\/\//.test(e)?e:pe(this.map.consumer().sourceRoot||this.map.root||".",e)},e.origin=function origin(e,t,r,n){if(!this.map)return!1;var i,o,s=this.map.consumer(),a=s.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(i=s.originalPositionFor({column:n,line:r})),o=le(a.source)?ue(a.source):new URL(a.source,this.map.consumer().sourceRoot||ue(this.map.mapFile));var c={column:a.column,endColumn:i&&i.column,endLine:i&&i.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!ce)throw new Error("file: protocol is not available in this PostCSS build");c.file=ce(o)}var u=s.sourceContentFor(a.source);return u&&(c.source=u),c},e.toJSON=function toJSON(){for(var e={},t=0,r=["hasBOM","css","file","id"];t<r.length;t++){var n=r[t];null!=this[n]&&(e[n]=this[n])}return this.map&&(e.map=_extends({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e},_create_class(Input,[{key:"from",get:function get(){return this.file||this.id}}]),Input}(),be=ye;ye.default=ye,de&&de.registerInput&&de.registerInput(ye);var we=T.SourceMapConsumer,ke=T.SourceMapGenerator,Se=T.dirname,Ce=T.relative,Ie=T.resolve,xe=T.sep,Oe=T.pathToFileURL,Ee=be,Me=Boolean(we&&ke),Re=Boolean(Se&&Ie&&Ce&&xe),Ae=function(){function MapGenerator(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}var e=MapGenerator.prototype;return e.addAnnotation=function addAnnotation(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"},e.applyPrevMaps=function applyPrevMaps(){for(var e,t=_create_for_of_iterator_helper_loose(this.previous());!(e=t()).done;){var r=e.value,n=this.toUrl(this.path(r.file)),i=r.root||Se(r.file),o=void 0;!1===this.mapOpts.sourcesContent?(o=new we(r.text)).sourcesContent&&(o.sourcesContent=null):o=r.consumer(),this.map.applySourceMap(o,n,this.toUrl(this.path(i)))}},e.clearAnnotation=function clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))},e.generate=function generate(){if(this.clearAnnotation(),Re&&Me&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(t){e+=t}),[e]},e.generateMap=function generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=ke.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new ke({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},e.generateString=function generateString(){var e=this;this.css="",this.map=new ke({file:this.outputFile(),ignoreInvalidMapping:!0});var t,r,n=1,i=1,o="<no source>",s={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(a,c,u){if(e.css+=a,c&&"end"!==u&&(s.generated.line=n,s.generated.column=i-1,c.source&&c.source.start?(s.source=e.sourcePath(c),s.original.line=c.source.start.line,s.original.column=c.source.start.column-1,e.map.addMapping(s)):(s.source=o,s.original.line=1,s.original.column=0,e.map.addMapping(s))),(t=a.match(/\n/g))?(n+=t.length,r=a.lastIndexOf("\n"),i=a.length-r):i+=a.length,c&&"start"!==u){var l=c.parent||{raws:{}};("decl"===c.type||"atrule"===c.type&&!c.nodes)&&c===l.last&&!l.raws.semicolon||(c.source&&c.source.end?(s.source=e.sourcePath(c),s.original.line=c.source.end.line,s.original.column=c.source.end.column-1,s.generated.line=n,s.generated.column=i-2,e.map.addMapping(s)):(s.source=o,s.original.line=1,s.original.column=0,s.generated.line=n,s.generated.column=i-1,e.map.addMapping(s)))}})},e.isAnnotation=function isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))},e.isInline=function isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))},e.isMap=function isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0},e.isSourcesContent=function isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})},e.outputFile=function outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"},e.path=function path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);if(t)return t;var r=this.opts.to?Se(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=Se(Ie(r,this.mapOpts.annotation)));var path=Ce(r,e);return this.memoizedPaths.set(e,path),path},e.previous=function previous(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(t){if(t.source&&t.source.input.map){var r=t.source.input.map;e.previousMaps.includes(r)||e.previousMaps.push(r)}});else{var t=new Ee(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps},e.setSourcesContent=function setSourcesContent(){var e=this,t={};if(this.root)this.root.walk(function(r){if(r.source){var n=r.source.input.from;if(n&&!t[n]){t[n]=!0;var i=e.usesFileUrls?e.toFileUrl(n):e.toUrl(e.path(n));e.map.setSourceContent(i,r.source.input.css)}}});else if(this.css){var r=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(r,this.css)}},e.sourcePath=function sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))},e.toBase64=function toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))},e.toFileUrl=function toFileUrl(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(Oe){var r=Oe(e).toString();return this.memoizedFileURLs.set(e,r),r}throw new Error("`map.absolute` option is not available in this PostCSS build")},e.toUrl=function toUrl(e){var t=this.memoizedURLs.get(e);if(t)return t;"\\"===xe&&(e=e.replace(/\\/g,"/"));var r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r},MapGenerator}(),Te=function(e){function Comment(t){var r;return(r=e.call(this,t)||this).type="comment",r}return _inherits(Comment,e),Comment}(Y),Pe=Te;Te.default=Te;var Ne,De,Le,Fe,Ue=F.isClean,Be=F.my,$e=X,ze=Pe;function cleanSource$1(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource$1(e.nodes)),delete e.source,e})}function markDirtyUp$1(e){if(e[Ue]=!1,e.proxyOf.nodes)for(var t,r=_create_for_of_iterator_helper_loose(e.proxyOf.nodes);!(t=r()).done;){markDirtyUp$1(t.value)}}var je=function(e){function Container(){return e.apply(this,arguments)||this}_inherits(Container,e);var t=Container.prototype;return t.append=function append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,i=_create_for_of_iterator_helper_loose(t);!(n=i()).done;)for(var o,s=n.value,a=_create_for_of_iterator_helper_loose(this.normalize(s,this.last));!(o=a()).done;){var c=o.value;this.proxyOf.nodes.push(c)}return this.markDirty(),this},t.cleanRaws=function cleanRaws(t){if(e.prototype.cleanRaws.call(this,t),this.nodes)for(var r,n=_create_for_of_iterator_helper_loose(this.nodes);!(r=n()).done;){r.value.cleanRaws(t)}},t.each=function each(e){if(this.proxyOf.nodes){for(var t,r,n=this.getIterator();this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],!1!==(r=e(this.proxyOf.nodes[t],t)));)this.indexes[n]+=1;return delete this.indexes[n],r}},t.every=function every(e){return this.nodes.every(e)},t.getIterator=function getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e},t.getProxyProcessor=function getProxyProcessor(){return{get:function get(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o;return(o=e)[t].apply(o,[].concat(n.map(function(e){return"function"==typeof e?function(t,r){return e(t.toProxy(),r)}:e})))}:"every"===t||"some"===t?function(r){return e[t](function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.apply(void 0,[].concat([e.toProxy()],n))})}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map(function(e){return e.toProxy()}):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function set(e,t,r){return e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}},t.index=function index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))},t.insertAfter=function insertAfter(e,t){var r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(var o,s=_create_for_of_iterator_helper_loose(i);!(o=s()).done;){var a=o.value;this.proxyOf.nodes.splice(n+1,0,a)}for(var c in this.indexes)n<(r=this.indexes[c])&&(this.indexes[c]=r+i.length);return this.markDirty(),this},t.insertBefore=function insertBefore(e,t){var r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(var s,a=_create_for_of_iterator_helper_loose(o);!(s=a()).done;){var c=s.value;this.proxyOf.nodes.splice(n,0,c)}for(var u in this.indexes)n<=(r=this.indexes[u])&&(this.indexes[u]=r+o.length);return this.markDirty(),this},t.normalize=function normalize(e,t){var r=this;if("string"==typeof e)e=cleanSource$1(Ne(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e))for(var n,i=_create_for_of_iterator_helper_loose(e=e.slice(0));!(n=i()).done;){var o=n.value;o.parent&&o.parent.removeChild(o,"ignore")}else if("root"===e.type&&"document"!==this.type)for(var s,a=_create_for_of_iterator_helper_loose(e=e.nodes.slice(0));!(s=a()).done;){var c=s.value;c.parent&&c.parent.removeChild(c,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new $e(e)]}else if(e.selector)e=[new De(e)];else if(e.name)e=[new Le(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new ze(e)]}var u=e.map(function(e){return e[Be]||Container.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[Ue]&&markDirtyUp$1(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e});return u},t.prepend=function prepend(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,i=_create_for_of_iterator_helper_loose(t=t.reverse());!(n=i()).done;){for(var o,s=n.value,a=this.normalize(s,this.first,"prepend").reverse(),c=_create_for_of_iterator_helper_loose(a);!(o=c()).done;){var u=o.value;this.proxyOf.nodes.unshift(u)}for(var l in this.indexes)this.indexes[l]=this.indexes[l]+a.length}return this.markDirty(),this},t.push=function push(e){return e.parent=this,this.proxyOf.nodes.push(e),this},t.removeAll=function removeAll(){for(var e,t=_create_for_of_iterator_helper_loose(this.proxyOf.nodes);!(e=t()).done;){e.value.parent=void 0}return this.proxyOf.nodes=[],this.markDirty(),this},t.removeChild=function removeChild(e){var t;for(var r in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(t=this.indexes[r])>=e&&(this.indexes[r]=t-1);return this.markDirty(),this},t.replaceValues=function replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(function(n){t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))}),this.markDirty(),this},t.some=function some(e){return this.nodes.some(e)},t.walk=function walk(e){return this.each(function(t,r){var n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n})},t.walkAtRules=function walkAtRules(e,t){return t?_instanceof(e,RegExp)?this.walk(function(r,n){if("atrule"===r.type&&e.test(r.name))return t(r,n)}):this.walk(function(r,n){if("atrule"===r.type&&r.name===e)return t(r,n)}):(t=e,this.walk(function(e,r){if("atrule"===e.type)return t(e,r)}))},t.walkComments=function walkComments(e){return this.walk(function(t,r){if("comment"===t.type)return e(t,r)})},t.walkDecls=function walkDecls(e,t){return t?_instanceof(e,RegExp)?this.walk(function(r,n){if("decl"===r.type&&e.test(r.prop))return t(r,n)}):this.walk(function(r,n){if("decl"===r.type&&r.prop===e)return t(r,n)}):(t=e,this.walk(function(e,r){if("decl"===e.type)return t(e,r)}))},t.walkRules=function walkRules(e,t){return t?_instanceof(e,RegExp)?this.walk(function(r,n){if("rule"===r.type&&e.test(r.selector))return t(r,n)}):this.walk(function(r,n){if("rule"===r.type&&r.selector===e)return t(r,n)}):(t=e,this.walk(function(e,r){if("rule"===e.type)return t(e,r)}))},_create_class(Container,[{key:"first",get:function get(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function get(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}]),Container}(Y);je.registerParse=function(e){Ne=e},je.registerRule=function(e){De=e},je.registerAtRule=function(e){Le=e},je.registerRoot=function(e){Fe=e};var qe=je;je.default=je,je.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,Le.prototype):"rule"===e.type?Object.setPrototypeOf(e,De.prototype):"decl"===e.type?Object.setPrototypeOf(e,$e.prototype):"comment"===e.type?Object.setPrototypeOf(e,ze.prototype):"root"===e.type&&Object.setPrototypeOf(e,Fe.prototype),e[Be]=!0,e.nodes&&e.nodes.forEach(function(e){je.rebuild(e)})};var We,Ve,Ge=function(e){function Document2(t){var r;return(r=e.call(this,_extends({type:"document"},t))||this).nodes||(r.nodes=[]),r}return _inherits(Document2,e),Document2.prototype.toResult=function toResult(e){return void 0===e&&(e={}),new We(new Ve,this,e).stringify()},Document2}(qe);Ge.registerLazyResult=function(e){We=e},Ge.registerProcessor=function(e){Ve=e};var He=Ge;Ge.default=Ge;var Je=function(){function Warning(e,t){if(void 0===t&&(t={}),this.type="warning",this.text=e,t.node&&t.node.source){var r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var n in t)this[n]=t[n]}return Warning.prototype.toString=function toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},Warning}(),Ye=Je;Je.default=Je;var Ze=Ye,Xe=function(){function Result(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}var e=Result.prototype;return e.toString=function toString(){return this.css},e.warn=function warn(e,t){void 0===t&&(t={}),t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);var r=new Ze(e,t);return this.messages.push(r),r},e.warnings=function warnings(){return this.messages.filter(function(e){return"warning"===e.type})},_create_class(Result,[{key:"content",get:function get(){return this.css}}]),Result}(),Ke=Xe;Xe.default=Xe;var Qe="'".charCodeAt(0),et='"'.charCodeAt(0),tt="\\".charCodeAt(0),rt="/".charCodeAt(0),nt="\n".charCodeAt(0),it=" ".charCodeAt(0),ot="\f".charCodeAt(0),st="\t".charCodeAt(0),at="\r".charCodeAt(0),ct="[".charCodeAt(0),ut="]".charCodeAt(0),lt="(".charCodeAt(0),pt=")".charCodeAt(0),ht="{".charCodeAt(0),dt="}".charCodeAt(0),ft=";".charCodeAt(0),gt="*".charCodeAt(0),mt=":".charCodeAt(0),vt="@".charCodeAt(0),_t=/[\t\n\f\r "#'()/;[\\\]{}]/g,yt=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,bt=/.[\r\n"'(/\\]/,wt=/[\da-f]/i,kt=qe,St=function(e){function AtRule(t){var r;return(r=e.call(this,t)||this).type="atrule",r}_inherits(AtRule,e);var t=AtRule.prototype;return t.append=function append(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i;return this.proxyOf.nodes||(this.nodes=[]),(i=e.prototype.append).call.apply(i,[].concat([this],r))},t.prepend=function prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i;return this.proxyOf.nodes||(this.nodes=[]),(i=e.prototype.prepend).call.apply(i,[].concat([this],r))},AtRule}(kt),Ct=St;St.default=St,kt.registerAtRule(St);var It,xt,Ot=qe,Et=function(e){function Root(t){var r;return(r=e.call(this,t)||this).type="root",r.nodes||(r.nodes=[]),r}_inherits(Root,e);var t=Root.prototype;return t.normalize=function normalize(t,r,n){var i=e.prototype.normalize.call(this,t);if(r)if("prepend"===n)this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(var o,s=_create_for_of_iterator_helper_loose(i);!(o=s()).done;){o.value.raws.before=r.raws.before}return i},t.removeChild=function removeChild(t,r){var n=this.index(t);return!r&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),e.prototype.removeChild.call(this,t)},t.toResult=function toResult(e){return void 0===e&&(e={}),new It(new xt,this,e).stringify()},Root}(Ot);Et.registerLazyResult=function(e){It=e},Et.registerProcessor=function(e){xt=e};var Mt=Et;Et.default=Et,Ot.registerRoot(Et);var Rt={comma:function comma(e){return Rt.split(e,[","],!0)},space:function space(e){return Rt.split(e,[" ","\n","\t"])},split:function split(e,t,r){for(var n,i=[],o="",split=!1,s=0,a=!1,c="",u=!1,l=_create_for_of_iterator_helper_loose(e);!(n=l()).done;){var p=n.value;u?u=!1:"\\"===p?u=!0:a?p===c&&(a=!1):'"'===p||"'"===p?(a=!0,c=p):"("===p?s+=1:")"===p?s>0&&(s-=1):0===s&&t.includes(p)&&(split=!0),split?(""!==o&&i.push(o.trim()),o="",split=!1):o+=p}return(r||""!==o)&&i.push(o.trim()),i}},At=Rt;Rt.default=Rt;var Tt=qe,Pt=At,Nt=function(e){function Rule(t){var r;return(r=e.call(this,t)||this).type="rule",r.nodes||(r.nodes=[]),r}return _inherits(Rule,e),_create_class(Rule,[{key:"selectors",get:function get(){return Pt.comma(this.selector)},set:function set(e){var t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}}]),Rule}(Tt),Dt=Nt;Nt.default=Nt,Tt.registerRule(Nt);var Lt=X,Ft=function tokenizer(e,t){void 0===t&&(t={});var r,n,i,o,s,a,c,u,l,p,h=e.css.valueOf(),d=t.ignoreErrors,f=h.length,g=0,m=[],v=[];function unclosed(t){throw e.error("Unclosed "+t,g)}return{back:function back(e){v.push(e)},endOfFile:function endOfFile(){return 0===v.length&&g>=f},nextToken:function nextToken(e){if(v.length)return v.pop();if(!(g>=f)){var t=!!e&&e.ignoreUnclosed;switch(r=h.charCodeAt(g)){case nt:case it:case st:case at:case ot:n=g;do{n+=1,r=h.charCodeAt(n)}while(r===it||r===nt||r===st||r===at||r===ot);p=["space",h.slice(g,n)],g=n-1;break;case ct:case ut:case ht:case dt:case mt:case ft:case pt:var _=String.fromCharCode(r);p=[_,_,g];break;case lt:if(u=m.length?m.pop()[1]:"",l=h.charCodeAt(g+1),"url"===u&&l!==Qe&&l!==et&&l!==it&&l!==nt&&l!==st&&l!==ot&&l!==at){n=g;do{if(a=!1,-1===(n=h.indexOf(")",n+1))){if(d||t){n=g;break}unclosed("bracket")}for(c=n;h.charCodeAt(c-1)===tt;)c-=1,a=!a}while(a);p=["brackets",h.slice(g,n+1),g,n],g=n}else n=h.indexOf(")",g+1),o=h.slice(g,n+1),-1===n||bt.test(o)?p=["(","(",g]:(p=["brackets",o,g,n],g=n);break;case Qe:case et:i=r===Qe?"'":'"',n=g;do{if(a=!1,-1===(n=h.indexOf(i,n+1))){if(d||t){n=g+1;break}unclosed("string")}for(c=n;h.charCodeAt(c-1)===tt;)c-=1,a=!a}while(a);p=["string",h.slice(g,n+1),g,n],g=n;break;case vt:_t.lastIndex=g+1,_t.test(h),n=0===_t.lastIndex?h.length-1:_t.lastIndex-2,p=["at-word",h.slice(g,n+1),g,n],g=n;break;case tt:for(n=g,s=!0;h.charCodeAt(n+1)===tt;)n+=1,s=!s;if(r=h.charCodeAt(n+1),s&&r!==rt&&r!==it&&r!==nt&&r!==st&&r!==at&&r!==ot&&(n+=1,wt.test(h.charAt(n)))){for(;wt.test(h.charAt(n+1));)n+=1;h.charCodeAt(n+1)===it&&(n+=1)}p=["word",h.slice(g,n+1),g,n],g=n;break;default:r===rt&&h.charCodeAt(g+1)===gt?(0===(n=h.indexOf("*/",g+2)+1)&&(d||t?n=h.length:unclosed("comment")),p=["comment",h.slice(g,n+1),g,n],g=n):(yt.lastIndex=g+1,yt.test(h),n=0===yt.lastIndex?h.length-1:yt.lastIndex-2,p=["word",h.slice(g,n+1),g,n],m.push(p),g=n)}return g++,p}},position:function position(){return g}}},Ut=Pe,Bt=Ct,$t=Mt,zt=Dt,jt={empty:!0,space:!0};var qt=function(){function Parser(e){this.input=e,this.root=new $t,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}var e=Parser.prototype;return e.atrule=function atrule(e){var t,r,n,i=new Bt;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);for(var o=!1,s=!1,a=[],c=[];!this.tokenizer.endOfFile();){if("("===(t=(e=this.tokenizer.nextToken())[0])||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){s=!0;break}if("}"===t){if(a.length>0){for(r=a[n=a.length-1];r&&"space"===r[0];)r=a[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]),i.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(i.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(i,"params",a),o&&(e=a[a.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),s&&(i.nodes=[],this.current=i)},e.checkMissedSemicolon=function checkMissedSemicolon(e){var t=this.colon(e);if(!1!==t){for(var r,n=0,i=t-1;i>=0&&("space"===(r=e[i])[0]||2!==(n+=1));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}},e.colon=function colon(e){for(var t,r,n,i,o=0,s=_create_for_of_iterator_helper_loose(e.entries());!(i=s()).done;){var a=i.value,c=a[0];if("("===(r=(t=a[1])[0])&&(o+=1),")"===r&&(o-=1),0===o&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return c}this.doubleColon(t)}n=t}return!1},e.comment=function comment(e){var t=new Ut;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;var r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{var n=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=n[2],t.raws.left=n[1],t.raws.right=n[3]}},e.createTokenizer=function createTokenizer(){this.tokenizer=Ft(this.input)},e.decl=function decl(e,t){var r=new Lt;this.init(r,e[0][2]);var n,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||function findLastWithPosition$1(e){for(var t=e.length-1;t>=0;t--){var r=e[t],n=r[3]||r[2];if(n)return n}}(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){var o=e[0][0];if(":"===o||"space"===o||"comment"===o)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(":"===(n=e.shift())[0]){r.raws.between+=n[1];break}"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),r.raws.between+=n[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));for(var s,a=[];e.length&&("space"===(s=e[0][0])||"comment"===s);)a.push(e.shift());this.precheckMissedSemicolon(e);for(var c=e.length-1;c>=0;c--){if("!important"===(n=e[c])[1].toLowerCase()){r.important=!0;var u=this.stringFrom(e,c);" !important"!==(u=this.spacesFromEnd(e)+u)&&(r.raws.important=u);break}if("important"===n[1].toLowerCase()){for(var l=e.slice(0),p="",h=c;h>0;h--){var d=l[h][0];if(0===p.trim().indexOf("!")&&"space"!==d)break;p=l.pop()[1]+p}0===p.trim().indexOf("!")&&(r.important=!0,r.raws.important=p,e=l)}if("space"!==n[0]&&"comment"!==n[0])break}var f=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});f&&(r.raws.between+=a.map(function(e){return e[1]}).join(""),a=[]),this.raw(r,"value",a.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)},e.doubleColon=function doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})},e.emptyRule=function emptyRule(e){var t=new zt;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t},e.end=function end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)},e.endFile=function endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())},e.freeSemicolon=function freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){var t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}},e.getPosition=function getPosition(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}},e.init=function init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)},e.other=function other(e){for(var t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],c=e;c;){if(r=c[0],a.push(c),"("===r||"["===r)i||(i=c),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=c),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,s);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)for(;a.length&&("space"===(c=a[a.length-1][0])||"comment"===c);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)},e.parse=function parse(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()},e.precheckMissedSemicolon=function precheckMissedSemicolon(){},e.raw=function raw(e,t,r,n){for(var i,o,s,a,c=r.length,u="",l=!0,p=0;p<c;p+=1)"space"!==(o=(i=r[p])[0])||p!==c-1||n?"comment"===o?(a=r[p-1]?r[p-1][0]:"empty",s=r[p+1]?r[p+1][0]:"empty",jt[a]||jt[s]||","===u.slice(-1)?l=!1:u+=i[1]):u+=i[1]:l=!1;if(!l){var raw=r.reduce(function(e,t){return e+t[1]},"");e.raws[t]={raw,value:u}}e[t]=u},e.rule=function rule(e){e.pop();var t=new zt;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t},e.spacesAndCommentsFromEnd=function spacesAndCommentsFromEnd(e){for(var t,r="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)r=e.pop()[1]+r;return r},e.spacesAndCommentsFromStart=function spacesAndCommentsFromStart(e){for(var t,r="";e.length&&("space"===(t=e[0][0])||"comment"===t);)r+=e.shift()[1];return r},e.spacesFromEnd=function spacesFromEnd(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t},e.stringFrom=function stringFrom(e,t){for(var r="",n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r},e.unclosedBlock=function unclosedBlock(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)},e.unclosedBracket=function unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})},e.unexpectedClose=function unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})},e.unknownWord=function unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})},e.unnamedAtrule=function unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})},Parser}(),Wt=qe,Vt=qt,Gt=be;function parse$3$1(e,t){var r=new Gt(e,t),n=new Vt(r);try{n.parse()}catch(e){throw e}return n.root}var Ht=parse$3$1;parse$3$1.default=parse$3$1,Wt.registerParse(parse$3$1);var Jt=F.isClean,Yt=F.my,Zt=Ae,Xt=j,Kt=qe,Qt=He,er=Ke,tr=Ht,rr=Mt,nr={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},ir={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},or={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise$1(e){return"object"===(void 0===e?"undefined":_type_of(e))&&"function"==typeof e.then}function getEvents$1(e){var t=!1,r=nr[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function toStack$1(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents$1(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks$1(e){return e[Jt]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks$1(e)}),e}var sr={},ar=function(){function LazyResult(e,t,r){var n,i=this;if(this.stringified=!1,this.processed=!1,"object"!==(void 0===t?"undefined":_type_of(t))||null===t||"root"!==t.type&&"document"!==t.type)if(_instanceof(t,LazyResult)||_instanceof(t,er))n=cleanMarks$1(t.root),t.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{var o=tr;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{n=o(t,r)}catch(e){this.processed=!0,this.error=e}n&&!n[Yt]&&Kt.rebuild(n)}else n=cleanMarks$1(t);this.result=new er(e,n,r),this.helpers=_extends({},sr,{postcss:sr,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===(void 0===e?"undefined":_type_of(e))&&e.prepare?_extends({},e,e.prepare(i.result)):e})}var e=LazyResult.prototype;return e.async=function async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)},e.catch=function _catch(e){return this.async().catch(e)},e.finally=function _finally(e){return this.async().then(e,e)},e.getAsyncError=function getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")},e.handleError=function handleError(e,t){var r=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(r.postcssVersion);}else e.plugin=r.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e},e.prepareVisitors=function prepareVisitors(){var e=this;this.listeners={};for(var t,add=function(t,r,n){e.listeners[r]||(e.listeners[r]=[]),e.listeners[r].push([t,n])},r=_create_for_of_iterator_helper_loose(this.plugins);!(t=r()).done;){var n=t.value;if("object"===(void 0===n?"undefined":_type_of(n)))for(var i in n){if(!ir[i]&&/^[A-Z]/.test(i))throw new Error("Unknown event "+i+" in "+n.postcssPlugin+". Try to update PostCSS ("+this.processor.version+" now).");if(!or[i])if("object"===_type_of(n[i]))for(var o in n[i])add(n,"*"===o?i:i+"-"+o.toLowerCase(),n[i][o]);else"function"==typeof n[i]&&add(n,i,n[i])}}this.hasListener=Object.keys(this.listeners).length>0},e.runAsync=function runAsync(){var e=this;return _async_to_generator(function(){var t,r,n,i,o,s,a,c,u,l,p,h;return _ts_generator(this,function(d){switch(d.label){case 0:e.plugin=0,t=0,d.label=1;case 1:if(!(t<e.plugins.length))return[3,6];if(r=e.plugins[t],!isPromise$1(n=e.runOnRoot(r)))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,n];case 3:return d.sent(),[3,5];case 4:throw i=d.sent(),e.handleError(i);case 5:return t++,[3,1];case 6:if(e.prepareVisitors(),!e.hasListener)return[3,18];o=e.result.root,d.label=7;case 7:if(o[Jt])return[3,14];o[Jt]=!0,s=[toStack$1(o)],d.label=8;case 8:if(!(s.length>0))return[3,13];if(!isPromise$1(a=e.visitTick(s)))return[3,12];d.label=9;case 9:return d.trys.push([9,11,,12]),[4,a];case 10:return d.sent(),[3,12];case 11:throw c=d.sent(),u=s[s.length-1].node,e.handleError(c,u);case 12:return[3,8];case 13:return[3,7];case 14:if(!e.listeners.OnceExit)return[3,18];l=function(){var t,r,n,i,s;return _ts_generator(this,function(a){switch(a.label){case 0:t=h.value,r=t[0],n=t[1],e.result.lastPlugin=r,a.label=1;case 1:return a.trys.push([1,6,,7]),"document"!==o.type?[3,3]:(i=o.nodes.map(function(t){return n(t,e.helpers)}),[4,Promise.all(i)]);case 2:return a.sent(),[3,5];case 3:return[4,n(o,e.helpers)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:throw s=a.sent(),e.handleError(s);case 7:return[2]}})},p=_create_for_of_iterator_helper_loose(e.listeners.OnceExit),d.label=15;case 15:return(h=p()).done?[3,18]:[5,_ts_values(l())];case 16:d.sent(),d.label=17;case 17:return[3,15];case 18:return e.processed=!0,[2,e.stringify()]}})})()},e.runOnRoot=function runOnRoot(e){var t=this;this.result.lastPlugin=e;try{if("object"===(void 0===e?"undefined":_type_of(e))&&e.Once){if("document"===this.result.root.type){var r=this.result.root.nodes.map(function(r){return e.Once(r,t.helpers)});return isPromise$1(r[0])?Promise.all(r):r}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}},e.stringify=function stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=Xt;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);var r=new Zt(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result},e.sync=function sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(var e,t=_create_for_of_iterator_helper_loose(this.plugins);!(e=t()).done;){var r=e.value;if(isPromise$1(this.runOnRoot(r)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){for(var n=this.result.root;!n[Jt];)n[Jt]=!0,this.walkSync(n);if(this.listeners.OnceExit)if("document"===n.type)for(var i,o=_create_for_of_iterator_helper_loose(n.nodes);!(i=o()).done;){var s=i.value;this.visitSync(this.listeners.OnceExit,s)}else this.visitSync(this.listeners.OnceExit,n)}return this.result},e.then=function then(e,t){return this.async().then(e,t)},e.toString=function toString(){return this.css},e.visitSync=function visitSync(e,t){for(var r,n=_create_for_of_iterator_helper_loose(e);!(r=n()).done;){var i=r.value,o=i[0],s=i[1];this.result.lastPlugin=o;var a=void 0;try{a=s(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(isPromise$1(a))throw this.getAsyncError()}},e.visitTick=function visitTick(e){var t=e[e.length-1],r=t.node,n=t.visitors;if("root"===r.type||"document"===r.type||r.parent){if(n.length>0&&t.visitorIndex<n.length){var i=n[t.visitorIndex],o=i[0],s=i[1];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return s(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){for(var a,c=t.iterator;a=r.nodes[r.indexes[c]];)if(r.indexes[c]+=1,!a[Jt])return a[Jt]=!0,void e.push(toStack$1(a));t.iterator=0,delete r.indexes[c]}for(var u=t.events;t.eventIndex<u.length;){var l=u[t.eventIndex];if(t.eventIndex+=1,0===l)return void(r.nodes&&r.nodes.length&&(r[Jt]=!0,t.iterator=r.getIterator()));if(this.listeners[l])return void(t.visitors=this.listeners[l])}e.pop()}else e.pop()},e.walkSync=function walkSync(e){var t=this;e[Jt]=!0;for(var r,n=_create_for_of_iterator_helper_loose(getEvents$1(e));!(r=n()).done;){var i=r.value;if(0===i)e.nodes&&e.each(function(e){e[Jt]||t.walkSync(e)});else{var o=this.listeners[i];if(o&&this.visitSync(o,e.toProxy()))return}}},e.warnings=function warnings(){return this.sync().warnings()},_create_class(LazyResult,[{key:"content",get:function get(){return this.stringify().content}},{key:"css",get:function get(){return this.stringify().css}},{key:"map",get:function get(){return this.stringify().map}},{key:"messages",get:function get(){return this.sync().messages}},{key:"opts",get:function get(){return this.result.opts}},{key:"processor",get:function get(){return this.result.processor}},{key:"root",get:function get(){return this.sync().root}},{key:Symbol.toStringTag,get:function get(){return"LazyResult"}}]),LazyResult}();ar.registerPostcss=function(e){sr=e};var cr=ar;ar.default=ar,rr.registerLazyResult(ar),Qt.registerLazyResult(ar);var ur=Ae,lr=j,pr=Ht,hr=Ke,dr=function(){function NoWorkResult(e,t,r){var n;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;var i=lr;this.result=new hr(this._processor,n,this._opts),this.result.css=t;var o=this;Object.defineProperty(this.result,"root",{get:function get(){return o.root}});var s=new ur(i,n,this._opts,t);if(s.isMap()){var a=s.generate(),c=a[0],u=a[1];c&&(this.result.css=c),u&&(this.result.map=u)}else s.clearAnnotation(),this.result.css=s.css}var e=NoWorkResult.prototype;return e.async=function async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)},e.catch=function _catch(e){return this.async().catch(e)},e.finally=function _finally(e){return this.async().then(e,e)},e.sync=function sync(){if(this.error)throw this.error;return this.result},e.then=function then(e,t){return this.async().then(e,t)},e.toString=function toString(){return this._css},e.warnings=function warnings(){return[]},_create_class(NoWorkResult,[{key:"content",get:function get(){return this.result.css}},{key:"css",get:function get(){return this.result.css}},{key:"map",get:function get(){return this.result.map}},{key:"messages",get:function get(){return[]}},{key:"opts",get:function get(){return this.result.opts}},{key:"processor",get:function get(){return this.result.processor}},{key:"root",get:function get(){if(this._root)return this._root;var e,t=pr;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function get(){return"NoWorkResult"}}]),NoWorkResult}(),fr=dr;dr.default=dr;var gr=fr,mr=cr,vr=He,_r=Mt,yr=function(){function Processor(e){void 0===e&&(e=[]),this.version="8.4.38",this.plugins=this.normalize(e)}var e=Processor.prototype;return e.normalize=function normalize(e){for(var t,r=[],n=_create_for_of_iterator_helper_loose(e);!(t=n()).done;){var i=t.value;if(!0===i.postcss?i=i():i.postcss&&(i=i.postcss),"object"===(void 0===i?"undefined":_type_of(i))&&Array.isArray(i.plugins))r=r.concat(i.plugins);else if("object"===(void 0===i?"undefined":_type_of(i))&&i.postcssPlugin)r.push(i);else if("function"==typeof i)r.push(i);else{if("object"!==(void 0===i?"undefined":_type_of(i))||!i.parse&&!i.stringify)throw new Error(i+" is not a PostCSS plugin")}}return r},e.process=function process1(e,t){return void 0===t&&(t={}),this.plugins.length||t.parser||t.stringifier||t.syntax?new mr(this,e,t):new gr(this,e,t)},e.use=function use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this},Processor}(),br=yr;yr.default=yr,_r.registerProcessor(yr),vr.registerProcessor(yr);var wr=X,kr=oe,Sr=Pe,Cr=Ct,Ir=be,xr=Mt,Or=Dt;function fromJSON$1$1(e,t){if(Array.isArray(e))return e.map(function(e){return fromJSON$1$1(e)});var r=e.inputs,n=_object_without_properties_loose(e,["inputs"]);if(r){t=[];for(var i,o=_create_for_of_iterator_helper_loose(r);!(i=o()).done;){var s=_extends({},i.value,{__proto__:Ir.prototype});s.map&&(s.map=_extends({},s.map,{__proto__:kr.prototype})),t.push(s)}}if(n.nodes&&(n.nodes=e.nodes.map(function(e){return fromJSON$1$1(e,t)})),n.source){var a=n.source,c=a.inputId,u=_object_without_properties_loose(a,["inputId"]);n.source=u,null!=c&&(n.source.input=t[c])}if("root"===n.type)return new xr(n);if("decl"===n.type)return new wr(n);if("rule"===n.type)return new Or(n);if("comment"===n.type)return new Sr(n);if("atrule"===n.type)return new Cr(n);throw new Error("Unknown node type: "+e.type)}var Er=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;var Mr=L,Rr=X,Ar=cr,Tr=qe,Pr=br,Nr=j,Dr=Er,Lr=He,Fr=Ye,Ur=Pe,Br=Ct,$r=Ke,zr=be,jr=Ht,qr=At,Wr=Dt,Vr=Mt,Gr=Y;function postcss$3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new Pr(t)}postcss$3.plugin=function plugin(e,t){var r,n=!1;function creator(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:\nhttps://www.w3ctech.com/topic/2226"));var s=t.apply(void 0,[].concat(i));return s.postcssPlugin=e,s.postcssVersion=(new Pr).version,s}return Object.defineProperty(creator,"postcss",{get:function get(){return r||(r=creator()),r}}),creator.process=function(e,t,r){return postcss$3([creator(r)]).process(e,t)},creator},postcss$3.stringify=Nr,postcss$3.parse=jr,postcss$3.fromJSON=Dr,postcss$3.list=qr,postcss$3.comment=function(e){return new Ur(e)},postcss$3.atRule=function(e){return new Br(e)},postcss$3.decl=function(e){return new Rr(e)},postcss$3.rule=function(e){return new Wr(e)},postcss$3.root=function(e){return new Vr(e)},postcss$3.document=function(e){return new Lr(e)},postcss$3.CssSyntaxError=Mr,postcss$3.Declaration=Rr,postcss$3.Container=Tr,postcss$3.Processor=Pr,postcss$3.Document=Lr,postcss$3.Comment=Ur,postcss$3.Warning=Fr,postcss$3.AtRule=Br,postcss$3.Result=$r,postcss$3.Input=zr,postcss$3.Rule=Wr,postcss$3.Root=Vr,postcss$3.Node=Gr,Ar.registerPostcss(postcss$3);var Hr=postcss$3;postcss$3.default=postcss$3;var Jr=getDefaultExportFromCjs$1(Hr);Jr.stringify,Jr.fromJSON,Jr.plugin,Jr.parse,Jr.list,Jr.document,Jr.comment,Jr.atRule,Jr.rule,Jr.decl,Jr.root,Jr.CssSyntaxError,Jr.Declaration,Jr.Container,Jr.Processor,Jr.Document,Jr.Comment,Jr.Warning,Jr.AtRule,Jr.Result,Jr.Input,Jr.Rule,Jr.Root,Jr.Node;var Yr=Object.defineProperty,__publicField2=function(e,t,r){return function(e,t,r){return t in e?Yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r}(e,"symbol"!==(void 0===t?"undefined":_type_of(t))?t+"":t,r)};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function a22(){return _instanceof(this,a22)?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function get(){return e[t]}})}),r}var Zr={exports:{}},Xr=String,Kr=function create(){return{isColorSupported:!1,reset:Xr,bold:Xr,dim:Xr,italic:Xr,underline:Xr,inverse:Xr,hidden:Xr,strikethrough:Xr,black:Xr,red:Xr,green:Xr,yellow:Xr,blue:Xr,magenta:Xr,cyan:Xr,white:Xr,gray:Xr,bgBlack:Xr,bgRed:Xr,bgGreen:Xr,bgYellow:Xr,bgBlue:Xr,bgMagenta:Xr,bgCyan:Xr,bgWhite:Xr}};Zr.exports=Kr(),Zr.exports.createColors=Kr;var Qr=Zr.exports,en=getAugmentedNamespace(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))),tn=Qr,rn=en,nn=function(e){function CssSyntaxError2(t,r,n,i,o,s){var a;return(a=e.call(this,t)||this).name="CssSyntaxError",a.reason=t,o&&(a.file=o),i&&(a.source=i),s&&(a.plugin=s),void 0!==r&&void 0!==n&&("number"==typeof r?(a.line=r,a.column=n):(a.line=r.line,a.column=r.column,a.endLine=n.line,a.endColumn=n.column)),a.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(a,CssSyntaxError2),a}_inherits(CssSyntaxError2,e);var t=CssSyntaxError2.prototype;return t.setMessage=function setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},t.showSourceCode=function showSourceCode(e){var t=this;if(!this.source)return"";var r=this.source;null==e&&(e=tn.isColorSupported),rn&&e&&(r=rn(r));var n,i,o=r.split(/\r?\n/),s=Math.max(this.line-3,0),a=Math.min(this.line+2,o.length),c=String(a).length;if(e){var u=tn.createColors(!0),l=u.bold,p=u.gray,h=u.red;n=function(e){return l(h(e))},i=function(e){return p(e)}}else n=i=function(e){return e};return o.slice(s,a).map(function(e,r){var o=s+1+r,a=" "+(" "+o).slice(-c)+" | ";if(o===t.line){var u=i(a.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," ");return n(">")+i(a)+e+"\n "+u+n("^")}return" "+i(a)+e}).join("\n")},t.toString=function toString(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e},CssSyntaxError2}(_wrap_native_super(Error)),sn=nn;nn.default=nn;var an={};an.isClean=Symbol("isClean"),an.my=Symbol("my");var cn={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};var un=function(){function Stringifier2(e){this.builder=e}var e=Stringifier2.prototype;return e.atrule=function atrule(e,t){var r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{var i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}},e.beforeAfter=function beforeAfter(e,t){var r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var n=e.parent,i=0;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){var o=this.raw(e,null,"indent");if(o.length)for(var s=0;s<i;s++)r+=o}return r},e.block=function block(e,t){var r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")},e.body=function body(e){for(var t=e.nodes.length-1;t>0&&"comment"===e.nodes[t].type;)t-=1;for(var r=this.raw(e,"semicolon"),n=0;n<e.nodes.length;n++){var i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}},e.comment=function comment(e){var t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)},e.decl=function decl(e,t){var r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)},e.document=function document1(e){this.body(e)},e.raw=function raw(e,t,r){var n;if(r||(r=t),t&&void 0!==(n=e.raws[t]))return n;var i=e.parent;if("before"===r){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return cn[r];var o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);var s="raw"+function capitalize(e){return e[0].toUpperCase()+e.slice(1)}(r);return this[s]?n=this[s](o,e):o.walk(function(e){if(void 0!==(n=e.raws[t]))return!1}),void 0===n&&(n=cn[r]),o.rawCache[r]=n,n},e.rawBeforeClose=function rawBeforeClose(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return(t=e.raws.after).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t},e.rawBeforeComment=function rawBeforeComment(e,t){var r;return e.walkComments(function(e){if(void 0!==e.raws.before)return(r=e.raws.before).includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r},e.rawBeforeDecl=function rawBeforeDecl(e,t){var r;return e.walkDecls(function(e){if(void 0!==e.raws.before)return(r=e.raws.before).includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1}),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r},e.rawBeforeOpen=function rawBeforeOpen(e){var t;return e.walk(function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1}),t},e.rawBeforeRule=function rawBeforeRule(e){var t;return e.walk(function(r){if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return(t=r.raws.before).includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t},e.rawColon=function rawColon(e){var t;return e.walkDecls(function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t},e.rawEmptyBody=function rawEmptyBody(e){var t;return e.walk(function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1}),t},e.rawIndent=function rawIndent(e){return e.raws.indent?e.raws.indent:(e.walk(function(r){var n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){var i=r.raws.before.split("\n");return t=(t=i[i.length-1]).replace(/\S/g,""),!1}}),t);var t},e.rawSemicolon=function rawSemicolon(e){var t;return e.walk(function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1}),t},e.rawValue=function rawValue(e,t){var r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r},e.root=function root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)},e.rule=function rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")},e.stringify=function stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)},Stringifier2}(),ln=un;un.default=un;var pn=ln;function stringify$4(e,t){new pn(t).stringify(e)}var hn=stringify$4;stringify$4.default=stringify$4;var dn=an.isClean,fn=an.my,gn=sn,mn=ln,vn=hn;function cloneNode(e,t){var r=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&"proxyCache"!==n){var i=e[n],o=void 0===i?"undefined":_type_of(i);"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map(function(e){return cloneNode(e,r)}):("object"===o&&null!==i&&(i=cloneNode(i)),r[n]=i)}return r}var _n=function(){function Node3(e){for(var t in void 0===e&&(e={}),this.raws={},this[dn]=!1,this[fn]=!0,e)if("nodes"===t){this.nodes=[];for(var r,n=_create_for_of_iterator_helper_loose(e[t]);!(r=n()).done;){var i=r.value;"function"==typeof i.clone?this.append(i.clone()):this.append(i)}}else this[t]=e[t]}var e=Node3.prototype;return e.addToError=function addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){var t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&"+t.input.from+":"+t.start.line+":"+t.start.column+"$&")}return e},e.after=function after(e){return this.parent.insertAfter(this,e),this},e.assign=function assign(e){for(var t in void 0===e&&(e={}),e)this[t]=e[t];return this},e.before=function before(e){return this.parent.insertBefore(this,e),this},e.cleanRaws=function cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between},e.clone=function clone(e){void 0===e&&(e={});var t=cloneNode(this);for(var r in e)t[r]=e[r];return t},e.cloneAfter=function cloneAfter(e){void 0===e&&(e={});var t=this.clone(e);return this.parent.insertAfter(this,t),t},e.cloneBefore=function cloneBefore(e){void 0===e&&(e={});var t=this.clone(e);return this.parent.insertBefore(this,t),t},e.error=function error(e,t){if(void 0===t&&(t={}),this.source){var r=this.rangeBy(t),n=r.end,i=r.start;return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},t)}return new gn(e)},e.getProxyProcessor=function getProxyProcessor(){return{get:function get(e,t){return"proxyOf"===t?e:"root"===t?function(){return e.root().toProxy()}:e[t]},set:function set(e,t,r){return e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}},e.markDirty=function markDirty(){if(this[dn]){this[dn]=!1;for(var e=this;e=e.parent;)e[dn]=!1}},e.next=function next(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}},e.positionBy=function positionBy(e,t){var r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){var n=(t=this.toString()).indexOf(e.word);-1!==n&&(r=this.positionInside(n,t))}return r},e.positionInside=function positionInside(e,t){for(var r=t||this.toString(),n=this.source.start.column,i=this.source.start.line,o=0;o<e;o++)"\n"===r[o]?(n=1,i+=1):n+=1;return{column:n,line:i}},e.prev=function prev(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}},e.rangeBy=function rangeBy(e){var t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){var n=this.toString(),i=n.indexOf(e.word);-1!==i&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}},e.raw=function raw(e,t){return(new mn).raw(this,e,t)},e.remove=function remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function replaceWith(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this.parent){for(var n,i=this,o=!1,s=_create_for_of_iterator_helper_loose(t);!(n=s()).done;){var a=n.value;a===this?o=!0:o?(this.parent.insertAfter(i,a),i=a):this.parent.insertBefore(i,a)}o||this.remove()}return this},e.root=function root(){for(var e=this;e.parent&&"document"!==e.parent.type;)e=e.parent;return e},e.toJSON=function toJSON(e,t){var r={},n=null==t;t=t||new Map;var i=0;for(var o in this)if(Object.prototype.hasOwnProperty.call(this,o)&&"parent"!==o&&"proxyCache"!==o){var s=this[o];if(Array.isArray(s))r[o]=s.map(function(e){return"object"===(void 0===e?"undefined":_type_of(e))&&e.toJSON?e.toJSON(null,t):e});else if("object"===(void 0===s?"undefined":_type_of(s))&&s.toJSON)r[o]=s.toJSON(null,t);else if("source"===o){var a=t.get(s.input);null==a&&(a=i,t.set(s.input,i),i++),r[o]={end:s.end,inputId:a,start:s.start}}else r[o]=s}return n&&(r.inputs=[].concat(t.keys()).map(function(e){return e.toJSON()})),r},e.toProxy=function toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache},e.toString=function toString(e){void 0===e&&(e=vn),e.stringify&&(e=e.stringify);var t="";return e(this,function(e){t+=e}),t},e.warn=function warn(e,t,r){var n={node:this};for(var i in r)n[i]=r[i];return e.warn(t,n)},_create_class(Node3,[{key:"proxyOf",get:function get(){return this}}]),Node3}(),yn=_n;_n.default=_n;var bn=function(e){function Declaration2(t){var r;return t&&void 0!==t.value&&"string"!=typeof t.value&&(t=_extends({},t,{value:String(t.value)})),(r=e.call(this,t)||this).type="decl",r}return _inherits(Declaration2,e),_create_class(Declaration2,[{key:"variable",get:function get(){return this.prop.startsWith("--")||"$"===this.prop[0]}}]),Declaration2}(yn),wn=bn;bn.default=bn;var nonSecure_nanoid=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},kn=en.SourceMapConsumer,Sn=en.SourceMapGenerator,Cn=en.existsSync,In=en.readFileSync,xn=en.dirname,On=en.join;var En=function(){function PreviousMap2(e,t){if(!1!==t.map){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=xn(this.mapFile)),n&&(this.text=n)}}var e=PreviousMap2.prototype;return e.consumer=function consumer(){return this.consumerCache||(this.consumerCache=new kn(this.text)),this.consumerCache},e.decodeInline=function decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return function fromBase64(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}(e.substr(RegExp.lastMatch.length));var t=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+t)},e.getAnnotationURL=function getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()},e.isMap=function isMap(e){return"object"===(void 0===e?"undefined":_type_of(e))&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))},e.loadAnnotation=function loadAnnotation(e){var t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(t){var r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}},e.loadFile=function loadFile(e){if(this.root=xn(e),Cn(e))return this.mapFile=e,In(e,"utf-8").toString().trim()},e.loadMap=function loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(_instanceof(t,kn))return Sn.fromSourceMap(t).toString();if(_instanceof(t,Sn))return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}var r=t(e);if(r){var n=this.loadFile(r);if(!n)throw new Error("Unable to load previous source map: "+r.toString());return n}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var i=this.annotation;return e&&(i=On(xn(e),i)),this.loadFile(i)}}},e.startWith=function startWith(e,t){return!!e&&e.substr(0,t.length)===t},e.withContent=function withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},PreviousMap2}(),Mn=En;En.default=En;var Rn=en.SourceMapConsumer,An=en.SourceMapGenerator,Tn=en.fileURLToPath,Pn=en.pathToFileURL,Nn=en.isAbsolute,Dn=en.resolve,Ln=nonSecure_nanoid,Fn=en,Un=sn,Bn=Mn,$n=Symbol("fromOffsetCache"),zn=Boolean(Rn&&An),jn=Boolean(Dn&&Nn),qn=function(){function Input2(e,t){if(void 0===t&&(t={}),null==e||"object"===(void 0===e?"undefined":_type_of(e))&&!e.toString)throw new Error("PostCSS received "+e+" instead of CSS string");if(this.css=e.toString(),"\ufeff"===this.css[0]||"ï¿¾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!jn||/^\w+:\/\//.test(t.from)||Nn(t.from)?this.file=t.from:this.file=Dn(t.from)),jn&&zn){var r=new Bn(this.css,t);if(r.text){this.map=r;var n=r.consumer().file;!this.file&&n&&(this.file=this.mapResolve(n))}}this.file||(this.id="<input css "+Ln(6)+">"),this.map&&(this.map.file=this.from)}var e=Input2.prototype;return e.error=function error(e,t,r,n){var i,o,s;if(void 0===n&&(n={}),t&&"object"===(void 0===t?"undefined":_type_of(t))){var a=t,c=r;if("number"==typeof a.offset){var u=this.fromOffset(a.offset);t=u.line,r=u.col}else t=a.line,r=a.column;if("number"==typeof c.offset){var l=this.fromOffset(c.offset);o=l.line,s=l.col}else o=c.line,s=c.column}else if(!r){var p=this.fromOffset(t);t=p.line,r=p.col}var h=this.origin(t,r,o,s);return(i=h?new Un(e,void 0===h.endLine?h.line:{column:h.column,line:h.line},void 0===h.endLine?h.column:{column:h.endColumn,line:h.endLine},h.source,h.file,n.plugin):new Un(e,void 0===o?t:{column:r,line:t},void 0===o?r:{column:s,line:o},this.css,this.file,n.plugin)).input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(Pn&&(i.input.url=Pn(this.file).toString()),i.input.file=this.file),i},e.fromOffset=function fromOffset(e){var t;if(this[$n])t=this[$n];else{var r=this.css.split("\n");t=new Array(r.length);for(var n=0,i=0,o=r.length;i<o;i++)t[i]=n,n+=r[i].length+1;this[$n]=t}var s=0;if(e>=t[t.length-1])s=t.length-1;else for(var a,c=t.length-2;s<c;)if(e<t[a=s+(c-s>>1)])c=a-1;else{if(!(e>=t[a+1])){s=a;break}s=a+1}return{col:e-t[s]+1,line:s+1}},e.mapResolve=function mapResolve(e){return/^\w+:\/\//.test(e)?e:Dn(this.map.consumer().sourceRoot||this.map.root||".",e)},e.origin=function origin(e,t,r,n){if(!this.map)return!1;var i,o,s=this.map.consumer(),a=s.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(i=s.originalPositionFor({column:n,line:r})),o=Nn(a.source)?Pn(a.source):new URL(a.source,this.map.consumer().sourceRoot||Pn(this.map.mapFile));var c={column:a.column,endColumn:i&&i.column,endLine:i&&i.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!Tn)throw new Error("file: protocol is not available in this PostCSS build");c.file=Tn(o)}var u=s.sourceContentFor(a.source);return u&&(c.source=u),c},e.toJSON=function toJSON(){for(var e={},t=0,r=["hasBOM","css","file","id"];t<r.length;t++){var n=r[t];null!=this[n]&&(e[n]=this[n])}return this.map&&(e.map=_extends({},this.map),e.map.consumerCache&&(e.map.consumerCache=void 0)),e},_create_class(Input2,[{key:"from",get:function get(){return this.file||this.id}}]),Input2}(),Wn=qn;qn.default=qn,Fn&&Fn.registerInput&&Fn.registerInput(qn);var Vn=en.SourceMapConsumer,Gn=en.SourceMapGenerator,Hn=en.dirname,Jn=en.relative,Yn=en.resolve,Zn=en.sep,Xn=en.pathToFileURL,Kn=Wn,Qn=Boolean(Vn&&Gn),ei=Boolean(Hn&&Yn&&Jn&&Zn),ti=function(){function MapGenerator2(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}var e=MapGenerator2.prototype;return e.addAnnotation=function addAnnotation(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";var t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"},e.applyPrevMaps=function applyPrevMaps(){for(var e,t=_create_for_of_iterator_helper_loose(this.previous());!(e=t()).done;){var r=e.value,n=this.toUrl(this.path(r.file)),i=r.root||Hn(r.file),o=void 0;!1===this.mapOpts.sourcesContent?(o=new Vn(r.text)).sourcesContent&&(o.sourcesContent=null):o=r.consumer(),this.map.applySourceMap(o,n,this.toUrl(this.path(i)))}},e.clearAnnotation=function clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root)for(var e,t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))},e.generate=function generate(){if(this.clearAnnotation(),ei&&Qn&&this.isMap())return this.generateMap();var e="";return this.stringify(this.root,function(t){e+=t}),[e]},e.generateMap=function generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){var e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Gn.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Gn({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},e.generateString=function generateString(){var e=this;this.css="",this.map=new Gn({file:this.outputFile(),ignoreInvalidMapping:!0});var t,r,n=1,i=1,o="<no source>",s={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,function(a,c,u){if(e.css+=a,c&&"end"!==u&&(s.generated.line=n,s.generated.column=i-1,c.source&&c.source.start?(s.source=e.sourcePath(c),s.original.line=c.source.start.line,s.original.column=c.source.start.column-1,e.map.addMapping(s)):(s.source=o,s.original.line=1,s.original.column=0,e.map.addMapping(s))),(t=a.match(/\n/g))?(n+=t.length,r=a.lastIndexOf("\n"),i=a.length-r):i+=a.length,c&&"start"!==u){var l=c.parent||{raws:{}};("decl"===c.type||"atrule"===c.type&&!c.nodes)&&c===l.last&&!l.raws.semicolon||(c.source&&c.source.end?(s.source=e.sourcePath(c),s.original.line=c.source.end.line,s.original.column=c.source.end.column-1,s.generated.line=n,s.generated.column=i-2,e.map.addMapping(s)):(s.source=o,s.original.line=1,s.original.column=0,s.generated.line=n,s.generated.column=i-1,e.map.addMapping(s)))}})},e.isAnnotation=function isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(e){return e.annotation}))},e.isInline=function isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(function(e){return e.inline}))},e.isMap=function isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0},e.isSourcesContent=function isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(e){return e.withContent()})},e.outputFile=function outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"},e.path=function path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;var t=this.memoizedPaths.get(e);if(t)return t;var r=this.opts.to?Hn(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=Hn(Yn(r,this.mapOpts.annotation)));var path=Jn(r,e);return this.memoizedPaths.set(e,path),path},e.previous=function previous(){var e=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(t){if(t.source&&t.source.input.map){var r=t.source.input.map;e.previousMaps.includes(r)||e.previousMaps.push(r)}});else{var t=new Kn(this.originalCSS,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps},e.setSourcesContent=function setSourcesContent(){var e=this,t={};if(this.root)this.root.walk(function(r){if(r.source){var n=r.source.input.from;if(n&&!t[n]){t[n]=!0;var i=e.usesFileUrls?e.toFileUrl(n):e.toUrl(e.path(n));e.map.setSourceContent(i,r.source.input.css)}}});else if(this.css){var r=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(r,this.css)}},e.sourcePath=function sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))},e.toBase64=function toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))},e.toFileUrl=function toFileUrl(e){var t=this.memoizedFileURLs.get(e);if(t)return t;if(Xn){var r=Xn(e).toString();return this.memoizedFileURLs.set(e,r),r}throw new Error("`map.absolute` option is not available in this PostCSS build")},e.toUrl=function toUrl(e){var t=this.memoizedURLs.get(e);if(t)return t;"\\"===Zn&&(e=e.replace(/\\/g,"/"));var r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r},MapGenerator2}(),ri=function(e){function Comment2(t){var r;return(r=e.call(this,t)||this).type="comment",r}return _inherits(Comment2,e),Comment2}(yn),ni=ri;ri.default=ri;var ii,oi,si,ai,ci=an.isClean,ui=an.my,li=wn,pi=ni;function cleanSource(e){return e.map(function(e){return e.nodes&&(e.nodes=cleanSource(e.nodes)),delete e.source,e})}function markDirtyUp(e){if(e[ci]=!1,e.proxyOf.nodes)for(var t,r=_create_for_of_iterator_helper_loose(e.proxyOf.nodes);!(t=r()).done;){markDirtyUp(t.value)}}var hi=function(e){function Container2(){return e.apply(this,arguments)||this}_inherits(Container2,e);var t=Container2.prototype;return t.append=function append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,i=_create_for_of_iterator_helper_loose(t);!(n=i()).done;)for(var o,s=n.value,a=_create_for_of_iterator_helper_loose(this.normalize(s,this.last));!(o=a()).done;){var c=o.value;this.proxyOf.nodes.push(c)}return this.markDirty(),this},t.cleanRaws=function cleanRaws(t){if(e.prototype.cleanRaws.call(this,t),this.nodes)for(var r,n=_create_for_of_iterator_helper_loose(this.nodes);!(r=n()).done;){r.value.cleanRaws(t)}},t.each=function each(e){if(this.proxyOf.nodes){for(var t,r,n=this.getIterator();this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],!1!==(r=e(this.proxyOf.nodes[t],t)));)this.indexes[n]+=1;return delete this.indexes[n],r}},t.every=function every(e){return this.nodes.every(e)},t.getIterator=function getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var e=this.lastEach;return this.indexes[e]=0,e},t.getProxyProcessor=function getProxyProcessor(){return{get:function get(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o;return(o=e)[t].apply(o,[].concat(n.map(function(e){return"function"==typeof e?function(t,r){return e(t.toProxy(),r)}:e})))}:"every"===t||"some"===t?function(r){return e[t](function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.apply(void 0,[].concat([e.toProxy()],n))})}:"root"===t?function(){return e.root().toProxy()}:"nodes"===t?e.nodes.map(function(e){return e.toProxy()}):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set:function set(e,t,r){return e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}},t.index=function index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))},t.insertAfter=function insertAfter(e,t){var r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(var o,s=_create_for_of_iterator_helper_loose(i);!(o=s()).done;){var a=o.value;this.proxyOf.nodes.splice(n+1,0,a)}for(var c in this.indexes)n<(r=this.indexes[c])&&(this.indexes[c]=r+i.length);return this.markDirty(),this},t.insertBefore=function insertBefore(e,t){var r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(var s,a=_create_for_of_iterator_helper_loose(o);!(s=a()).done;){var c=s.value;this.proxyOf.nodes.splice(n,0,c)}for(var u in this.indexes)n<=(r=this.indexes[u])&&(this.indexes[u]=r+o.length);return this.markDirty(),this},t.normalize=function normalize(e,t){var r=this;if("string"==typeof e)e=cleanSource(ii(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e))for(var n,i=_create_for_of_iterator_helper_loose(e=e.slice(0));!(n=i()).done;){var o=n.value;o.parent&&o.parent.removeChild(o,"ignore")}else if("root"===e.type&&"document"!==this.type)for(var s,a=_create_for_of_iterator_helper_loose(e=e.nodes.slice(0));!(s=a()).done;){var c=s.value;c.parent&&c.parent.removeChild(c,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new li(e)]}else if(e.selector)e=[new oi(e)];else if(e.name)e=[new si(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new pi(e)]}var u=e.map(function(e){return e[ui]||Container2.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[ci]&&markDirtyUp(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=r.proxyOf,e});return u},t.prepend=function prepend(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,i=_create_for_of_iterator_helper_loose(t=t.reverse());!(n=i()).done;){for(var o,s=n.value,a=this.normalize(s,this.first,"prepend").reverse(),c=_create_for_of_iterator_helper_loose(a);!(o=c()).done;){var u=o.value;this.proxyOf.nodes.unshift(u)}for(var l in this.indexes)this.indexes[l]=this.indexes[l]+a.length}return this.markDirty(),this},t.push=function push(e){return e.parent=this,this.proxyOf.nodes.push(e),this},t.removeAll=function removeAll(){for(var e,t=_create_for_of_iterator_helper_loose(this.proxyOf.nodes);!(e=t()).done;){e.value.parent=void 0}return this.proxyOf.nodes=[],this.markDirty(),this},t.removeChild=function removeChild(e){var t;for(var r in e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1),this.indexes)(t=this.indexes[r])>=e&&(this.indexes[r]=t-1);return this.markDirty(),this},t.replaceValues=function replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(function(n){t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))}),this.markDirty(),this},t.some=function some(e){return this.nodes.some(e)},t.walk=function walk(e){return this.each(function(t,r){var n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n})},t.walkAtRules=function walkAtRules(e,t){return t?_instanceof(e,RegExp)?this.walk(function(r,n){if("atrule"===r.type&&e.test(r.name))return t(r,n)}):this.walk(function(r,n){if("atrule"===r.type&&r.name===e)return t(r,n)}):(t=e,this.walk(function(e,r){if("atrule"===e.type)return t(e,r)}))},t.walkComments=function walkComments(e){return this.walk(function(t,r){if("comment"===t.type)return e(t,r)})},t.walkDecls=function walkDecls(e,t){return t?_instanceof(e,RegExp)?this.walk(function(r,n){if("decl"===r.type&&e.test(r.prop))return t(r,n)}):this.walk(function(r,n){if("decl"===r.type&&r.prop===e)return t(r,n)}):(t=e,this.walk(function(e,r){if("decl"===e.type)return t(e,r)}))},t.walkRules=function walkRules(e,t){return t?_instanceof(e,RegExp)?this.walk(function(r,n){if("rule"===r.type&&e.test(r.selector))return t(r,n)}):this.walk(function(r,n){if("rule"===r.type&&r.selector===e)return t(r,n)}):(t=e,this.walk(function(e,r){if("rule"===e.type)return t(e,r)}))},_create_class(Container2,[{key:"first",get:function get(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function get(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}]),Container2}(yn);hi.registerParse=function(e){ii=e},hi.registerRule=function(e){oi=e},hi.registerAtRule=function(e){si=e},hi.registerRoot=function(e){ai=e};var di=hi;hi.default=hi,hi.rebuild=function(e){"atrule"===e.type?Object.setPrototypeOf(e,si.prototype):"rule"===e.type?Object.setPrototypeOf(e,oi.prototype):"decl"===e.type?Object.setPrototypeOf(e,li.prototype):"comment"===e.type?Object.setPrototypeOf(e,pi.prototype):"root"===e.type&&Object.setPrototypeOf(e,ai.prototype),e[ui]=!0,e.nodes&&e.nodes.forEach(function(e){hi.rebuild(e)})};var fi,gi,mi=function(e){function Document23(t){var r;return(r=e.call(this,_extends({type:"document"},t))||this).nodes||(r.nodes=[]),r}return _inherits(Document23,e),Document23.prototype.toResult=function toResult(e){return void 0===e&&(e={}),new fi(new gi,this,e).stringify()},Document23}(di);mi.registerLazyResult=function(e){fi=e},mi.registerProcessor=function(e){gi=e};var vi=mi;mi.default=mi;var _i=function(){function Warning2(e,t){if(void 0===t&&(t={}),this.type="warning",this.text=e,t.node&&t.node.source){var r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(var n in t)this[n]=t[n]}return Warning2.prototype.toString=function toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},Warning2}(),yi=_i;_i.default=_i;var bi=yi,wi=function(){function Result2(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}var e=Result2.prototype;return e.toString=function toString(){return this.css},e.warn=function warn(e,t){void 0===t&&(t={}),t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);var r=new bi(e,t);return this.messages.push(r),r},e.warnings=function warnings(){return this.messages.filter(function(e){return"warning"===e.type})},_create_class(Result2,[{key:"content",get:function get(){return this.css}}]),Result2}(),ki=wi;wi.default=wi;var Si="'".charCodeAt(0),Ci='"'.charCodeAt(0),Ii="\\".charCodeAt(0),xi="/".charCodeAt(0),Oi="\n".charCodeAt(0),Ei=" ".charCodeAt(0),Mi="\f".charCodeAt(0),Ri="\t".charCodeAt(0),Ai="\r".charCodeAt(0),Ti="[".charCodeAt(0),Pi="]".charCodeAt(0),Ni="(".charCodeAt(0),Di=")".charCodeAt(0),Li="{".charCodeAt(0),Fi="}".charCodeAt(0),Ui=";".charCodeAt(0),Bi="*".charCodeAt(0),$i=":".charCodeAt(0),zi="@".charCodeAt(0),ji=/[\t\n\f\r "#'()/;[\\\]{}]/g,qi=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Wi=/.[\r\n"'(/\\]/,Vi=/[\da-f]/i,Gi=di,Hi=function(e){function AtRule2(t){var r;return(r=e.call(this,t)||this).type="atrule",r}_inherits(AtRule2,e);var t=AtRule2.prototype;return t.append=function append(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i;return this.proxyOf.nodes||(this.nodes=[]),(i=e.prototype.append).call.apply(i,[].concat([this],r))},t.prepend=function prepend(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i;return this.proxyOf.nodes||(this.nodes=[]),(i=e.prototype.prepend).call.apply(i,[].concat([this],r))},AtRule2}(Gi),Ji=Hi;Hi.default=Hi,Gi.registerAtRule(Hi);var Yi,Zi,Xi=di,Ki=function(e){function Root2(t){var r;return(r=e.call(this,t)||this).type="root",r.nodes||(r.nodes=[]),r}_inherits(Root2,e);var t=Root2.prototype;return t.normalize=function normalize(t,r,n){var i=e.prototype.normalize.call(this,t);if(r)if("prepend"===n)this.nodes.length>1?r.raws.before=this.nodes[1].raws.before:delete r.raws.before;else if(this.first!==r)for(var o,s=_create_for_of_iterator_helper_loose(i);!(o=s()).done;){o.value.raws.before=r.raws.before}return i},t.removeChild=function removeChild(t,r){var n=this.index(t);return!r&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),e.prototype.removeChild.call(this,t)},t.toResult=function toResult(e){return void 0===e&&(e={}),new Yi(new Zi,this,e).stringify()},Root2}(Xi);Ki.registerLazyResult=function(e){Yi=e},Ki.registerProcessor=function(e){Zi=e};var Qi=Ki;Ki.default=Ki,Xi.registerRoot(Ki);var eo={comma:function comma(e){return eo.split(e,[","],!0)},space:function space(e){return eo.split(e,[" ","\n","\t"])},split:function split(e,t,r){for(var n,i=[],o="",split=!1,s=0,a=!1,c="",u=!1,l=_create_for_of_iterator_helper_loose(e);!(n=l()).done;){var p=n.value;u?u=!1:"\\"===p?u=!0:a?p===c&&(a=!1):'"'===p||"'"===p?(a=!0,c=p):"("===p?s+=1:")"===p?s>0&&(s-=1):0===s&&t.includes(p)&&(split=!0),split?(""!==o&&i.push(o.trim()),o="",split=!1):o+=p}return(r||""!==o)&&i.push(o.trim()),i}},to=eo;eo.default=eo;var ro=di,no=to,io=function(e){function Rule2(t){var r;return(r=e.call(this,t)||this).type="rule",r.nodes||(r.nodes=[]),r}return _inherits(Rule2,e),_create_class(Rule2,[{key:"selectors",get:function get(){return no.comma(this.selector)},set:function set(e){var t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}}]),Rule2}(ro),oo=io;io.default=io,ro.registerRule(io);var so=wn,ao=function tokenizer2(e,t){void 0===t&&(t={});var r,n,i,o,s,a,c,u,l,p,h=e.css.valueOf(),d=t.ignoreErrors,f=h.length,g=0,m=[],v=[];function unclosed(t){throw e.error("Unclosed "+t,g)}return{back:function back(e){v.push(e)},endOfFile:function endOfFile(){return 0===v.length&&g>=f},nextToken:function nextToken(e){if(v.length)return v.pop();if(!(g>=f)){var t=!!e&&e.ignoreUnclosed;switch(r=h.charCodeAt(g)){case Oi:case Ei:case Ri:case Ai:case Mi:n=g;do{n+=1,r=h.charCodeAt(n)}while(r===Ei||r===Oi||r===Ri||r===Ai||r===Mi);p=["space",h.slice(g,n)],g=n-1;break;case Ti:case Pi:case Li:case Fi:case $i:case Ui:case Di:var _=String.fromCharCode(r);p=[_,_,g];break;case Ni:if(u=m.length?m.pop()[1]:"",l=h.charCodeAt(g+1),"url"===u&&l!==Si&&l!==Ci&&l!==Ei&&l!==Oi&&l!==Ri&&l!==Mi&&l!==Ai){n=g;do{if(a=!1,-1===(n=h.indexOf(")",n+1))){if(d||t){n=g;break}unclosed("bracket")}for(c=n;h.charCodeAt(c-1)===Ii;)c-=1,a=!a}while(a);p=["brackets",h.slice(g,n+1),g,n],g=n}else n=h.indexOf(")",g+1),o=h.slice(g,n+1),-1===n||Wi.test(o)?p=["(","(",g]:(p=["brackets",o,g,n],g=n);break;case Si:case Ci:i=r===Si?"'":'"',n=g;do{if(a=!1,-1===(n=h.indexOf(i,n+1))){if(d||t){n=g+1;break}unclosed("string")}for(c=n;h.charCodeAt(c-1)===Ii;)c-=1,a=!a}while(a);p=["string",h.slice(g,n+1),g,n],g=n;break;case zi:ji.lastIndex=g+1,ji.test(h),n=0===ji.lastIndex?h.length-1:ji.lastIndex-2,p=["at-word",h.slice(g,n+1),g,n],g=n;break;case Ii:for(n=g,s=!0;h.charCodeAt(n+1)===Ii;)n+=1,s=!s;if(r=h.charCodeAt(n+1),s&&r!==xi&&r!==Ei&&r!==Oi&&r!==Ri&&r!==Ai&&r!==Mi&&(n+=1,Vi.test(h.charAt(n)))){for(;Vi.test(h.charAt(n+1));)n+=1;h.charCodeAt(n+1)===Ei&&(n+=1)}p=["word",h.slice(g,n+1),g,n],g=n;break;default:r===xi&&h.charCodeAt(g+1)===Bi?(0===(n=h.indexOf("*/",g+2)+1)&&(d||t?n=h.length:unclosed("comment")),p=["comment",h.slice(g,n+1),g,n],g=n):(qi.lastIndex=g+1,qi.test(h),n=0===qi.lastIndex?h.length-1:qi.lastIndex-2,p=["word",h.slice(g,n+1),g,n],m.push(p),g=n)}return g++,p}},position:function position(){return g}}},co=ni,uo=Ji,lo=Qi,po=oo,ho={empty:!0,space:!0};var fo=function(){function Parser2(e){this.input=e,this.root=new lo,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}var e=Parser2.prototype;return e.atrule=function atrule(e){var t,r,n,i=new uo;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);for(var o=!1,s=!1,a=[],c=[];!this.tokenizer.endOfFile();){if("("===(t=(e=this.tokenizer.nextToken())[0])||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){s=!0;break}if("}"===t){if(a.length>0){for(r=a[n=a.length-1];r&&"space"===r[0];)r=a[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]),i.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(i.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(i,"params",a),o&&(e=a[a.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),s&&(i.nodes=[],this.current=i)},e.checkMissedSemicolon=function checkMissedSemicolon(e){var t=this.colon(e);if(!1!==t){for(var r,n=0,i=t-1;i>=0&&("space"===(r=e[i])[0]||2!==(n+=1));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}},e.colon=function colon(e){for(var t,r,n,i,o=0,s=_create_for_of_iterator_helper_loose(e.entries());!(i=s()).done;){var a=i.value,c=a[0];if("("===(r=(t=a[1])[0])&&(o+=1),")"===r&&(o-=1),0===o&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return c}this.doubleColon(t)}n=t}return!1},e.comment=function comment(e){var t=new co;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;var r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{var n=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=n[2],t.raws.left=n[1],t.raws.right=n[3]}},e.createTokenizer=function createTokenizer(){this.tokenizer=ao(this.input)},e.decl=function decl(e,t){var r=new so;this.init(r,e[0][2]);var n,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||function findLastWithPosition(e){for(var t=e.length-1;t>=0;t--){var r=e[t],n=r[3]||r[2];if(n)return n}}(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){var o=e[0][0];if(":"===o||"space"===o||"comment"===o)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(":"===(n=e.shift())[0]){r.raws.between+=n[1];break}"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),r.raws.between+=n[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));for(var s,a=[];e.length&&("space"===(s=e[0][0])||"comment"===s);)a.push(e.shift());this.precheckMissedSemicolon(e);for(var c=e.length-1;c>=0;c--){if("!important"===(n=e[c])[1].toLowerCase()){r.important=!0;var u=this.stringFrom(e,c);" !important"!==(u=this.spacesFromEnd(e)+u)&&(r.raws.important=u);break}if("important"===n[1].toLowerCase()){for(var l=e.slice(0),p="",h=c;h>0;h--){var d=l[h][0];if(0===p.trim().indexOf("!")&&"space"!==d)break;p=l.pop()[1]+p}0===p.trim().indexOf("!")&&(r.important=!0,r.raws.important=p,e=l)}if("space"!==n[0]&&"comment"!==n[0])break}var f=e.some(function(e){return"space"!==e[0]&&"comment"!==e[0]});f&&(r.raws.between+=a.map(function(e){return e[1]}).join(""),a=[]),this.raw(r,"value",a.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)},e.doubleColon=function doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})},e.emptyRule=function emptyRule(e){var t=new po;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t},e.end=function end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)},e.endFile=function endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())},e.freeSemicolon=function freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){var t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}},e.getPosition=function getPosition(e){var t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}},e.init=function init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)},e.other=function other(e){for(var t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],c=e;c;){if(r=c[0],a.push(c),"("===r||"["===r)i||(i=c),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=c),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,s);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)for(;a.length&&("space"===(c=a[a.length-1][0])||"comment"===c);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)},e.parse=function parse(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()},e.precheckMissedSemicolon=function precheckMissedSemicolon(){},e.raw=function raw(e,t,r,n){for(var i,o,s,a,c=r.length,u="",l=!0,p=0;p<c;p+=1)"space"!==(o=(i=r[p])[0])||p!==c-1||n?"comment"===o?(a=r[p-1]?r[p-1][0]:"empty",s=r[p+1]?r[p+1][0]:"empty",ho[a]||ho[s]||","===u.slice(-1)?l=!1:u+=i[1]):u+=i[1]:l=!1;if(!l){var raw=r.reduce(function(e,t){return e+t[1]},"");e.raws[t]={raw,value:u}}e[t]=u},e.rule=function rule(e){e.pop();var t=new po;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t},e.spacesAndCommentsFromEnd=function spacesAndCommentsFromEnd(e){for(var t,r="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)r=e.pop()[1]+r;return r},e.spacesAndCommentsFromStart=function spacesAndCommentsFromStart(e){for(var t,r="";e.length&&("space"===(t=e[0][0])||"comment"===t);)r+=e.shift()[1];return r},e.spacesFromEnd=function spacesFromEnd(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t},e.stringFrom=function stringFrom(e,t){for(var r="",n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r},e.unclosedBlock=function unclosedBlock(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)},e.unclosedBracket=function unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})},e.unexpectedClose=function unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})},e.unknownWord=function unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})},e.unnamedAtrule=function unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})},Parser2}(),go=di,mo=fo,vo=Wn;function parse$3(e,t){var r=new vo(e,t),n=new mo(r);try{n.parse()}catch(e){throw e}return n.root}var _o=parse$3;parse$3.default=parse$3,go.registerParse(parse$3);var yo=an.isClean,bo=an.my,wo=ti,ko=hn,So=di,Co=vi,Io=ki,xo=_o,Oo=Qi,Eo={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Mo={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Ro={Once:!0,postcssPlugin:!0,prepare:!0};function isPromise(e){return"object"===(void 0===e?"undefined":_type_of(e))&&"function"==typeof e.then}function getEvents(e){var t=!1,r=Eo[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function toStack(e){return{eventIndex:0,events:"document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:getEvents(e),iterator:0,node:e,visitorIndex:0,visitors:[]}}function cleanMarks(e){return e[yo]=!1,e.nodes&&e.nodes.forEach(function(e){return cleanMarks(e)}),e}var Ao={},To=function(){function LazyResult2(e,t,r){var n,i=this;if(this.stringified=!1,this.processed=!1,"object"!==(void 0===t?"undefined":_type_of(t))||null===t||"root"!==t.type&&"document"!==t.type)if(_instanceof(t,LazyResult2)||_instanceof(t,Io))n=cleanMarks(t.root),t.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{var o=xo;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{n=o(t,r)}catch(e){this.processed=!0,this.error=e}n&&!n[bo]&&So.rebuild(n)}else n=cleanMarks(t);this.result=new Io(e,n,r),this.helpers=_extends({},Ao,{postcss:Ao,result:this.result}),this.plugins=this.processor.plugins.map(function(e){return"object"===(void 0===e?"undefined":_type_of(e))&&e.prepare?_extends({},e,e.prepare(i.result)):e})}var e=LazyResult2.prototype;return e.async=function async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)},e.catch=function _catch(e){return this.async().catch(e)},e.finally=function _finally(e){return this.async().then(e,e)},e.getAsyncError=function getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")},e.handleError=function handleError(e,t){var r=this.result.lastPlugin;try{if(t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(r.postcssVersion);}else e.plugin=r.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}return e},e.prepareVisitors=function prepareVisitors(){var e=this;this.listeners={};for(var t,add=function(t,r,n){e.listeners[r]||(e.listeners[r]=[]),e.listeners[r].push([t,n])},r=_create_for_of_iterator_helper_loose(this.plugins);!(t=r()).done;){var n=t.value;if("object"===(void 0===n?"undefined":_type_of(n)))for(var i in n){if(!Mo[i]&&/^[A-Z]/.test(i))throw new Error("Unknown event "+i+" in "+n.postcssPlugin+". Try to update PostCSS ("+this.processor.version+" now).");if(!Ro[i])if("object"===_type_of(n[i]))for(var o in n[i])add(n,"*"===o?i:i+"-"+o.toLowerCase(),n[i][o]);else"function"==typeof n[i]&&add(n,i,n[i])}}this.hasListener=Object.keys(this.listeners).length>0},e.runAsync=function runAsync(){var e=this;return _async_to_generator(function(){var t,r,n,i,o,s,a,c,u,l,p,h;return _ts_generator(this,function(d){switch(d.label){case 0:e.plugin=0,t=0,d.label=1;case 1:if(!(t<e.plugins.length))return[3,6];if(r=e.plugins[t],!isPromise(n=e.runOnRoot(r)))return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,n];case 3:return d.sent(),[3,5];case 4:throw i=d.sent(),e.handleError(i);case 5:return t++,[3,1];case 6:if(e.prepareVisitors(),!e.hasListener)return[3,18];o=e.result.root,d.label=7;case 7:if(o[yo])return[3,14];o[yo]=!0,s=[toStack(o)],d.label=8;case 8:if(!(s.length>0))return[3,13];if(!isPromise(a=e.visitTick(s)))return[3,12];d.label=9;case 9:return d.trys.push([9,11,,12]),[4,a];case 10:return d.sent(),[3,12];case 11:throw c=d.sent(),u=s[s.length-1].node,e.handleError(c,u);case 12:return[3,8];case 13:return[3,7];case 14:if(!e.listeners.OnceExit)return[3,18];l=function(){var t,r,n,i,s;return _ts_generator(this,function(a){switch(a.label){case 0:t=h.value,r=t[0],n=t[1],e.result.lastPlugin=r,a.label=1;case 1:return a.trys.push([1,6,,7]),"document"!==o.type?[3,3]:(i=o.nodes.map(function(t){return n(t,e.helpers)}),[4,Promise.all(i)]);case 2:return a.sent(),[3,5];case 3:return[4,n(o,e.helpers)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:throw s=a.sent(),e.handleError(s);case 7:return[2]}})},p=_create_for_of_iterator_helper_loose(e.listeners.OnceExit),d.label=15;case 15:return(h=p()).done?[3,18]:[5,_ts_values(l())];case 16:d.sent(),d.label=17;case 17:return[3,15];case 18:return e.processed=!0,[2,e.stringify()]}})})()},e.runOnRoot=function runOnRoot(e){var t=this;this.result.lastPlugin=e;try{if("object"===(void 0===e?"undefined":_type_of(e))&&e.Once){if("document"===this.result.root.type){var r=this.result.root.nodes.map(function(r){return e.Once(r,t.helpers)});return isPromise(r[0])?Promise.all(r):r}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}},e.stringify=function stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=ko;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);var r=new wo(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result},e.sync=function sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(var e,t=_create_for_of_iterator_helper_loose(this.plugins);!(e=t()).done;){var r=e.value;if(isPromise(this.runOnRoot(r)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){for(var n=this.result.root;!n[yo];)n[yo]=!0,this.walkSync(n);if(this.listeners.OnceExit)if("document"===n.type)for(var i,o=_create_for_of_iterator_helper_loose(n.nodes);!(i=o()).done;){var s=i.value;this.visitSync(this.listeners.OnceExit,s)}else this.visitSync(this.listeners.OnceExit,n)}return this.result},e.then=function then(e,t){return this.async().then(e,t)},e.toString=function toString(){return this.css},e.visitSync=function visitSync(e,t){for(var r,n=_create_for_of_iterator_helper_loose(e);!(r=n()).done;){var i=r.value,o=i[0],s=i[1];this.result.lastPlugin=o;var a=void 0;try{a=s(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(isPromise(a))throw this.getAsyncError()}},e.visitTick=function visitTick(e){var t=e[e.length-1],r=t.node,n=t.visitors;if("root"===r.type||"document"===r.type||r.parent){if(n.length>0&&t.visitorIndex<n.length){var i=n[t.visitorIndex],o=i[0],s=i[1];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return s(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){for(var a,c=t.iterator;a=r.nodes[r.indexes[c]];)if(r.indexes[c]+=1,!a[yo])return a[yo]=!0,void e.push(toStack(a));t.iterator=0,delete r.indexes[c]}for(var u=t.events;t.eventIndex<u.length;){var l=u[t.eventIndex];if(t.eventIndex+=1,0===l)return void(r.nodes&&r.nodes.length&&(r[yo]=!0,t.iterator=r.getIterator()));if(this.listeners[l])return void(t.visitors=this.listeners[l])}e.pop()}else e.pop()},e.walkSync=function walkSync(e){var t=this;e[yo]=!0;for(var r,n=_create_for_of_iterator_helper_loose(getEvents(e));!(r=n()).done;){var i=r.value;if(0===i)e.nodes&&e.each(function(e){e[yo]||t.walkSync(e)});else{var o=this.listeners[i];if(o&&this.visitSync(o,e.toProxy()))return}}},e.warnings=function warnings(){return this.sync().warnings()},_create_class(LazyResult2,[{key:"content",get:function get(){return this.stringify().content}},{key:"css",get:function get(){return this.stringify().css}},{key:"map",get:function get(){return this.stringify().map}},{key:"messages",get:function get(){return this.sync().messages}},{key:"opts",get:function get(){return this.result.opts}},{key:"processor",get:function get(){return this.result.processor}},{key:"root",get:function get(){return this.sync().root}},{key:Symbol.toStringTag,get:function get(){return"LazyResult"}}]),LazyResult2}();To.registerPostcss=function(e){Ao=e};var Po=To;To.default=To,Oo.registerLazyResult(To),Co.registerLazyResult(To);var No=ti,Do=hn,Lo=_o,Fo=ki,Uo=function(){function NoWorkResult2(e,t,r){var n;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;var i=Do;this.result=new Fo(this._processor,n,this._opts),this.result.css=t;var o=this;Object.defineProperty(this.result,"root",{get:function get(){return o.root}});var s=new No(i,n,this._opts,t);if(s.isMap()){var a=s.generate(),c=a[0],u=a[1];c&&(this.result.css=c),u&&(this.result.map=u)}else s.clearAnnotation(),this.result.css=s.css}var e=NoWorkResult2.prototype;return e.async=function async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)},e.catch=function _catch(e){return this.async().catch(e)},e.finally=function _finally(e){return this.async().then(e,e)},e.sync=function sync(){if(this.error)throw this.error;return this.result},e.then=function then(e,t){return this.async().then(e,t)},e.toString=function toString(){return this._css},e.warnings=function warnings(){return[]},_create_class(NoWorkResult2,[{key:"content",get:function get(){return this.result.css}},{key:"css",get:function get(){return this.result.css}},{key:"map",get:function get(){return this.result.map}},{key:"messages",get:function get(){return[]}},{key:"opts",get:function get(){return this.result.opts}},{key:"processor",get:function get(){return this.result.processor}},{key:"root",get:function get(){if(this._root)return this._root;var e,t=Lo;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}},{key:Symbol.toStringTag,get:function get(){return"NoWorkResult"}}]),NoWorkResult2}(),Bo=Uo;Uo.default=Uo;var $o=Bo,zo=Po,jo=vi,qo=Qi,Wo=function(){function Processor2(e){void 0===e&&(e=[]),this.version="8.4.38",this.plugins=this.normalize(e)}var e=Processor2.prototype;return e.normalize=function normalize(e){for(var t,r=[],n=_create_for_of_iterator_helper_loose(e);!(t=n()).done;){var i=t.value;if(!0===i.postcss?i=i():i.postcss&&(i=i.postcss),"object"===(void 0===i?"undefined":_type_of(i))&&Array.isArray(i.plugins))r=r.concat(i.plugins);else if("object"===(void 0===i?"undefined":_type_of(i))&&i.postcssPlugin)r.push(i);else if("function"==typeof i)r.push(i);else{if("object"!==(void 0===i?"undefined":_type_of(i))||!i.parse&&!i.stringify)throw new Error(i+" is not a PostCSS plugin")}}return r},e.process=function process1(e,t){return void 0===t&&(t={}),this.plugins.length||t.parser||t.stringifier||t.syntax?new zo(this,e,t):new $o(this,e,t)},e.use=function use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this},Processor2}(),Vo=Wo;Wo.default=Wo,qo.registerProcessor(Wo),jo.registerProcessor(Wo);var Go=wn,Ho=Mn,Jo=ni,Yo=Ji,Zo=Wn,Xo=Qi,Ko=oo;function fromJSON$1(e,t){if(Array.isArray(e))return e.map(function(e){return fromJSON$1(e)});var r=e.inputs,n=_object_without_properties_loose(e,["inputs"]);if(r){t=[];for(var i,o=_create_for_of_iterator_helper_loose(r);!(i=o()).done;){var s=_extends({},i.value,{__proto__:Zo.prototype});s.map&&(s.map=_extends({},s.map,{__proto__:Ho.prototype})),t.push(s)}}if(n.nodes&&(n.nodes=e.nodes.map(function(e){return fromJSON$1(e,t)})),n.source){var a=n.source,c=a.inputId,u=_object_without_properties_loose(a,["inputId"]);n.source=u,null!=c&&(n.source.input=t[c])}if("root"===n.type)return new Xo(n);if("decl"===n.type)return new Go(n);if("rule"===n.type)return new Ko(n);if("comment"===n.type)return new Jo(n);if("atrule"===n.type)return new Yo(n);throw new Error("Unknown node type: "+e.type)}var Qo=fromJSON$1;fromJSON$1.default=fromJSON$1;var es=sn,ts=wn,rs=Po,ns=di,is=Vo,os=hn,ss=Qo,as=vi,cs=yi,us=ni,ls=Ji,ps=ki,hs=Wn,ds=_o,fs=to,gs=oo,ms=Qi,vs=yn;function postcss(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new is(t)}postcss.plugin=function plugin2(e,t){var r,n=!1;function creator(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": éé¢ postcss.plugin è¢«å¼ç¨. è¿ç§»æå:\nhttps://www.w3ctech.com/topic/2226"));var s=t.apply(void 0,[].concat(i));return s.postcssPlugin=e,s.postcssVersion=(new is).version,s}return Object.defineProperty(creator,"postcss",{get:function get(){return r||(r=creator()),r}}),creator.process=function(e,t,r){return postcss([creator(r)]).process(e,t)},creator},postcss.stringify=os,postcss.parse=ds,postcss.fromJSON=ss,postcss.list=fs,postcss.comment=function(e){return new us(e)},postcss.atRule=function(e){return new ls(e)},postcss.decl=function(e){return new ts(e)},postcss.rule=function(e){return new gs(e)},postcss.root=function(e){return new ms(e)},postcss.document=function(e){return new as(e)},postcss.CssSyntaxError=es,postcss.Declaration=ts,postcss.Container=ns,postcss.Processor=is,postcss.Document=as,postcss.Comment=us,postcss.Warning=cs,postcss.AtRule=ls,postcss.Result=ps,postcss.Input=hs,postcss.Rule=gs,postcss.Root=ms,postcss.Node=vs,rs.registerPostcss(postcss);var _s=postcss;postcss.default=postcss;var ys=getDefaultExportFromCjs(_s);ys.stringify,ys.fromJSON,ys.plugin,ys.parse,ys.list,ys.document,ys.comment,ys.atRule,ys.rule,ys.decl,ys.root,ys.CssSyntaxError,ys.Declaration,ys.Container,ys.Processor,ys.Document,ys.Comment,ys.Warning,ys.AtRule,ys.Result,ys.Input,ys.Rule,ys.Root,ys.Node;var bs=function(){function BaseRRNode(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}var e=BaseRRNode.prototype;return e.contains=function contains(e){if(!_instanceof(e,BaseRRNode))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1},e.appendChild=function appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")},e.insertBefore=function insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")},e.removeChild=function removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")},e.toString=function toString(){return"RRNode"},_create_class(BaseRRNode,[{key:"childNodes",get:function get(){for(var e=[],t=this.firstChild;t;)e.push(t),t=t.nextSibling;return e}}]),BaseRRNode}(),ws={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},ks={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Ss={};function getUntaintedPrototype(e){if(Ss[e])return Ss[e];var t=globalThis[e],r=t.prototype,n=e in ws?ws[e]:void 0,i=Boolean(n&&n.every(function(e){var t,n;return Boolean(null==(n=null==(t=Object.getOwnPropertyDescriptor(r,e))?void 0:t.get)?void 0:n.toString().includes("[native code]"))})),o=e in ks?ks[e]:void 0,s=Boolean(o&&o.every(function(e){var t;return"function"==typeof r[e]&&(null==(t=r[e])?void 0:t.toString().includes("[native code]"))}));if(i&&s&&!globalThis.Zone)return Ss[e]=t.prototype,t.prototype;try{var a=document.createElement("iframe");document.body.appendChild(a);var c=a.contentWindow;if(!c)return t.prototype;var u=c[e].prototype;return document.body.removeChild(a),u?Ss[e]=u:r}catch(e){return r}}var Cs={};function getUntaintedAccessor(e,t,r){var n,i=e+"."+String(r);if(Cs[i])return Cs[i].call(t);var o=getUntaintedPrototype(e),s=null==(n=Object.getOwnPropertyDescriptor(o,r))?void 0:n.get;return s?(Cs[i]=s,s.call(t)):t[r]}var Is={};function getUntaintedMethod(e,t,r){var n=e+"."+String(r);if(Is[n])return Is[n].bind(t);var i=getUntaintedPrototype(e)[r];return"function"!=typeof i?t[r]:(Is[n]=i,i.bind(t))}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}function patch(e,t,r){try{if(!(t in e))return function(){};var n=e[t],i=r(n);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=i,function(){e[t]=n}}catch(e){return function(){}}}var xs={childNodes:function childNodes(e){return getUntaintedAccessor("Node",e,"childNodes")},parentNode:function parentNode(e){return getUntaintedAccessor("Node",e,"parentNode")},parentElement:function parentElement(e){return getUntaintedAccessor("Node",e,"parentElement")},textContent:function textContent(e){return getUntaintedAccessor("Node",e,"textContent")},contains:function contains(e,t){return getUntaintedMethod("Node",e,"contains")(t)},getRootNode:function getRootNode(e){return getUntaintedMethod("Node",e,"getRootNode")()},host:function host(e){return e&&"host"in e?getUntaintedAccessor("ShadowRoot",e,"host"):null},styleSheets:function styleSheets(e){return e.styleSheets},shadowRoot:function shadowRoot(e){return e&&"shadowRoot"in e?getUntaintedAccessor("Element",e,"shadowRoot"):null},querySelector:function querySelector(e,t){return getUntaintedAccessor("Element",e,"querySelector")(t)},querySelectorAll:function querySelectorAll(e,t){return getUntaintedAccessor("Element",e,"querySelectorAll")(t)},mutationObserver:mutationObserverCtor,patch};function on(e,t,r){void 0===r&&(r=document);var n={capture:!0,passive:!0};return r.addEventListener(e,t,n),function(){return r.removeEventListener(e,t,n)}}var Os="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",Es={map:{},getId:function getId(){return console.error(Os),-1},getNode:function getNode(){return console.error(Os),null},removeNodeFromMap:function removeNodeFromMap(){console.error(Os)},has:function has(){return console.error(Os),!1},reset:function reset(){console.error(Os)}};function throttle(e,t,r){void 0===r&&(r={});var n=null,i=0;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];var c=Date.now();i||!1!==r.leading||(i=c);var u=t-(c-i),l=this;u<=0||u>t?(n&&(clearTimeout(n),n=null),i=c,e.apply(l,s)):n||!1===r.trailing||(n=setTimeout(function(){i=!1===r.leading?0:Date.now(),n=null,e.apply(l,s)},u))}}function hookSetter(e,t,r,n,i){void 0===i&&(i=window);var o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,n?r:{set:function set(e){var t=this;setTimeout(function(){r.set.call(t,e)},0),o&&o.set&&o.set.call(this,e)}}),function(){return hookSetter(e,t,o||{},!0)}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Es=new Proxy(Es,{get:function get(e,t,r){return"map"===t&&console.error(Os),Reflect.get(e,t,r)}}));var Ms=Date.now;function getWindowScroll(e){var t,r,n,i,o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(t=xs.parentElement(o.body))?void 0:t.scrollLeft)||(null==(r=null==o?void 0:o.body)?void 0:r.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(n=xs.parentElement(o.body))?void 0:n.scrollTop)||(null==(i=null==o?void 0:o.body)?void 0:i.scrollTop)||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(e){return e?e.nodeType===e.ELEMENT_NODE?e:xs.parentElement(e):null}function isBlocked(e,t,r,n){if(!e)return!1;var i=closestElementOfNode(e);if(!i)return!1;try{if("string"==typeof t){if(i.classList.contains(t))return!0;if(n&&null!==i.closest("."+t))return!0}else if(classMatchesRegex(i,t,n))return!0}catch(e){}if(r){if(i.matches(r))return!0;if(n&&null!==i.closest(r))return!0}return!1}function isIgnored(e,t,r){return!("TITLE"!==e.tagName||!r.headTitleMutations)||-2===t.getId(e)}function isAncestorRemoved(e,t){if(isShadowRoot(e))return!1;var r=t.getId(e);if(!t.has(r))return!0;var n=xs.parentNode(e);return(!n||n.nodeType!==e.DOCUMENT_NODE)&&(!n||isAncestorRemoved(n,t))}function legacy_isTouchEvent(e){return Boolean(e.changedTouches)}function isSerializedIframe(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function isSerializedStylesheet(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function hasShadowRoot(e){return!!e&&(_instanceof(e,bs)&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(xs.shadowRoot(e)))}/[1-9][0-9]{12}/.test(Date.now().toString())||(Ms=function(){return(new Date).getTime()});var Rs=function(){function StyleSheetMirror(){__publicField(this,"id",1),__publicField(this,"styleIDMap",new WeakMap),__publicField(this,"idStyleMap",new Map)}var e=StyleSheetMirror.prototype;return e.getId=function getId(e){var t;return null!=(t=this.styleIDMap.get(e))?t:-1},e.has=function has(e){return this.styleIDMap.has(e)},e.add=function add(e,t){return this.has(e)?this.getId(e):(r=void 0===t?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r);var r},e.getStyle=function getStyle(e){return this.idStyleMap.get(e)||null},e.reset=function reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1},e.generateId=function generateId(){return this.id++},StyleSheetMirror}();function getShadowHost(e){var t,r=null;return"getRootNode"in e&&(null==(t=xs.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&xs.host(xs.getRootNode(e))&&(r=xs.host(xs.getRootNode(e))),r}function shadowHostInDom(e){var t=e.ownerDocument;if(!t)return!1;var r=function getRootShadowHost(e){for(var t,r=e;t=getShadowHost(r);)r=t;return r}(e);return xs.contains(t,r)}function inDom(e){var t=e.ownerDocument;return!!t&&(xs.contains(t,e)||shadowHostInDom(e))}var As=function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e}(As||{}),Ts=function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e}(Ts||{}),Ps=function(e){return e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e}(Ps||{}),Ns=function(e){return e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e}(Ns||{}),Ds=function(e){return e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e}(Ds||{}),Ls=function(e){return e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e}(Ls||{}),Fs=function(e){return e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e}(Fs||{});function isNodeInLinkedList(e){return"__ln"in e}var Us,Bs=function(){function DoubleLinkedList(){__publicField(this,"length",0),__publicField(this,"head",null),__publicField(this,"tail",null)}var e=DoubleLinkedList.prototype;return e.get=function get(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,r=0;r<e;r++)t=(null==t?void 0:t.next)||null;return t},e.addNode=function addNode(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&isNodeInLinkedList(e.previousSibling)){var r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&isNodeInLinkedList(e.nextSibling)&&e.nextSibling.__ln.previous){var n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++},e.removeNode=function removeNode(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)},DoubleLinkedList}(),moveKey=function(e,t){return e+"@"+t},$s=function(){function MutationBuffer(){var e=this;__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"texts",[]),__publicField(this,"attributes",[]),__publicField(this,"attributeMap",new WeakMap),__publicField(this,"removes",[]),__publicField(this,"mapRemoves",[]),__publicField(this,"movedMap",{}),__publicField(this,"addedSet",new Set),__publicField(this,"movedSet",new Set),__publicField(this,"droppedSet",new Set),__publicField(this,"removesSubTreeCache",new Set),__publicField(this,"mutationCb"),__publicField(this,"blockClass"),__publicField(this,"blockSelector"),__publicField(this,"maskTextClass"),__publicField(this,"maskTextSelector"),__publicField(this,"inlineStylesheet"),__publicField(this,"maskInputOptions"),__publicField(this,"maskTextFn"),__publicField(this,"maskInputFn"),__publicField(this,"keepIframeSrcFn"),__publicField(this,"recordCanvas"),__publicField(this,"inlineImages"),__publicField(this,"slimDOMOptions"),__publicField(this,"dataURLOptions"),__publicField(this,"doc"),__publicField(this,"mirror"),__publicField(this,"iframeManager"),__publicField(this,"stylesheetManager"),__publicField(this,"shadowDomManager"),__publicField(this,"canvasManager"),__publicField(this,"processedNodeManager"),__publicField(this,"unattachedDoc"),__publicField(this,"processMutations",function(t){t.forEach(e.processMutation),e.emit()}),__publicField(this,"emit",function(){if(!e.frozen&&!e.locked){for(var t=[],r=new Set,n=new Bs,getNextId=function(t){for(var r=t,n=-2;-2===n;)n=(r=r&&r.nextSibling)&&e.mirror.getId(r);return n},pushAdd=function(i){var o=xs.parentNode(i);if(o&&inDom(i)){var s=!1;if(i.nodeType===Node.TEXT_NODE){var a=o.tagName;if("TEXTAREA"===a)return;"STYLE"===a&&e.addedSet.has(o)&&(s=!0)}var c=isShadowRoot(o)?e.mirror.getId(getShadowHost(i)):e.mirror.getId(o),u=getNextId(i);if(-1===c||-1===u)return n.addNode(i);var l=serializeNodeWithId(i,{doc:e.doc,mirror:e.mirror,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,maskInputFn:e.maskInputFn,slimDOMOptions:e.slimDOMOptions,dataURLOptions:e.dataURLOptions,recordCanvas:e.recordCanvas,inlineImages:e.inlineImages,onSerialize:function(t){isSerializedIframe(t,e.mirror)&&e.iframeManager.addIframe(t),isSerializedStylesheet(t,e.mirror)&&e.stylesheetManager.trackLinkElement(t),hasShadowRoot(i)&&e.shadowDomManager.addShadowRoot(xs.shadowRoot(i),e.doc)},onIframeLoad:function(t,r){e.iframeManager.attachIframe(t,r),e.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:function(t,r){e.stylesheetManager.attachLinkElement(t,r)},cssCaptured:s});l&&(t.push({parentId:c,nextId:u,node:l}),r.add(l.id))}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());for(var i,o=_create_for_of_iterator_helper_loose(e.movedSet);!(i=o()).done;){var s=i.value;isParentRemoved(e.removesSubTreeCache,s,e.mirror)&&!e.movedSet.has(xs.parentNode(s))||pushAdd(s)}for(var a,c=_create_for_of_iterator_helper_loose(e.addedSet);!(a=c()).done;){var u=a.value;isAncestorInSet(e.droppedSet,u)||isParentRemoved(e.removesSubTreeCache,u,e.mirror)?isAncestorInSet(e.movedSet,u)?pushAdd(u):e.droppedSet.add(u):pushAdd(u)}for(var l=null;n.length;){var p=null;if(l){var h=e.mirror.getId(xs.parentNode(l.value)),d=getNextId(l.value);-1!==h&&-1!==d&&(p=l)}if(!p)for(var f=n.tail;f;){var g=f;if(f=f.previous,g){var m=e.mirror.getId(xs.parentNode(g.value));if(-1===getNextId(g.value))continue;if(-1!==m){p=g;break}var v=g.value,_=xs.parentNode(v);if(_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var y=xs.host(_);if(-1!==e.mirror.getId(y)){p=g;break}}}}if(!p){for(;n.head;)n.removeNode(n.head.value);break}l=p.previous,n.removeNode(p.value),pushAdd(p.value)}var b={texts:e.texts.map(function(t){var r=t.node,n=xs.parentNode(r);return n&&"TEXTAREA"===n.tagName&&e.genTextAreaValueMutation(n),{id:e.mirror.getId(r),value:t.value}}).filter(function(e){return!r.has(e.id)}).filter(function(t){return e.mirror.has(t.id)}),attributes:e.attributes.map(function(t){var r=t.attributes;if("string"==typeof r.style){var n=JSON.stringify(t.styleDiff),i=JSON.stringify(t._unchangedStyles);n.length<r.style.length&&(n+i).split("var(").length===r.style.split("var(").length&&(r.style=t.styleDiff)}return{id:e.mirror.getId(t.node),attributes:r}}).filter(function(e){return!r.has(e.id)}).filter(function(t){return e.mirror.has(t.id)}),removes:e.removes,adds:t};(b.texts.length||b.attributes.length||b.removes.length||b.adds.length)&&(e.texts=[],e.attributes=[],e.attributeMap=new WeakMap,e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.removesSubTreeCache=new Set,e.movedMap={},e.mutationCb(b))}}),__publicField(this,"genTextAreaValueMutation",function(t){var r=e.attributeMap.get(t);r||(r={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(r),e.attributeMap.set(t,r));var n=Array.from(xs.childNodes(t),function(e){return xs.textContent(e)||""}).join("");r.attributes.value=maskInputValue({element:t,maskInputOptions:e.maskInputOptions,tagName:t.tagName,type:getInputType(t),value:n,maskInputFn:e.maskInputFn})}),__publicField(this,"processMutation",function(t){if(!isIgnored(t.target,e.mirror,e.slimDOMOptions))switch(t.type){case"characterData":var r=xs.textContent(t.target);isBlocked(t.target,e.blockClass,e.blockSelector,!1)||r===t.oldValue||e.texts.push({value:needMaskingText(t.target,e.maskTextClass,e.maskTextSelector,!0)&&r?e.maskTextFn?e.maskTextFn(r,closestElementOfNode(t.target)):r.replace(/[\S]/g,"*"):r,node:t.target});break;case"attributes":var n=t.target,i=t.attributeName,o=t.target.getAttribute(i);if("value"===i){var s=getInputType(n);o=maskInputValue({element:n,maskInputOptions:e.maskInputOptions,tagName:n.tagName,type:s,value:o,maskInputFn:e.maskInputFn})}if(isBlocked(t.target,e.blockClass,e.blockSelector,!1)||o===t.oldValue)return;var a=e.attributeMap.get(t.target);if("IFRAME"===n.tagName&&"src"===i&&!e.keepIframeSrcFn(o)){if(n.contentDocument)return;i="rr_src"}if(a||(a={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},e.attributes.push(a),e.attributeMap.set(t.target,a)),"type"===i&&"INPUT"===n.tagName&&"password"===(t.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!ignoreAttribute(n.tagName,i))if(a.attributes[i]=transformAttribute(e.doc,toLowerCase(n.tagName),toLowerCase(i),o),"style"===i){if(!e.unattachedDoc)try{e.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){e.unattachedDoc=e.doc}var c=e.unattachedDoc.createElement("span");t.oldValue&&c.setAttribute("style",t.oldValue);for(var u,l=_create_for_of_iterator_helper_loose(Array.from(n.style));!(u=l()).done;){var p=u.value,h=n.style.getPropertyValue(p),d=n.style.getPropertyPriority(p);h!==c.style.getPropertyValue(p)||d!==c.style.getPropertyPriority(p)?a.styleDiff[p]=""===d?h:[h,d]:a._unchangedStyles[p]=[h,d]}for(var f,g=_create_for_of_iterator_helper_loose(Array.from(c.style));!(f=g()).done;){var m=f.value;""===n.style.getPropertyValue(m)&&(a.styleDiff[m]=!1)}}else"open"===i&&"DIALOG"===n.tagName&&(n.matches("dialog:modal")?a.attributes.rr_open_mode="modal":a.attributes.rr_open_mode="non-modal");break;case"childList":if(isBlocked(t.target,e.blockClass,e.blockSelector,!0))return;if("TEXTAREA"===t.target.tagName)return void e.genTextAreaValueMutation(t.target);t.addedNodes.forEach(function(r){return e.genAdds(r,t.target)}),t.removedNodes.forEach(function(r){var n=e.mirror.getId(r),i=isShadowRoot(t.target)?e.mirror.getId(xs.host(t.target)):e.mirror.getId(t.target);isBlocked(t.target,e.blockClass,e.blockSelector,!1)||isIgnored(r,e.mirror,e.slimDOMOptions)||!function isSerialized(e,t){return-1!==t.getId(e)}(r,e.mirror)||(e.addedSet.has(r)?(deepDelete(e.addedSet,r),e.droppedSet.add(r)):e.addedSet.has(t.target)&&-1===n||isAncestorRemoved(t.target,e.mirror)||(e.movedSet.has(r)&&e.movedMap[moveKey(n,i)]?deepDelete(e.movedSet,r):(e.removes.push({parentId:i,id:n,isShadow:!(!isShadowRoot(t.target)||!isNativeShadowDom(t.target))||void 0}),function processRemoves(e,t){var r=[e];for(;r.length;){var n=r.pop();t.has(n)||(t.add(n),xs.childNodes(n).forEach(function(e){return r.push(e)}))}return}(r,e.removesSubTreeCache))),e.mapRemoves.push(r))})}}),__publicField(this,"genAdds",function(t,r){if(!e.processedNodeManager.inOtherBuffer(t,e)&&!e.addedSet.has(t)&&!e.movedSet.has(t)){if(e.mirror.hasNode(t)){if(isIgnored(t,e.mirror,e.slimDOMOptions))return;e.movedSet.add(t);var n=null;r&&e.mirror.hasNode(r)&&(n=e.mirror.getId(r)),n&&-1!==n&&(e.movedMap[moveKey(e.mirror.getId(t),n)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);isBlocked(t,e.blockClass,e.blockSelector,!1)||(xs.childNodes(t).forEach(function(t){return e.genAdds(t)}),hasShadowRoot(t)&&xs.childNodes(xs.shadowRoot(t)).forEach(function(r){e.processedNodeManager.add(r,e),e.genAdds(r,t)}))}})}var e=MutationBuffer.prototype;return e.init=function init(e){var t=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(function(r){t[r]=e[r]})},e.freeze=function freeze(){this.frozen=!0,this.canvasManager.freeze()},e.unfreeze=function unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.isFrozen=function isFrozen(){return this.frozen},e.lock=function lock(){this.locked=!0,this.canvasManager.lock()},e.unlock=function unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.reset=function reset(){this.shadowDomManager.reset(),this.canvasManager.reset()},MutationBuffer}();function deepDelete(e,t){e.delete(t),xs.childNodes(t).forEach(function(t){return deepDelete(e,t)})}function isParentRemoved(e,t,r){return 0!==e.size&&function _isParentRemoved(e,t,r){var n=xs.parentNode(t);return!!n&&e.has(n)}(e,t)}function isAncestorInSet(e,t){return 0!==e.size&&_isAncestorInSet(e,t)}function _isAncestorInSet(e,t){var r=xs.parentNode(t);return!!r&&(!!e.has(r)||_isAncestorInSet(e,r))}var callbackWrapper=function(e){if(!Us)return e;return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];try{return e.apply(void 0,[].concat(r))}catch(e){if(Us&&!0===Us(e))return;throw e}}},zs=[];function getEventTarget(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function initMutationObserver(e,t){var r=new $s;zs.push(r),r.init(e);var n=new(mutationObserverCtor())(callbackWrapper(r.processMutations.bind(r)));return n.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function initMouseInteractionObserver(e){var t=e.mouseInteractionCb,r=e.doc,n=e.mirror,i=e.blockClass,o=e.blockSelector,s=e.sampling;if(!1===s.mouseInteraction)return function(){};var a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,c=[],u=null;return Object.keys(Ps).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]}).forEach(function(e){var s=toLowerCase(e),a=function(e){return function(r){var s=getEventTarget(r);if(!isBlocked(s,i,o,!0)){var a=null,c=e;if("pointerType"in r){switch(r.pointerType){case"mouse":a=Ns.Mouse;break;case"touch":a=Ns.Touch;break;case"pen":a=Ns.Pen}a===Ns.Touch?Ps[e]===Ps.MouseDown?c="TouchStart":Ps[e]===Ps.MouseUp&&(c="TouchEnd"):Ns.Pen}else legacy_isTouchEvent(r)&&(a=Ns.Touch);null!==a?(u=a,(c.startsWith("Touch")&&a===Ns.Touch||c.startsWith("Mouse")&&a===Ns.Mouse)&&(a=null)):Ps[e]===Ps.Click&&(a=u,u=null);var l=legacy_isTouchEvent(r)?r.changedTouches[0]:r;if(l){var p=n.getId(s),h=l.clientX,d=l.clientY;callbackWrapper(t)(_extends({type:Ps[c],id:p,x:h,y:d},null!==a&&{pointerType:a}))}}}}(e);if(window.PointerEvent)switch(Ps[e]){case Ps.MouseDown:case Ps.MouseUp:s=s.replace("mouse","pointer");break;case Ps.TouchStart:case Ps.TouchEnd:return}c.push(on(s,a,r))}),callbackWrapper(function(){c.forEach(function(e){return e()})})}function initScrollObserver(e){var t=e.scrollCb,r=e.doc,n=e.mirror,i=e.blockClass,o=e.blockSelector,s=e.sampling;return on("scroll",callbackWrapper(throttle(callbackWrapper(function(e){var s=getEventTarget(e);if(s&&!isBlocked(s,i,o,!0)){var a=n.getId(s);if(s===r&&r.defaultView){var c=getWindowScroll(r.defaultView);t({id:a,x:c.left,y:c.top})}else t({id:a,x:s.scrollLeft,y:s.scrollTop})}}),s.scroll||100)),r)}var js=["INPUT","TEXTAREA","SELECT"],qs=new WeakMap;function getNestedCSSRulePositions(e){return function recurse(e,t){if(hasNestedCSSRule("CSSGroupingRule")&&_instanceof(e.parentRule,CSSGroupingRule)||hasNestedCSSRule("CSSMediaRule")&&_instanceof(e.parentRule,CSSMediaRule)||hasNestedCSSRule("CSSSupportsRule")&&_instanceof(e.parentRule,CSSSupportsRule)||hasNestedCSSRule("CSSConditionRule")&&_instanceof(e.parentRule,CSSConditionRule)){var r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else if(e.parentStyleSheet){var n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function getIdAndStyleId(e,t,r){var n,i;return e?(e.ownerNode?n=t.getId(e.ownerNode):i=r.getId(e),{styleId:i,id:n}):{}}function initAdoptedStyleSheetObserver(e,t){var r,n,i,o=e.mirror,s=e.stylesheetManager,a=null;a="#document"===t.nodeName?o.getId(t):o.getId(xs.host(t));var c="#document"===t.nodeName?null==(r=t.defaultView)?void 0:r.Document:null==(i=null==(n=t.ownerDocument)?void 0:n.defaultView)?void 0:i.ShadowRoot,u=(null==c?void 0:c.prototype)?Object.getOwnPropertyDescriptor(null==c?void 0:c.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&c&&u?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:function get(){var e;return null==(e=u.get)?void 0:e.call(this)},set:function set(e){var t,r=null==(t=u.set)?void 0:t.call(this,e);if(null!==a&&-1!==a)try{s.adoptStyleSheets(e,a)}catch(e){}return r}}),callbackWrapper(function(){Object.defineProperty(t,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})})):function(){}}function initObservers(e,t){void 0===t&&(t={});var r,n=e.doc.defaultView;if(!n)return function(){};!function mergeHooks(e,t){var r=e.mutationCb,n=e.mousemoveCb,i=e.mouseInteractionCb,o=e.scrollCb,s=e.viewportResizeCb,a=e.inputCb,c=e.mediaInteractionCb,u=e.styleSheetRuleCb,l=e.styleDeclarationCb,p=e.canvasMutationCb,h=e.fontCb,d=e.selectionCb,f=e.customElementCb;e.mutationCb=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o;t.mutation&&(o=t).mutation.apply(o,[].concat(n)),r.apply(void 0,[].concat(n))},e.mousemoveCb=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o;t.mousemove&&(o=t).mousemove.apply(o,[].concat(r)),n.apply(void 0,[].concat(r))},e.mouseInteractionCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o;t.mouseInteraction&&(o=t).mouseInteraction.apply(o,[].concat(r)),i.apply(void 0,[].concat(r))},e.scrollCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.scroll&&(i=t).scroll.apply(i,[].concat(r)),o.apply(void 0,[].concat(r))},e.viewportResizeCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.viewportResize&&(i=t).viewportResize.apply(i,[].concat(r)),s.apply(void 0,[].concat(r))},e.inputCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.input&&(i=t).input.apply(i,[].concat(r)),a.apply(void 0,[].concat(r))},e.mediaInteractionCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.mediaInteaction&&(i=t).mediaInteaction.apply(i,[].concat(r)),c.apply(void 0,[].concat(r))},e.styleSheetRuleCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.styleSheetRule&&(i=t).styleSheetRule.apply(i,[].concat(r)),u.apply(void 0,[].concat(r))},e.styleDeclarationCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.styleDeclaration&&(i=t).styleDeclaration.apply(i,[].concat(r)),l.apply(void 0,[].concat(r))},e.canvasMutationCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.canvasMutation&&(i=t).canvasMutation.apply(i,[].concat(r)),p.apply(void 0,[].concat(r))},e.fontCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.font&&(i=t).font.apply(i,[].concat(r)),h.apply(void 0,[].concat(r))},e.selectionCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.selection&&(i=t).selection.apply(i,[].concat(r)),d.apply(void 0,[].concat(r))},e.customElementCb=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i;t.customElement&&(i=t).customElement.apply(i,[].concat(r)),f.apply(void 0,[].concat(r))}}(e,t),e.recordDOM&&(r=initMutationObserver(e,e.doc));var i=function initMoveObserver(e){var t=e.mousemoveCb,r=e.sampling,n=e.doc,i=e.mirror;if(!1===r.mousemove)return function(){};var o,s="number"==typeof r.mousemove?r.mousemove:50,a="number"==typeof r.mousemoveCallback?r.mousemoveCallback:500,c=[],u=throttle(callbackWrapper(function(e){var r=Date.now()-o;t(c.map(function(e){return e.timeOffset-=r,e}),e),c=[],o=null}),a),l=callbackWrapper(throttle(callbackWrapper(function(e){var t=getEventTarget(e),r=legacy_isTouchEvent(e)?e.changedTouches[0]:e,n=r.clientX,s=r.clientY;o||(o=Ms()),c.push({x:n,y:s,id:i.getId(t),timeOffset:Ms()-o}),u("undefined"!=typeof DragEvent&&_instanceof(e,DragEvent)?Ts.Drag:_instanceof(e,MouseEvent)?Ts.MouseMove:Ts.TouchMove)}),s,{trailing:!1})),p=[on("mousemove",l,n),on("touchmove",l,n),on("drag",l,n)];return callbackWrapper(function(){p.forEach(function(e){return e()})})}(e),o=initMouseInteractionObserver(e),s=initScrollObserver(e),a=function initViewportResizeObserver(e,t){var r=e.viewportResizeCb,n=t.win,i=-1,o=-1;return on("resize",callbackWrapper(throttle(callbackWrapper(function(){var e=getWindowHeight(),t=getWindowWidth();i===e&&o===t||(r({width:Number(t),height:Number(e)}),i=e,o=t)}),200)),n)}(e,{win:n}),c=function initInputObserver(e){var t=e.inputCb,r=e.doc,n=e.mirror,i=e.blockClass,o=e.blockSelector,s=e.ignoreClass,a=e.ignoreSelector,c=e.maskInputOptions,u=e.maskInputFn,l=e.sampling,p=e.userTriggeredOnInput;function eventHandler(e){var t=getEventTarget(e),n=e.isTrusted,l=t&&t.tagName;if(t&&"OPTION"===l&&(t=xs.parentElement(t)),t&&l&&!(js.indexOf(l)<0)&&!isBlocked(t,i,o,!0)&&!(t.classList.contains(s)||a&&t.matches(a))){var h=t.value,d=!1,f=getInputType(t)||"";"radio"===f||"checkbox"===f?d=t.checked:(c[l.toLowerCase()]||c[f])&&(h=maskInputValue({element:t,maskInputOptions:c,tagName:l,type:f,value:h,maskInputFn:u})),cbWithDedup(t,p?{text:h,isChecked:d,userTriggered:n}:{text:h,isChecked:d});var g=t.name;"radio"===f&&g&&d&&r.querySelectorAll('input[type="radio"][name="'+g+'"]').forEach(function(e){if(e!==t){var r=e.value;cbWithDedup(e,p?{text:r,isChecked:!d,userTriggered:!1}:{text:r,isChecked:!d})}})}}function cbWithDedup(e,r){var i=qs.get(e);if(!i||i.text!==r.text||i.isChecked!==r.isChecked){qs.set(e,r);var o=n.getId(e);callbackWrapper(t)(_extends({},r,{id:o}))}}var h=("last"===l.input?["change"]:["input","change"]).map(function(e){return on(e,callbackWrapper(eventHandler),r)}),d=r.defaultView;if(!d)return function(){h.forEach(function(e){return e()})};var f,g=d.Object.getOwnPropertyDescriptor(d.HTMLInputElement.prototype,"value"),m=[[d.HTMLInputElement.prototype,"value"],[d.HTMLInputElement.prototype,"checked"],[d.HTMLSelectElement.prototype,"value"],[d.HTMLTextAreaElement.prototype,"value"],[d.HTMLSelectElement.prototype,"selectedIndex"],[d.HTMLOptionElement.prototype,"selected"]];return g&&g.set&&(f=h).push.apply(f,[].concat(m.map(function(e){return hookSetter(e[0],e[1],{set:function set(){callbackWrapper(eventHandler)({target:this,isTrusted:!1})}},!1,d)}))),callbackWrapper(function(){h.forEach(function(e){return e()})})}(e),u=function initMediaInteractionObserver(e){var t=e.mediaInteractionCb,r=e.blockClass,n=e.blockSelector,i=e.mirror,o=e.sampling,s=e.doc,a=callbackWrapper(function(e){return throttle(callbackWrapper(function(o){var s=getEventTarget(o);if(s&&!isBlocked(s,r,n,!0)){var a=s.currentTime,c=s.volume,u=s.muted,l=s.playbackRate,p=s.loop;t({type:e,id:i.getId(s),currentTime:a,volume:c,muted:u,playbackRate:l,loop:p})}}),o.media||500)}),c=[on("play",a(Ls.Play),s),on("pause",a(Ls.Pause),s),on("seeked",a(Ls.Seeked),s),on("volumechange",a(Ls.VolumeChange),s),on("ratechange",a(Ls.RateChange),s)];return callbackWrapper(function(){c.forEach(function(e){return e()})})}(e),styleSheetObserver=function(){},adoptedStyleSheetObserver=function(){},styleDeclarationObserver=function(){},fontObserver=function(){};e.recordDOM&&(styleSheetObserver=function initStyleSheetObserver(e,t){var r=e.styleSheetRuleCb,n=e.mirror,i=e.stylesheetManager,o=t.win;if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return function(){};var s=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:callbackWrapper(function(e,t,o){var s=o[0],a=o[1],c=getIdAndStyleId(t,n,i.styleMirror),u=c.id,l=c.styleId;return(u&&-1!==u||l&&-1!==l)&&r({id:u,styleId:l,adds:[{rule:s,index:a}]}),e.apply(t,o)})}),o.CSSStyleSheet.prototype.addRule=function(e,t,r){void 0===r&&(r=this.cssRules.length);var n=e+" { "+t+" }";return o.CSSStyleSheet.prototype.insertRule.apply(this,[n,r])};var a,c,u=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=new Proxy(u,{apply:callbackWrapper(function(e,t,o){var s=o[0],a=getIdAndStyleId(t,n,i.styleMirror),c=a.id,u=a.styleId;return(c&&-1!==c||u&&-1!==u)&&r({id:c,styleId:u,removes:[{index:s}]}),e.apply(t,o)})}),o.CSSStyleSheet.prototype.removeRule=function(e){return o.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},o.CSSStyleSheet.prototype.replace&&(a=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:callbackWrapper(function(e,t,o){var s=o[0],a=getIdAndStyleId(t,n,i.styleMirror),c=a.id,u=a.styleId;return(c&&-1!==c||u&&-1!==u)&&r({id:c,styleId:u,replace:s}),e.apply(t,o)})})),o.CSSStyleSheet.prototype.replaceSync&&(c=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(c,{apply:callbackWrapper(function(e,t,o){var s=o[0],a=getIdAndStyleId(t,n,i.styleMirror),c=a.id,u=a.styleId;return(c&&-1!==c||u&&-1!==u)&&r({id:c,styleId:u,replaceSync:s}),e.apply(t,o)})}));var l={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?l.CSSGroupingRule=o.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(l.CSSMediaRule=o.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(l.CSSConditionRule=o.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(l.CSSSupportsRule=o.CSSSupportsRule));var p={};return Object.entries(l).forEach(function(e){var t=e[0],o=e[1];p[t]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(p[t].insertRule,{apply:callbackWrapper(function(e,t,o){var s=o[0],a=o[1],c=getIdAndStyleId(t.parentStyleSheet,n,i.styleMirror),u=c.id,l=c.styleId;return(u&&-1!==u||l&&-1!==l)&&r({id:u,styleId:l,adds:[{rule:s,index:[].concat(getNestedCSSRulePositions(t),[a||0])}]}),e.apply(t,o)})}),o.prototype.deleteRule=new Proxy(p[t].deleteRule,{apply:callbackWrapper(function(e,t,o){var s=o[0],a=getIdAndStyleId(t.parentStyleSheet,n,i.styleMirror),c=a.id,u=a.styleId;return(c&&-1!==c||u&&-1!==u)&&r({id:c,styleId:u,removes:[{index:[].concat(getNestedCSSRulePositions(t),[s])}]}),e.apply(t,o)})})}),callbackWrapper(function(){o.CSSStyleSheet.prototype.insertRule=s,o.CSSStyleSheet.prototype.deleteRule=u,a&&(o.CSSStyleSheet.prototype.replace=a),c&&(o.CSSStyleSheet.prototype.replaceSync=c),Object.entries(l).forEach(function(e){var t=e[0],r=e[1];r.prototype.insertRule=p[t].insertRule,r.prototype.deleteRule=p[t].deleteRule})})}(e,{win:n}),adoptedStyleSheetObserver=initAdoptedStyleSheetObserver(e,e.doc),styleDeclarationObserver=function initStyleDeclarationObserver(e,t){var r=e.styleDeclarationCb,n=e.mirror,i=e.ignoreCSSAttributes,o=e.stylesheetManager,s=t.win,a=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:callbackWrapper(function(e,t,s){var c,u=s[0],l=s[1],p=s[2];if(i.has(u))return a.apply(t,[u,l,p]);var h=getIdAndStyleId(null==(c=t.parentRule)?void 0:c.parentStyleSheet,n,o.styleMirror),d=h.id,f=h.styleId;return(d&&-1!==d||f&&-1!==f)&&r({id:d,styleId:f,set:{property:u,value:l,priority:p},index:getNestedCSSRulePositions(t.parentRule)}),e.apply(t,s)})});var c=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(c,{apply:callbackWrapper(function(e,t,s){var a,u=s[0];if(i.has(u))return c.apply(t,[u]);var l=getIdAndStyleId(null==(a=t.parentRule)?void 0:a.parentStyleSheet,n,o.styleMirror),p=l.id,h=l.styleId;return(p&&-1!==p||h&&-1!==h)&&r({id:p,styleId:h,remove:{property:u},index:getNestedCSSRulePositions(t.parentRule)}),e.apply(t,s)})}),callbackWrapper(function(){s.CSSStyleDeclaration.prototype.setProperty=a,s.CSSStyleDeclaration.prototype.removeProperty=c})}(e,{win:n}),e.collectFonts&&(fontObserver=function initFontObserver(e){var t=e.fontCb,r=e.doc,n=r.defaultView;if(!n)return function(){};var i=[],o=new WeakMap,s=n.FontFace;n.FontFace=function FontFace2(e,t,r){var n=new s(e,t,r);return o.set(n,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n};var a=patch(r.fonts,"add",function(e){return function(r){return setTimeout(callbackWrapper(function(){var e=o.get(r);e&&(t(e),o.delete(r))}),0),e.apply(this,[r])}});return i.push(function(){n.FontFace=s}),i.push(a),callbackWrapper(function(){i.forEach(function(e){return e()})})}(e)));for(var l,p=function initSelectionObserver(e){var t=e.doc,r=e.mirror,n=e.blockClass,i=e.blockSelector,o=e.selectionCb,s=!0,a=callbackWrapper(function(){var e=t.getSelection();if(!(!e||s&&(null==e?void 0:e.isCollapsed))){s=e.isCollapsed||!1;for(var a=[],c=e.rangeCount||0,u=0;u<c;u++){var l=e.getRangeAt(u),p=l.startContainer,h=l.startOffset,d=l.endContainer,f=l.endOffset;isBlocked(p,n,i,!0)||isBlocked(d,n,i,!0)||a.push({start:r.getId(p),startOffset:h,end:r.getId(d),endOffset:f})}o({ranges:a})}});return a(),on("selectionchange",a)}(e),h=function initCustomElementObserver(e){var t=e.doc,r=e.customElementCb,n=t.defaultView;return n&&n.customElements?patch(n.customElements,"define",function(e){return function(t,n,i){try{r({define:{name:t}})}catch(e){console.warn("Custom element callback failed for "+t)}return e.apply(this,[t,n,i])}}):function(){}}(e),d=[],f=_create_for_of_iterator_helper_loose(e.plugins);!(l=f()).done;){var g=l.value;d.push(g.observer(g.callback,n,g.options))}return callbackWrapper(function(){zs.forEach(function(e){return e.reset()}),null==r||r.disconnect(),i(),o(),s(),a(),c(),u(),styleSheetObserver(),adoptedStyleSheetObserver(),styleDeclarationObserver(),fontObserver(),p(),h(),d.forEach(function(e){return e()})})}function hasNestedCSSRule(e){return void 0!==window[e]}function canMonkeyPatchNestedCSSRule(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}for(var Ws=function(){function CrossOriginIframeMirror(e){__publicField(this,"iframeIdToRemoteIdMap",new WeakMap),__publicField(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}var e=CrossOriginIframeMirror.prototype;return e.getId=function getId(e,t,r,n){var i=r||this.getIdToRemoteIdMap(e),o=n||this.getRemoteIdToIdMap(e),s=i.get(t);return s||(s=this.generateIdFn(),i.set(t,s),o.set(s,t)),s},e.getIds=function getIds(e,t){var r=this,n=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(function(t){return r.getId(e,t,n,i)})},e.getRemoteId=function getRemoteId(e,t,r){var n=r||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;var i=n.get(t);return i||-1},e.getRemoteIds=function getRemoteIds(e,t){var r=this,n=this.getRemoteIdToIdMap(e);return t.map(function(t){return r.getRemoteId(e,t,n)})},e.reset=function reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)},e.getIdToRemoteIdMap=function getIdToRemoteIdMap(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t},e.getRemoteIdToIdMap=function getRemoteIdToIdMap(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t},CrossOriginIframeMirror}(),Vs=function(){function IframeManager(e){__publicField(this,"iframes",new WeakMap),__publicField(this,"crossOriginIframeMap",new WeakMap),__publicField(this,"crossOriginIframeMirror",new Ws(genId)),__publicField(this,"crossOriginIframeStyleMirror"),__publicField(this,"crossOriginIframeRootIdMap",new WeakMap),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"wrappedEmit"),__publicField(this,"loadListener"),__publicField(this,"stylesheetManager"),__publicField(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ws(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}var e=IframeManager.prototype;return e.addIframe=function addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)},e.addLoadListener=function addLoadListener(e){this.loadListener=e},e.attachIframe=function attachIframe(e,t){var r,n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(r=e.contentWindow)||r.addEventListener("message",this.handleMessage.bind(this))),null==(n=this.loadListener)||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))},e.handleMessage=function handleMessage(e){var t=e;if("rrweb"===t.data.type&&t.origin===t.data.origin&&e.source){var r=this.crossOriginIframeMap.get(e.source);if(r){var n=this.transformCrossOriginEvent(r,t.data.event);n&&this.wrappedEmit(n,t.data.isCheckout)}}},e.transformCrossOriginEvent=function transformCrossOriginEvent(e,t){var r,n=this;switch(t.type){case As.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:As.IncrementalSnapshot,data:{source:Ts.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case As.Meta:case As.Load:case As.DomContentLoaded:return!1;case As.Plugin:return t;case As.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case As.IncrementalSnapshot:switch(t.data.source){case Ts.Mutation:return t.data.adds.forEach(function(t){n.replaceIds(t,e,["parentId","nextId","previousId"]),n.replaceIdOnNode(t.node,e);var r=n.crossOriginIframeRootIdMap.get(e);r&&n.patchRootIdOnNode(t.node,r)}),t.data.removes.forEach(function(t){n.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(function(t){n.replaceIds(t,e,["id"])}),t.data.texts.forEach(function(t){n.replaceIds(t,e,["id"])}),t;case Ts.Drag:case Ts.TouchMove:case Ts.MouseMove:return t.data.positions.forEach(function(t){n.replaceIds(t,e,["id"])}),t;case Ts.ViewportResize:return!1;case Ts.MediaInteraction:case Ts.MouseInteraction:case Ts.Scroll:case Ts.CanvasMutation:case Ts.Input:return this.replaceIds(t.data,e,["id"]),t;case Ts.StyleSheetRule:case Ts.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Ts.Font:return t;case Ts.Selection:return t.data.ranges.forEach(function(t){n.replaceIds(t,e,["start","end"])}),t;case Ts.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(r=t.data.styles)||r.forEach(function(t){n.replaceStyleIds(t,e,["styleId"])}),t}}return!1},e.replace=function replace(e,t,r,n){for(var i,o=_create_for_of_iterator_helper_loose(n);!(i=o()).done;){var s=i.value;(Array.isArray(t[s])||"number"==typeof t[s])&&(Array.isArray(t[s])?t[s]=e.getIds(r,t[s]):t[s]=e.getId(r,t[s]))}return t},e.replaceIds=function replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)},e.replaceStyleIds=function replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)},e.replaceIdOnNode=function replaceIdOnNode(e,t){var r=this;this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(function(e){r.replaceIdOnNode(e,t)})},e.patchRootIdOnNode=function patchRootIdOnNode(e,t){var r=this;e.type===Fs.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(function(e){r.patchRootIdOnNode(e,t)})},IframeManager}(),Gs=function(){function ShadowDomManager(e){__publicField(this,"shadowDoms",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"scrollCb"),__publicField(this,"bypassOptions"),__publicField(this,"mirror"),__publicField(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}var e=ShadowDomManager.prototype;return e.init=function init(){this.reset(),this.patchAttachShadow(Element,document)},e.addShadowRoot=function addShadowRoot(e,t){var r=this;if(isNativeShadowDom(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e);var n=initMutationObserver(_extends({},this.bypassOptions,{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(function(){return n.disconnect()}),this.restoreHandlers.push(initScrollObserver(_extends({},this.bypassOptions,{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(function(){e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&r.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,r.mirror.getId(xs.host(e))),r.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:r.mirror,stylesheetManager:r.bypassOptions.stylesheetManager},e))},0)}},e.observeAttachShadow=function observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)},e.patchAttachShadow=function patchAttachShadow(e,t){var r=this;this.restoreHandlers.push(patch(e.prototype,"attachShadow",function(e){return function(n){var i=e.call(this,n),o=xs.shadowRoot(this);return o&&inDom(this)&&r.addShadowRoot(o,t),i}}))},e.reset=function reset(){this.restoreHandlers.forEach(function(e){try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet},ShadowDomManager}(),Hs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Js="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ys=0;Ys<64;Ys++)Js[Hs.charCodeAt(Ys)]=Ys;var Zs=new Map;var saveWebGLVar=function(e,t,r){if(e&&(isInstanceOfWebGLObject(e,t)||"object"===(void 0===e?"undefined":_type_of(e)))){var n=function variableListFor$1(e,t){var r=Zs.get(e);return r||(r=new Map,Zs.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}(r,e.constructor.name),i=n.indexOf(e);return-1===i&&(i=n.length,n.push(e)),i}};function serializeArg(e,t,r){if(_instanceof(e,Array))return e.map(function(e){return serializeArg(e,t,r)});if(null===e)return e;if(_instanceof(e,Float32Array)||_instanceof(e,Float64Array)||_instanceof(e,Int32Array)||_instanceof(e,Uint32Array)||_instanceof(e,Uint8Array)||_instanceof(e,Uint16Array)||_instanceof(e,Int16Array)||_instanceof(e,Int8Array)||_instanceof(e,Uint8ClampedArray))return{rr_type:e.constructor.name,args:[Object.values(e)]};if(_instanceof(e,ArrayBuffer))return{rr_type:e.constructor.name,base64:function encode(e){var t,r=new Uint8Array(e),n=r.length,i="";for(t=0;t<n;t+=3)i+=Hs[r[t]>>2],i+=Hs[(3&r[t])<<4|r[t+1]>>4],i+=Hs[(15&r[t+1])<<2|r[t+2]>>6],i+=Hs[63&r[t+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i}(e)};if(_instanceof(e,DataView))return{rr_type:e.constructor.name,args:[serializeArg(e.buffer,t,r),e.byteOffset,e.byteLength]};if(_instanceof(e,HTMLImageElement))return{rr_type:e.constructor.name,src:e.src};if(_instanceof(e,HTMLCanvasElement)){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}return _instanceof(e,ImageData)?{rr_type:e.constructor.name,args:[serializeArg(e.data,t,r),e.width,e.height]}:isInstanceOfWebGLObject(e,t)||"object"===(void 0===e?"undefined":_type_of(e))?{rr_type:e.constructor.name,index:saveWebGLVar(e,t,r)}:e}var serializeArgs=function(e,t,r){return e.map(function(e){return serializeArg(e,t,r)})},isInstanceOfWebGLObject=function(e,t){var r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(function(e){return"function"==typeof t[e]});return Boolean(r.find(function(r){return _instanceof(e,t[r])}))};function initCanvasContextObserver(e,t,r,n){var i=[];try{var o=patch(e.HTMLCanvasElement.prototype,"getContext",function(e){return function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if(!isBlocked(this,t,r,!0)){var c=function getNormalizedContextName(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(s[0]&&"object"===_type_of(s[0])){var u=s[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[].concat([i],s))}});i.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){i.forEach(function(e){return e()})}}function patchGLPrototype(e,t,r,n,i,o){for(var s,_loop=function(){var c=s.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))return"continue";try{if("function"!=typeof e[c])return"continue";var u=patch(e,c,function(e){return function(){for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];var l=e.apply(this,a);if(saveWebGLVar(l,o,this),"tagName"in this.canvas&&!isBlocked(this.canvas,n,i,!0)){var p=serializeArgs(a,o,this),h={type:t,property:c,args:p};r(this.canvas,h)}return l}});a.push(u)}catch(n){var l=hookSetter(e,c,{set:function set(e){r(this.canvas,{type:t,property:c,args:[e],setter:!0})}});a.push(l)}},a=[],c=_create_for_of_iterator_helper_loose(Object.getOwnPropertyNames(e));!(s=c()).done;)_loop();return a}var Xs,Ks="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Qs="undefined"!=typeof window&&window.Blob&&new Blob([(Xs=Ks,Uint8Array.from(atob(Xs),function(e){return e.charCodeAt(0)}))],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(e){var t;try{if(!(t=Qs&&(window.URL||window.webkitURL).createObjectURL(Qs)))throw"";var r=new Worker(t,{name:null==e?void 0:e.name});return r.addEventListener("error",function(){(window.URL||window.webkitURL).revokeObjectURL(t)}),r}catch(t){return new Worker("data:text/javascript;base64,"+Ks,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}var ea,ta,ra,na=function(){function CanvasManager(e){var t=this;__publicField(this,"pendingCanvasMutations",new Map),__publicField(this,"rafStamps",{latestId:0,invokeId:null}),__publicField(this,"mirror"),__publicField(this,"mutationCb"),__publicField(this,"resetObservers"),__publicField(this,"frozen",!1),__publicField(this,"locked",!1),__publicField(this,"processMutation",function(e,r){!(t.rafStamps.invokeId&&t.rafStamps.latestId!==t.rafStamps.invokeId)&&t.rafStamps.invokeId||(t.rafStamps.invokeId=t.rafStamps.latestId),t.pendingCanvasMutations.has(e)||t.pendingCanvasMutations.set(e,[]),t.pendingCanvasMutations.get(e).push(r)});var r=e.sampling,n=void 0===r?"all":r,i=e.win,o=e.blockClass,s=e.blockSelector,a=e.recordCanvas,c=e.dataURLOptions;this.mutationCb=e.mutationCb,this.mirror=e.mirror,a&&"all"===n&&this.initCanvasMutationObserver(i,o,s),a&&"number"==typeof n&&this.initCanvasFPSObserver(n,i,o,s,{dataURLOptions:c})}var e=CanvasManager.prototype;return e.reset=function reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.freeze=function freeze(){this.frozen=!0},e.unfreeze=function unfreeze(){this.frozen=!1},e.lock=function lock(){this.locked=!0},e.unlock=function unlock(){this.locked=!1},e.initCanvasFPSObserver=function initCanvasFPSObserver(e,t,r,n,i){var o=this,s=initCanvasContextObserver(t,r,n,!0),a=new Map,c=new WorkerWrapper;c.onmessage=function(e){var t=e.data.id;if(a.set(t,!1),"base64"in e.data){var r=e.data,n=r.base64,i=r.type,s=r.width,c=r.height;o.mutationCb({id:t,type:Ds["2D"],commands:[{property:"clearRect",args:[0,0,s,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:i}]},0,0]}]})}};var u,l=1e3/e,p=0,takeCanvasSnapshots=function(e){if(p&&e-p<l)u=requestAnimationFrame(takeCanvasSnapshots);else{p=e;var s,h=o;(s=[],t.document.querySelectorAll("canvas").forEach(function(e){isBlocked(e,r,n,!0)||s.push(e)}),s).forEach(_async_to_generator(function(e){var t,r,n,o;return _ts_generator(this,function(s){switch(s.label){case 0:return r=h.mirror.getId(e),a.get(r)?[2]:0===e.width||0===e.height?[2]:(a.set(r,!0),["webgl","webgl2"].includes(e.__context)&&(n=e.getContext(e.__context),!1===(null==(t=null==n?void 0:n.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)),[4,createImageBitmap(e)]);case 1:return o=s.sent(),c.postMessage({id:r,bitmap:o,width:e.width,height:e.height,dataURLOptions:i.dataURLOptions},[o]),[2]}})})),u=requestAnimationFrame(takeCanvasSnapshots)}};u=requestAnimationFrame(takeCanvasSnapshots),this.resetObservers=function(){s(),cancelAnimationFrame(u)}},e.initCanvasMutationObserver=function initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=initCanvasContextObserver(e,t,r,!1),i=function initCanvas2DMutationObserver(e,t,r,n){for(var i,_loop=function(){var s=i.value;try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[s])return"continue";var a=patch(t.CanvasRenderingContext2D.prototype,s,function(i){return function(){for(var o=this,a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return isBlocked(this.canvas,r,n,!0)||setTimeout(function(){var r=serializeArgs(c,t,o);e(o.canvas,{type:Ds["2D"],property:s,args:r})},0),i.apply(this,c)}});o.push(a)}catch(r){var c=hookSetter(t.CanvasRenderingContext2D.prototype,s,{set:function set(t){e(this.canvas,{type:Ds["2D"],property:s,args:[t],setter:!0})}});o.push(c)}},o=[],s=_create_for_of_iterator_helper_loose(Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype));!(i=s()).done;)_loop();return function(){o.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,t,r),o=function initCanvasWebGLMutationObserver(e,t,r,n){var i,o,s=[];return(i=s).push.apply(i,[].concat(patchGLPrototype(t.WebGLRenderingContext.prototype,Ds.WebGL,e,r,n,t))),void 0!==t.WebGL2RenderingContext&&(o=s).push.apply(o,[].concat(patchGLPrototype(t.WebGL2RenderingContext.prototype,Ds.WebGL2,e,r,n,t))),function(){s.forEach(function(e){return e()})}}(this.processMutation.bind(this),e,t,r);this.resetObservers=function(){n(),i(),o()}},e.startPendingCanvasMutationFlusher=function startPendingCanvasMutationFlusher(){var e=this;requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})},e.startRAFTimestamping=function startRAFTimestamping(){var e=this,setLatestRAFTimestamp=function(t){e.rafStamps.latestId=t,requestAnimationFrame(setLatestRAFTimestamp)};requestAnimationFrame(setLatestRAFTimestamp)},e.flushPendingCanvasMutations=function flushPendingCanvasMutations(){var e=this;this.pendingCanvasMutations.forEach(function(t,r){var n=e.mirror.getId(r);e.flushPendingCanvasMutationFor(r,n)}),requestAnimationFrame(function(){return e.flushPendingCanvasMutations()})},e.flushPendingCanvasMutationFor=function flushPendingCanvasMutationFor(e,t){if(!this.frozen&&!this.locked){var r=this.pendingCanvasMutations.get(e);if(r&&-1!==t){var n=r.map(function(e){return e.type,_object_without_properties_loose(e,["type"])}),i=r[0].type;this.mutationCb({id:t,type:i,commands:n}),this.pendingCanvasMutations.delete(e)}}},CanvasManager}(),ia=function(){function StylesheetManager(e){__publicField(this,"trackedLinkElements",new WeakSet),__publicField(this,"mutationCb"),__publicField(this,"adoptedStyleSheetCb"),__publicField(this,"styleMirror",new Rs),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}var e=StylesheetManager.prototype;return e.attachLinkElement=function attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)},e.trackLinkElement=function trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))},e.adoptStyleSheets=function adoptStyleSheets(e,t){var r,_loop=function(){var e=n.value,t=void 0;r.styleMirror.has(e)?t=r.styleMirror.getId(e):(t=r.styleMirror.add(e),o.push({styleId:t,rules:Array.from(e.rules||CSSRule,function(t,r){return{rule:stringifyRule(t,e.href),index:r}})})),i.styleIds.push(t)};if(0!==e.length){for(var n,i={id:t,styleIds:[]},o=[],s=_create_for_of_iterator_helper_loose(e);!(n=s()).done;)r=this,_loop();o.length>0&&(i.styles=o),this.adoptedStyleSheetCb(i)}},e.reset=function reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet},e.trackStylesheetInLinkElement=function trackStylesheetInLinkElement(e){},StylesheetManager}(),oa=function(){function ProcessedNodeManager(){__publicField(this,"nodeMap",new WeakMap),__publicField(this,"active",!1)}var e=ProcessedNodeManager.prototype;return e.inOtherBuffer=function inOtherBuffer(e,t){var r=this.nodeMap.get(e);return r&&Array.from(r).some(function(e){return e!==t})},e.add=function add(e,t){var r=this;this.active||(this.active=!0,requestAnimationFrame(function(){r.nodeMap=new WeakMap,r.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))},e.destroy=function destroy(){},ProcessedNodeManager}(),sa=!1;try{if(2!==Array.from([1],function(e){return 2*e})[0]){var aa=document.createElement("iframe");document.body.appendChild(aa),Array.from=(null==(o=aa.contentWindow)?void 0:o.Array.from)||Array.from,document.body.removeChild(aa)}}catch(e){console.debug("Unable to override Array.from",e)}var ca,ua,la=function createMirror$2(){return new g}();function record(e){void 0===e&&(e={});var t=e.emit,r=e.checkoutEveryNms,n=e.checkoutEveryNth,i=e.blockClass,o=void 0===i?"rr-block":i,s=e.blockSelector,a=void 0===s?null:s,c=e.ignoreClass,u=void 0===c?"rr-ignore":c,l=e.ignoreSelector,p=void 0===l?null:l,h=e.maskTextClass,d=void 0===h?"rr-mask":h,f=e.maskTextSelector,m=void 0===f?null:f,v=e.inlineStylesheet,_=void 0===v||v,y=e.maskAllInputs,b=e.maskInputOptions,w=e.slimDOMOptions,k=e.maskInputFn,S=e.maskTextFn,C=e.hooks,I=e.packFn,x=e.sampling,O=void 0===x?{}:x,E=e.dataURLOptions,M=void 0===E?{}:E,R=e.mousemoveWait,A=e.recordDOM,T=void 0===A||A,P=e.recordCanvas,N=void 0!==P&&P,D=e.recordCrossOriginIframes,L=void 0!==D&&D,F=e.recordAfter,U=void 0===F?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":F,B=e.userTriggeredOnInput,$=void 0!==B&&B,z=e.collectFonts,j=void 0!==z&&z,q=e.inlineImages,W=void 0!==q&&q,V=e.plugins,G=e.keepIframeSrcFn,H=void 0===G?function(){return!1}:G,J=e.ignoreCSSAttributes,Y=void 0===J?new Set([]):J;!function registerErrorHandler(e){Us=e}(e.errorHandler);var Z=!L||window.parent===window,X=!1;if(!Z)try{window.parent.document&&(X=!1)}catch(e){X=!0}if(Z&&!t)throw new Error("emit function is required");if(!Z&&!X)return function(){};void 0!==R&&void 0===O.mousemove&&(O.mousemove=R),la.reset();var K,Q=!0===y?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0,hidden:!0}:void 0!==b?b:{password:!0},ee=!0===w||"all"===w?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===w,headMetaDescKeywords:"all"===w,headTitleMutations:"all"===w}:w||{};!function polyfill$1(e){void 0===e&&(e=window),"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}();var te=0,eventProcessor=function(e){for(var t,r=_create_for_of_iterator_helper_loose(V||[]);!(t=r()).done;){var n=t.value;n.eventProcessor&&(e=n.eventProcessor(e))}return I&&!X&&(e=I(e)),e};ea=function(e,i){var o,s=e;if(s.timestamp=Ms(),!(null==(o=zs[0])?void 0:o.isFrozen())||s.type===As.FullSnapshot||s.type===As.IncrementalSnapshot&&s.data.source===Ts.Mutation||zs.forEach(function(e){return e.unfreeze()}),Z)null==t||t(eventProcessor(s),i);else if(X){var a={type:"rrweb",event:eventProcessor(s),origin:window.location.origin,isCheckout:i};window.parent.postMessage(a,"*")}if(s.type===As.FullSnapshot)K=s,te=0;else if(s.type===As.IncrementalSnapshot){if(s.data.source===Ts.Mutation&&s.data.isAttachIframe)return;te++;var c=n&&te>=n,u=r&&s.timestamp-K.timestamp>r;(c||u)&&ta(!0)}};for(var re,wrappedMutationEmit=function(e){ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.Mutation},e)})},wrappedScrollEmit=function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.Scroll},e)})},wrappedCanvasMutationEmit=function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.CanvasMutation},e)})},ne=new ia({mutationCb:wrappedMutationEmit,adoptedStyleSheetCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.AdoptedStyleSheet},e)})}}),ie=new Vs({mirror:la,mutationCb:wrappedMutationEmit,stylesheetManager:ne,recordCrossOriginIframes:L,wrappedEmit:ea}),oe=_create_for_of_iterator_helper_loose(V||[]);!(re=oe()).done;){var se=re.value;se.getMirror&&se.getMirror({nodeMirror:la,crossOriginIframeMirror:ie.crossOriginIframeMirror,crossOriginIframeStyleMirror:ie.crossOriginIframeStyleMirror})}var ae=new oa;ra=new na({recordCanvas:N,mutationCb:wrappedCanvasMutationEmit,win:window,blockClass:o,blockSelector:a,mirror:la,sampling:O.canvas,dataURLOptions:M});var ce=new Gs({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{blockClass:o,blockSelector:a,maskTextClass:d,maskTextSelector:m,inlineStylesheet:_,maskInputOptions:Q,dataURLOptions:M,maskTextFn:S,maskInputFn:k,recordCanvas:N,inlineImages:W,sampling:O,slimDOMOptions:ee,iframeManager:ie,stylesheetManager:ne,canvasManager:ra,keepIframeSrcFn:H,processedNodeManager:ae},mirror:la});ta=function(e){if(void 0===e&&(e=!1),T){ea({type:As.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},e),ne.reset(),ce.init(),zs.forEach(function(e){return e.lock()});var t=function snapshot(e,t){var r=t||{},n=r.mirror,i=void 0===n?new g:n,o=r.blockClass,s=void 0===o?"rr-block":o,a=r.blockSelector,c=void 0===a?null:a,u=r.maskTextClass,l=void 0===u?"rr-mask":u,p=r.maskTextSelector,h=void 0===p?null:p,d=r.inlineStylesheet,f=void 0===d||d,m=r.inlineImages,v=void 0!==m&&m,_=r.recordCanvas,y=void 0!==_&&_,b=r.maskAllInputs,w=void 0!==b&&b,k=r.maskTextFn,S=r.maskInputFn,C=r.slimDOM,I=void 0!==C&&C,x=r.dataURLOptions,O=r.preserveWhiteSpace,E=r.onSerialize,M=r.onIframeLoad,R=r.iframeLoadTimeout,A=r.onStylesheetLoad,T=r.stylesheetLoadTimeout,P=r.keepIframeSrcFn;return serializeNodeWithId(e,{doc:e,mirror:i,blockClass:s,blockSelector:c,maskTextClass:l,maskTextSelector:h,skipChild:!1,inlineStylesheet:f,maskInputOptions:!0===w?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0,hidden:!0}:!1===w?{password:!0}:w,maskTextFn:k,maskInputFn:S,slimDOMOptions:!0===I||"all"===I?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===I,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===I?{}:I,dataURLOptions:x,inlineImages:v,recordCanvas:y,preserveWhiteSpace:O,onSerialize:E,onIframeLoad:M,iframeLoadTimeout:R,onStylesheetLoad:A,stylesheetLoadTimeout:T,keepIframeSrcFn:void 0===P?function(){return!1}:P,newlyAddedElement:!1})}(document,{mirror:la,blockClass:o,blockSelector:a,maskTextClass:d,maskTextSelector:m,inlineStylesheet:_,maskAllInputs:Q,maskTextFn:S,maskInputFn:k,slimDOM:ee,dataURLOptions:M,recordCanvas:N,inlineImages:W,onSerialize:function(e){isSerializedIframe(e,la)&&ie.addIframe(e),isSerializedStylesheet(e,la)&&ne.trackLinkElement(e),hasShadowRoot(e)&&ce.addShadowRoot(xs.shadowRoot(e),document)},onIframeLoad:function(e,t){ie.attachIframe(e,t),ce.observeAttachShadow(e)},onStylesheetLoad:function(e,t){ne.attachLinkElement(e,t)},keepIframeSrcFn:H});if(!t)return console.warn("Failed to snapshot the document");ea({type:As.FullSnapshot,data:{node:t,initialOffset:getWindowScroll(window)}},e),zs.forEach(function(e){return e.unlock()}),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ne.adoptStyleSheets(document.adoptedStyleSheets,la.getId(document))}};try{var ue=[],observe=function(e){var t;return callbackWrapper(initObservers)({mutationCb:wrappedMutationEmit,mousemoveCb:function(e,t){return ea({type:As.IncrementalSnapshot,data:{source:t,positions:e}})},mouseInteractionCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.MouseInteraction},e)})},scrollCb:wrappedScrollEmit,viewportResizeCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.ViewportResize},e)})},inputCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.Input},e)})},mediaInteractionCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.MediaInteraction},e)})},styleSheetRuleCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.StyleSheetRule},e)})},styleDeclarationCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.StyleDeclaration},e)})},canvasMutationCb:wrappedCanvasMutationEmit,fontCb:function(e){return ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.Font},e)})},selectionCb:function(e){ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.Selection},e)})},customElementCb:function(e){ea({type:As.IncrementalSnapshot,data:_extends({source:Ts.CustomElement},e)})},blockClass:o,ignoreClass:u,ignoreSelector:p,maskTextClass:d,maskTextSelector:m,maskInputOptions:Q,inlineStylesheet:_,sampling:O,recordDOM:T,recordCanvas:N,inlineImages:W,userTriggeredOnInput:$,collectFonts:j,doc:e,maskInputFn:k,maskTextFn:S,keepIframeSrcFn:H,blockSelector:a,slimDOMOptions:ee,dataURLOptions:M,mirror:la,iframeManager:ie,stylesheetManager:ne,shadowDomManager:ce,processedNodeManager:ae,canvasManager:ra,ignoreCSSAttributes:Y,plugins:(null==(t=null==V?void 0:V.filter(function(e){return e.observer}))?void 0:t.map(function(e){return{observer:e.observer,options:e.options,callback:function(t){return ea({type:As.Plugin,data:{plugin:e.name,payload:t}})}}}))||[]},C)};ie.addLoadListener(function(e){try{ue.push(observe(e.contentDocument))}catch(e){console.warn(e)}});var init=function(){ta(),ue.push(observe(document)),sa=!0};return"interactive"===document.readyState||"complete"===document.readyState?init():(ue.push(on("DOMContentLoaded",function(){ea({type:As.DomContentLoaded,data:{}}),"DOMContentLoaded"===U&&init()})),ue.push(on("load",function(){ea({type:As.Load,data:{}}),"load"===U&&init()},window))),function(){ue.forEach(function(e){try{e()}catch(e){String(e).toLowerCase().includes("cross-origin")||console.warn(e)}}),ae.destroy(),sa=!1,function unregisterErrorHandler(){Us=void 0}()}}catch(e){console.warn(e)}}record.addCustomEvent=function(e,t){if(!sa)throw new Error("please add custom event after start recording");ea({type:As.Custom,data:{tag:e,payload:t}})},record.freezePage=function(){zs.forEach(function(e){return e.freeze()})},record.takeFullSnapshot=function(e){if(!sa)throw new Error("please take full snapshot after start recording");ta(e)},record.mirror=la,(ua=ca||(ca={}))[ua.NotStarted=0]="NotStarted",ua[ua.Running=1]="Running",ua[ua.Stopped=2]="Stopped",record.addCustomEvent,record.freezePage,record.takeFullSnapshot;var pa,ha,da,fa=n.setImmediate,ga=Object.prototype.toString,ma=void 0!==fa?function timer(e){return fa(e)}:setTimeout;try{Object.defineProperty({},"x",{}),pa=function builtInProp(e,t,r,n){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:!1!==n})}}catch(e){pa=function builtInProp(e,t,r){return e[t]=r,e}}function schedule(e,t){da.add(e,t),ha||(ha=ma(da.drain))}function isThenable(e){var t,r=typeof e;return null===e||"object"!==r&&"function"!==r||(t=e.then),"function"==typeof t&&t}function notify(){for(var e=0;e<this.chain.length;e++)notifyIsolated(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function notifyIsolated(e,t,r){var n,i;try{!1===t?r.reject(e.msg):(n=!0===t?e.msg:t.call(void 0,e.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(i=isThenable(n))?i.call(n,r.resolve,r.reject):r.resolve(n)}catch(e){r.reject(e)}}function resolve(e){var t,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(t=isThenable(e))?schedule(function(){var n=new MakeDefWrapper(r);try{t.call(e,function $resolve$(){resolve.apply(n,arguments)},function $reject$(){reject.apply(n,arguments)})}catch(e){reject.call(n,e)}}):(r.msg=e,r.state=1,r.chain.length>0&&schedule(notify,r))}catch(e){reject.call(new MakeDefWrapper(r),e)}}}function reject(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&schedule(notify,t))}function iteratePromises(e,t,r,n){for(var i=0;i<t.length;i++)(function IIFE(i){e.resolve(t[i]).then(function $resolver$(e){r(i,e)},n)})(i)}function MakeDefWrapper(e){this.def=e,this.triggered=!1}function MakeDef(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function NpoPromise(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new MakeDef(this);this.then=function then(e,r){var n={success:"function"!=typeof e||e,failure:"function"==typeof r&&r};return n.promise=new this.constructor(function extractChain(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),t.chain.push(n),0!==t.state&&schedule(notify,t),n.promise},this.catch=function $catch$(e){return this.then(void 0,e)};try{e.call(void 0,function publicResolve(e){resolve.call(t,e)},function publicReject(e){reject.call(t,e)})}catch(e){reject.call(t,e)}}da=function Queue(){var e,t,r;function Item(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function add(n,i){r=new Item(n,i),t?t.next=r:e=r,t=r,r=void 0},drain:function drain(){var r=e;for(e=t=ha=void 0;r;)r.fn.call(r.self),r=r.next}}}();var va,_a=pa({},"constructor",NpoPromise,!1);NpoPromise.prototype=_a,pa(_a,"__NPO__",0,!1),pa(NpoPromise,"resolve",function Promise$resolve(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function executor(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");t(e)})}),pa(NpoPromise,"reject",function Promise$reject(e){return new this(function executor(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");r(e)})}),pa(NpoPromise,"all",function Promise$all(e){var t=this;return"[object Array]"!==ga.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function executor(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var i=e.length,o=Array(i),s=0;iteratePromises(t,e,function resolver(e,t){o[e]=t,++s===i&&r(o)},n)})}),pa(NpoPromise,"race",function Promise$race(e){var t=this;return"[object Array]"!==ga.call(e)?t.reject(TypeError("Not an array")):new t(function executor(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");iteratePromises(t,e,function resolver(e,t){r(t)},n)})}),va="undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?Promise:NpoPromise;var ya,ba,wa,ka,Sa,Ca,Ia,xa,Oa,Ea,Ma={DEBUG:!1,LIB_VERSION:"2.71.1"},Ra=864e5,Aa=8e3,Ta=Array.prototype,Pa=Function.prototype,Na=Object.prototype,Da=Ta.slice,La=Na.toString,Fa=Na.hasOwnProperty,Ua=n.console,Ba=n.navigator,$a=n.document,za=n.opera,ja=n.screen,qa=Ba.userAgent,Wa=Pa.bind,Va=Ta.forEach,Ga=Ta.indexOf,Ha=Ta.map,Ja=Array.isArray,Ya={},Za={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},Xa={log:function(){if(Ma.DEBUG&&!Za.isUndefined(Ua)&&Ua)try{Ua.log.apply(Ua,arguments)}catch(e){Za.each(arguments,function(e){Ua.log(e)})}},warn:function(){if(Ma.DEBUG&&!Za.isUndefined(Ua)&&Ua){var e=["Mixpanel warning:"].concat(Za.toArray(arguments));try{Ua.warn.apply(Ua,e)}catch(t){Za.each(e,function(e){Ua.warn(e)})}}},error:function(){if(Ma.DEBUG&&!Za.isUndefined(Ua)&&Ua){var e=["Mixpanel error:"].concat(Za.toArray(arguments));try{Ua.error.apply(Ua,e)}catch(t){Za.each(e,function(e){Ua.error(e)})}}},critical:function(){if(!Za.isUndefined(Ua)&&Ua){var e=["Mixpanel error:"].concat(Za.toArray(arguments));try{Ua.error.apply(Ua,e)}catch(t){Za.each(e,function(e){Ua.error(e)})}}}},log_func_with_prefix=function(e,t){return function(){return arguments[0]="["+t+"] "+arguments[0],e.apply(Xa,arguments)}},console_with_prefix=function(e){return{log:log_func_with_prefix(Xa.log,e),error:log_func_with_prefix(Xa.error,e),critical:log_func_with_prefix(Xa.critical,e)}},safewrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){Xa.critical("Implementation error. Please turn on debug and contact support@mixpanel.com."),Ma.DEBUG&&Xa.critical(e)}}},safewrapClass=function(e){var t=e.prototype;for(var r in t)"function"==typeof t[r]&&(t[r]=safewrap(t[r]))};Za.bind=function(e,t){var r,n;if(Wa&&e.bind===Wa)return Wa.apply(e,Da.call(arguments,1));if(!Za.isFunction(e))throw new TypeError;return r=Da.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,r.concat(Da.call(arguments)));var i={};i.prototype=e.prototype;var o=new i;i.prototype=null;var s=e.apply(o,r.concat(Da.call(arguments)));return Object(s)===s?s:o},n},Za.each=function(e,t,r){if(null!=e)if(Va&&e.forEach===Va)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n,e)===Ya)return}else for(var o in e)if(Fa.call(e,o)&&t.call(r,e[o],o,e)===Ya)return},Za.extend=function(e){return Za.each(Da.call(arguments,1),function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])}),e},Za.isArray=Ja||function(e){return"[object Array]"===La.call(e)},Za.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},Za.isArguments=function(e){return!(!e||!Fa.call(e,"callee"))},Za.toArray=function(e){return e?e.toArray?e.toArray():Za.isArray(e)||Za.isArguments(e)?Da.call(e):Za.values(e):[]},Za.map=function(e,t,r){if(Ha&&e.map===Ha)return e.map(t,r);var n=[];return Za.each(e,function(e){n.push(t.call(r,e))}),n},Za.keys=function(e){var t=[];return null===e||Za.each(e,function(e,r){t[t.length]=r}),t},Za.values=function(e){var t=[];return null===e||Za.each(e,function(e){t[t.length]=e}),t},Za.include=function(e,t){var r=!1;return null===e?r:Ga&&e.indexOf===Ga?-1!=e.indexOf(t):(Za.each(e,function(e){if(r||(r=e===t))return Ya}),r)},Za.includes=function(e,t){return-1!==e.indexOf(t)},Za.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},Za.isObject=function(e){return e===Object(e)&&!Za.isArray(e)},Za.isEmptyObject=function(e){if(Za.isObject(e)){for(var t in e)if(Fa.call(e,t))return!1;return!0}return!1},Za.isUndefined=function(e){return void 0===e},Za.isString=function(e){return"[object String]"==La.call(e)},Za.isDate=function(e){return"[object Date]"==La.call(e)},Za.isNumber=function(e){return"[object Number]"==La.call(e)},Za.isElement=function(e){return!(!e||1!==e.nodeType)},Za.encodeDates=function(e){return Za.each(e,function(t,r){Za.isDate(t)?e[r]=Za.formatDate(t):Za.isObject(t)&&(e[r]=Za.encodeDates(t))}),e},Za.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},Za.formatDate=function(e){function pad(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+pad(e.getUTCMonth()+1)+"-"+pad(e.getUTCDate())+"T"+pad(e.getUTCHours())+":"+pad(e.getUTCMinutes())+":"+pad(e.getUTCSeconds())},Za.strip_empty_properties=function(e){var t={};return Za.each(e,function(e,r){Za.isString(e)&&e.length>0&&(t[r]=e)}),t},Za.truncate=function(e,t){var r;return"string"==typeof e?r=e.slice(0,t):Za.isArray(e)?(r=[],Za.each(e,function(e){r.push(Za.truncate(e,t))})):Za.isObject(e)?(r={},Za.each(e,function(e,n){r[n]=Za.truncate(e,t)})):r=e,r},Za.JSONEncode=function(e){var quote=function(e){var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},str=function(e,t){var r="",n=0,i="",o="",s=0,a=r,c=[],u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(r+="    ",c=[],"[object Array]"===La.apply(u)){for(s=u.length,n=0;n<s;n+=1)c[n]=str(n,u)||"null";return o=0===c.length?"[]":r?"[\n"+r+c.join(",\n"+r)+"\n"+a+"]":"["+c.join(",")+"]",r=a,o}for(i in u)Fa.call(u,i)&&(o=str(i,u))&&c.push(quote(i)+(r?": ":":")+o);return o=0===c.length?"{}":r?"{"+c.join(",")+a+"}":"{"+c.join(",")+"}",r=a,o}};return str("",{"":e})},Za.JSONDecode=(Sa={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},Ca=function(e){var t=new SyntaxError(e);throw t.at=ya,t.text=wa,t},Ia=function(e){return e&&e!==ba&&Ca("Expected '"+e+"' instead of '"+ba+"'"),ba=wa.charAt(ya),ya+=1,ba},xa=function(){var e,t="";for("-"===ba&&(t="-",Ia("-"));ba>="0"&&ba<="9";)t+=ba,Ia();if("."===ba)for(t+=".";Ia()&&ba>="0"&&ba<="9";)t+=ba;if("e"===ba||"E"===ba)for(t+=ba,Ia(),"-"!==ba&&"+"!==ba||(t+=ba,Ia());ba>="0"&&ba<="9";)t+=ba,Ia();if(e=+t,isFinite(e))return e;Ca("Bad number")},Oa=function(){var e,t,r,n="";if('"'===ba)for(;Ia();){if('"'===ba)return Ia(),n;if("\\"===ba)if(Ia(),"u"===ba){for(r=0,t=0;t<4&&(e=parseInt(Ia(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof Sa[ba])break;n+=Sa[ba]}else n+=ba}Ca("Bad string")},Ea=function(){for(;ba&&ba<=" ";)Ia()},ka=function(){switch(Ea(),ba){case"{":return function(){var e,t={};if("{"===ba){if(Ia("{"),Ea(),"}"===ba)return Ia("}"),t;for(;ba;){if(e=Oa(),Ea(),Ia(":"),Object.hasOwnProperty.call(t,e)&&Ca('Duplicate key "'+e+'"'),t[e]=ka(),Ea(),"}"===ba)return Ia("}"),t;Ia(","),Ea()}}Ca("Bad object")}();case"[":return function(){var e=[];if("["===ba){if(Ia("["),Ea(),"]"===ba)return Ia("]"),e;for(;ba;){if(e.push(ka()),Ea(),"]"===ba)return Ia("]"),e;Ia(","),Ea()}}Ca("Bad array")}();case'"':return Oa();case"-":return xa();default:return ba>="0"&&ba<="9"?xa():function(){switch(ba){case"t":return Ia("t"),Ia("r"),Ia("u"),Ia("e"),!0;case"f":return Ia("f"),Ia("a"),Ia("l"),Ia("s"),Ia("e"),!1;case"n":return Ia("n"),Ia("u"),Ia("l"),Ia("l"),null}Ca('Unexpected "'+ba+'"')}()}},function(e){var t;return wa=e,ya=0,ba=" ",t=ka(),Ea(),ba&&Ca("Syntax error"),t}),Za.base64Encode=function(e){var t,r,n,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,c=0,u="",l=[];if(!e)return e;e=Za.utf8Encode(e);do{t=(o=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,r=o>>12&63,n=o>>6&63,i=63&o,l[c++]=s.charAt(t)+s.charAt(r)+s.charAt(n)+s.charAt(i)}while(a<e.length);switch(u=l.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},Za.utf8Encode=function(e){var t,r,n,i,o="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var s=e.charCodeAt(i),a=null;s<128?r++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==a&&(r>t&&(o+=e.substring(t,r)),o+=a,t=r=i+1)}return r>t&&(o+=e.substring(t,e.length)),o},Za.UUID=function(){try{return n.crypto.randomUUID()}catch(r){for(var e=new Array(36),t=0;t<36;t++)e[t]=Math.floor(16*Math.random());return e[14]=4,e[19]=e[19]&=-5,e[19]=e[19]|=8,e[8]=e[13]=e[18]=e[23]="-",Za.map(e,function(e){return e.toString(16)}).join("")}};var Ka=["ahrefsbot","ahrefssiteaudit","amazonbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandex","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];Za.isBlockedUA=function(e){var t;for(e=e.toLowerCase(),t=0;t<Ka.length;t++)if(-1!==e.indexOf(Ka[t]))return!0;return!1},Za.HTTPBuildQuery=function(e,t){var r,n,i=[];return Za.isUndefined(t)&&(t="&"),Za.each(e,function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r}),i.join(t)},Za.getQueryParam=function(e,t){t=t.replace(/[[]/g,"\\[").replace(/[\]]/g,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);if(null===r||r&&"string"!=typeof r[1]&&r[1].length)return"";var n=r[1];try{n=decodeURIComponent(n)}catch(e){Xa.error("Skipping decoding for malformed query param: "+n)}return n.replace(/\+/g," ")},Za.cookie={get:function(e){for(var t=e+"=",r=$a.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=Za.JSONDecode(Za.cookie.get(e))||{}}catch(e){}return t},set_seconds:function(e,t,r,n,i,o,s){var a="",c="",u="";if(s)a="; domain="+s;else if(n){var l=extract_domain($a.location.hostname);a=l?"; domain=."+l:""}if(r){var p=new Date;p.setTime(p.getTime()+1e3*r),c="; expires="+p.toGMTString()}o&&(i=!0,u="; SameSite=None"),i&&(u+="; secure"),$a.cookie=e+"="+encodeURIComponent(t)+c+"; path=/"+a+u},set:function(e,t,r,n,i,o,s){var a="",c="",u="";if(s)a="; domain="+s;else if(n){var l=extract_domain($a.location.hostname);a=l?"; domain=."+l:""}if(r){var p=new Date;p.setTime(p.getTime()+24*r*60*60*1e3),c="; expires="+p.toGMTString()}o&&(i=!0,u="; SameSite=None"),i&&(u+="; secure");var h=e+"="+encodeURIComponent(t)+c+"; path=/"+a+u;return $a.cookie=h,h},remove:function(e,t,r){Za.cookie.set(e,"",-1,t,!1,!1,r)}};var _testStorageSupported=function(e){var t=!0;try{var r="__mplss_"+cheap_guid(8);e.setItem(r,"xyz"),"xyz"!==e.getItem(r)&&(t=!1),e.removeItem(r)}catch(e){t=!1}return t},Qa=null,localStorageSupported=function(e,t){return null===Qa||t?Qa=_testStorageSupported(e||n.localStorage):Qa},ec=null;function _storageWrapper(e,t,r){var log_error=function(e){Xa.error(t+" error: "+e)};return{is_supported:function(n){var i=r(e,n);return i||Xa.error(t+" unsupported"),i},error:log_error,get:function(t){try{return e.getItem(t)}catch(e){log_error(e)}return null},parse:function(t){try{return Za.JSONDecode(e.getItem(t))||{}}catch(e){}return null},set:function(t,r){try{e.setItem(t,r)}catch(e){log_error(e)}},remove:function(t){try{e.removeItem(t)}catch(e){log_error(e)}}}}Za.localStorage=_storageWrapper(n.localStorage,"localStorage",localStorageSupported),Za.sessionStorage=_storageWrapper(n.sessionStorage,"sessionStorage",function(e,t){return null===ec||t?ec=_testStorageSupported(e||n.sessionStorage):ec}),Za.register_event=function(){function fixEvent(e){return e&&(e.preventDefault=fixEvent.preventDefault,e.stopPropagation=fixEvent.stopPropagation),e}return fixEvent.preventDefault=function(){this.returnValue=!1},fixEvent.stopPropagation=function(){this.cancelBubble=!0},function(e,t,r,i,o){if(e)if(e.addEventListener&&!i)e.addEventListener(t,r,!!o);else{var s="on"+t,a=e[s];e[s]=function makeHandler(e,t,r){var handler=function(i){if(i=i||fixEvent(n.event)){var o,s,a=!0;return Za.isFunction(r)&&(o=r(i)),s=t.call(e,i),!1!==o&&!1!==s||(a=!1),a}};return handler}(e,r,a)}else Xa.error("No valid element provided to register_event")}}();var tc=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');Za.dom_query=function(){function getAllChildren(e){return e.all?e.all:e.getElementsByTagName("*")}var e=/[\t\r\n]/g;function hasClass(t,r){var n=" "+r+" ";return(" "+t.className+" ").replace(e," ").indexOf(n)>=0}function getElementsBySelector(e){if(!$a.getElementsByTagName)return[];var t,r,n,i,o,s,a,c,u,l,p=e.split(" "),h=[$a];for(s=0;s<p.length;s++)if((t=p[s].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){n=(r=t.split("#"))[0];var d=r[1],f=$a.getElementById(d);if(!f||n&&f.nodeName.toLowerCase()!=n)return[];h=[f]}else if(t.indexOf(".")>-1){n=(r=t.split("."))[0];var g=r[1];for(n||(n="*"),i=[],o=0,a=0;a<h.length;a++)for(u="*"==n?getAllChildren(h[a]):h[a].getElementsByTagName(n),c=0;c<u.length;c++)i[o++]=u[c];for(h=[],l=0,a=0;a<i.length;a++)i[a].className&&Za.isString(i[a].className)&&hasClass(i[a],g)&&(h[l++]=i[a])}else{var m=t.match(tc);if(m){n=m[1];var v,_=m[2],y=m[3],b=m[4];for(n||(n="*"),i=[],o=0,a=0;a<h.length;a++)for(u="*"==n?getAllChildren(h[a]):h[a].getElementsByTagName(n),c=0;c<u.length;c++)i[o++]=u[c];switch(h=[],l=0,y){case"=":v=function(e){return e.getAttribute(_)==b};break;case"~":v=function(e){return e.getAttribute(_).match(new RegExp("\\b"+b+"\\b"))};break;case"|":v=function(e){return e.getAttribute(_).match(new RegExp("^"+b+"-?"))};break;case"^":v=function(e){return 0===e.getAttribute(_).indexOf(b)};break;case"$":v=function(e){return e.getAttribute(_).lastIndexOf(b)==e.getAttribute(_).length-b.length};break;case"*":v=function(e){return e.getAttribute(_).indexOf(b)>-1};break;default:v=function(e){return e.getAttribute(_)}}for(h=[],l=0,a=0;a<i.length;a++)v(i[a])&&(h[l++]=i[a])}else{for(n=t,i=[],o=0,a=0;a<h.length;a++)for(u=h[a].getElementsByTagName(n),c=0;c<u.length;c++)i[o++]=u[c];h=i}}return h}return function(e){return Za.isElement(e)?[e]:Za.isObject(e)&&!Za.isUndefined(e.length)?e:getElementsBySelector.call(this,e)}}();var rc=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_id","utm_source_platform","utm_campaign_id","utm_creative_format","utm_marketing_tactic"],nc=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","sccid","ttclid","twclid","wbraid"];Za.info={campaignParams:function(e){var t="",r={};return Za.each(rc,function(n){(t=Za.getQueryParam($a.URL,n)).length?r[n]=t:void 0!==e&&(r[n]=e)}),r},clickParams:function(){var e="",t={};return Za.each(nc,function(r){(e=Za.getQueryParam($a.URL,r)).length&&(t[r]=e)}),t},marketingParams:function(){return Za.extend(Za.info.campaignParams(),Za.info.clickParams())},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(e){var t=Za.info.searchEngine(e),r="yahoo"!=t?"q":"p",n={};if(null!==t){n.$search_engine=t;var i=Za.getQueryParam(e,r);i.length&&(n.mp_keyword=i)}return n},browser:function(e,t,r){return t=t||"",r||Za.includes(e," OPR/")?Za.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":Za.includes(e,"IEMobile")||Za.includes(e,"WPDesktop")?"Internet Explorer Mobile":Za.includes(e,"SamsungBrowser/")?"Samsung Internet":Za.includes(e,"Edge")||Za.includes(e,"Edg/")?"Microsoft Edge":Za.includes(e,"FBIOS")?"Facebook Mobile":Za.includes(e,"Whale/")?"Whale Browser":Za.includes(e,"Chrome")?"Chrome":Za.includes(e,"CriOS")?"Chrome iOS":Za.includes(e,"UCWEB")||Za.includes(e,"UCBrowser")?"UC Browser":Za.includes(e,"FxiOS")?"Firefox iOS":Za.includes(t,"Apple")?Za.includes(e,"Mobile")?"Mobile Safari":"Safari":Za.includes(e,"Android")?"Android Mobile":Za.includes(e,"Konqueror")?"Konqueror":Za.includes(e,"Firefox")?"Firefox":Za.includes(e,"MSIE")||Za.includes(e,"Trident/")?"Internet Explorer":Za.includes(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,r){var n={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/,"Whale Browser":/Whale\/(\d+(\.\d+)?)/}[Za.info.browser(e,t,r)];if(void 0===n)return null;var i=e.match(n);return i?parseFloat(i[i.length-2]):null},os:function(){var e=qa;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},currentUrl:function(){return n.location.href},properties:function(e){return"object"!=typeof e&&(e={}),Za.extend(Za.strip_empty_properties({$os:Za.info.os(),$browser:Za.info.browser(qa,Ba.vendor,za),$referrer:$a.referrer,$referring_domain:Za.info.referringDomain($a.referrer),$device:Za.info.device(qa)}),{$current_url:Za.info.currentUrl(),$browser_version:Za.info.browserVersion(qa,Ba.vendor,za),$screen_height:ja.height,$screen_width:ja.width,mp_lib:"web",$lib_version:Ma.LIB_VERSION,$insert_id:cheap_guid(),time:Za.timestamp()/1e3},Za.strip_empty_properties(e))},people_properties:function(){return Za.extend(Za.strip_empty_properties({$os:Za.info.os(),$browser:Za.info.browser(qa,Ba.vendor,za)}),{$browser_version:Za.info.browserVersion(qa,Ba.vendor,za)})},mpPageViewProperties:function(){return Za.strip_empty_properties({current_page_title:$a.title,current_domain:n.location.hostname,current_url_path:n.location.pathname,current_url_protocol:n.location.protocol,current_url_search:n.location.search})}};var cheap_guid=function(e){var t=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return e?t.substring(0,e):t},ic=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,oc=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,extract_domain=function(e){var t=oc,r=e.split("."),n=r[r.length-1];(n.length>4||"com"===n||"org"===n)&&(t=ic);var i=e.match(t);return i?i[0]:""},NOOP_FUNC=function(){},sc=null,ac=null;"undefined"!=typeof JSON&&(sc=JSON.stringify,ac=JSON.parse),sc=sc||Za.JSONEncode,ac=ac||Za.JSONDecode,Za.info=Za.info,Za.info.browser=Za.info.browser,Za.info.browserVersion=Za.info.browserVersion,Za.info.device=Za.info.device,Za.info.properties=Za.info.properties,Za.isBlockedUA=Za.isBlockedUA,Za.isEmptyObject=Za.isEmptyObject,Za.isObject=Za.isObject,Za.JSONDecode=Za.JSONDecode,Za.JSONEncode=Za.JSONEncode,Za.toArray=Za.toArray,Za.NPO=NpoPromise;var cc="mixpanelRecordingEvents",uc="mixpanelRecordingRegistry",lc=[cc,uc],IDBStorageWrapper=function(e){this.dbPromise=null,this.storeName=e};IDBStorageWrapper.prototype._openDb=function(){return new va(function(e,t){var r=n.indexedDB.open("mixpanelBrowserDb",1);r.onerror=function(){t(r.error)},r.onsuccess=function(){e(r.result)},r.onupgradeneeded=function(e){var t=e.target.result;lc.forEach(function(e){t.createObjectStore(e)})}})},IDBStorageWrapper.prototype.init=function(){return n.indexedDB?(this.dbPromise||(this.dbPromise=this._openDb()),this.dbPromise.then(function(e){return e instanceof n.IDBDatabase?va.resolve():va.reject(e)})):va.reject("indexedDB is not supported in this browser")},IDBStorageWrapper.prototype.isInitialized=function(){return!!this.dbPromise},IDBStorageWrapper.prototype.makeTransaction=function(e,t){var r=this.storeName,doTransaction=function(n){return new va(function(i,o){var s=n.transaction(r,e);s.oncomplete=function(){i(s)},s.onabort=s.onerror=function(){o(s.error)},t(s.objectStore(r))})};return this.dbPromise.then(doTransaction).catch(function(e){return e&&"InvalidStateError"===e.name?(this.dbPromise=this._openDb(),this.dbPromise.then(doTransaction)):va.reject(e)}.bind(this))},IDBStorageWrapper.prototype.setItem=function(e,t){return this.makeTransaction("readwrite",function(r){r.put(t,e)})},IDBStorageWrapper.prototype.getItem=function(e){var t;return this.makeTransaction("readonly",function(r){t=r.get(e)}).then(function(){return t.result})},IDBStorageWrapper.prototype.removeItem=function(e){return this.makeTransaction("readwrite",function(t){t.delete(e)})},IDBStorageWrapper.prototype.getAll=function(){var e;return this.makeTransaction("readonly",function(t){e=t.getAll()}).then(function(){return e.result})};function optIn(e,t){_optInOut(!0,e,t)}function optOut(e,t){_optInOut(!1,e,t)}function hasOptedIn(e,t){return"1"===_getStorageValue(e,t)}function hasOptedOut(e,t){if(function _hasDoNotTrackFlagOn(e){if(e&&e.ignoreDnt)return!1;var t=e&&e.window||n,r=t.navigator||{},i=!1;return Za.each([r.doNotTrack,r.msDoNotTrack,t.doNotTrack],function(e){Za.includes([!0,1,"1","yes"],e)&&(i=!0)}),i}(t))return Xa.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var r="0"===_getStorageValue(e,t);return r&&Xa.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),r}function addOptOutCheckMixpanelLib(e){return _addOptOutCheck(e,function(e){return this.get_config(e)})}function addOptOutCheckMixpanelPeople(e){return _addOptOutCheck(e,function(e){return this._get_config(e)})}function addOptOutCheckMixpanelGroup(e){return _addOptOutCheck(e,function(e){return this._get_config(e)})}function clearOptInOut(e,t){_getStorage(t=t||{}).remove(_getStorageKey(e,t),!!t.crossSubdomainCookie,t.cookieDomain)}function _getStorage(e){return"localStorage"===(e=e||{}).persistenceType?Za.localStorage:Za.cookie}function _getStorageKey(e,t){return((t=t||{}).persistencePrefix||"__mp_opt_in_out_")+e}function _getStorageValue(e,t){return _getStorage(t).get(_getStorageKey(e,t))}function _optInOut(e,t,r){Za.isString(t)&&t.length?(_getStorage(r=r||{}).set(_getStorageKey(t,r),e?1:0,Za.isNumber(r.cookieExpiration)?r.cookieExpiration:null,!!r.crossSubdomainCookie,!!r.secureCookie,!!r.crossSiteCookie,r.cookieDomain),r.track&&e&&r.track(r.trackEventName||"$opt_in",r.trackProperties,{send_immediately:!0})):Xa.error("gdpr."+(e?"optIn":"optOut")+" called with an invalid token")}function _addOptOutCheck(e,t){return function(){var r=!1;try{var n=t.call(this,"token"),i=t.call(this,"ignore_dnt"),o=t.call(this,"opt_out_tracking_persistence_type"),s=t.call(this,"opt_out_tracking_cookie_prefix"),a=t.call(this,"window");n&&(r=hasOptedOut(n,{ignoreDnt:i,persistenceType:o,persistencePrefix:s,window:a}))}catch(e){Xa.error("Unexpected error when checking tracking opt-out status: "+e)}if(!r)return e.apply(this,arguments);var c=arguments[arguments.length-1];"function"==typeof c&&c(0)}}var pc=console_with_prefix("lock"),SharedLock=function(e,t){t=t||{},this.storageKey=e,this.storage=t.storage||n.localStorage,this.pollIntervalMS=t.pollIntervalMS||100,this.timeoutMS=t.timeoutMS||2e3,this.promiseImpl=t.promiseImpl||va};SharedLock.prototype.withLock=function(e,t){return new(0,this.promiseImpl)(Za.bind(function(r,n){var i=t||(new Date).getTime()+"|"+Math.random(),o=(new Date).getTime(),s=this.storageKey,a=this.pollIntervalMS,c=this.timeoutMS,u=this.storage,l=s+":X",p=s+":Y",h=s+":Z",delay=function(e){if((new Date).getTime()-o>c)return pc.error("Timeout waiting for mutex on "+s+"; clearing lock. ["+i+"]"),u.removeItem(h),u.removeItem(p),void loop();setTimeout(function(){try{e()}catch(e){n(e)}},a*(Math.random()+.1))},waitFor=function(e,t){e()?t():delay(function(){waitFor(e,t)})},getSetY=function(){var e=u.getItem(p);return(!e||e===i)&&(u.setItem(p,i),u.getItem(p)===i||(localStorageSupported(u,!0)||n(new Error("localStorage support dropped while acquiring lock")),!1))},loop=function(){u.setItem(l,i),waitFor(getSetY,function(){u.getItem(l)!==i?delay(function(){u.getItem(p)===i?waitFor(function(){return!u.getItem(h)},criticalSection):loop()}):criticalSection()})},criticalSection=function(){u.setItem(h,"1");var removeLock=function(){u.removeItem(h),u.getItem(p)===i&&u.removeItem(p),u.getItem(l)===i&&u.removeItem(l)};e().then(function(e){removeLock(),r(e)}).catch(function(e){removeLock(),n(e)})};try{if(!localStorageSupported(u,!0))throw new Error("localStorage support check failed");loop()}catch(e){n(e)}},this))};var LocalStorageWrapper=function(e){this.storage=e||n.localStorage};LocalStorageWrapper.prototype.init=function(){return va.resolve()},LocalStorageWrapper.prototype.isInitialized=function(){return!0},LocalStorageWrapper.prototype.setItem=function(e,t){return new va(Za.bind(function(r,n){try{this.storage.setItem(e,sc(t))}catch(e){n(e)}r()},this))},LocalStorageWrapper.prototype.getItem=function(e){return new va(Za.bind(function(t,r){var n;try{n=ac(this.storage.getItem(e))}catch(e){r(e)}t(n)},this))},LocalStorageWrapper.prototype.removeItem=function(e){return new va(Za.bind(function(t,r){try{this.storage.removeItem(e)}catch(e){r(e)}t()},this))};var hc=console_with_prefix("batch"),RequestQueue=function(e,t){var r,i,o,s;t=t||{},this.storageKey=e,this.usePersistence=t.usePersistence,this.usePersistence&&(this.queueStorage=t.queueStorage||new LocalStorageWrapper,this.lock=new SharedLock(e,{storage:t.sharedLockStorage||n.localStorage,timeoutMS:t.sharedLockTimeoutMS})),this.reportError=t.errorReporter||Za.bind(hc.error,hc),this.pid=t.pid||null,this.memQueue=[],this.initialized=!1,t.enqueueThrottleMs?this.enqueuePersisted=(r=Za.bind(this._enqueuePersisted,this),i=t.enqueueThrottleMs,o=null,s=[],function(e){var t=this;return s.push(e),o||(o=new va(function(e){setTimeout(function(){var n=r.apply(t,[s]);o=null,s=[],e(n)},i)})),o}):this.enqueuePersisted=Za.bind(function(e){return this._enqueuePersisted([e])},this)};RequestQueue.prototype.ensureInit=function(){return this.initialized||!this.usePersistence?va.resolve():this.queueStorage.init().then(Za.bind(function(){this.initialized=!0},this)).catch(Za.bind(function(e){this.reportError("Error initializing queue persistence. Disabling persistence",e),this.initialized=!0,this.usePersistence=!1},this))},RequestQueue.prototype.enqueue=function(e,t){var r={id:cheap_guid(),flushAfter:(new Date).getTime()+2*t,payload:e};return this.usePersistence?this.enqueuePersisted(r):(this.memQueue.push(r),va.resolve(!0))},RequestQueue.prototype._enqueuePersisted=function(e){var t=Za.bind(function(){return this.ensureInit().then(Za.bind(function(){return this.readFromStorage()},this)).then(Za.bind(function(t){return this.saveToStorage(t.concat(e))},this)).then(Za.bind(function(t){return t&&(this.memQueue=this.memQueue.concat(e)),t},this)).catch(Za.bind(function(t){return this.reportError("Error enqueueing items",t,e),!1},this))},this);return this.lock.withLock(t,this.pid).catch(Za.bind(function(e){return this.reportError("Error acquiring storage lock",e),!1},this))},RequestQueue.prototype.fillBatch=function(e){var t=this.memQueue.slice(0,e);return this.usePersistence&&t.length<e?this.ensureInit().then(Za.bind(function(){return this.readFromStorage()},this)).then(Za.bind(function(r){if(r.length){var n={};Za.each(t,function(e){n[e.id]=!0});for(var i=0;i<r.length;i++){var o=r[i];if((new Date).getTime()>o.flushAfter&&!n[o.id]&&(o.orphaned=!0,t.push(o),t.length>=e))break}}return t},this)):va.resolve(t)};var filterOutIDsAndInvalid=function(e,t){var r=[];return Za.each(e,function(e){e.id&&!t[e.id]&&r.push(e)}),r};RequestQueue.prototype.removeItemsByID=function(e){var t={};if(Za.each(e,function(e){t[e]=!0}),this.memQueue=filterOutIDsAndInvalid(this.memQueue,t),this.usePersistence){var r=Za.bind(function(){return this.ensureInit().then(Za.bind(function(){return this.readFromStorage()},this)).then(Za.bind(function(e){return e=filterOutIDsAndInvalid(e,t),this.saveToStorage(e)},this)).then(Za.bind(function(){return this.readFromStorage()},this)).then(Za.bind(function(e){for(var r=0;r<e.length;r++){var n=e[r];if(n.id&&t[n.id])throw new Error("Item not removed from storage")}return!0},this)).catch(Za.bind(function(t){return this.reportError("Error removing items",t,e),!1},this))},this);return this.lock.withLock(r,this.pid).catch(Za.bind(function(e){return this.reportError("Error acquiring storage lock",e),!localStorageSupported(this.lock.storage,!0)&&r().then(Za.bind(function(e){return e||this.queueStorage.removeItem(this.storageKey).then(function(){return e})},this)).catch(Za.bind(function(e){return this.reportError("Error clearing queue",e),!1},this))},this))}return va.resolve(!0)};var updatePayloads=function(e,t){var r=[];return Za.each(e,function(e){var n=e.id;if(n in t){var i=t[n];null!==i&&(e.payload=i,r.push(e))}else r.push(e)}),r};RequestQueue.prototype.updatePayloads=function(e){return this.memQueue=updatePayloads(this.memQueue,e),this.usePersistence?this.lock.withLock(Za.bind(function lockAcquired(){return this.ensureInit().then(Za.bind(function(){return this.readFromStorage()},this)).then(Za.bind(function(t){return t=updatePayloads(t,e),this.saveToStorage(t)},this)).catch(Za.bind(function(t){return this.reportError("Error updating items",e,t),!1},this))},this),this.pid).catch(Za.bind(function(e){return this.reportError("Error acquiring storage lock",e),!1},this)):va.resolve(!0)},RequestQueue.prototype.readFromStorage=function(){return this.ensureInit().then(Za.bind(function(){return this.queueStorage.getItem(this.storageKey)},this)).then(Za.bind(function(e){return e&&(Za.isArray(e)||(this.reportError("Invalid storage entry:",e),e=null)),e||[]},this)).catch(Za.bind(function(e){return this.reportError("Error retrieving queue",e),[]},this))},RequestQueue.prototype.saveToStorage=function(e){return this.ensureInit().then(Za.bind(function(){return this.queueStorage.setItem(this.storageKey,e)},this)).then(function(){return!0}).catch(Za.bind(function(e){return this.reportError("Error saving queue",e),!1},this))},RequestQueue.prototype.clear=function(){return this.memQueue=[],this.usePersistence?this.ensureInit().then(Za.bind(function(){return this.queueStorage.removeItem(this.storageKey)},this)):va.resolve()};var dc=console_with_prefix("batch"),RequestBatcher=function(e,t){this.errorReporter=t.errorReporter,this.queue=new RequestQueue(e,{errorReporter:Za.bind(this.reportError,this),queueStorage:t.queueStorage,sharedLockStorage:t.sharedLockStorage,sharedLockTimeoutMS:t.sharedLockTimeoutMS,usePersistence:t.usePersistence,enqueueThrottleMs:t.enqueueThrottleMs}),this.libConfig=t.libConfig,this.sendRequest=t.sendRequestFunc,this.beforeSendHook=t.beforeSendHook,this.stopAllBatching=t.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={},this.flushOnlyOnInterval=t.flushOnlyOnInterval||!1,this._flushPromise=null};RequestBatcher.prototype.enqueue=function(e){return this.queue.enqueue(e,this.flushInterval)},RequestBatcher.prototype.start=function(){return this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},RequestBatcher.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},RequestBatcher.prototype.clear=function(){return this.queue.clear()},RequestBatcher.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},RequestBatcher.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},RequestBatcher.prototype.scheduleFlush=function(e){this.flushInterval=e,this.stopped||(this.timeoutID=setTimeout(Za.bind(function(){this.stopped||(this._flushPromise=this.flush())},this),this.flushInterval))},RequestBatcher.prototype.sendRequestPromise=function(e,t){return new va(Za.bind(function(r){this.sendRequest(e,t,r)},this))},RequestBatcher.prototype.flush=function(e){if(this.requestInProgress)return dc.log("Flush: Request already in progress"),va.resolve();this.requestInProgress=!0,e=e||{};var t=this.libConfig.batch_request_timeout_ms,r=(new Date).getTime(),i=this.batchSize;return this.queue.fillBatch(i).then(Za.bind(function(o){var s=o.length===i,a=[],c={};if(Za.each(o,function(e){var t=e.payload;if(this.beforeSendHook&&!e.orphaned&&(t=this.beforeSendHook(t)),t){t.event&&t.properties&&(t.properties=Za.extend({},t.properties,{mp_sent_by_lib_version:Ma.LIB_VERSION}));var r=!0,n=e.id;n?(this.itemIdsSentSuccessfully[n]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:e,batchSize:o.length,timesSent:this.itemIdsSentSuccessfully[n]}),r=!1):this.reportError("[dupe] found item with no ID",{item:e}),r&&a.push(t)}c[e.id]=t},this),a.length<1)return this.requestInProgress=!1,this.resetFlush(),va.resolve();var u=Za.bind(function(){return this.queue.removeItemsByID(Za.map(o,function(e){return e.id})).then(Za.bind(function(e){return Za.each(o,Za.bind(function(e){var t=e.id;t?(this.itemIdsSentSuccessfully[t]=this.itemIdsSentSuccessfully[t]||0,this.itemIdsSentSuccessfully[t]++,this.itemIdsSentSuccessfully[t]>5&&this.reportError("[dupe] item ID sent too many times",{item:e,batchSize:o.length,timesSent:this.itemIdsSentSuccessfully[t]})):this.reportError("[dupe] found item with no ID while removing",{item:e})},this)),e?(this.consecutiveRemovalFailures=0,this.flushOnlyOnInterval&&!s?(this.resetFlush(),va.resolve()):this.flush()):(++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush(),va.resolve())},this))},this),l=Za.bind(function(s){this.requestInProgress=!1;try{if(e.unloading)return this.queue.updatePayloads(c);if(Za.isObject(s)&&"timeout"===s.error&&(new Date).getTime()-r>=t)return this.reportError("Network timeout; retrying"),this.flush();if(Za.isObject(s)&&(s.httpStatusCode>=500||429===s.httpStatusCode||s.httpStatusCode<=0&&(p=n.navigator.onLine,!Za.isUndefined(p)&&!p)||"timeout"===s.error)){var a=2*this.flushInterval;return s.retryAfter&&(a=1e3*parseInt(s.retryAfter,10)||a),a=Math.min(6e5,a),this.reportError("Error; retry in "+a+" ms"),this.scheduleFlush(a),va.resolve()}if(Za.isObject(s)&&413===s.httpStatusCode){if(o.length>1){var l=Math.max(1,Math.floor(i/2));return this.batchSize=Math.min(this.batchSize,l,o.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush(),va.resolve()}return this.reportError("Single-event request too large; dropping",o),this.resetBatchSize(),u()}return u()}catch(e){this.reportError("Error handling API response",e),this.resetFlush()}var p},this),p={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:t};return e.unloading&&(p.transport="sendBeacon"),dc.log("MIXPANEL REQUEST:",a),this.sendRequestPromise(a,p).then(l)},this)).catch(Za.bind(function(e){this.reportError("Error flushing request queue",e),this.resetFlush()},this))},RequestBatcher.prototype.reportError=function(e,t){if(dc.error.apply(dc.error,arguments),this.errorReporter)try{t instanceof Error||(t=new Error(e)),this.errorReporter(e,t)}catch(t){dc.error(t)}};var isRecordingExpired=function(e){var t=Date.now();return!e||t>e.maxExpires||t>e.idleExpires},fc=console_with_prefix("recorder"),gc=n.CompressionStream,mc={batch_size:1e3,batch_flush_interval_ms:1e4,batch_request_timeout_ms:9e4,batch_autostart:!0},vc=new Set([Ts.MouseMove,Ts.MouseInteraction,Ts.Scroll,Ts.ViewportResize,Ts.Input,Ts.TouchMove,Ts.MediaInteraction,Ts.Drag,Ts.Selection]);var SessionRecording=function(e){this._mixpanel=e.mixpanelInstance,this._onIdleTimeout=e.onIdleTimeout||NOOP_FUNC,this._onMaxLengthReached=e.onMaxLengthReached||NOOP_FUNC,this._onBatchSent=e.onBatchSent||NOOP_FUNC,this._rrwebRecord=e.rrwebRecord||null,this._stopRecording=null,this.replayId=e.replayId,this.batchStartUrl=e.batchStartUrl||null,this.replayStartUrl=e.replayStartUrl||null,this.idleExpires=e.idleExpires||null,this.maxExpires=e.maxExpires||null,this.replayStartTime=e.replayStartTime||null,this.seqNo=e.seqNo||0,this.idleTimeoutId=null,this.maxTimeoutId=null,this.recordMaxMs=Ra,this.recordMinMs=0;var t=localStorageSupported(e.sharedLockStorage,!0)&&!this.getConfig("disable_persistence");this.batcherKey="__mprec_"+this.getConfig("name")+"_"+this.getConfig("token")+"_"+this.replayId,this.queueStorage=new IDBStorageWrapper(cc),this.batcher=new RequestBatcher(this.batcherKey,{errorReporter:this.reportError.bind(this),flushOnlyOnInterval:!0,libConfig:mc,sendRequestFunc:this.flushEventsWithOptOut.bind(this),queueStorage:this.queueStorage,sharedLockStorage:e.sharedLockStorage,usePersistence:t,stopAllBatchingFunc:this.stopRecording.bind(this),enqueueThrottleMs:250,sharedLockTimeoutMS:1e4})};SessionRecording.prototype.getUserIdInfo=function(){if(this.finalFlushUserIdInfo)return this.finalFlushUserIdInfo;var e={distinct_id:String(this._mixpanel.get_distinct_id())},t=this._mixpanel.get_property("$device_id");t&&(e.$device_id=t);var r=this._mixpanel.get_property("$user_id");return r&&(e.$user_id=r),e},SessionRecording.prototype.unloadPersistedData=function(){return this.batcher.stop(),this.batcher.flush().then(function(){return this.queueStorage.removeItem(this.batcherKey)}.bind(this))},SessionRecording.prototype.getConfig=function(e){return this._mixpanel.get_config(e)},SessionRecording.prototype.get_config=function(e){return this.getConfig(e)},SessionRecording.prototype.startRecording=function(e){if(null!==this._rrwebRecord)if(null===this._stopRecording){this.recordMaxMs=this.getConfig("record_max_ms"),this.recordMaxMs>Ra&&(this.recordMaxMs=Ra,fc.critical("record_max_ms cannot be greater than "+Ra+"ms. Capping value.")),this.maxExpires||(this.maxExpires=(new Date).getTime()+this.recordMaxMs),this.recordMinMs=this.getConfig("record_min_ms"),this.recordMinMs>Aa&&(this.recordMinMs=Aa,fc.critical("record_min_ms cannot be greater than 8000ms. Capping value.")),this.replayStartTime||(this.replayStartTime=(new Date).getTime(),this.batchStartUrl=Za.info.currentUrl(),this.replayStartUrl=Za.info.currentUrl()),e||this.recordMinMs>0?this.batcher.stop():this.batcher.start();var t=function(){clearTimeout(this.idleTimeoutId);var e=this.getConfig("record_idle_timeout_ms");this.idleTimeoutId=setTimeout(this._onIdleTimeout,e),this.idleExpires=(new Date).getTime()+e}.bind(this);t();var r=this.getConfig("record_block_selector");""!==r&&null!==r||(r=void 0);try{this._stopRecording=this._rrwebRecord({emit:function(e){this.idleExpires&&this.idleExpires<e.timestamp?this._onIdleTimeout():(function isUserEvent(e){return e.type===As.IncrementalSnapshot&&vc.has(e.data.source)}(e)&&(this.batcher.stopped&&(new Date).getTime()-this.replayStartTime>=this.recordMinMs&&this.batcher.start(),t()),this.__enqueuePromise=this.batcher.enqueue(e))}.bind(this),blockClass:this.getConfig("record_block_class"),blockSelector:r,collectFonts:this.getConfig("record_collect_fonts"),dataURLOptions:{type:"image/webp",quality:.6},maskAllInputs:!0,maskTextClass:this.getConfig("record_mask_text_class"),maskTextSelector:this.getConfig("record_mask_text_selector"),recordCanvas:this.getConfig("record_canvas"),sampling:{canvas:15}})}catch(e){this.reportError("Unexpected error when starting rrweb recording.",e)}if("function"!=typeof this._stopRecording)return this.reportError("rrweb failed to start, skipping this recording."),this._stopRecording=null,void this.stopRecording();var n=this.maxExpires-(new Date).getTime();this.maxTimeoutId=setTimeout(this._onMaxLengthReached.bind(this),n)}else fc.log("Recording already in progress, skipping startRecording.");else this.reportError("rrweb record function not provided. ")},SessionRecording.prototype.stopRecording=function(e){if(this.finalFlushUserIdInfo=this.getUserIdInfo(),!this.isRrwebStopped()){try{this._stopRecording()}catch(e){this.reportError("Error with rrweb stopRecording",e)}this._stopRecording=null}var t;return this.batcher.stopped?t=this.batcher.clear():e||(t=this.batcher.flush()),this.batcher.stop(),clearTimeout(this.idleTimeoutId),clearTimeout(this.maxTimeoutId),t},SessionRecording.prototype.isRrwebStopped=function(){return null===this._stopRecording},SessionRecording.prototype.flushEventsWithOptOut=function(e,t,r){var n=function(e){0===e&&(this.stopRecording(),r({error:"Tracking has been opted out, stopping recording."}))}.bind(this);this._flushEvents(e,t,r,n)},SessionRecording.prototype.serialize=function(){var e;try{e=this._mixpanel.get_tab_id()}catch(t){this.reportError("Error getting tab ID for serialization ",t),e=null}return{replayId:this.replayId,seqNo:this.seqNo,replayStartTime:this.replayStartTime,batchStartUrl:this.batchStartUrl,replayStartUrl:this.replayStartUrl,idleExpires:this.idleExpires,maxExpires:this.maxExpires,tabId:e}},SessionRecording.deserialize=function(e,t){return new SessionRecording(Za.extend({},t,{replayId:e.replayId,batchStartUrl:e.batchStartUrl,replayStartUrl:e.replayStartUrl,idleExpires:e.idleExpires,maxExpires:e.maxExpires,replayStartTime:e.replayStartTime,seqNo:e.seqNo,sharedLockStorage:t.sharedLockStorage}))},SessionRecording.prototype._sendRequest=function(e,t,r,i){var o=function(t,r){200===t.status&&this.replayId===e&&(this.seqNo++,this.batchStartUrl=Za.info.currentUrl()),this._onBatchSent(),i({status:0,httpStatusCode:t.status,responseBody:r,retryAfter:t.headers.get("Retry-After")})}.bind(this),s=this._mixpanel.get_api_host&&this._mixpanel.get_api_host("record")||this.getConfig("api_host");n.fetch(s+"/"+this.getConfig("api_routes").record+"?"+new URLSearchParams(t),{method:"POST",headers:{Authorization:"Basic "+btoa(this.getConfig("token")+":"),"Content-Type":"application/octet-stream"},body:r}).then(function(e){e.json().then(function(t){o(e,t)}).catch(function(e){i({error:e})})}).catch(function(e){i({error:e,httpStatusCode:0})})},SessionRecording.prototype._flushEvents=addOptOutCheckMixpanelLib(function(e,t,r){var n=e.length;if(n>0){for(var i=this.replayId,o=1/0,s=-1/0,a=!1,c=0;c<n;c++)o=Math.min(o,e[c].timestamp),s=Math.max(s,e[c].timestamp),e[c].type===As.FullSnapshot&&(a=!0);if(0===this.seqNo){if(!a)return r({error:"First batch does not contain a full snapshot. Aborting recording."}),void this.stopRecording(!0);this.replayStartTime=o}else this.replayStartTime||(this.reportError("Replay start time not set but seqNo is not 0. Using current batch start time as a fallback."),this.replayStartTime=o);var u=s-this.replayStartTime,l={$current_url:this.batchStartUrl,$lib_version:Ma.LIB_VERSION,batch_start_time:o/1e3,mp_lib:"web",replay_id:i,replay_length_ms:u,replay_start_time:this.replayStartTime/1e3,replay_start_url:this.replayStartUrl,seq:this.seqNo},p=JSON.stringify(e);if(Object.assign(l,this.getUserIdInfo()),gc){var h=new Blob([p],{type:"application/json"}).stream().pipeThrough(new gc("gzip"));new Response(h).blob().then(function(e){l.format="gzip",this._sendRequest(i,l,e,r)}.bind(this))}else l.format="body",this._sendRequest(i,l,p,r)}}),SessionRecording.prototype.reportError=function(e,t){fc.error.apply(fc.error,arguments);try{t||e instanceof Error||(e=new Error(e)),this.getConfig("error_reporter")(e,t)}catch(t){fc.error(t)}};var RecordingRegistry=function(e){this.idb=new IDBStorageWrapper(uc),this.errorReporter=e.errorReporter,this.mixpanelInstance=e.mixpanelInstance,this.sharedLockStorage=e.sharedLockStorage};RecordingRegistry.prototype.isPersistenceEnabled=function(){return!this.mixpanelInstance.get_config("disable_persistence")},RecordingRegistry.prototype.handleError=function(e){this.errorReporter("IndexedDB error: ",e)},RecordingRegistry.prototype.setActiveRecording=function(e){if(!this.isPersistenceEnabled())return va.resolve();var t=e.tabId;return t?this.idb.init().then(function(){return this.idb.setItem(t,e)}.bind(this)).catch(this.handleError.bind(this)):(console.warn("No tab ID is set, cannot persist recording metadata."),va.resolve())},RecordingRegistry.prototype.getActiveRecording=function(){return this.isPersistenceEnabled()?this.idb.init().then(function(){return this.idb.getItem(this.mixpanelInstance.get_tab_id())}.bind(this)).then(function(e){return isRecordingExpired(e)?null:e}.bind(this)).catch(this.handleError.bind(this)):va.resolve(null)},RecordingRegistry.prototype.clearActiveRecording=function(){return this.isPersistenceEnabled()?this.markActiveRecordingExpired():this.deleteActiveRecording()},RecordingRegistry.prototype.markActiveRecordingExpired=function(){return this.getActiveRecording().then(function(e){if(e)return e.maxExpires=0,this.setActiveRecording(e)}.bind(this)).catch(this.handleError.bind(this))},RecordingRegistry.prototype.deleteActiveRecording=function(){return this.idb.isInitialized()?this.idb.removeItem(this.mixpanelInstance.get_tab_id()).catch(this.handleError.bind(this)):va.resolve()},RecordingRegistry.prototype.flushInactiveRecordings=function(){return this.isPersistenceEnabled()?this.idb.init().then(function(){return this.idb.getAll()}.bind(this)).then(function(e){var t=e.filter(function(e){return isRecordingExpired(e)}).map(function(e){return SessionRecording.deserialize(e,{mixpanelInstance:this.mixpanelInstance,sharedLockStorage:this.sharedLockStorage}).unloadPersistedData().then(function(){return this.idb.removeItem(e.tabId)}.bind(this)).catch(this.handleError.bind(this))}.bind(this));return va.all(t)}.bind(this)).catch(this.handleError.bind(this)):va.resolve([])};var _c=console_with_prefix("recorder"),MixpanelRecorder=function(e,t,r){this.mixpanelInstance=e,this.rrwebRecord=t||record,this.sharedLockStorage=r,this.recordingRegistry=new RecordingRegistry({mixpanelInstance:this.mixpanelInstance,errorReporter:_c.error,sharedLockStorage:r}),this._flushInactivePromise=this.recordingRegistry.flushInactiveRecordings(),this.activeRecording=null,this.stopRecordingInProgress=!1};MixpanelRecorder.prototype.startRecording=function(e){if(e=e||{},!this.activeRecording||this.activeRecording.isRrwebStopped()){var t=function(){_c.log("Idle timeout reached, restarting recording."),this.resetRecording()}.bind(this),r=function(){_c.log("Max recording length reached, stopping recording."),this.resetRecording()}.bind(this),n=function(){this.recordingRegistry.setActiveRecording(this.activeRecording.serialize()),this.__flushPromise=this.activeRecording.batcher._flushPromise}.bind(this),i={mixpanelInstance:this.mixpanelInstance,onBatchSent:n,onIdleTimeout:t,onMaxLengthReached:r,replayId:Za.UUID(),rrwebRecord:this.rrwebRecord,sharedLockStorage:this.sharedLockStorage};return e.activeSerializedRecording?this.activeRecording=SessionRecording.deserialize(e.activeSerializedRecording,i):this.activeRecording=new SessionRecording(i),this.activeRecording.startRecording(e.shouldStopBatcher),this.recordingRegistry.setActiveRecording(this.activeRecording.serialize())}_c.log("Recording already in progress, skipping startRecording.")},MixpanelRecorder.prototype.stopRecording=function(){return this.stopRecordingInProgress=!0,this._stopCurrentRecording(!1,!0).then(function(){return this.recordingRegistry.clearActiveRecording()}.bind(this)).then(function(){this.stopRecordingInProgress=!1}.bind(this))},MixpanelRecorder.prototype.pauseRecording=function(){return this._stopCurrentRecording(!1)},MixpanelRecorder.prototype._stopCurrentRecording=function(e,t){if(this.activeRecording){var r=this.activeRecording.stopRecording(e);return t&&(this.activeRecording=null),r}return va.resolve()},MixpanelRecorder.prototype.resumeRecording=function(e){return this.activeRecording&&this.activeRecording.isRrwebStopped()?(this.activeRecording.startRecording(!1),va.resolve(null)):this.recordingRegistry.getActiveRecording().then(function(t){return t&&!this.stopRecordingInProgress?this.startRecording({activeSerializedRecording:t}):e?this.startRecording({shouldStopBatcher:!1}):(_c.log("No resumable recording found."),null)}.bind(this))},MixpanelRecorder.prototype.resetRecording=function(){this.stopRecording(),this.startRecording({shouldStopBatcher:!0})},MixpanelRecorder.prototype.getActiveReplayId=function(){return this.activeRecording&&!this.activeRecording.isRrwebStopped()?this.activeRecording.replayId:null},Object.defineProperty(MixpanelRecorder.prototype,"replayId",{get:function(){return this.getActiveReplayId()}}),n.__mp_recorder=MixpanelRecorder;var yc="change",bc="click",wc="hashchange",kc="load",Sc="mp_locationchange",Cc="popstate",Ic="scrollend",xc="scroll",Oc="submit",Ec="visibilitychange",Mc=["clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","x","y"],Rc=["mp-include"],Ac=["mp-no-track"],Tc=Ac.concat(["mp-sensitive"]),Pc=["aria-label","aria-labelledby","aria-describedby","href","name","role","title","type"],Nc={button:!0,checkbox:!0,combobox:!0,grid:!0,link:!0,listbox:!0,menu:!0,menubar:!0,menuitem:!0,menuitemcheckbox:!0,menuitemradio:!0,navigation:!0,option:!0,radio:!0,radiogroup:!0,searchbox:!0,slider:!0,spinbutton:!0,switch:!0,tab:!0,tablist:!0,textbox:!0,tree:!0,treegrid:!0,treeitem:!0},Dc={base:!0,head:!0,html:!0,link:!0,meta:!0,script:!0,style:!0,title:!0,br:!0,hr:!0,wbr:!0,noscript:!0,picture:!0,source:!0,template:!0,track:!0},Lc={article:!0,div:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,p:!0,section:!0,span:!0},Fc=["onclick","onmousedown","onmouseup","onpointerdown","onpointerup","ontouchend","ontouchstart"],Uc=console_with_prefix("autocapture");function getClasses(e){for(var t={},r=getClassName(e).split(" "),n=0;n<r.length;n++){var i=r[n];i&&(t[i]=!0)}return t}function getClassName(e){switch(typeof e.className){case"string":return e.className;case"object":return e.className.baseVal||e.getAttribute("class")||"";default:return""}}function getPreviousElementSibling(e){if(e.previousElementSibling)return e.previousElementSibling;do{e=e.previousSibling}while(e&&!isElementNode(e));return e}function getPropertiesFromElement(e,t,r,n,i,o){var s={$classes:getClassName(e).split(" "),$tag_name:e.tagName.toLowerCase()},a=e.id;a&&(s.$id=a),shouldTrackElementDetails(e,t,i,o)&&Za.each(Pc.concat(n),function(t){if(e.hasAttribute(t)&&!r[t]){var n=e.getAttribute(t);shouldTrackValue(n)&&(s["$attr-"+t]=n)}});for(var c=1,u=1,l=e;l=getPreviousElementSibling(l);)c++,l.tagName===e.tagName&&u++;return s.$nth_child=c,s.$nth_of_type=u,s}function getPropsForDOMEvent(e,t){var r=t.allowElementCallback,i=t.allowSelectors||[],o=t.blockAttrs||[],s=t.blockElementCallback,a=t.blockSelectors||[],c=t.captureTextContent||!1,u=t.captureExtraAttrs||[],l=t.capturedForHeatMap||!1,p={};Za.each(o,function(e){p[e]=!0});var h=null,d=void 0===e.target?e.srcElement:e.target;if(isTextNode(d)&&(d=d.parentNode),function shouldTrackDomEvent(e,t){if(!e||isTag(e,"html")||!isElementNode(e))return!1;switch(e.tagName.toLowerCase()){case"form":return t.type===Oc;case"input":return-1===["button","submit"].indexOf(e.getAttribute("type"))?t.type===yc:t.type===bc;case"select":case"textarea":return t.type===yc;default:return t.type===bc}}(d,e)&&isElementAllowed(d,e,r,i)&&!isElementBlocked(d,e,s,a)){for(var f=[d],g=d;g.parentNode&&!isTag(g,"body");)f.push(g.parentNode),g=g.parentNode;var m,v=[],_=!1;if(Za.each(f,function(t){var n=shouldTrackElementDetails(t,e,r,i);p.href||"a"!==t.tagName.toLowerCase()||(m=t.getAttribute("href"),m=n&&shouldTrackValue(m)&&m),isElementBlocked(t,e,s,a)&&(_=!0),v.push(getPropertiesFromElement(t,e,p,u,r,i))},this),!_){var y=$a.documentElement;if(h={$event_type:e.type,$host:n.location.host,$pathname:n.location.pathname,$elements:v,$el_attr__href:m,$viewportHeight:Math.max(y.clientHeight,n.innerHeight||0),$viewportWidth:Math.max(y.clientWidth,n.innerWidth||0),$pageHeight:$a.body.offsetHeight||0,$pageWidth:$a.body.offsetWidth||0},Za.each(u,function(e){if(!p[e]&&d.hasAttribute(e)){var t=d.getAttribute(e);shouldTrackValue(t)&&(h["$el_attr__"+e]=t)}}),c&&(b=getSafeText(d,e,r,i))&&b.length&&(h.$el_text=b),e.type===bc&&(Za.each(Mc,function(t){t in e&&(h["$"+t]=e[t])}),l&&(h.$captured_for_heatmap=!0),d=function guessRealClickTarget(e){for(var t=e.target,r=e.composedPath(),n=0;n<r.length;n++){var i=r[n];if(isTag(i,"a")||isTag(i,"button")||isTag(i,"input")||isTag(i,"select")||i.getAttribute&&"button"===i.getAttribute("role")){t=i;break}if(i===t)break}return t}(e)),c){var b=getSafeText(d,e,r,i);b&&b.length&&(h.$el_text=b)}if(d){if(!isElementAllowed(d,e,r,i)||isElementBlocked(d,e,s,a))return null;var w=getPropertiesFromElement(d,e,p,u,r,i);h.$target=w,h.$el_classes=w.$classes,Za.extend(h,Za.strip_empty_properties({$el_id:w.$id,$el_tag_name:w.$tag_name}))}}}return h}function getSafeText(e,t,r,n){var i="";return shouldTrackElementDetails(e,t,r,n)&&e.childNodes&&e.childNodes.length&&Za.each(e.childNodes,function(e){isTextNode(e)&&e.textContent&&(i+=Za.trim(e.textContent).split(/(\s+)/).filter(shouldTrackValue).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),Za.trim(i)}function isElementAllowed(e,t,r,n){if(r)try{if(!r(e,t))return!1}catch(e){return Uc.critical("Error while checking element in allowElementCallback",e),!1}if(!n.length)return!0;for(var i=0;i<n.length;i++){var o=n[i];try{if(e.matches(o))return!0}catch(e){Uc.critical("Error while checking selector: "+o,e)}}return!1}function isElementBlocked(e,t,r,n){var i;if(r)try{if(r(e,t))return!0}catch(e){return Uc.critical("Error while checking element in blockElementCallback",e),!0}if(n&&n.length)for(i=0;i<n.length;i++){var o=n[i];try{if(e.matches(o))return!0}catch(e){Uc.critical("Error while checking selector: "+o,e)}}var s=getClasses(e);for(i=0;i<Ac.length;i++)if(s[Ac[i]])return!0;return!1}function isElementNode(e){return e&&1===e.nodeType}function isTag(e,t){return e&&e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function isTextNode(e){return e&&3===e.nodeType}function shouldTrackElementDetails(e,t,r,n){var i;if(!isElementAllowed(e,t,r,n))return!1;for(var o=e;o.parentNode&&!isTag(o,"body");o=o.parentNode){var s=getClasses(o);for(i=0;i<Tc.length;i++)if(s[Tc[i]])return!1}var a=getClasses(e);for(i=0;i<Rc.length;i++)if(a[Rc[i]])return!0;if(isTag(e,"input")||isTag(e,"select")||isTag(e,"textarea")||"true"===e.getAttribute("contenteditable"))return!1;var c=e.type||"";if("string"==typeof c)switch(c.toLowerCase()){case"hidden":case"password":return!1}var u=e.name||e.id||"";if("string"==typeof u){if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(u.replace(/[^a-zA-Z0-9]/g,"")))return!1}return!0}function shouldTrackValue(e){if(null===e||Za.isUndefined(e))return!1;if("string"==typeof e){e=Za.trim(e);if(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(e))return!1}return!0}function getPolyfillScrollEndFunction(e){var t="onscrollend"in n,r=safewrap(e),i=Ic;if(!t){var o=null;r=safewrap(function(){clearTimeout(o),o=setTimeout(e,100)}),i=xc}return{listener:r,eventType:i}}function hasAnyInteractivityIndicators(e){var t=e.tagName.toLowerCase();return"button"===t||"input"===t||"select"===t||"textarea"===t||"details"===t||"dialog"===t||(!!e.isContentEditable||(!!(e.onclick||e.onmousedown||e.onmouseup||e.ontouchstart||e.ontouchend)||(!!function hasInlineEventHandlers(e){for(var t=0;t<Fc.length;t++)if(e.hasAttribute(Fc[t]))return!0;return!1}(e)||(!!function hasInteractiveAriaRole(e){var t=e.getAttribute("role");if(!t)return!1;var r=t.trim().split(/\s+/)[0].toLowerCase();return Nc[r]}(e)||(!("a"!==t||!e.hasAttribute("href"))||!!e.hasAttribute("tabindex"))))))}function RageClickTracker(){this.clicks=[]}function ShadowDOMObserver(e,t){this.changeCallback=e||function(){},this.observerConfig=t,this.observedShadowRoots=null,this.shadowObservers=[]}RageClickTracker.prototype.isRageClick=function(e,t,r){var n=(r=r||{}).threshold_px||30,i=r.timeout_ms||1e3,o=r.click_count||4,s=Date.now(),a=this.clicks[this.clicks.length-1];if(a&&s-a.timestamp<i&&Math.sqrt(Math.pow(e-a.x,2)+Math.pow(t-a.y,2))<n){if(this.clicks.push({x:e,y:t,timestamp:s}),this.clicks.length>=o)return this.clicks=[],!0}else this.clicks=[{x:e,y:t,timestamp:s}];return!1},ShadowDOMObserver.prototype.getEventTarget=function(e){if(this.observedShadowRoots){var t=this.getComposedPath(e);return t&&t.length?t[0]:e.target||e.srcElement}},ShadowDOMObserver.prototype.getComposedPath=function(e){return"composedPath"in e?e.composedPath():[]},ShadowDOMObserver.prototype.observeFromEvent=function(e){if(this.observedShadowRoots)for(var t=this.getComposedPath(e),r=0;r<t.length;r++){var n=t[r];n&&n.shadowRoot&&this.observeShadowRoot(n.shadowRoot)}},ShadowDOMObserver.prototype.observeShadowRoot=function(e){if(this.observedShadowRoots&&!this.observedShadowRoots.has(e)){var t=this;try{this.observedShadowRoots.add(e);var r=new window.MutationObserver(function(){t.changeCallback()});r.observe(e,this.observerConfig),this.shadowObservers.push(r)}catch(e){Uc.critical("Error while observing shadow root",e)}}},ShadowDOMObserver.prototype.start=function(){this.observedShadowRoots||(!function weakSetSupported(){return"undefined"!=typeof WeakSet}()?Uc.critical("Shadow DOM observation unavailable: WeakSet not supported"):this.observedShadowRoots=new WeakSet)},ShadowDOMObserver.prototype.stop=function(){if(this.observedShadowRoots){for(var e=0;e<this.shadowObservers.length;e++)try{this.shadowObservers[e].disconnect()}catch(e){Uc.critical("Error while disconnecting shadow DOM observer",e)}this.shadowObservers=[],this.observedShadowRoots=null}};var Bc=[yc,"input",Oc,"select","toggle"],$c=[Ic],zc=[wc],jc={characterData:!0,childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class","hidden","checked","selected","value","display","visibility"]};function DeadClickTracker(e){this.eventListeners=[],this.mutationObserver=null,this.shadowDOMObserver=null,this.isTracking=!1,this.lastChangeEventTimestamp=0,this.pendingClicks=[],this.onDeadClickCallback=e,this.processingActive=!1,this.processingTimeout=null}DeadClickTracker.prototype.addClick=function(e){var t=this.shadowDOMObserver&&this.shadowDOMObserver.getEventTarget(e);return t||(t=e.target||e.srcElement),!(!t||function isDefinitelyNonInteractive(e){if(!e||!e.tagName)return!0;var t=e.tagName.toLowerCase();if(Dc[t])return!0;if(hasAnyInteractivityIndicators(e))return!1;for(var r=e.parentElement,n=0;r&&n<5;){if(hasAnyInteractivityIndicators(r))return!1;if(r.getRootNode&&r.getRootNode()!==$a){var i=r.getRootNode();if(i.host&&hasAnyInteractivityIndicators(i.host))return!1}r=r.parentElement,n++}return!!Lc[t]}(t))&&(this.shadowDOMObserver&&this.shadowDOMObserver.observeFromEvent(e),this.pendingClicks.push({element:t,event:e,timestamp:Date.now()}),!0)},DeadClickTracker.prototype.trackClick=function(e,t){if(!this.isTracking)return!1;var r=this.addClick(e);return r&&this.triggerProcessing(t),r},DeadClickTracker.prototype.getDeadClicks=function(e){if(0===this.pendingClicks.length)return[];var t=e.timeout_ms,r=Date.now(),n=this.pendingClicks.slice();this.pendingClicks=[];for(var i=[],o=0;o<n.length;o++){var s=n[o];r-s.timestamp>=t?this.hasChangesAfter(s.timestamp)||i.push(s):this.pendingClicks.push(s)}return i},DeadClickTracker.prototype.hasChangesAfter=function(e){return this.lastChangeEventTimestamp>=e-100},DeadClickTracker.prototype.recordChangeEvent=function(){this.lastChangeEventTimestamp=Date.now()},DeadClickTracker.prototype.triggerProcessing=function(e){this.processingActive||(this.processingActive=!0,this.processRecursively(e))},DeadClickTracker.prototype.processRecursively=function(e){if(this.isTracking&&this.onDeadClickCallback){var t=e.timeout_ms,r=this;this.processingTimeout=setTimeout(function(){if(r.processingActive){for(var t=r.getDeadClicks(e),n=0;n<t.length;n++)r.onDeadClickCallback(t[n].event);r.pendingClicks.length>0?r.processRecursively(e):r.processingActive=!1}},t)}else this.processingActive=!1},DeadClickTracker.prototype.startTracking=function(){if(!this.isTracking){this.isTracking=!0;var e=this;Bc.forEach(function(t){var handler=function(){e.recordChangeEvent()};document.addEventListener(t,handler,{capture:!0,passive:!0}),e.eventListeners.push({target:document,event:t,handler,options:{capture:!0,passive:!0}})}),zc.forEach(function(t){var handler=function(){e.recordChangeEvent()};window.addEventListener(t,handler),e.eventListeners.push({target:window,event:t,handler})}),$c.forEach(function(t){var handler=function(){e.recordChangeEvent()};window.addEventListener(t,handler,{passive:!0}),e.eventListeners.push({target:window,event:t,handler,options:{passive:!0}})});var selectionHandler=function(){e.recordChangeEvent()};if(document.addEventListener("selectionchange",selectionHandler),e.eventListeners.push({target:document,event:"selectionchange",handler:selectionHandler}),window.MutationObserver)try{this.mutationObserver=new window.MutationObserver(function(){e.recordChangeEvent()}),this.mutationObserver.observe(document.body||document.documentElement,jc)}catch(e){Uc.critical("Error while setting up mutation observer",e)}if(window.customElements)try{this.shadowDOMObserver=new ShadowDOMObserver(function(){e.recordChangeEvent()},jc),this.shadowDOMObserver.start()}catch(e){Uc.critical("Error while setting up shadow DOM observer",e),this.shadowDOMObserver=null}}},DeadClickTracker.prototype.stopTracking=function(){if(this.isTracking){this.isTracking=!1,this.pendingClicks=[],this.lastChangeEventTimestamp=0,this.processingActive=!1,this.processingTimeout&&(clearTimeout(this.processingTimeout),this.processingTimeout=null);for(var e=0;e<this.eventListeners.length;e++){var t=this.eventListeners[e];try{t.target.removeEventListener(t.event,t.handler,t.options)}catch(e){Uc.critical("Error while removing event listener",e)}}if(this.eventListeners=[],this.mutationObserver){try{this.mutationObserver.disconnect()}catch(e){Uc.critical("Error while disconnecting mutation observer",e)}this.mutationObserver=null}if(this.shadowDOMObserver){try{this.shadowDOMObserver.stop()}catch(e){Uc.critical("Error while stopping shadow DOM observer",e)}this.shadowDOMObserver=null}}};var qc="autocapture",Wc="full-url",Vc="allow_selectors",Gc="allow_url_regexes",Hc="block_attrs",Jc="block_element_callback",Yc="block_selectors",Zc="block_url_regexes",Xc="capture_extra_attrs",Kc="capture_text_content",Qc="scroll_capture_all",eu="scroll_depth_percent_checkpoints",tu="click",ru="dead_click",nu="input",iu="pageview",ou="rage_click",su="scroll",au="page_leave",cu="submit",uu={};uu[Vc]=[],uu[Gc]=[],uu[Hc]=[],uu[Jc]=null,uu[Yc]=[],uu[Zc]=[],uu[Xc]=[],uu[Kc]=!1,uu[Qc]=!1,uu[eu]=[25,50,75,100],uu[tu]=!0,uu[ru]=!0,uu[nu]=!0,uu[iu]=Wc,uu[ou]=!0,uu[su]=!0,uu[au]=!1,uu[cu]=!0;var lu={$mp_autocapture:!0},pu="$mp_click",hu="$mp_dead_click",du="$mp_rage_click",Autocapture=function(e){this.mp=e,this.maxScrollViewDepth=0,this.hasTrackedScrollSession=!1,this.previousScrollHeight=0};Autocapture.prototype.init=function(){!function minDOMApisSupported(){try{return!!$a.createElement("div").matches}catch(e){return!1}}()?Uc.critical("Autocapture unavailable: missing required DOM APIs"):(this.initPageListeners(),this.initPageviewTracking(),this.initClickTracking(),this.initDeadClickTracking(),this.initInputTracking(),this.initScrollTracking(),this.initSubmitTracking(),this.initRageClickTracking(),this.initPageLeaveTracking())},Autocapture.prototype.getFullConfig=function(){var e=this.mp.get_config(qc);return e?Za.isObject(e)?Za.extend({},uu,e):uu:{}},Autocapture.prototype.getConfig=function(e){return this.getFullConfig()[e]},Autocapture.prototype.currentUrlBlocked=function(){var e,t=Za.info.currentUrl(),r=this.getConfig(Gc)||[];if(r.length){var n=!1;for(e=0;e<r.length;e++){var i=r[e];try{if(t.match(i)){n=!0;break}}catch(e){return Uc.critical("Error while checking block URL regex: "+i,e),!0}}if(!n)return!0}var o=this.getConfig(Zc)||[];if(!o||!o.length)return!1;for(e=0;e<o.length;e++)try{if(t.match(o[e]))return!0}catch(t){return Uc.critical("Error while checking block URL regex: "+o[e],t),!0}return!1},Autocapture.prototype.pageviewTrackingConfig=function(){return this.mp.get_config(qc)?this.getConfig(iu):this.mp.get_config("track_pageview")},Autocapture.prototype.trackDomEvent=function(e,t){if(!this.currentUrlBlocked()){var r=this.mp.is_recording_heatmap_data()&&(t===pu&&!this.getConfig(tu)||t===du&&!this._getClickTrackingConfig(ou)||t===hu&&!this._getClickTrackingConfig(ru)),n=getPropsForDOMEvent(e,{allowElementCallback:this.getConfig("allow_element_callback"),allowSelectors:this.getConfig(Vc),blockAttrs:this.getConfig(Hc),blockElementCallback:this.getConfig(Jc),blockSelectors:this.getConfig(Yc),captureExtraAttrs:this.getConfig(Xc),captureTextContent:this.getConfig(Kc),capturedForHeatMap:r});n&&(Za.extend(n,lu),this.mp.track(t,n))}},Autocapture.prototype.initPageListeners=function(){if(n.removeEventListener(Cc,this.listenerPopstate),n.removeEventListener(wc,this.listenerHashchange),this.pageviewTrackingConfig()||this.getConfig(au)||this.mp.get_config("record_heatmap_data")){this.listenerPopstate=function(){n.dispatchEvent(new Event(Sc))},this.listenerHashchange=function(){n.dispatchEvent(new Event(Sc))},n.addEventListener(Cc,this.listenerPopstate),n.addEventListener(wc,this.listenerHashchange);var e=n.history.pushState;"function"==typeof e&&(n.history.pushState=function(t,r,i){e.call(n.history,t,r,i),n.dispatchEvent(new Event(Sc))});var t=n.history.replaceState;"function"==typeof t&&(n.history.replaceState=function(e,r,i){t.call(n.history,e,r,i),n.dispatchEvent(new Event(Sc))})}},Autocapture.prototype._getClickTrackingConfig=function(e){var t=this.getConfig(e);return t?!0===t?{}:"object"==typeof t?t:{}:null},Autocapture.prototype._trackPageLeave=function(e,t,r){if(!this.hasTrackedScrollSession&&(this.getConfig(au)||this.mp.is_recording_heatmap_data())){this.hasTrackedScrollSession=!0;var i=Math.max($a.documentElement.clientHeight,n.innerHeight||0),o=Math.round(Math.max(this.maxScrollViewDepth-i,0)/(r-i)*100),s=Math.round(i/r*100);r<=i&&(o=100,s=100);var a=Za.extend({$max_scroll_view_depth:this.maxScrollViewDepth,$max_scroll_percentage:o,$fold_line_percentage:s,$scroll_height:r,$event_type:e.type,$current_url:t||Za.info.currentUrl(),$viewportHeight:i,$viewportWidth:Math.max($a.documentElement.clientWidth,n.innerWidth||0),$captured_for_heatmap:this.mp.is_recording_heatmap_data()},lu);this.mp.track("$mp_page_leave",a,{transport:"sendBeacon"})}},Autocapture.prototype._initScrollDepthTracking=function(){if(n.removeEventListener(xc,this.listenerScrollDepth),n.removeEventListener(Ic,this.listenerScrollDepth),this.mp.get_config("record_heatmap_data")){Uc.log("Initializing scroll depth tracking"),this.maxScrollViewDepth=Math.max($a.documentElement.clientHeight,n.innerHeight||0);var e=getPolyfillScrollEndFunction(function(){if(!this.currentUrlBlocked()){var e=Math.max($a.documentElement.clientHeight,n.innerHeight||0)+n.scrollY;e>this.maxScrollViewDepth&&(this.maxScrollViewDepth=e),this.previousScrollHeight=$a.body.scrollHeight}}.bind(this));this.listenerScrollDepth=e.listener,n.addEventListener(e.eventType,this.listenerScrollDepth)}},Autocapture.prototype.initClickTracking=function(){n.removeEventListener(bc,this.listenerClick),(this.getConfig(tu)||this.mp.get_config("record_heatmap_data"))&&(Uc.log("Initializing click tracking"),this.listenerClick=function(e){(this.getConfig(tu)||this.mp.is_recording_heatmap_data())&&this.trackDomEvent(e,pu)}.bind(this),n.addEventListener(bc,this.listenerClick))},Autocapture.prototype.initDeadClickTracking=function(){this._getClickTrackingConfig(ru)||this.mp.get_config("record_heatmap_data")?(Uc.log("Initializing dead click tracking"),this._deadClickTracker||(this._deadClickTracker=new DeadClickTracker(function(e){this.trackDomEvent(e,hu)}.bind(this)),this._deadClickTracker.startTracking()),this.listenerDeadClick||(this.listenerDeadClick=function(e){var t=this._getClickTrackingConfig(ru);if((t||this.mp.is_recording_heatmap_data())&&!this.currentUrlBlocked()){var r=t||{};r.timeout_ms||(r.timeout_ms=500),this._deadClickTracker.trackClick(e,r)}}.bind(this),n.addEventListener(bc,this.listenerDeadClick))):this.stopDeadClickTracking()},Autocapture.prototype.initInputTracking=function(){n.removeEventListener(yc,this.listenerChange),this.getConfig(nu)&&(Uc.log("Initializing input tracking"),this.listenerChange=function(e){this.getConfig(nu)&&this.trackDomEvent(e,"$mp_input_change")}.bind(this),n.addEventListener(yc,this.listenerChange))},Autocapture.prototype.initPageviewTracking=function(){if(n.removeEventListener(Sc,this.listenerLocationchange),this.pageviewTrackingConfig()){Uc.log("Initializing pageview tracking");var e="",t=!1;this.currentUrlBlocked()||(t=this.mp.track_pageview(lu)),t&&(e=Za.info.currentUrl()),this.listenerLocationchange=safewrap(function(){if(!this.currentUrlBlocked()){var t=Za.info.currentUrl(),r=!1,n=t.split("#")[0].split("?")[0]!==e.split("#")[0].split("?")[0],i=this.pageviewTrackingConfig();if(i===Wc?r=t!==e:"url-with-path-and-query-string"===i?r=t.split("#")[0]!==e.split("#")[0]:"url-with-path"===i&&(r=n),r)this.mp.track_pageview(lu)&&(e=t),n&&(this.lastScrollCheckpoint=0,Uc.log("Path change: re-initializing scroll depth checkpoints"))}}.bind(this)),n.addEventListener(Sc,this.listenerLocationchange)}},Autocapture.prototype.initRageClickTracking=function(){n.removeEventListener(bc,this.listenerRageClick),(this._getClickTrackingConfig(ou)||this.mp.get_config("record_heatmap_data"))&&(Uc.log("Initializing rage click tracking"),this._rageClickTracker||(this._rageClickTracker=new RageClickTracker),this.listenerRageClick=function(e){var t=this._getClickTrackingConfig(ou);(t||this.mp.is_recording_heatmap_data())&&(this.currentUrlBlocked()||this._rageClickTracker.isRageClick(e.pageX,e.pageY,t)&&this.trackDomEvent(e,du))}.bind(this),n.addEventListener(bc,this.listenerRageClick))},Autocapture.prototype.initScrollTracking=function(){if(n.removeEventListener(Ic,this.listenerScroll),n.removeEventListener(xc,this.listenerScroll),this.getConfig(su)){Uc.log("Initializing scroll tracking"),this.lastScrollCheckpoint=0;var e=getPolyfillScrollEndFunction(function(){if(this.getConfig(su)&&!this.currentUrlBlocked()){var e=this.getConfig(Qc),t=(this.getConfig(eu)||[]).slice().sort(function(e,t){return e-t}),r=n.scrollY,i=Za.extend({$scroll_top:r},lu);try{var o=$a.body.scrollHeight,s=Math.round(r/(o-n.innerHeight)*100);if(i.$scroll_height=o,i.$scroll_percentage=s,s>this.lastScrollCheckpoint)for(var a=0;a<t.length;a++){var c=t[a];s>=c&&this.lastScrollCheckpoint<c&&(i.$scroll_checkpoint=c,this.lastScrollCheckpoint=c,e=!0)}}catch(e){Uc.critical("Error while calculating scroll percentage",e)}e&&this.mp.track("$mp_scroll",i)}}.bind(this));this.listenerScroll=e.listener,n.addEventListener(e.eventType,this.listenerScroll)}},Autocapture.prototype.initSubmitTracking=function(){n.removeEventListener(Oc,this.listenerSubmit),this.getConfig(cu)&&(Uc.log("Initializing submit tracking"),this.listenerSubmit=function(e){this.getConfig(cu)&&this.trackDomEvent(e,"$mp_submit")}.bind(this),n.addEventListener(Oc,this.listenerSubmit))},Autocapture.prototype.initPageLeaveTracking=function(){if($a.removeEventListener(Ec,this.listenerPageLeaveVisibilitychange),n.removeEventListener(Sc,this.listenerPageLeaveLocationchange),n.removeEventListener(kc,this.listenerPageLoad),this.getConfig(au)||this.mp.get_config("record_heatmap_data")){Uc.log("Initializing page visibility tracking."),this._initScrollDepthTracking();var e=Za.info.currentUrl();this.listenerPageLoad=function(){this.previousScrollHeight=$a.body.scrollHeight}.bind(this),n.addEventListener(kc,this.listenerPageLoad),this.listenerPageLeaveLocationchange=safewrap(function(t){if(!this.currentUrlBlocked()){var r=Za.info.currentUrl();r!==e&&(this._trackPageLeave(t,e,this.previousScrollHeight),e=r,this.maxScrollViewDepth=Math.max($a.documentElement.clientHeight,n.innerHeight||0),this.previousScrollHeight=$a.body.scrollHeight,this.hasTrackedScrollSession=!1)}}.bind(this)),n.addEventListener(Sc,this.listenerPageLeaveLocationchange),this.listenerPageLeaveVisibilitychange=function(t){$a.hidden&&this._trackPageLeave(t,e,this.previousScrollHeight)}.bind(this),$a.addEventListener(Ec,this.listenerPageLeaveVisibilitychange)}},Autocapture.prototype.stopDeadClickTracking=function(){this.listenerDeadClick&&(n.removeEventListener(bc,this.listenerDeadClick),this.listenerDeadClick=null),this._deadClickTracker&&(this._deadClickTracker.stopTracking(),this._deadClickTracker=null)},safewrapClass(Autocapture);var fu=console_with_prefix("flags"),gu="flags",mu="context",vu={};vu[mu]={};var FeatureFlagManager=function(e){this.fetch=n.fetch,this.getFullApiRoute=e.getFullApiRoute,this.getMpConfig=e.getConfigFunc,this.setMpConfig=e.setConfigFunc,this.getMpProperty=e.getPropertyFunc,this.track=e.trackingFunc};FeatureFlagManager.prototype.init=function(){this.minApisSupported()?(this.flags=null,this.fetchFlags(),this.trackedFeatures=new Set):fu.critical("Feature Flags unavailable: missing minimum required APIs")},FeatureFlagManager.prototype.getFullConfig=function(){var e=this.getMpConfig(gu);return e?Za.isObject(e)?Za.extend({},vu,e):vu:{}},FeatureFlagManager.prototype.getConfig=function(e){return this.getFullConfig()[e]},FeatureFlagManager.prototype.isSystemEnabled=function(){return!!this.getMpConfig(gu)},FeatureFlagManager.prototype.updateContext=function(e,t){if(!this.isSystemEnabled())return fu.critical("Feature Flags not enabled, cannot update context"),Promise.resolve();var r=this.getMpConfig(gu);Za.isObject(r)||(r={});var n=t&&t.replace?{}:this.getConfig(mu);return r[mu]=Za.extend({},n,e),this.setMpConfig(gu,r),this.fetchFlags()},FeatureFlagManager.prototype.areFlagsReady=function(){return this.isSystemEnabled()||fu.error("Feature Flags not enabled"),!!this.flags},FeatureFlagManager.prototype.fetchFlags=function(){if(!this.isSystemEnabled())return Promise.resolve();var e=this.getMpProperty("distinct_id"),t=this.getMpProperty("$device_id"),r="00-"+Za.UUID().replace(/-/g,"")+"-"+Za.UUID().replace(/-/g,"").substring(0,16)+"-01";fu.log("Fetching flags for distinct ID: "+e);var i=Za.extend({distinct_id:e,device_id:t},this.getConfig(mu)),o=new URLSearchParams;o.set("context",JSON.stringify(i)),o.set("token",this.getMpConfig("token")),o.set("mp_lib","web"),o.set("$lib_version",Ma.LIB_VERSION);var s=this.getFullApiRoute()+"?"+o.toString();return this._fetchInProgressStartTime=Date.now(),this.fetchPromise=this.fetch.call(n,s,{method:"GET",headers:{Authorization:"Basic "+btoa(this.getMpConfig("token")+":"),traceparent:r}}).then(function(e){return this.markFetchComplete(),e.json().then(function(e){var t=e.flags;if(!t)throw new Error("No flags in API response");var n=new Map;Za.each(t,function(e,t){n.set(t,{key:e.variant_key,value:e.variant_value,experiment_id:e.experiment_id,is_experiment_active:e.is_experiment_active,is_qa_tester:e.is_qa_tester})}),this.flags=n,this._traceparent=r}.bind(this)).catch(function(e){this.markFetchComplete(),fu.error(e)}.bind(this))}.bind(this)).catch(function(e){this.markFetchComplete(),fu.error(e)}.bind(this)),this.fetchPromise},FeatureFlagManager.prototype.markFetchComplete=function(){this._fetchInProgressStartTime?(this._fetchStartTime=this._fetchInProgressStartTime,this._fetchCompleteTime=Date.now(),this._fetchLatency=this._fetchCompleteTime-this._fetchStartTime,this._fetchInProgressStartTime=null):fu.error("Fetch in progress started time not set, cannot mark fetch complete")},FeatureFlagManager.prototype.getVariant=function(e,t){return this.fetchPromise?this.fetchPromise.then(function(){return this.getVariantSync(e,t)}.bind(this)).catch(function(e){return fu.error(e),t}):new Promise(function(e){fu.critical("Feature Flags not initialized"),e(t)})},FeatureFlagManager.prototype.getVariantSync=function(e,t){if(!this.areFlagsReady())return fu.log("Flags not loaded yet"),t;var r=this.flags.get(e);return r?(this.trackFeatureCheck(e,r),r):(fu.log('No flag found: "'+e+'"'),t)},FeatureFlagManager.prototype.getVariantValue=function(e,t){return this.getVariant(e,{value:t}).then(function(e){return e.value}).catch(function(e){return fu.error(e),t})},FeatureFlagManager.prototype.getFeatureData=function(e,t){return fu.critical("mixpanel.flags.get_feature_data() is deprecated and will be removed in a future release. Use mixpanel.flags.get_variant_value() instead."),this.getVariantValue(e,t)},FeatureFlagManager.prototype.getVariantValueSync=function(e,t){return this.getVariantSync(e,{value:t}).value},FeatureFlagManager.prototype.isEnabled=function(e,t){return this.getVariantValue(e).then(function(){return this.isEnabledSync(e,t)}.bind(this)).catch(function(e){return fu.error(e),t})},FeatureFlagManager.prototype.isEnabledSync=function(e,t){t=t||!1;var r=this.getVariantValueSync(e,t);return!0!==r&&!1!==r&&(fu.error('Feature flag "'+e+'" value: '+r+" is not a boolean; returning fallback value: "+t),r=t),r},FeatureFlagManager.prototype.trackFeatureCheck=function(e,t){if(!this.trackedFeatures.has(e)){this.trackedFeatures.add(e);var r={"Experiment name":e,"Variant name":t.key,$experiment_type:"feature_flag","Variant fetch start time":new Date(this._fetchStartTime).toISOString(),"Variant fetch complete time":new Date(this._fetchCompleteTime).toISOString(),"Variant fetch latency (ms)":this._fetchLatency,"Variant fetch traceparent":this._traceparent};"undefined"!==t.experiment_id&&(r.$experiment_id=t.experiment_id),"undefined"!==t.is_experiment_active&&(r.$is_experiment_active=t.is_experiment_active),"undefined"!==t.is_qa_tester&&(r.$is_qa_tester=t.is_qa_tester),this.track("$experiment_started",r)}},FeatureFlagManager.prototype.minApisSupported=function(){return!!this.fetch&&"undefined"!=typeof Promise&&"undefined"!=typeof Map&&"undefined"!=typeof Set},safewrapClass(FeatureFlagManager),FeatureFlagManager.prototype.are_flags_ready=FeatureFlagManager.prototype.areFlagsReady,FeatureFlagManager.prototype.get_variant=FeatureFlagManager.prototype.getVariant,FeatureFlagManager.prototype.get_variant_sync=FeatureFlagManager.prototype.getVariantSync,FeatureFlagManager.prototype.get_variant_value=FeatureFlagManager.prototype.getVariantValue,FeatureFlagManager.prototype.get_variant_value_sync=FeatureFlagManager.prototype.getVariantValueSync,FeatureFlagManager.prototype.is_enabled=FeatureFlagManager.prototype.isEnabled,FeatureFlagManager.prototype.is_enabled_sync=FeatureFlagManager.prototype.isEnabledSync,FeatureFlagManager.prototype.update_context=FeatureFlagManager.prototype.updateContext,FeatureFlagManager.prototype.get_feature_data=FeatureFlagManager.prototype.getFeatureData;var DomTracker=function(){};DomTracker.prototype.create_properties=function(){},DomTracker.prototype.event_handler=function(){},DomTracker.prototype.after_track_handler=function(){},DomTracker.prototype.init=function(e){return this.mp=e,this},DomTracker.prototype.track=function(e,t,r,n){var i=this,o=Za.dom_query(e);if(0!==o.length)return Za.each(o,function(e){Za.register_event(e,this.override_event,function(e){var o={},s=i.create_properties(r,this),a=i.mp.get_config("track_links_timeout");i.event_handler(e,this,o),window.setTimeout(i.track_callback(n,s,o,!0),a),i.mp.track(t,s,i.track_callback(n,s,o))})},this),!0;Xa.error("The DOM query ("+e+") returned 0 elements")},DomTracker.prototype.track_callback=function(e,t,r,n){n=n||!1;var i=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||i.after_track_handler(t,r,n))}},DomTracker.prototype.create_properties=function(e,t){return"function"==typeof e?e(t):Za.extend({},e)};var LinkTracker=function(){this.override_event="click"};Za.inherit(LinkTracker,DomTracker),LinkTracker.prototype.create_properties=function(e,t){var r=LinkTracker.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},LinkTracker.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},LinkTracker.prototype.after_track_handler=function(e,t){t.new_tab||setTimeout(function(){window.location=t.href},0)};var FormTracker=function(){this.override_event="submit"};Za.inherit(FormTracker,DomTracker),FormTracker.prototype.event_handler=function(e,t,r){r.element=t,e.preventDefault()},FormTracker.prototype.after_track_handler=function(e,t){setTimeout(function(){t.element.submit()},0)};var _u="$set",yu="$set_once",bu="$unset",wu="$add",ku="$append",Su="$union",Cu="$remove",Iu={set_action:function(e,t){var r={},n={};return Za.isObject(e)?Za.each(e,function(e,t){this._is_reserved_property(t)||(n[t]=e)},this):n[e]=t,r[_u]=n,r},unset_action:function(e){var t={},r=[];return Za.isArray(e)||(e=[e]),Za.each(e,function(e){this._is_reserved_property(e)||r.push(e)},this),t[bu]=r,t},set_once_action:function(e,t){var r={},n={};return Za.isObject(e)?Za.each(e,function(e,t){this._is_reserved_property(t)||(n[t]=e)},this):n[e]=t,r[yu]=n,r},union_action:function(e,t){var r={},n={};return Za.isObject(e)?Za.each(e,function(e,t){this._is_reserved_property(t)||(n[t]=Za.isArray(e)?e:[e])},this):n[e]=Za.isArray(t)?t:[t],r[Su]=n,r},append_action:function(e,t){var r={},n={};return Za.isObject(e)?Za.each(e,function(e,t){this._is_reserved_property(t)||(n[t]=e)},this):n[e]=t,r[ku]=n,r},remove_action:function(e,t){var r={},n={};return Za.isObject(e)?Za.each(e,function(e,t){this._is_reserved_property(t)||(n[t]=e)},this):n[e]=t,r[Cu]=n,r},delete_action:function(){var e={$delete:""};return e}},MixpanelGroup=function(){};Za.extend(MixpanelGroup.prototype,Iu),MixpanelGroup.prototype._init=function(e,t,r){this._mixpanel=e,this._group_key=t,this._group_id=r},MixpanelGroup.prototype.set=addOptOutCheckMixpanelGroup(function(e,t,r){var n=this.set_action(e,t);return Za.isObject(e)&&(r=t),this._send_request(n,r)}),MixpanelGroup.prototype.set_once=addOptOutCheckMixpanelGroup(function(e,t,r){var n=this.set_once_action(e,t);return Za.isObject(e)&&(r=t),this._send_request(n,r)}),MixpanelGroup.prototype.unset=addOptOutCheckMixpanelGroup(function(e,t){var r=this.unset_action(e);return this._send_request(r,t)}),MixpanelGroup.prototype.union=addOptOutCheckMixpanelGroup(function(e,t,r){Za.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)}),MixpanelGroup.prototype.delete=addOptOutCheckMixpanelGroup(function(e){var t=this.delete_action();return this._send_request(t,e)}),MixpanelGroup.prototype.remove=addOptOutCheckMixpanelGroup(function(e,t,r){var n=this.remove_action(e,t);return this._send_request(n,r)}),MixpanelGroup.prototype._send_request=function(e,t){e.$group_key=this._group_key,e.$group_id=this._group_id,e.$token=this._get_config("token");var r=Za.encodeDates(e);return this._mixpanel._track_or_batch({type:"groups",data:r,endpoint:this._mixpanel.get_api_host("groups")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},t)},MixpanelGroup.prototype._is_reserved_property=function(e){return"$group_key"===e||"$group_id"===e},MixpanelGroup.prototype._get_config=function(e){return this._mixpanel.get_config(e)},MixpanelGroup.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},MixpanelGroup.prototype.remove=MixpanelGroup.prototype.remove,MixpanelGroup.prototype.set=MixpanelGroup.prototype.set,MixpanelGroup.prototype.set_once=MixpanelGroup.prototype.set_once,MixpanelGroup.prototype.union=MixpanelGroup.prototype.union,MixpanelGroup.prototype.unset=MixpanelGroup.prototype.unset,MixpanelGroup.prototype.toString=MixpanelGroup.prototype.toString;var MixpanelPeople=function(){};Za.extend(MixpanelPeople.prototype,Iu),MixpanelPeople.prototype._init=function(e){this._mixpanel=e},MixpanelPeople.prototype.set=addOptOutCheckMixpanelPeople(function(e,t,r){var n=this.set_action(e,t);return Za.isObject(e)&&(r=t),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),n[_u]=Za.extend({},Za.info.people_properties(),n[_u]),this._send_request(n,r)}),MixpanelPeople.prototype.set_once=addOptOutCheckMixpanelPeople(function(e,t,r){var n=this.set_once_action(e,t);return Za.isObject(e)&&(r=t),this._send_request(n,r)}),MixpanelPeople.prototype.unset=addOptOutCheckMixpanelPeople(function(e,t){var r=this.unset_action(e);return this._send_request(r,t)}),MixpanelPeople.prototype.increment=addOptOutCheckMixpanelPeople(function(e,t,r){var n={},i={};return Za.isObject(e)?(Za.each(e,function(e,t){if(!this._is_reserved_property(t)){if(isNaN(parseFloat(e)))return void Xa.error("Invalid increment value passed to mixpanel.people.increment - must be a number");i[t]=e}},this),r=t):(Za.isUndefined(t)&&(t=1),i[e]=t),n[wu]=i,this._send_request(n,r)}),MixpanelPeople.prototype.append=addOptOutCheckMixpanelPeople(function(e,t,r){Za.isObject(e)&&(r=t);var n=this.append_action(e,t);return this._send_request(n,r)}),MixpanelPeople.prototype.remove=addOptOutCheckMixpanelPeople(function(e,t,r){Za.isObject(e)&&(r=t);var n=this.remove_action(e,t);return this._send_request(n,r)}),MixpanelPeople.prototype.union=addOptOutCheckMixpanelPeople(function(e,t,r){Za.isObject(e)&&(r=t);var n=this.union_action(e,t);return this._send_request(n,r)}),MixpanelPeople.prototype.track_charge=addOptOutCheckMixpanelPeople(function(){Xa.error("mixpanel.people.track_charge() is deprecated and no longer has any effect.")}),MixpanelPeople.prototype.clear_charges=function(e){return this.set("$transactions",[],e)},MixpanelPeople.prototype.delete_user=function(){if(this._identify_called()){var e={$delete:this._mixpanel.get_distinct_id()};return this._send_request(e)}Xa.error("mixpanel.people.delete_user() requires you to call identify() first")},MixpanelPeople.prototype.toString=function(){return this._mixpanel.toString()+".people"},MixpanelPeople.prototype._send_request=function(e,t){e.$token=this._get_config("token"),e.$distinct_id=this._mixpanel.get_distinct_id();var r=this._mixpanel.get_property("$device_id"),n=this._mixpanel.get_property("$user_id"),i=this._mixpanel.get_property("$had_persisted_distinct_id");r&&(e.$device_id=r),n&&(e.$user_id=n),i&&(e.$had_persisted_distinct_id=i);var o=Za.encodeDates(e);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._mixpanel.get_api_host("people")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},t):(this._enqueue(e),Za.isUndefined(t)||(this._get_config("verbose")?t({status:-1,error:null}):t(-1)),Za.truncate(o,255))},MixpanelPeople.prototype._get_config=function(e){return this._mixpanel.get_config(e)},MixpanelPeople.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},MixpanelPeople.prototype._enqueue=function(e){_u in e?this._mixpanel.persistence._add_to_people_queue(_u,e):yu in e?this._mixpanel.persistence._add_to_people_queue(yu,e):bu in e?this._mixpanel.persistence._add_to_people_queue(bu,e):wu in e?this._mixpanel.persistence._add_to_people_queue(wu,e):ku in e?this._mixpanel.persistence._add_to_people_queue(ku,e):Cu in e?this._mixpanel.persistence._add_to_people_queue(Cu,e):Su in e?this._mixpanel.persistence._add_to_people_queue(Su,e):Xa.error("Invalid call to _enqueue():",e)},MixpanelPeople.prototype._flush_one_queue=function(e,t,r,n){var i=this,o=Za.extend({},this._mixpanel.persistence.load_queue(e)),s=o;Za.isUndefined(o)||!Za.isObject(o)||Za.isEmptyObject(o)||(i._mixpanel.persistence._pop_from_people_queue(e,o),i._mixpanel.persistence.save(),n&&(s=n(o)),t.call(i,s,function(t,n){0===t&&i._mixpanel.persistence._add_to_people_queue(e,o),Za.isUndefined(r)||r(t,n)}))},MixpanelPeople.prototype._flush=function(e,t,r,n,i,o,s){var a=this;this._flush_one_queue(_u,this.set,e),this._flush_one_queue(yu,this.set_once,n),this._flush_one_queue(bu,this.unset,o,function(e){return Za.keys(e)}),this._flush_one_queue(wu,this.increment,t),this._flush_one_queue(Su,this.union,i);var c=this._mixpanel.persistence.load_queue(ku);if(!Za.isUndefined(c)&&Za.isArray(c)&&c.length)for(var u,append_callback=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(ku,u),Za.isUndefined(r)||r(e,t)},l=c.length-1;l>=0;l--)c=this._mixpanel.persistence.load_queue(ku),u=c.pop(),a._mixpanel.persistence.save(),Za.isEmptyObject(u)||a.append(u,append_callback);var p=this._mixpanel.persistence.load_queue(Cu);if(!Za.isUndefined(p)&&Za.isArray(p)&&p.length)for(var h,remove_callback=function(e,t){0===e&&a._mixpanel.persistence._add_to_people_queue(Cu,h),Za.isUndefined(s)||s(e,t)},d=p.length-1;d>=0;d--)p=this._mixpanel.persistence.load_queue(Cu),h=p.pop(),a._mixpanel.persistence.save(),Za.isEmptyObject(h)||a.remove(h,remove_callback)},MixpanelPeople.prototype._is_reserved_property=function(e){return"$distinct_id"===e||"$token"===e||"$device_id"===e||"$user_id"===e||"$had_persisted_distinct_id"===e},MixpanelPeople.prototype.set=MixpanelPeople.prototype.set,MixpanelPeople.prototype.set_once=MixpanelPeople.prototype.set_once,MixpanelPeople.prototype.unset=MixpanelPeople.prototype.unset,MixpanelPeople.prototype.increment=MixpanelPeople.prototype.increment,MixpanelPeople.prototype.append=MixpanelPeople.prototype.append,MixpanelPeople.prototype.remove=MixpanelPeople.prototype.remove,MixpanelPeople.prototype.union=MixpanelPeople.prototype.union,MixpanelPeople.prototype.track_charge=MixpanelPeople.prototype.track_charge,MixpanelPeople.prototype.clear_charges=MixpanelPeople.prototype.clear_charges,MixpanelPeople.prototype.delete_user=MixpanelPeople.prototype.delete_user,MixpanelPeople.prototype.toString=MixpanelPeople.prototype.toString;var xu,Ou="__mps",Eu="__mpso",Mu="__mpus",Ru="__mpa",Au="__mpap",Tu="__mpr",Pu="__mpu",Nu="$people_distinct_id",Du="__alias",Lu="__timers",Fu=[Ou,Eu,Mu,Ru,Au,Tu,Pu,Nu,Du,Lu],MixpanelPersistence=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="mp_"+e.persistence_name:this.name="mp_"+e.token+"_mixpanel";var t=e.persistence;"cookie"!==t&&"localStorage"!==t&&(Xa.critical("Unknown persistence type "+t+"; falling back to cookie"),t=e.persistence="cookie"),"localStorage"===t&&Za.localStorage.is_supported()?this.storage=Za.localStorage:this.storage=Za.cookie,this.load(),this.update_config(e),this.upgrade(),this.save()};MixpanelPersistence.prototype.properties=function(){var e={};return this.load(),Za.each(this.props,function(t,r){Za.include(Fu,r)||(e[r]=t)}),e},MixpanelPersistence.prototype.load=function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=Za.extend({},e))}},MixpanelPersistence.prototype.upgrade=function(){var e,t;this.storage===Za.localStorage?(e=Za.cookie.parse(this.name),Za.cookie.remove(this.name),Za.cookie.remove(this.name,!0),e&&this.register_once(e)):this.storage===Za.cookie&&(t=Za.localStorage.parse(this.name),Za.localStorage.remove(this.name),t&&this.register_once(t))},MixpanelPersistence.prototype.save=function(){this.disabled||this.storage.set(this.name,sc(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},MixpanelPersistence.prototype.load_prop=function(e){return this.load(),this.props[e]},MixpanelPersistence.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},MixpanelPersistence.prototype.clear=function(){this.remove(),this.props={}},MixpanelPersistence.prototype.register_once=function(e,t,r){return!!Za.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,this.load(),Za.each(e,function(e,r){this.props.hasOwnProperty(r)&&this.props[r]!==t||(this.props[r]=e)},this),this.save(),!0)},MixpanelPersistence.prototype.register=function(e,t){return!!Za.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,this.load(),Za.extend(this.props,e),this.save(),!0)},MixpanelPersistence.prototype.unregister=function(e){this.load(),e in this.props&&(delete this.props[e],this.save())},MixpanelPersistence.prototype.update_search_keyword=function(e){this.register(Za.info.searchInfo(e))},MixpanelPersistence.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:Za.info.referringDomain(e)||"$direct"},"")},MixpanelPersistence.prototype.get_referrer_info=function(){return Za.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},MixpanelPersistence.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cookie_domain(e.cookie_domain),this.set_cross_site(e.cross_site_cookie),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},MixpanelPersistence.prototype.set_disabled=function(e){this.disabled=e,this.disabled?this.remove():this.save()},MixpanelPersistence.prototype.set_cookie_domain=function(e){e!==this.cookie_domain&&(this.remove(),this.cookie_domain=e,this.save())},MixpanelPersistence.prototype.set_cross_site=function(e){e!==this.cross_site&&(this.cross_site=e,this.remove(),this.save())},MixpanelPersistence.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},MixpanelPersistence.prototype.get_cross_subdomain=function(){return this.cross_subdomain},MixpanelPersistence.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},MixpanelPersistence.prototype._add_to_people_queue=function(e,t){var r=this._get_queue_key(e),n=t[e],i=this._get_or_create_queue(_u),o=this._get_or_create_queue(yu),s=this._get_or_create_queue(bu),a=this._get_or_create_queue(wu),c=this._get_or_create_queue(Su),u=this._get_or_create_queue(Cu,[]),l=this._get_or_create_queue(ku,[]);r===Ou?(Za.extend(i,n),this._pop_from_people_queue(wu,n),this._pop_from_people_queue(Su,n),this._pop_from_people_queue(bu,n)):r===Eu?(Za.each(n,function(e,t){t in o||(o[t]=e)}),this._pop_from_people_queue(bu,n)):r===Mu?Za.each(n,function(e){Za.each([i,o,a,c],function(t){e in t&&delete t[e]}),Za.each(l,function(t){e in t&&delete t[e]}),s[e]=!0}):r===Ru?(Za.each(n,function(e,t){t in i?i[t]+=e:(t in a||(a[t]=0),a[t]+=e)},this),this._pop_from_people_queue(bu,n)):r===Pu?(Za.each(n,function(e,t){Za.isArray(e)&&(t in c||(c[t]=[]),Za.each(e,function(e){Za.include(c[t],e)||c[t].push(e)}))}),this._pop_from_people_queue(bu,n)):r===Tu?(u.push(n),this._pop_from_people_queue(ku,n)):r===Au&&(l.push(n),this._pop_from_people_queue(bu,n)),Xa.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),Xa.log(t),this.save()},MixpanelPersistence.prototype._pop_from_people_queue=function(e,t){var r=this.props[this._get_queue_key(e)];Za.isUndefined(r)||Za.each(t,function(t,n){e===ku||e===Cu?Za.each(r,function(e){e[n]===t&&delete e[n]}):delete r[n]},this)},MixpanelPersistence.prototype.load_queue=function(e){return this.load_prop(this._get_queue_key(e))},MixpanelPersistence.prototype._get_queue_key=function(e){return e===_u?Ou:e===yu?Eu:e===bu?Mu:e===wu?Ru:e===ku?Au:e===Cu?Tu:e===Su?Pu:void Xa.error("Invalid queue:",e)},MixpanelPersistence.prototype._get_or_create_queue=function(e,t){var r=this._get_queue_key(e);return t=Za.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},MixpanelPersistence.prototype.set_event_timer=function(e,t){var r=this.load_prop(Lu)||{};r[e]=t,this.props[Lu]=r,this.save()},MixpanelPersistence.prototype.remove_event_timer=function(e){var t=(this.load_prop(Lu)||{})[e];return Za.isUndefined(t)||(delete this.props[Lu][e],this.save()),t};var Uu,load_extra_bundle=function(e,t){throw new Error(e+" not available in this build.")},IDENTITY_FUNC=function(e){return e},Bu="mixpanel",$u="base64",zu="$device:",ju=n.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,qu=!ju&&-1===qa.indexOf("MSIE")&&-1===qa.indexOf("Mozilla"),Wu=null;Ba.sendBeacon&&(Wu=function(){return Ba.sendBeacon.apply(Ba,arguments)});var Vu={track:"track/",engage:"engage/",groups:"groups/",record:"record/",flags:"flags/"},Gu={api_host:"https://api-js.mixpanel.com",api_hosts:{},api_routes:Vu,api_extra_query_params:{},api_method:"POST",api_transport:"XHR",api_payload_format:$u,app_host:"https://mixpanel.com",autocapture:!1,cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:NOOP_FUNC,flags:!1,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:NOOP_FUNC,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{},record_block_class:new RegExp("^(mp-block|fs-exclude|amp-block|rr-block|ph-no-capture)$"),record_block_selector:"img, video, audio",record_canvas:!1,record_collect_fonts:!1,record_heatmap_data:!1,record_idle_timeout_ms:18e5,record_mask_text_class:new RegExp("^(mp-mask|fs-mask|amp-mask|rr-mask|ph-mask)$"),record_mask_text_selector:"*",record_max_ms:Ra,record_min_ms:0,record_sessions_percent:0,recorder_src:"https://cdn.mxpnl.com/libs/mixpanel-recorder.min.js"},Hu=!1,MixpanelLib=function(){},create_mplib=function(e,t,r){var n,i=r===Bu?Uu:Uu[r];if(i&&0===xu)n=i;else{if(i&&!Za.isArray(i))return void Xa.error("You have already initialized "+r);n=new MixpanelLib}if(n._cached_groups={},n._init(e,t,r),n.people=new MixpanelPeople,n.people._init(n),!n.get_config("skip_first_touch_marketing")){var o=Za.info.campaignParams(null),s={},a=!1;Za.each(o,function(e,t){s["initial_"+t]=e,e&&(a=!0)}),a&&n.people.set_once(s)}return Ma.DEBUG=Ma.DEBUG||n.get_config("debug"),!Za.isUndefined(i)&&Za.isArray(i)&&(n._execute_array.call(n.people,i.people),n._execute_array(i)),n};MixpanelLib.prototype.init=function(e,t,r){if(Za.isUndefined(r))this.report_error("You must name your new library: init(token, config, name)");else{if(r!==Bu){var n=create_mplib(e,t,r);return Uu[r]=n,n._loaded(),n}this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")}},MixpanelLib.prototype._init=function(e,t,r){t=t||{},this.__loaded=!0,this.config={};var i={};"api_payload_format"in t||(t.api_host||Gu.api_host).match(/\.mixpanel\.com/)&&(i.api_payload_format="json");if(this.set_config(Za.extend({},Gu,i,t,{name:r,token:e,callback_fn:(r===Bu?r:Bu+"."+r)+"._jsc"})),this._jsc=NOOP_FUNC,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests)if(Za.localStorage.is_supported(!0)&&ju){if(this.init_batchers(),Wu&&n.addEventListener){var o=Za.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);n.addEventListener("pagehide",function(e){e.persisted&&o()}),n.addEventListener("visibilitychange",function(){"hidden"===$a.visibilityState&&o()})}}else this._batch_requests=!1,Xa.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),Za.each(this.get_batcher_configs(),function(e){Xa.log("Clearing batch queue "+e.queue_key),Za.localStorage.remove(e.queue_key)});this.persistence=this.cookie=new MixpanelPersistence(this.config),this.unpersisted_superprops={},this._gdpr_init();var s=Za.UUID();this.get_distinct_id()||this.register_once({distinct_id:zu+s,$device_id:s},""),this.flags=new FeatureFlagManager({getFullApiRoute:Za.bind(function(){return this.get_api_host("flags")+"/"+this.get_config("api_routes").flags},this),getConfigFunc:Za.bind(this.get_config,this),setConfigFunc:Za.bind(this.set_config,this),getPropertyFunc:Za.bind(this.get_property,this),trackingFunc:Za.bind(this.track,this)}),this.flags.init(),this.flags=this.flags,this.autocapture=new Autocapture(this),this.autocapture.init(),this._init_tab_id(),this._check_and_start_session_recording()},MixpanelLib.prototype._init_tab_id=function(){if(this.get_config("disable_persistence"))Xa.log("Tab ID initialization skipped due to disable_persistence config");else if(Za.sessionStorage.is_supported())try{var e=this.get_config("name")+"_"+this.get_config("token"),t="mp_tab_id_"+e,r="mp_gen_new_tab_id_"+e;!Za.sessionStorage.get(r)&&Za.sessionStorage.get(t)||Za.sessionStorage.set(t,"$tab-"+Za.UUID()),Za.sessionStorage.set(r,"1"),this.tab_id=Za.sessionStorage.get(t),n.addEventListener("beforeunload",function(){Za.sessionStorage.remove(r)})}catch(e){this.report_error("Error initializing tab id",e)}else this.report_error("Session storage is not supported, cannot keep track of unique tab ID.")},MixpanelLib.prototype.get_tab_id=function(){return this.tab_id||null},MixpanelLib.prototype._should_load_recorder=function(){if(this.get_config("disable_persistence"))return Xa.log("Load recorder check skipped due to disable_persistence config"),Promise.resolve(!1);var e=new IDBStorageWrapper(uc),t=this.get_tab_id();return e.init().then(function(){return e.getAll()}).then(function(e){for(var r=0;r<e.length;r++)if(isRecordingExpired(e[r])||e[r].tabId===t)return!0;return!1}).catch(Za.bind(function(e){this.report_error("Error checking recording registry",e)},this))},MixpanelLib.prototype._check_and_start_session_recording=addOptOutCheckMixpanelLib(function(e){if(n.MutationObserver){var t=Za.bind(function(e){var t=Za.bind(function(){this._recorder=this._recorder||new n.__mp_recorder(this),this._recorder.resumeRecording(e)},this);Za.isUndefined(n.__mp_recorder)?load_extra_bundle(this.get_config("recorder_src"),t):t()},this),r=this.get_config("record_sessions_percent")>0&&100*Math.random()<=this.get_config("record_sessions_percent");e||r?t(!0):this._should_load_recorder().then(function(e){e&&t(!1)})}else Xa.critical("Browser does not support MutationObserver; skipping session recording")}),MixpanelLib.prototype.start_session_recording=function(){this._check_and_start_session_recording(!0)},MixpanelLib.prototype.stop_session_recording=function(){return this._recorder?this._recorder.stopRecording():Promise.resolve()},MixpanelLib.prototype.pause_session_recording=function(){return this._recorder?this._recorder.pauseRecording():Promise.resolve()},MixpanelLib.prototype.resume_session_recording=function(){return this._recorder?this._recorder.resumeRecording():Promise.resolve()},MixpanelLib.prototype.is_recording_heatmap_data=function(){return this._get_session_replay_id()&&this.get_config("record_heatmap_data")},MixpanelLib.prototype.get_session_recording_properties=function(){var e={},t=this._get_session_replay_id();return t&&(e.$mp_replay_id=t),e},MixpanelLib.prototype.get_session_replay_url=function(){var e=null,t=this._get_session_replay_id();t&&(e="https://mixpanel.com/projects/replay-redirect?"+Za.HTTPBuildQuery({replay_id:t,distinct_id:this.get_distinct_id(),token:this.get_config("token")}));return e},MixpanelLib.prototype._get_session_replay_id=function(){var e=null;return this._recorder&&(e=this._recorder.replayId),e||null},MixpanelLib.prototype.__get_recorder=function(){return this._recorder},MixpanelLib.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var e=Za.info.campaignParams(null);Za.each(e,function(e,t){this.unregister(t)}.bind(this))}},MixpanelLib.prototype._set_default_superprops=function(){this.persistence.update_search_keyword($a.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register(Za.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info($a.referrer)},MixpanelLib.prototype._dom_loaded=function(){Za.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e)},this),this.has_opted_out_tracking()||Za.each(this.__request_queue,function(e){this._send_request.apply(this,e)},this),delete this.__dom_loaded_queue,delete this.__request_queue},MixpanelLib.prototype._track_dom=function(e,t){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Hu)return this.__dom_loaded_queue.push([e,t]),!1;var r=(new e).init(this);return r.track.apply(r,t)},MixpanelLib.prototype._prepare_callback=function(e,t){if(Za.isUndefined(e))return null;if(ju){return function(r){e(r,t)}}var r=this._jsc,n=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+n+"]";return r[n]=function(i){delete r[n],e(i,t)},i},MixpanelLib.prototype._send_request=function(e,t,r,n){var i=!0;if(qu)return this.__request_queue.push(arguments),i;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;n||!Za.isFunction(r)&&"string"!=typeof r||(n=r,r=null),r=Za.extend(o,r||{}),ju||(r.method="GET");var a="POST"===r.method,c=Wu&&a&&"sendbeacon"===r.transport.toLowerCase(),u=r.verbose;t.verbose&&(u=!0),this.get_config("test")&&(t.test=1),u&&(t.verbose=1),this.get_config("img")&&(t.img=1),ju||(n?t.callback=n:(u||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=(new Date).getTime().toString(),a&&(s="data="+encodeURIComponent(t.data),delete t.data),Za.extend(t,this.get_config("api_extra_query_params")),e+="?"+Za.HTTPBuildQuery(t);var l=this;if("img"in t){var p=$a.createElement("img");p.src=e,$a.body.appendChild(p)}else if(c){try{i=Wu(e,s)}catch(e){l.report_error(e),i=!1}try{n&&n(i?1:0)}catch(e){l.report_error(e)}}else if(ju)try{var h=new XMLHttpRequest;h.open(r.method,e,!0);var d=this.get_config("xhr_headers");if(a&&(d["Content-Type"]="application/x-www-form-urlencoded"),Za.each(d,function(e,t){h.setRequestHeader(t,e)}),r.timeout_ms&&void 0!==h.timeout){h.timeout=r.timeout_ms;var f=(new Date).getTime()}h.withCredentials=!0,h.onreadystatechange=function(){var e;if(4===h.readyState)if(200===h.status){if(n)if(u){var t;try{t=Za.JSONDecode(h.responseText)}catch(e){if(l.report_error(e),!r.ignore_json_errors)return;t=h.responseText}n(t)}else n(Number(h.responseText))}else if(e=h.timeout&&!h.status&&(new Date).getTime()-f>=h.timeout?"timeout":"Bad HTTP status: "+h.status+" "+h.statusText,l.report_error(e),n)if(u){var i=h.responseHeaders||{};n({status:0,httpStatusCode:h.status,error:e,retryAfter:i["Retry-After"]})}else n(0)},h.send(s)}catch(e){l.report_error(e),i=!1}else{var g=$a.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=e;var m=$a.getElementsByTagName("script")[0];m.parentNode.insertBefore(g,m)}return i},MixpanelLib.prototype._execute_array=function(e){var t,r=[],n=[],i=[];Za.each(e,function(e){e&&(t=e[0],Za.isArray(t)?i.push(e):"function"==typeof e?e.call(this):Za.isArray(e)&&"alias"===t?r.push(e):Za.isArray(e)&&-1!==t.indexOf("track")&&"function"==typeof this[t]?i.push(e):n.push(e))},this);var execute=function(e,t){Za.each(e,function(e){if(Za.isArray(e[0])){var r=t;Za.each(e,function(e){r=r[e[0]].apply(r,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};execute(r,this),execute(n,this),execute(i,this)},MixpanelLib.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},MixpanelLib.prototype.get_batcher_configs=function(){var e="__mpq_"+this.get_config("token");return this._batcher_configs=this._batcher_configs||{events:{type:"events",api_name:"track",queue_key:e+"_ev"},people:{type:"people",api_name:"engage",queue_key:e+"_pp"},groups:{type:"groups",api_name:"groups",queue_key:e+"_gr"}},this._batcher_configs},MixpanelLib.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var e=Za.bind(function(e){return new RequestBatcher(e.queue_key,{libConfig:this.config,errorReporter:this.get_config("error_reporter"),sendRequestFunc:Za.bind(function(t,r,n){var i=this.get_config("api_routes");this._send_request(this.get_api_host(e.api_name)+"/"+i[e.api_name],this._encode_data_for_request(t),r,this._prepare_callback(n,t))},this),beforeSendHook:Za.bind(function(t){return this._run_hook("before_send_"+e.type,t)},this),stopAllBatchingFunc:Za.bind(this.stop_batch_senders,this),usePersistence:!0})},this),t=this.get_batcher_configs();this.request_batchers={events:e(t.events),people:e(t.people),groups:e(t.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()},MixpanelLib.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,Za.each(this.request_batchers,function(e){e.start()}))},MixpanelLib.prototype.stop_batch_senders=function(){this._batch_requests=!1,Za.each(this.request_batchers,function(e){e.stop(),e.clear()})},MixpanelLib.prototype.push=function(e){this._execute_array([e])},MixpanelLib.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},MixpanelLib.prototype._encode_data_for_request=function(e){var t=sc(e);return this.get_config("api_payload_format")===$u&&(t=Za.base64Encode(t)),{data:t}},MixpanelLib.prototype._track_or_batch=function(e,t){var r=Za.truncate(e.data,255),n=e.endpoint,i=e.batcher,o=e.should_send_immediately,s=e.send_request_options||{};t=t||NOOP_FUNC;var a=!0,c=Za.bind(function(){return s.skip_hooks||(r=this._run_hook("before_send_"+e.type,r)),r?(Xa.log("MIXPANEL REQUEST:"),Xa.log(r),this._send_request(n,this._encode_data_for_request(r),s,this._prepare_callback(t,r))):null},this);return this._batch_requests&&!o?i.enqueue(r).then(function(e){e?t(1,r):c()}):a=c(),a&&r},MixpanelLib.prototype.track=addOptOutCheckMixpanelLib(function(e,t,r,n){n||"function"!=typeof r||(n=r,r=null);var i=(r=r||{}).transport;i&&(r.transport=i);var o=r.send_immediately;if("function"!=typeof n&&(n=NOOP_FUNC),Za.isUndefined(e))this.report_error("No event name provided to mixpanel.track");else{if(!this._event_is_disabled(e)){(t=Za.extend({},t)).token=this.get_config("token");var s=this.persistence.remove_event_timer(e);if(!Za.isUndefined(s)){var a=(new Date).getTime()-s;t.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops();var c=this.get_config("track_marketing")?Za.info.marketingParams():{};t=Za.extend({},Za.info.properties({mp_loader:this.get_config("mp_loader")}),c,this.persistence.properties(),this.unpersisted_superprops,this.get_session_recording_properties(),t);var u=this.get_config("property_blacklist");Za.isArray(u)?Za.each(u,function(e){delete t[e]}):this.report_error("Invalid value for property_blacklist config: "+u);var l={event:e,properties:t};return this._track_or_batch({type:"events",data:l,endpoint:this.get_api_host("events")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:o,send_request_options:r},n)}n(0)}}),MixpanelLib.prototype.set_group=addOptOutCheckMixpanelLib(function(e,t,r){Za.isArray(t)||(t=[t]);var n={};return n[e]=t,this.register(n),this.people.set(e,t,r)}),MixpanelLib.prototype.add_group=addOptOutCheckMixpanelLib(function(e,t,r){var n=this.get_property(e),i={};return void 0===n?(i[e]=[t],this.register(i)):-1===n.indexOf(t)&&(n.push(t),i[e]=n,this.register(i)),this.people.union(e,t,r)}),MixpanelLib.prototype.remove_group=addOptOutCheckMixpanelLib(function(e,t,r){var n=this.get_property(e);if(void 0!==n){var i=n.indexOf(t);i>-1&&(n.splice(i,1),this.register({group_key:n})),0===n.length&&this.unregister(e)}return this.people.remove(e,t,r)}),MixpanelLib.prototype.track_with_groups=addOptOutCheckMixpanelLib(function(e,t,r,n){var i=Za.extend({},t||{});return Za.each(r,function(e,t){null!=e&&(i[t]=e)}),this.track(e,i,n)}),MixpanelLib.prototype._create_map_key=function(e,t){return e+"_"+JSON.stringify(t)},MixpanelLib.prototype._remove_group_from_cache=function(e,t){delete this._cached_groups[this._create_map_key(e,t)]},MixpanelLib.prototype.get_group=function(e,t){var r=this._create_map_key(e,t),n=this._cached_groups[r];return void 0!==n&&n._group_key===e&&n._group_id===t||((n=new MixpanelGroup)._init(this,e,t),this._cached_groups[r]=n),n},MixpanelLib.prototype.track_pageview=addOptOutCheckMixpanelLib(function(e,t){"object"!=typeof e&&(e={});var r=(t=t||{}).event_name||"$mp_web_page_view",n=Za.extend(Za.info.mpPageViewProperties(),Za.info.campaignParams(),Za.info.clickParams()),i=Za.extend({},n,e);return this.track(r,i)}),MixpanelLib.prototype.track_links=function(){return this._track_dom.call(this,LinkTracker,arguments)},MixpanelLib.prototype.track_forms=function(){return this._track_dom.call(this,FormTracker,arguments)},MixpanelLib.prototype.time_event=function(e){Za.isUndefined(e)?this.report_error("No event name provided to mixpanel.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())};var Ju={persistent:!0},options_for_register=function(e){var t;return t=Za.isObject(e)?e:Za.isUndefined(e)?{}:{days:e},Za.extend({},Ju,t)};MixpanelLib.prototype.register=function(e,t){var r=options_for_register(t);r.persistent?this.persistence.register(e,r.days):Za.extend(this.unpersisted_superprops,e)},MixpanelLib.prototype.register_once=function(e,t,r){var n=options_for_register(r);n.persistent?this.persistence.register_once(e,t,n.days):(void 0===t&&(t="None"),Za.each(e,function(e,r){this.unpersisted_superprops.hasOwnProperty(r)&&this.unpersisted_superprops[r]!==t||(this.unpersisted_superprops[r]=e)},this))},MixpanelLib.prototype.unregister=function(e,t){(t=options_for_register(t)).persistent?this.persistence.unregister(e):delete this.unpersisted_superprops[e]},MixpanelLib.prototype._register_single=function(e,t){var r={};r[e]=t,this.register(r)},MixpanelLib.prototype.identify=function(e,t,r,n,i,o,s,a){var c=this.get_distinct_id();if(e&&c!==e){if("string"==typeof e&&0===e.indexOf(zu))return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:e})}if(!this.get_property("$device_id")){var u=c;this.register_once({$had_persisted_distinct_id:!0,$device_id:u},"")}e!==c&&e!==this.get_property(Du)&&(this.unregister(Du),this.register({distinct_id:e})),this._flags.identify_called=!0,this.people._flush(t,r,n,i,o,s,a),e!==c&&this.track("$identify",{distinct_id:e,$anon_distinct_id:c},{skip_hooks:!0}),e!==c&&this.flags.fetchFlags()},MixpanelLib.prototype.reset=function(){this.stop_session_recording(),this.persistence.clear(),this._flags.identify_called=!1;var e=Za.UUID();this.register_once({distinct_id:zu+e,$device_id:e},""),this._check_and_start_session_recording()},MixpanelLib.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},MixpanelLib.prototype.alias=function(e,t){if(e===this.get_property(Nu))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var r=this;return Za.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(Du,e),this.track("$create_alias",{alias:e,distinct_id:t},{skip_hooks:!0},function(){r.identify(e)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)},MixpanelLib.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)},MixpanelLib.prototype.set_config=function(e){Za.isObject(e)&&(Za.extend(this.config,e),e.batch_size&&Za.each(this.request_batchers,function(e){e.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),Ma.DEBUG=Ma.DEBUG||this.get_config("debug"),("autocapture"in e||"record_heatmap_data"in e)&&this.autocapture&&this.autocapture.init())},MixpanelLib.prototype.get_config=function(e){return this.config[e]},MixpanelLib.prototype._run_hook=function(e){var t=(this.config.hooks[e]||IDENTITY_FUNC).apply(this,Da.call(arguments,1));return void 0===t&&(this.report_error(e+" hook did not return a value"),t=null),t},MixpanelLib.prototype.get_property=function(e){return this.persistence.load_prop([e])},MixpanelLib.prototype.get_api_host=function(e){return this.get_config("api_hosts")[e]||this.get_config("api_host")},MixpanelLib.prototype.toString=function(){var e=this.get_config("name");return e!==Bu&&(e=Bu+"."+e),e},MixpanelLib.prototype._event_is_disabled=function(e){return Za.isBlockedUA(qa)||this._flags.disable_all_events||Za.include(this.__disabled_events,e)},MixpanelLib.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&Za.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!Za.cookie.get("mp_optout")||(Za.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},MixpanelLib.prototype._gdpr_update_persistence=function(e){var t;if(e&&e.clear_persistence)t=!0;else{if(!e||!e.enable_persistence)return;t=!1}this.get_config("disable_persistence")||this.persistence.disabled===t||this.persistence.set_disabled(t),t?(this.stop_batch_senders(),this.stop_session_recording()):this._batchers_were_started&&this.start_batch_senders()},MixpanelLib.prototype._gdpr_call_func=function(e,t){return t=Za.extend({track:Za.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},t),Za.localStorage.is_supported()||(t.persistence_type="cookie"),e(this.get_config("token"),{track:t.track,trackEventName:t.track_event_name,trackProperties:t.track_properties,persistenceType:t.persistence_type,persistencePrefix:t.cookie_prefix,cookieDomain:t.cookie_domain,cookieExpiration:t.cookie_expiration,crossSiteCookie:t.cross_site_cookie,crossSubdomainCookie:t.cross_subdomain_cookie,secureCookie:t.secure_cookie,ignoreDnt:t.ignore_dnt})},MixpanelLib.prototype.opt_in_tracking=function(e){e=Za.extend({enable_persistence:!0},e),this._gdpr_call_func(optIn,e),this._gdpr_update_persistence(e)},MixpanelLib.prototype.opt_out_tracking=function(e){(e=Za.extend({clear_persistence:!0,delete_user:!0},e)).delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(optOut,e),this._gdpr_update_persistence(e)},MixpanelLib.prototype.has_opted_in_tracking=function(e){return this._gdpr_call_func(hasOptedIn,e)},MixpanelLib.prototype.has_opted_out_tracking=function(e){return this._gdpr_call_func(hasOptedOut,e)},MixpanelLib.prototype.clear_opt_in_out_tracking=function(e){e=Za.extend({enable_persistence:!0},e),this._gdpr_call_func(clearOptInOut,e),this._gdpr_update_persistence(e)},MixpanelLib.prototype.report_error=function(e,t){Xa.error.apply(Xa.error,arguments);try{t||e instanceof Error||(e=new Error(e)),this.get_config("error_reporter")(e,t)}catch(t){Xa.error(t)}},MixpanelLib.prototype.init=MixpanelLib.prototype.init,MixpanelLib.prototype.reset=MixpanelLib.prototype.reset,MixpanelLib.prototype.disable=MixpanelLib.prototype.disable,MixpanelLib.prototype.time_event=MixpanelLib.prototype.time_event,MixpanelLib.prototype.track=MixpanelLib.prototype.track,MixpanelLib.prototype.track_links=MixpanelLib.prototype.track_links,MixpanelLib.prototype.track_forms=MixpanelLib.prototype.track_forms,MixpanelLib.prototype.track_pageview=MixpanelLib.prototype.track_pageview,MixpanelLib.prototype.register=MixpanelLib.prototype.register,MixpanelLib.prototype.register_once=MixpanelLib.prototype.register_once,MixpanelLib.prototype.unregister=MixpanelLib.prototype.unregister,MixpanelLib.prototype.identify=MixpanelLib.prototype.identify,MixpanelLib.prototype.alias=MixpanelLib.prototype.alias,MixpanelLib.prototype.name_tag=MixpanelLib.prototype.name_tag,MixpanelLib.prototype.set_config=MixpanelLib.prototype.set_config,MixpanelLib.prototype.get_config=MixpanelLib.prototype.get_config,MixpanelLib.prototype.get_api_host=MixpanelLib.prototype.get_api_host,MixpanelLib.prototype.get_property=MixpanelLib.prototype.get_property,MixpanelLib.prototype.get_distinct_id=MixpanelLib.prototype.get_distinct_id,MixpanelLib.prototype.toString=MixpanelLib.prototype.toString,MixpanelLib.prototype.opt_out_tracking=MixpanelLib.prototype.opt_out_tracking,MixpanelLib.prototype.opt_in_tracking=MixpanelLib.prototype.opt_in_tracking,MixpanelLib.prototype.has_opted_out_tracking=MixpanelLib.prototype.has_opted_out_tracking,MixpanelLib.prototype.has_opted_in_tracking=MixpanelLib.prototype.has_opted_in_tracking,MixpanelLib.prototype.clear_opt_in_out_tracking=MixpanelLib.prototype.clear_opt_in_out_tracking,MixpanelLib.prototype.get_group=MixpanelLib.prototype.get_group,MixpanelLib.prototype.set_group=MixpanelLib.prototype.set_group,MixpanelLib.prototype.add_group=MixpanelLib.prototype.add_group,MixpanelLib.prototype.remove_group=MixpanelLib.prototype.remove_group,MixpanelLib.prototype.track_with_groups=MixpanelLib.prototype.track_with_groups,MixpanelLib.prototype.start_batch_senders=MixpanelLib.prototype.start_batch_senders,MixpanelLib.prototype.stop_batch_senders=MixpanelLib.prototype.stop_batch_senders,MixpanelLib.prototype.start_session_recording=MixpanelLib.prototype.start_session_recording,MixpanelLib.prototype.stop_session_recording=MixpanelLib.prototype.stop_session_recording,MixpanelLib.prototype.pause_session_recording=MixpanelLib.prototype.pause_session_recording,MixpanelLib.prototype.resume_session_recording=MixpanelLib.prototype.resume_session_recording,MixpanelLib.prototype.get_session_recording_properties=MixpanelLib.prototype.get_session_recording_properties,MixpanelLib.prototype.get_session_replay_url=MixpanelLib.prototype.get_session_replay_url,MixpanelLib.prototype.get_tab_id=MixpanelLib.prototype.get_tab_id,MixpanelLib.prototype.DEFAULT_API_ROUTES=Vu,MixpanelLib.prototype.__get_recorder=MixpanelLib.prototype.__get_recorder,MixpanelPersistence.prototype.properties=MixpanelPersistence.prototype.properties,MixpanelPersistence.prototype.update_search_keyword=MixpanelPersistence.prototype.update_search_keyword,MixpanelPersistence.prototype.update_referrer_info=MixpanelPersistence.prototype.update_referrer_info,MixpanelPersistence.prototype.get_cross_subdomain=MixpanelPersistence.prototype.get_cross_subdomain,MixpanelPersistence.prototype.clear=MixpanelPersistence.prototype.clear;var Yu={},override_mp_init_func=function(){Uu.init=function(e,t,r){if(r)return Uu[r]||(Uu[r]=Yu[r]=create_mplib(e,t,r),Uu[r]._loaded()),Uu[r];var i=Uu;Yu[Bu]?i=Yu[Bu]:e&&((i=create_mplib(e,t,Bu))._loaded(),Yu[Bu]=i),Uu=i,1===xu&&(n[Bu]=Uu),Za.each(Yu,function(e,t){t!==Bu&&(Uu[t]=e)}),Uu._=Za}};var Zu=function init_as_module(e){return load_extra_bundle=e,xu=0,Uu=new MixpanelLib,override_mp_init_func(),Uu.init(),function(){function dom_loaded_handler(){dom_loaded_handler.done||(dom_loaded_handler.done=!0,Hu=!0,qu=!1,Za.each(Yu,function(e){e._dom_loaded()}))}if($a.addEventListener)"complete"===$a.readyState?dom_loaded_handler():$a.addEventListener("DOMContentLoaded",dom_loaded_handler,!1);else if($a.attachEvent){$a.attachEvent("onreadystatechange",dom_loaded_handler);var e=!1;try{e=null===n.frameElement}catch(e){}$a.documentElement.doScroll&&e&&function do_scroll_check(){try{$a.documentElement.doScroll("left")}catch(e){return void setTimeout(do_scroll_check,1)}dom_loaded_handler()}()}Za.register_event(n,"load",dom_loaded_handler,!0)}(),Uu}(function loadNoop(e,t){t()})}}]);